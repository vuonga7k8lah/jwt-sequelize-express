{"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const express = require(\"express\");\nconst app = express();\nconst path = require(\"path\");\nconst {\n  APIs_V1\n} = require(\"./routes/v1/index\");\nconst {\n  options\n} = require(\"./docs/swaggerDef\");\nconst {\n  StatusCodes\n} = require(\"http-status-codes\");\n\n// Load environment variables.\nrequire(\"dotenv\").config({\n  path: path.join(__dirname, \"..\", \"..\", \".env\")\n});\nconst cors = require(\"cors\");\nconst bodyParser = require(\"body-parser\");\nconst MessageFactory = require(\"./utils/messageFactory\");\n\n// Connect to the database.\nrequire(\"./config/database.js\");\n\n// enable cors\napp.use(cors());\napp.options(\"*\", cors());\n\n// parse json request body\napp.use(express.json());\napp.use(bodyParser.json({\n  type: \"application/*+json\"\n}));\nif (process.env.NODE_ENV === \"production\") {\n  app.use(express.static(path.join(__dirname, \"..\", \"client\")));\n  app.use(\"/image\", express.static(path.join(__dirname, \"..\", \"image\")));\n}\n\n// parse urlencoded request body\napp.use(express.urlencoded({\n  extended: false\n}));\napp.use(bodyParser.text({\n  type: \"text/html\"\n}));\n\n//\napp.use(\"/assets\", express.static(\"assets\"));\napp.use(\"/image\", express.static(path.join(__dirname, \"..\", \"image\")));\n\n//router\napp.use(\"/v1/kcnd\", APIs_V1);\n\n//import document api\n// const swaggerJsdoc = require(\"swagger-jsdoc\");\n// const swaggerUi = require(\"swagger-ui-express\");\n\n// const specs = swaggerJsdoc(options);\n// app.use(\"/api-docs\", swaggerUi.serve, swaggerUi.setup(specs));\n\n//Error Handling\napp.use((err, req, res, next) => {\n  console.error(err.stack);\n  return res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(err.message));\n});\nif (process.env.NODE_ENV === \"production\") {\n  app.get(\"*\", (req, res) => {\n    res.sendFile(path.join(__dirname, \"..\", \"client\", \"index.html\"));\n  });\n}\napp.listen(process.env.PORT, function () {\n  console.log(\"start! express server on port \" + process.env.PORT + \"-----------api---------\" + \"localhost:\" + process.env.PORT + process.env.API_SPACE + process.env.API_VERSION);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImFwcCIsInBhdGgiLCJBUElzX1YxIiwib3B0aW9ucyIsIlN0YXR1c0NvZGVzIiwiY29uZmlnIiwiam9pbiIsIl9fZGlybmFtZSIsImNvcnMiLCJib2R5UGFyc2VyIiwiTWVzc2FnZUZhY3RvcnkiLCJ1c2UiLCJqc29uIiwidHlwZSIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsInN0YXRpYyIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsInRleHQiLCJlcnIiLCJyZXEiLCJyZXMiLCJuZXh0IiwiY29uc29sZSIsImVycm9yIiwic3RhY2siLCJzdGF0dXMiLCJVTkFVVEhPUklaRUQiLCJtZXNzYWdlIiwiZ2V0Iiwic2VuZEZpbGUiLCJsaXN0ZW4iLCJQT1JUIiwibG9nIiwiQVBJX1NQQUNFIiwiQVBJX1ZFUlNJT04iXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy8iLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZShcImV4cHJlc3NcIik7XG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5jb25zdCBwYXRoID0gcmVxdWlyZShcInBhdGhcIik7XG5jb25zdCB7IEFQSXNfVjEgfSA9IHJlcXVpcmUoXCIuL3JvdXRlcy92MS9pbmRleFwiKTtcbmNvbnN0IHsgb3B0aW9ucyB9ID0gcmVxdWlyZShcIi4vZG9jcy9zd2FnZ2VyRGVmXCIpO1xuY29uc3QgeyBTdGF0dXNDb2RlcyB9ID0gcmVxdWlyZShcImh0dHAtc3RhdHVzLWNvZGVzXCIpO1xuXG4vLyBMb2FkIGVudmlyb25tZW50IHZhcmlhYmxlcy5cbnJlcXVpcmUoXCJkb3RlbnZcIikuY29uZmlnKHsgcGF0aDogcGF0aC5qb2luKF9fZGlybmFtZSwgXCIuLlwiLCBcIi4uXCIsIFwiLmVudlwiKSB9KTtcblxuY29uc3QgY29ycyA9IHJlcXVpcmUoXCJjb3JzXCIpO1xuY29uc3QgYm9keVBhcnNlciA9IHJlcXVpcmUoXCJib2R5LXBhcnNlclwiKTtcbmNvbnN0IE1lc3NhZ2VGYWN0b3J5ID0gcmVxdWlyZShcIi4vdXRpbHMvbWVzc2FnZUZhY3RvcnlcIik7XG5cbi8vIENvbm5lY3QgdG8gdGhlIGRhdGFiYXNlLlxucmVxdWlyZShcIi4vY29uZmlnL2RhdGFiYXNlLmpzXCIpO1xuXG4vLyBlbmFibGUgY29yc1xuYXBwLnVzZShjb3JzKCkpO1xuYXBwLm9wdGlvbnMoXCIqXCIsIGNvcnMoKSk7XG5cbi8vIHBhcnNlIGpzb24gcmVxdWVzdCBib2R5XG5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcbmFwcC51c2UoYm9keVBhcnNlci5qc29uKHsgdHlwZTogXCJhcHBsaWNhdGlvbi8qK2pzb25cIiB9KSk7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICBhcHAudXNlKGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsIFwiLi5cIiwgXCJjbGllbnRcIikpKTtcbiAgICBhcHAudXNlKFwiL2ltYWdlXCIsIGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsIFwiLi5cIiwgXCJpbWFnZVwiKSkpO1xufVxuXG4vLyBwYXJzZSB1cmxlbmNvZGVkIHJlcXVlc3QgYm9keVxuYXBwLnVzZShleHByZXNzLnVybGVuY29kZWQoeyBleHRlbmRlZDogZmFsc2UgfSkpO1xuYXBwLnVzZShib2R5UGFyc2VyLnRleHQoeyB0eXBlOiBcInRleHQvaHRtbFwiIH0pKTtcblxuLy9cbmFwcC51c2UoXCIvYXNzZXRzXCIsIGV4cHJlc3Muc3RhdGljKFwiYXNzZXRzXCIpKTtcbmFwcC51c2UoXCIvaW1hZ2VcIiwgZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSwgXCIuLlwiLCBcImltYWdlXCIpKSk7XG5cbi8vcm91dGVyXG5hcHAudXNlKFwiL3YxL2tjbmRcIiwgQVBJc19WMSk7XG5cbi8vaW1wb3J0IGRvY3VtZW50IGFwaVxuLy8gY29uc3Qgc3dhZ2dlckpzZG9jID0gcmVxdWlyZShcInN3YWdnZXItanNkb2NcIik7XG4vLyBjb25zdCBzd2FnZ2VyVWkgPSByZXF1aXJlKFwic3dhZ2dlci11aS1leHByZXNzXCIpO1xuXG4vLyBjb25zdCBzcGVjcyA9IHN3YWdnZXJKc2RvYyhvcHRpb25zKTtcbi8vIGFwcC51c2UoXCIvYXBpLWRvY3NcIiwgc3dhZ2dlclVpLnNlcnZlLCBzd2FnZ2VyVWkuc2V0dXAoc3BlY3MpKTtcblxuLy9FcnJvciBIYW5kbGluZ1xuYXBwLnVzZSgoZXJyLCByZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyLnN0YWNrKTtcbiAgICByZXR1cm4gcmVzXG4gICAgICAgIC5zdGF0dXMoU3RhdHVzQ29kZXMuVU5BVVRIT1JJWkVEKVxuICAgICAgICAuanNvbihNZXNzYWdlRmFjdG9yeS5lcnJvcihlcnIubWVzc2FnZSkpO1xufSk7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICBhcHAuZ2V0KFwiKlwiLCAocmVxLCByZXMpID0+IHtcbiAgICAgICAgcmVzLnNlbmRGaWxlKHBhdGguam9pbihfX2Rpcm5hbWUsIFwiLi5cIiwgXCJjbGllbnRcIiwgXCJpbmRleC5odG1sXCIpKTtcbiAgICB9KTtcbn1cblxuYXBwLmxpc3Rlbihwcm9jZXNzLmVudi5QT1JULCBmdW5jdGlvbiAoKSB7XG4gICAgY29uc29sZS5sb2coXG4gICAgICAgIFwic3RhcnQhIGV4cHJlc3Mgc2VydmVyIG9uIHBvcnQgXCIgK1xuICAgICAgICAgICAgcHJvY2Vzcy5lbnYuUE9SVCArXG4gICAgICAgICAgICBcIi0tLS0tLS0tLS0tYXBpLS0tLS0tLS0tXCIgK1xuICAgICAgICAgICAgXCJsb2NhbGhvc3Q6XCIgK1xuICAgICAgICAgICAgcHJvY2Vzcy5lbnYuUE9SVCArXG4gICAgICAgICAgICBwcm9jZXNzLmVudi5BUElfU1BBQ0UgK1xuICAgICAgICAgICAgcHJvY2Vzcy5lbnYuQVBJX1ZFUlNJT05cbiAgICApO1xufSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNQyxHQUFHLEdBQUdGLE9BQU8sQ0FBQyxDQUFDO0FBQ3JCLE1BQU1HLElBQUksR0FBR0YsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUM1QixNQUFNO0VBQUVHO0FBQVEsQ0FBQyxHQUFHSCxPQUFPLENBQUMsbUJBQW1CLENBQUM7QUFDaEQsTUFBTTtFQUFFSTtBQUFRLENBQUMsR0FBR0osT0FBTyxDQUFDLG1CQUFtQixDQUFDO0FBQ2hELE1BQU07RUFBRUs7QUFBWSxDQUFDLEdBQUdMLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQzs7QUFFcEQ7QUFDQUEsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDTSxNQUFNLENBQUM7RUFBRUosSUFBSSxFQUFFQSxJQUFJLENBQUNLLElBQUksQ0FBQ0MsU0FBUyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsTUFBTTtBQUFFLENBQUMsQ0FBQztBQUU1RSxNQUFNQyxJQUFJLEdBQUdULE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDNUIsTUFBTVUsVUFBVSxHQUFHVixPQUFPLENBQUMsYUFBYSxDQUFDO0FBQ3pDLE1BQU1XLGNBQWMsR0FBR1gsT0FBTyxDQUFDLHdCQUF3QixDQUFDOztBQUV4RDtBQUNBQSxPQUFPLENBQUMsc0JBQXNCLENBQUM7O0FBRS9CO0FBQ0FDLEdBQUcsQ0FBQ1csR0FBRyxDQUFDSCxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ2ZSLEdBQUcsQ0FBQ0csT0FBTyxDQUFDLEdBQUcsRUFBRUssSUFBSSxDQUFDLENBQUMsQ0FBQzs7QUFFeEI7QUFDQVIsR0FBRyxDQUFDVyxHQUFHLENBQUNiLE9BQU8sQ0FBQ2MsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUN2QlosR0FBRyxDQUFDVyxHQUFHLENBQUNGLFVBQVUsQ0FBQ0csSUFBSSxD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","map":{"version":3,"names":["express","require","app","path","APIs_V1","options","StatusCodes","config","join","__dirname","cors","bodyParser","MessageFactory","use","json","type","process","env","NODE_ENV","static","urlencoded","extended","text","err","req","res","next","console","error","stack","status","UNAUTHORIZED","message","get","sendFile","listen","PORT","log","API_SPACE","API_VERSION"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/","sources":["server.js"],"sourcesContent":["const express = require(\"express\");\nconst app = express();\nconst path = require(\"path\");\nconst { APIs_V1 } = require(\"./routes/v1/index\");\nconst { options } = require(\"./docs/swaggerDef\");\nconst { StatusCodes } = require(\"http-status-codes\");\n\n// Load environment variables.\nrequire(\"dotenv\").config({ path: path.join(__dirname, \"..\", \"..\", \".env\") });\n\nconst cors = require(\"cors\");\nconst bodyParser = require(\"body-parser\");\nconst MessageFactory = require(\"./utils/messageFactory\");\n\n// Connect to the database.\nrequire(\"./config/database.js\");\n\n// enable cors\napp.use(cors());\napp.options(\"*\", cors());\n\n// parse json request body\napp.use(express.json());\napp.use(bodyParser.json({ type: \"application/*+json\" }));\n\nif (process.env.NODE_ENV === \"production\") {\n    app.use(express.static(path.join(__dirname, \"..\", \"client\")));\n    app.use(\"/image\", express.static(path.join(__dirname, \"..\", \"image\")));\n}\n\n// parse urlencoded request body\napp.use(express.urlencoded({ extended: false }));\napp.use(bodyParser.text({ type: \"text/html\" }));\n\n//\napp.use(\"/assets\", express.static(\"assets\"));\napp.use(\"/image\", express.static(path.join(__dirname, \"..\", \"image\")));\n\n//router\napp.use(\"/v1/kcnd\", APIs_V1);\n\n//import document api\n// const swaggerJsdoc = require(\"swagger-jsdoc\");\n// const swaggerUi = require(\"swagger-ui-express\");\n\n// const specs = swaggerJsdoc(options);\n// app.use(\"/api-docs\", swaggerUi.serve, swaggerUi.setup(specs));\n\n//Error Handling\napp.use((err, req, res, next) => {\n    console.error(err.stack);\n    return res\n        .status(StatusCodes.UNAUTHORIZED)\n        .json(MessageFactory.error(err.message));\n});\n\nif (process.env.NODE_ENV === \"production\") {\n    app.get(\"*\", (req, res) => {\n        res.sendFile(path.join(__dirname, \"..\", \"client\", \"index.html\"));\n    });\n}\n\napp.listen(process.env.PORT, function () {\n    console.log(\n        \"start! express server on port \" +\n            process.env.PORT +\n            \"-----------api---------\" +\n            \"localhost:\" +\n            process.env.PORT +\n            process.env.API_SPACE +\n            process.env.API_VERSION\n    );\n});\n"],"mappings":"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","ignoreList":[]}},"mtime":1727166556678},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const express = require(\"express\");\nconst userRouter = require(\"./userRoute\");\nconst mediaRoute = require(\"./mediaRoute\");\nconst authRoute = require(\"./auth.route\");\nconst router = express.Router();\nrouter.get(\"/status\", (req, res) => {\n  res.status(200).json({\n    message: \"call api ok\"\n  });\n});\n//auth\nrouter.use(\"/auth\", authRoute);\nrouter.use(userRouter);\nrouter.use(mediaRoute);\n\n// const devRoutes = [\n//     // routes available only in development mode\n//     {\n//         path: \"/api-docs\",\n//         route: docsRoute,\n//     },\n// ];\n\n// /* istanbul ignore next */\n// if (process.env.IS_DEV === \"test\") {\n//     devRoutes.forEach((route) => {\n//         router.use(route.path, route.route);\n//     });\n// }\nmodule.exports = {\n  APIs_V1: router\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInVzZXJSb3V0ZXIiLCJtZWRpYVJvdXRlIiwiYXV0aFJvdXRlIiwicm91dGVyIiwiUm91dGVyIiwiZ2V0IiwicmVxIiwicmVzIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJ1c2UiLCJtb2R1bGUiLCJleHBvcnRzIiwiQVBJc19WMSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL3JvdXRlcy92MS8iLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKFwiZXhwcmVzc1wiKTtcblxuY29uc3QgdXNlclJvdXRlciA9IHJlcXVpcmUoXCIuL3VzZXJSb3V0ZVwiKTtcbmNvbnN0IG1lZGlhUm91dGUgPSByZXF1aXJlKFwiLi9tZWRpYVJvdXRlXCIpO1xuY29uc3QgYXV0aFJvdXRlID0gcmVxdWlyZShcIi4vYXV0aC5yb3V0ZVwiKTtcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbnJvdXRlci5nZXQoXCIvc3RhdHVzXCIsIChyZXEsIHJlcykgPT4ge1xuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogXCJjYWxsIGFwaSBva1wiLFxuICAgIH0pO1xufSk7XG4vL2F1dGhcbnJvdXRlci51c2UoXCIvYXV0aFwiLCBhdXRoUm91dGUpO1xuXG5yb3V0ZXIudXNlKHVzZXJSb3V0ZXIpO1xucm91dGVyLnVzZShtZWRpYVJvdXRlKTtcblxuLy8gY29uc3QgZGV2Um91dGVzID0gW1xuLy8gICAgIC8vIHJvdXRlcyBhdmFpbGFibGUgb25seSBpbiBkZXZlbG9wbWVudCBtb2RlXG4vLyAgICAge1xuLy8gICAgICAgICBwYXRoOiBcIi9hcGktZG9jc1wiLFxuLy8gICAgICAgICByb3V0ZTogZG9jc1JvdXRlLFxuLy8gICAgIH0sXG4vLyBdO1xuXG4vLyAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuLy8gaWYgKHByb2Nlc3MuZW52LklTX0RFViA9PT0gXCJ0ZXN0XCIpIHtcbi8vICAgICBkZXZSb3V0ZXMuZm9yRWFjaCgocm91dGUpID0+IHtcbi8vICAgICAgICAgcm91dGVyLnVzZShyb3V0ZS5wYXRoLCByb3V0ZS5yb3V0ZSk7XG4vLyAgICAgfSk7XG4vLyB9XG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBBUElzX1YxOiByb3V0ZXIsXG59O1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFFbEMsTUFBTUMsVUFBVSxHQUFHRCxPQUFPLENBQUMsYUFBYSxDQUFDO0FBQ3pDLE1BQU1FLFVBQVUsR0FBR0YsT0FBTyxDQUFDLGNBQWMsQ0FBQztBQUMxQyxNQUFNRyxTQUFTLEdBQUdILE9BQU8sQ0FBQyxjQUFjLENBQUM7QUFDekMsTUFBTUksTUFBTSxHQUFHTCxPQUFPLENBQUNNLE1BQU0sQ0FBQyxDQUFDO0FBRS9CRCxNQUFNLENBQUNFLEdBQUcsQ0FBQyxTQUFTLEVBQUUsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDaENBLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7SUFDakJDLE9BQU8sRUFBRTtFQUNiLENBQUMsQ0FBQztBQUNOLENBQUMsQ0FBQztBQUNGO0FBQ0FQLE1BQU0sQ0FBQ1EsR0FBRyxDQUFDLE9BQU8sRUFBRVQsU0FBUyxDQUFDO0FBRTlCQyxNQUFNLENBQUNRLEdBQUcsQ0FBQ1gsVUFBVSxDQUFDO0FBQ3RCRyxNQUFNLENBQUNRLEdBQUcsQ0FBQ1YsVUFBVSxDQUFDOztBQUV0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQVcsTUFBTSxDQUFDQyxPQUFPLEdBQUc7RUFDYkMsT0FBTyxFQUFFWDtBQUNiLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["express","require","userRouter","mediaRoute","authRoute","router","Router","get","req","res","status","json","message","use","module","exports","APIs_V1"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/","sources":["index.js"],"sourcesContent":["const express = require(\"express\");\n\nconst userRouter = require(\"./userRoute\");\nconst mediaRoute = require(\"./mediaRoute\");\nconst authRoute = require(\"./auth.route\");\nconst router = express.Router();\n\nrouter.get(\"/status\", (req, res) => {\n    res.status(200).json({\n        message: \"call api ok\",\n    });\n});\n//auth\nrouter.use(\"/auth\", authRoute);\n\nrouter.use(userRouter);\nrouter.use(mediaRoute);\n\n// const devRoutes = [\n//     // routes available only in development mode\n//     {\n//         path: \"/api-docs\",\n//         route: docsRoute,\n//     },\n// ];\n\n// /* istanbul ignore next */\n// if (process.env.IS_DEV === \"test\") {\n//     devRoutes.forEach((route) => {\n//         router.use(route.path, route.route);\n//     });\n// }\nmodule.exports = {\n    APIs_V1: router,\n};\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAElC,MAAMC,UAAU,GAAGD,OAAO,CAAC,aAAa,CAAC;AACzC,MAAME,UAAU,GAAGF,OAAO,CAAC,cAAc,CAAC;AAC1C,MAAMG,SAAS,GAAGH,OAAO,CAAC,cAAc,CAAC;AACzC,MAAMI,MAAM,GAAGL,OAAO,CAACM,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,GAAG,CAAC,SAAS,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;EAChCA,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;IACjBC,OAAO,EAAE;EACb,CAAC,CAAC;AACN,CAAC,CAAC;AACF;AACAP,MAAM,CAACQ,GAAG,CAAC,OAAO,EAAET,SAAS,CAAC;AAE9BC,MAAM,CAACQ,GAAG,CAACX,UAAU,CAAC;AACtBG,MAAM,CAACQ,GAAG,CAACV,UAAU,CAAC;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACAW,MAAM,CAACC,OAAO,GAAG;EACbC,OAAO,EAAEX;AACb,CAAC","ignoreList":[]}},"mtime":1727229915945},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/userRoute.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const express = require(\"express\");\nconst userController = require(\"../../controllers/userController\");\nconst userValidation = require(\"../../validations/userValidation\");\nconst validate = require(\"../../middlewares/validate\");\nconst upload = require(\"../../config/multer\");\nconst router = express.Router();\n\n//login user\nrouter.route(\"/api/user/login\").post(validate(userValidation.login), userController.login);\n// get user by id\nrouter.route(\"/api/user/:id\").get(validate(userValidation.getUser), userController.getUserById).put(validate(userValidation.getUser), userController.updateUser);\n//create user\nrouter.route(\"/api/user\").post(validate(userValidation.create), userController.createUser);\nrouter.route(\"/api/users\").get(validate(), userController.getAll);\n\n// update image\nrouter.route(\"/api/user/:id/image\").post(validate(), upload.single(\"profile\"), userController.updateImageProfile);\n//wishlist tool\nrouter.route(\"/api/user/wishlist\").post(validate(), userController.createOrDeleteWishlist);\nrouter.route(\"/api/user/:id/wishlist\").get(validate(), userController.getWishlists);\nmodule.exports = router;\n\n/**\n * @swagger\n * tags:\n *   name: Users\n *   description: User management and retrieval\n */\n\n/**\n * @swagger\n * /users:\n *   post:\n *     summary: Create a user\n *     description: Only admins can create other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - name\n *               - email\n *               - password\n *               - role\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *               role:\n *                  type: string\n *                  enum: [user, admin]\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *               role: user\n *     responses:\n *       \"201\":\n *         description: Created\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *\n *   get:\n *     summary: Get all users\n *     description: Only admins can retrieve all users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: query\n *         name: name\n *         schema:\n *           type: string\n *         description: User name\n *       - in: query\n *         name: role\n *         schema:\n *           type: string\n *         description: User role\n *       - in: query\n *         name: sortBy\n *         schema:\n *           type: string\n *         description: sort by query in the form of field:desc/asc (ex. name:asc)\n *       - in: query\n *         name: limit\n *         schema:\n *           type: integer\n *           minimum: 1\n *         default: 10\n *         description: Maximum number of users\n *       - in: query\n *         name: page\n *         schema:\n *           type: integer\n *           minimum: 1\n *           default: 1\n *         description: Page number\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 results:\n *                   type: array\n *                   items:\n *                     $ref: '#/components/schemas/User'\n *                 page:\n *                   type: integer\n *                   example: 1\n *                 limit:\n *                   type: integer\n *                   example: 10\n *                 totalPages:\n *                   type: integer\n *                   example: 1\n *                 totalResults:\n *                   type: integer\n *                   example: 1\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n */\n\n/**\n * @swagger\n * /users/{id}:\n *   get:\n *     summary: Get a user\n *     description: Logged in users can fetch only their own user information. Only admins can fetch other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   patch:\n *     summary: Update a user\n *     description: Logged in users can only update their own information. Only admins can update other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   delete:\n *     summary: Delete a user\n *     description: Logged in users can delete only themselves. Only admins can delete other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: No content\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n */\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInVzZXJDb250cm9sbGVyIiwidXNlclZhbGlkYXRpb24iLCJ2YWxpZGF0ZSIsInVwbG9hZCIsInJvdXRlciIsIlJvdXRlciIsInJvdXRlIiwicG9zdCIsImxvZ2luIiwiZ2V0IiwiZ2V0VXNlciIsImdldFVzZXJCeUlkIiwicHV0IiwidXBkYXRlVXNlciIsImNyZWF0ZSIsImNyZWF0ZVVzZXIiLCJnZXRBbGwiLCJzaW5nbGUiLCJ1cGRhdGVJbWFnZVByb2ZpbGUiLCJjcmVhdGVPckRlbGV0ZVdpc2hsaXN0IiwiZ2V0V2lzaGxpc3RzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL3JvdXRlcy92MS8iLCJzb3VyY2VzIjpbInVzZXJSb3V0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZShcImV4cHJlc3NcIik7XG5jb25zdCB1c2VyQ29udHJvbGxlciA9IHJlcXVpcmUoXCIuLi8uLi9jb250cm9sbGVycy91c2VyQ29udHJvbGxlclwiKTtcbmNvbnN0IHVzZXJWYWxpZGF0aW9uID0gcmVxdWlyZShcIi4uLy4uL3ZhbGlkYXRpb25zL3VzZXJWYWxpZGF0aW9uXCIpO1xuY29uc3QgdmFsaWRhdGUgPSByZXF1aXJlKFwiLi4vLi4vbWlkZGxld2FyZXMvdmFsaWRhdGVcIik7XG5jb25zdCB1cGxvYWQgPSByZXF1aXJlKFwiLi4vLi4vY29uZmlnL211bHRlclwiKTtcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbi8vbG9naW4gdXNlclxucm91dGVyXG4gICAgLnJvdXRlKFwiL2FwaS91c2VyL2xvZ2luXCIpXG4gICAgLnBvc3QodmFsaWRhdGUodXNlclZhbGlkYXRpb24ubG9naW4pLCB1c2VyQ29udHJvbGxlci5sb2dpbik7XG4vLyBnZXQgdXNlciBieSBpZFxucm91dGVyXG4gICAgLnJvdXRlKFwiL2FwaS91c2VyLzppZFwiKVxuICAgIC5nZXQodmFsaWRhdGUodXNlclZhbGlkYXRpb24uZ2V0VXNlciksIHVzZXJDb250cm9sbGVyLmdldFVzZXJCeUlkKVxuICAgIC5wdXQodmFsaWRhdGUodXNlclZhbGlkYXRpb24uZ2V0VXNlciksIHVzZXJDb250cm9sbGVyLnVwZGF0ZVVzZXIpO1xuLy9jcmVhdGUgdXNlclxucm91dGVyXG4gICAgLnJvdXRlKFwiL2FwaS91c2VyXCIpXG4gICAgLnBvc3QodmFsaWRhdGUodXNlclZhbGlkYXRpb24uY3JlYXRlKSwgdXNlckNvbnRyb2xsZXIuY3JlYXRlVXNlcik7XG5yb3V0ZXIucm91dGUoXCIvYXBpL3VzZXJzXCIpLmdldCh2YWxpZGF0ZSgpLCB1c2VyQ29udHJvbGxlci5nZXRBbGwpO1xuXG4vLyB1cGRhdGUgaW1hZ2VcbnJvdXRlclxuICAgIC5yb3V0ZShcIi9hcGkvdXNlci86aWQvaW1hZ2VcIilcbiAgICAucG9zdChcbiAgICAgICAgdmFsaWRhdGUoKSxcbiAgICAgICAgdXBsb2FkLnNpbmdsZShcInByb2ZpbGVcIiksXG4gICAgICAgIHVzZXJDb250cm9sbGVyLnVwZGF0ZUltYWdlUHJvZmlsZVxuICAgICk7XG4vL3dpc2hsaXN0IHRvb2xcbnJvdXRlclxuICAgIC5yb3V0ZShcIi9hcGkvdXNlci93aXNobGlzdFwiKVxuICAgIC5wb3N0KHZhbGlkYXRlKCksIHVzZXJDb250cm9sbGVyLmNyZWF0ZU9yRGVsZXRlV2lzaGxpc3QpO1xucm91dGVyXG4gICAgLnJvdXRlKFwiL2FwaS91c2VyLzppZC93aXNobGlzdFwiKVxuICAgIC5nZXQodmFsaWRhdGUoKSwgdXNlckNvbnRyb2xsZXIuZ2V0V2lzaGxpc3RzKTtcbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xuXG4vKipcbiAqIEBzd2FnZ2VyXG4gKiB0YWdzOlxuICogICBuYW1lOiBVc2Vyc1xuICogICBkZXNjcmlwdGlvbjogVXNlciBtYW5hZ2VtZW50IGFuZCByZXRyaWV2YWxcbiAqL1xuXG4vKipcbiAqIEBzd2FnZ2VyXG4gKiAvdXNlcnM6XG4gKiAgIHBvc3Q6XG4gKiAgICAgc3VtbWFyeTogQ3JlYXRlIGEgdXNlclxuICogICAgIGRlc2NyaXB0aW9uOiBPbmx5IGFkbWlucyBjYW4gY3JlYXRlIG90aGVyIHVzZXJzLlxuICogICAgIHRhZ3M6IFtVc2Vyc11cbiAqICAgICBzZWN1cml0eTpcbiAqICAgICAgIC0gYmVhcmVyQXV0aDogW11cbiAqICAgICByZXF1ZXN0Qm9keTpcbiAqICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gKiAgICAgICBjb250ZW50OlxuICogICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgIHR5cGU6IG9iamVjdFxuICogICAgICAgICAgICAgcmVxdWlyZWQ6XG4gKiAgICAgICAgICAgICAgIC0gbmFtZVxuICogICAgICAgICAgICAgICAtIGVtYWlsXG4gKiAgICAgICAgICAgICAgIC0gcGFzc3dvcmRcbiAqICAgICAgICAgICAgICAgLSByb2xlXG4gKiAgICAgICAgICAgICBwcm9wZXJ0aWVzOlxuICogICAgICAgICAgICAgICBuYW1lOlxuICogICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgICBlbWFpbDpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICBmb3JtYXQ6IGVtYWlsXG4gKiAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG11c3QgYmUgdW5pcXVlXG4gKiAgICAgICAgICAgICAgIHBhc3N3b3JkOlxuICogICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgICAgIGZvcm1hdDogcGFzc3dvcmRcbiAqICAgICAgICAgICAgICAgICBtaW5MZW5ndGg6IDhcbiAqICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogQXQgbGVhc3Qgb25lIG51bWJlciBhbmQgb25lIGxldHRlclxuICogICAgICAgICAgICAgICByb2xlOlxuICogICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICAgZW51bTogW3VzZXIsIGFkbWluXVxuICogICAgICAgICAgICAgZXhhbXBsZTpcbiAqICAgICAgICAgICAgICAgbmFtZTogZmFrZSBuYW1lXG4gKiAgICAgICAgICAgICAgIGVtYWlsOiBmYWtlQGV4YW1wbGUuY29tXG4gKiAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZDFcbiAqICAgICAgICAgICAgICAgcm9sZTogdXNlclxuICogICAgIHJlc3BvbnNlczpcbiAqICAgICAgIFwiMjAxXCI6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBDcmVhdGVkXG4gKiAgICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9Vc2VyJ1xuICogICAgICAgXCI0MDBcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvRHVwbGljYXRlRW1haWwnXG4gKiAgICAgICBcIjQwMVwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9VbmF1dGhvcml6ZWQnXG4gKiAgICAgICBcIjQwM1wiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Gb3JiaWRkZW4nXG4gKlxuICogICBnZXQ6XG4gKiAgICAgc3VtbWFyeTogR2V0IGFsbCB1c2Vyc1xuICogICAgIGRlc2NyaXB0aW9uOiBPbmx5IGFkbWlucyBjYW4gcmV0cmlldmUgYWxsIHVzZXJzLlxuICogICAgIHRhZ3M6IFtVc2Vyc11cbiAqICAgICBzZWN1cml0eTpcbiAqICAgICAgIC0gYmVhcmVyQXV0aDogW11cbiAqICAgICBwYXJhbWV0ZXJzOlxuICogICAgICAgLSBpbjogcXVlcnlcbiAqICAgICAgICAgbmFtZTogbmFtZVxuICogICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBVc2VyIG5hbWVcbiAqICAgICAgIC0gaW46IHF1ZXJ5XG4gKiAgICAgICAgIG5hbWU6IHJvbGVcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICBkZXNjcmlwdGlvbjogVXNlciByb2xlXG4gKiAgICAgICAtIGluOiBxdWVyeVxuICogICAgICAgICBuYW1lOiBzb3J0QnlcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICBkZXNjcmlwdGlvbjogc29ydCBieSBxdWVyeSBpbiB0aGUgZm9ybSBvZiBmaWVsZDpkZXNjL2FzYyAoZXguIG5hbWU6YXNjKVxuICogICAgICAgLSBpbjogcXVlcnlcbiAqICAgICAgICAgbmFtZTogbGltaXRcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IGludGVnZXJcbiAqICAgICAgICAgICBtaW5pbXVtOiAxXG4gKiAgICAgICAgIGRlZmF1bHQ6IDEwXG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBNYXhpbXVtIG51bWJlciBvZiB1c2Vyc1xuICogICAgICAgLSBpbjogcXVlcnlcbiAqICAgICAgICAgbmFtZTogcGFnZVxuICogICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgdHlwZTogaW50ZWdlclxuICogICAgICAgICAgIG1pbmltdW06IDFcbiAqICAgICAgICAgICBkZWZhdWx0OiAxXG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBQYWdlIG51bWJlclxuICogICAgIHJlc3BvbnNlczpcbiAqICAgICAgIFwiMjAwXCI6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBPS1xuICogICAgICAgICBjb250ZW50OlxuICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAgIHR5cGU6IG9iamVjdFxuICogICAgICAgICAgICAgICBwcm9wZXJ0aWVzOlxuICogICAgICAgICAgICAgICAgIHJlc3VsdHM6XG4gKiAgICAgICAgICAgICAgICAgICB0eXBlOiBhcnJheVxuICogICAgICAgICAgICAgICAgICAgaXRlbXM6XG4gKiAgICAgICAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9Vc2VyJ1xuICogICAgICAgICAgICAgICAgIHBhZ2U6XG4gKiAgICAgICAgICAgICAgICAgICB0eXBlOiBpbnRlZ2VyXG4gKiAgICAgICAgICAgICAgICAgICBleGFtcGxlOiAxXG4gKiAgICAgICAgICAgICAgICAgbGltaXQ6XG4gKiAgICAgICAgICAgICAgICAgICB0eXBlOiBpbnRlZ2VyXG4gKiAgICAgICAgICAgICAgICAgICBleGFtcGxlOiAxMFxuICogICAgICAgICAgICAgICAgIHRvdGFsUGFnZXM6XG4gKiAgICAgICAgICAgICAgICAgICB0eXBlOiBpbnRlZ2VyXG4gKiAgICAgICAgICAgICAgICAgICBleGFtcGxlOiAxXG4gKiAgICAgICAgICAgICAgICAgdG90YWxSZXN1bHRzOlxuICogICAgICAgICAgICAgICAgICAgdHlwZTogaW50ZWdlclxuICogICAgICAgICAgICAgICAgICAgZXhhbXBsZTogMVxuICogICAgICAgXCI0MDFcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvVW5hdXRob3JpemVkJ1xuICogICAgICAgXCI0MDNcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvRm9yYmlkZGVuJ1xuICovXG5cbi8qKlxuICogQHN3YWdnZXJcbiAqIC91c2Vycy97aWR9OlxuICogICBnZXQ6XG4gKiAgICAgc3VtbWFyeTogR2V0IGEgdXNlclxuICogICAgIGRlc2NyaXB0aW9uOiBMb2dnZWQgaW4gdXNlcnMgY2FuIGZldGNoIG9ubHkgdGhlaXIgb3duIHVzZXIgaW5mb3JtYXRpb24uIE9ubHkgYWRtaW5zIGNhbiBmZXRjaCBvdGhlciB1c2Vycy5cbiAqICAgICB0YWdzOiBbVXNlcnNdXG4gKiAgICAgc2VjdXJpdHk6XG4gKiAgICAgICAtIGJlYXJlckF1dGg6IFtdXG4gKiAgICAgcGFyYW1ldGVyczpcbiAqICAgICAgIC0gaW46IHBhdGhcbiAqICAgICAgICAgbmFtZTogaWRcbiAqICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICBkZXNjcmlwdGlvbjogVXNlciBpZFxuICogICAgIHJlc3BvbnNlczpcbiAqICAgICAgIFwiMjAwXCI6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBPS1xuICogICAgICAgICBjb250ZW50OlxuICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlcidcbiAqICAgICAgIFwiNDAxXCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL1VuYXV0aG9yaXplZCdcbiAqICAgICAgIFwiNDAzXCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL0ZvcmJpZGRlbidcbiAqICAgICAgIFwiNDA0XCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL05vdEZvdW5kJ1xuICpcbiAqICAgcGF0Y2g6XG4gKiAgICAgc3VtbWFyeTogVXBkYXRlIGEgdXNlclxuICogICAgIGRlc2NyaXB0aW9uOiBMb2dnZWQgaW4gdXNlcnMgY2FuIG9ubHkgdXBkYXRlIHRoZWlyIG93biBpbmZvcm1hdGlvbi4gT25seSBhZG1pbnMgY2FuIHVwZGF0ZSBvdGhlciB1c2Vycy5cbiAqICAgICB0YWdzOiBbVXNlcnNdXG4gKiAgICAgc2VjdXJpdHk6XG4gKiAgICAgICAtIGJlYXJlckF1dGg6IFtdXG4gKiAgICAgcGFyYW1ldGVyczpcbiAqICAgICAgIC0gaW46IHBhdGhcbiAqICAgICAgICAgbmFtZTogaWRcbiAqICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICBkZXNjcmlwdGlvbjogVXNlciBpZFxuICogICAgIHJlcXVlc3RCb2R5OlxuICogICAgICAgcmVxdWlyZWQ6IHRydWVcbiAqICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgdHlwZTogb2JqZWN0XG4gKiAgICAgICAgICAgICBwcm9wZXJ0aWVzOlxuICogICAgICAgICAgICAgICBuYW1lOlxuICogICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgICBlbWFpbDpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICBmb3JtYXQ6IGVtYWlsXG4gKiAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG11c3QgYmUgdW5pcXVlXG4gKiAgICAgICAgICAgICAgIHBhc3N3b3JkOlxuICogICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgICAgIGZvcm1hdDogcGFzc3dvcmRcbiAqICAgICAgICAgICAgICAgICBtaW5MZW5ndGg6IDhcbiAqICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogQXQgbGVhc3Qgb25lIG51bWJlciBhbmQgb25lIGxldHRlclxuICogICAgICAgICAgICAgZXhhbXBsZTpcbiAqICAgICAgICAgICAgICAgbmFtZTogZmFrZSBuYW1lXG4gKiAgICAgICAgICAgICAgIGVtYWlsOiBmYWtlQGV4YW1wbGUuY29tXG4gKiAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZDFcbiAqICAgICByZXNwb25zZXM6XG4gKiAgICAgICBcIjIwMFwiOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogT0tcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL1VzZXInXG4gKiAgICAgICBcIjQwMFwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9EdXBsaWNhdGVFbWFpbCdcbiAqICAgICAgIFwiNDAxXCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL1VuYXV0aG9yaXplZCdcbiAqICAgICAgIFwiNDAzXCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL0ZvcmJpZGRlbidcbiAqICAgICAgIFwiNDA0XCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL05vdEZvdW5kJ1xuICpcbiAqICAgZGVsZXRlOlxuICogICAgIHN1bW1hcnk6IERlbGV0ZSBhIHVzZXJcbiAqICAgICBkZXNjcmlwdGlvbjogTG9nZ2VkIGluIHVzZXJzIGNhbiBkZWxldGUgb25seSB0aGVtc2VsdmVzLiBPbmx5IGFkbWlucyBjYW4gZGVsZXRlIG90aGVyIHVzZXJzLlxuICogICAgIHRhZ3M6IFtVc2Vyc11cbiAqICAgICBzZWN1cml0eTpcbiAqICAgICAgIC0gYmVhcmVyQXV0aDogW11cbiAqICAgICBwYXJhbWV0ZXJzOlxuICogICAgICAgLSBpbjogcGF0aFxuICogICAgICAgICBuYW1lOiBpZFxuICogICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICogICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBVc2VyIGlkXG4gKiAgICAgcmVzcG9uc2VzOlxuICogICAgICAgXCIyMDBcIjpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IE5vIGNvbnRlbnRcbiAqICAgICAgIFwiNDAxXCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL1VuYXV0aG9yaXplZCdcbiAqICAgICAgIFwiNDAzXCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL0ZvcmJpZGRlbidcbiAqICAgICAgIFwiNDA0XCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL05vdEZvdW5kJ1xuICovXG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNQyxjQUFjLEdBQUdELE9BQU8sQ0FBQyxrQ0FBa0MsQ0FBQztBQUNsRSxNQUFNRSxjQUFjLEdBQUdGLE9BQU8sQ0FBQyxrQ0FBa0MsQ0FBQztBQUNsRSxNQUFNRyxRQUFRLEdBQUdILE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQztBQUN0RCxNQUFNSSxNQUFNLEdBQUdKLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQztBQUM3QyxNQUFNSyxNQUFNLEdBQUdOLE9BQU8sQ0FBQ08sTUFBTSxDQUFDLENBQUM7O0FBRS9CO0FBQ0FELE1BQU0sQ0FDREUsS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQ3hCQyxJQUFJLENBQUNMLFFBQVEsQ0FBQ0QsY0FBYyxDQUFDTyxLQUFLLENBQUMsRUFBRVIsY0FBYyxDQUFDUSxLQUFLLENBQUM7QUFDL0Q7QUFDQUosTUFBTSxDQUNERSxLQUFLLENBQUMsZUFBZSxDQUFDLENBQ3RCRyxHQUFHLENBQUNQLFFBQVEsQ0FBQ0QsY0FBYyxDQUFDUyxPQUFPLENBQUMsRUFBRVYsY0FBYyxDQUFDVyxXQUFXLENBQUMsQ0FDakVDLEdBQUcsQ0FBQ1YsUUFBUSxDQUFDRCxjQUFjLENBQUNTLE9BQU8sQ0FBQyxFQUFFVixjQUFjLENBQUNhLFVBQVUsQ0FBQztBQUNyRTtBQUNBVCxNQUFNLENBQ0RFLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FDbEJDLElBQUksQ0FBQ0wsUUFBUSxDQUFDRCxjQUFjLENBQUNhLE1BQU0sQ0FBQyxFQUFFZCxjQUFjLENBQUNlLFVBQVUsQ0FBQztBQUNyRVgsTUFBTSxDQUFDRSxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUNHLEdBQUcsQ0FBQ1AsUUFBUSxDQUFDLENBQUMsRUFBRUYsY0FBYyxDQUFDZ0IsTUFBTSxDQUFDOztBQUVqRTtBQUNBWixNQUFNLENBQ0RFLEtBQUssQ0FBQyxxQkFBcUIsQ0FBQyxDQUM1QkMsSUFBSSxDQUNETCxRQUFRLENBQUMsQ0FBQyxFQUNWQyxNQUFNLENBQUNjLE1BQU0sQ0FBQyxTQUFTLENBQUMsRUFDeEJqQixjQUFjLENBQUNrQixrQkFDbkIsQ0FBQztBQUNMO0FBQ0FkLE1BQU0sQ0FDREUsS0FBSyxDQUFDLG9CQUFvQixDQUFDLENBQzNCQyxJQUFJLENBQUNMLFFBQVEsQ0FBQyxDQUFDLEVBQUVGLGNBQWMsQ0FBQ21CLHNCQUFzQixDQUFDO0FBQzVEZixNQUFNLENBQ0RFLEtBQUssQ0FBQyx3QkFBd0IsQ0FBQyxDQUMvQkcsR0FBRyxDQUFDUCxRQUFRLENBQUMsQ0FBQyxFQUFFRixjQUFjLENBQUNvQixZQUFZLENBQUM7QUFDakRDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHbEIsTUFBTTs7QUFFdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["express","require","userController","userValidation","validate","upload","router","Router","route","post","login","get","getUser","getUserById","put","updateUser","create","createUser","getAll","single","updateImageProfile","createOrDeleteWishlist","getWishlists","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/","sources":["userRoute.js"],"sourcesContent":["const express = require(\"express\");\nconst userController = require(\"../../controllers/userController\");\nconst userValidation = require(\"../../validations/userValidation\");\nconst validate = require(\"../../middlewares/validate\");\nconst upload = require(\"../../config/multer\");\nconst router = express.Router();\n\n//login user\nrouter\n    .route(\"/api/user/login\")\n    .post(validate(userValidation.login), userController.login);\n// get user by id\nrouter\n    .route(\"/api/user/:id\")\n    .get(validate(userValidation.getUser), userController.getUserById)\n    .put(validate(userValidation.getUser), userController.updateUser);\n//create user\nrouter\n    .route(\"/api/user\")\n    .post(validate(userValidation.create), userController.createUser);\nrouter.route(\"/api/users\").get(validate(), userController.getAll);\n\n// update image\nrouter\n    .route(\"/api/user/:id/image\")\n    .post(\n        validate(),\n        upload.single(\"profile\"),\n        userController.updateImageProfile\n    );\n//wishlist tool\nrouter\n    .route(\"/api/user/wishlist\")\n    .post(validate(), userController.createOrDeleteWishlist);\nrouter\n    .route(\"/api/user/:id/wishlist\")\n    .get(validate(), userController.getWishlists);\nmodule.exports = router;\n\n/**\n * @swagger\n * tags:\n *   name: Users\n *   description: User management and retrieval\n */\n\n/**\n * @swagger\n * /users:\n *   post:\n *     summary: Create a user\n *     description: Only admins can create other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - name\n *               - email\n *               - password\n *               - role\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *               role:\n *                  type: string\n *                  enum: [user, admin]\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *               role: user\n *     responses:\n *       \"201\":\n *         description: Created\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *\n *   get:\n *     summary: Get all users\n *     description: Only admins can retrieve all users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: query\n *         name: name\n *         schema:\n *           type: string\n *         description: User name\n *       - in: query\n *         name: role\n *         schema:\n *           type: string\n *         description: User role\n *       - in: query\n *         name: sortBy\n *         schema:\n *           type: string\n *         description: sort by query in the form of field:desc/asc (ex. name:asc)\n *       - in: query\n *         name: limit\n *         schema:\n *           type: integer\n *           minimum: 1\n *         default: 10\n *         description: Maximum number of users\n *       - in: query\n *         name: page\n *         schema:\n *           type: integer\n *           minimum: 1\n *           default: 1\n *         description: Page number\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 results:\n *                   type: array\n *                   items:\n *                     $ref: '#/components/schemas/User'\n *                 page:\n *                   type: integer\n *                   example: 1\n *                 limit:\n *                   type: integer\n *                   example: 10\n *                 totalPages:\n *                   type: integer\n *                   example: 1\n *                 totalResults:\n *                   type: integer\n *                   example: 1\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n */\n\n/**\n * @swagger\n * /users/{id}:\n *   get:\n *     summary: Get a user\n *     description: Logged in users can fetch only their own user information. Only admins can fetch other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   patch:\n *     summary: Update a user\n *     description: Logged in users can only update their own information. Only admins can update other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   delete:\n *     summary: Delete a user\n *     description: Logged in users can delete only themselves. Only admins can delete other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: No content\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n */\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,cAAc,GAAGD,OAAO,CAAC,kCAAkC,CAAC;AAClE,MAAME,cAAc,GAAGF,OAAO,CAAC,kCAAkC,CAAC;AAClE,MAAMG,QAAQ,GAAGH,OAAO,CAAC,4BAA4B,CAAC;AACtD,MAAMI,MAAM,GAAGJ,OAAO,CAAC,qBAAqB,CAAC;AAC7C,MAAMK,MAAM,GAAGN,OAAO,CAACO,MAAM,CAAC,CAAC;;AAE/B;AACAD,MAAM,CACDE,KAAK,CAAC,iBAAiB,CAAC,CACxBC,IAAI,CAACL,QAAQ,CAACD,cAAc,CAACO,KAAK,CAAC,EAAER,cAAc,CAACQ,KAAK,CAAC;AAC/D;AACAJ,MAAM,CACDE,KAAK,CAAC,eAAe,CAAC,CACtBG,GAAG,CAACP,QAAQ,CAACD,cAAc,CAACS,OAAO,CAAC,EAAEV,cAAc,CAACW,WAAW,CAAC,CACjEC,GAAG,CAACV,QAAQ,CAACD,cAAc,CAACS,OAAO,CAAC,EAAEV,cAAc,CAACa,UAAU,CAAC;AACrE;AACAT,MAAM,CACDE,KAAK,CAAC,WAAW,CAAC,CAClBC,IAAI,CAACL,QAAQ,CAACD,cAAc,CAACa,MAAM,CAAC,EAAEd,cAAc,CAACe,UAAU,CAAC;AACrEX,MAAM,CAACE,KAAK,CAAC,YAAY,CAAC,CAACG,GAAG,CAACP,QAAQ,CAAC,CAAC,EAAEF,cAAc,CAACgB,MAAM,CAAC;;AAEjE;AACAZ,MAAM,CACDE,KAAK,CAAC,qBAAqB,CAAC,CAC5BC,IAAI,CACDL,QAAQ,CAAC,CAAC,EACVC,MAAM,CAACc,MAAM,CAAC,SAAS,CAAC,EACxBjB,cAAc,CAACkB,kBACnB,CAAC;AACL;AACAd,MAAM,CACDE,KAAK,CAAC,oBAAoB,CAAC,CAC3BC,IAAI,CAACL,QAAQ,CAAC,CAAC,EAAEF,cAAc,CAACmB,sBAAsB,CAAC;AAC5Df,MAAM,CACDE,KAAK,CAAC,wBAAwB,CAAC,CAC/BG,GAAG,CAACP,QAAQ,CAAC,CAAC,EAAEF,cAAc,CAACoB,YAAY,CAAC;AACjDC,MAAM,CAACC,OAAO,GAAGlB,MAAM;;AAEvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]}},"mtime":1722589653767},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/controllers/userController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const {\n  StatusCodes\n} = require(\"http-status-codes\");\nconst UserService = require(\"../services/userService\");\nrequire(\"dotenv\").config();\n//import message factory\nconst MessageFactory = require(\"../utils/messageFactory\");\nconst RemoveValueNullObject = require(\"../utils/removeValueNullObject\");\nconst WishlistTypeEnum = require(\"../utils/enums/wishlistTypeEnum\");\nexports.getAll = async (req, res) => {\n  const paged = parseInt(req.query.paged) || 1;\n  const limit = parseInt(req.query.limit) || 10;\n  const s = req.query.s;\n  const data = await UserService.getAll({\n    paged,\n    limit,\n    s\n  });\n  if (data === null) {\n    res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.success({}, \"The data post empty.\"));\n  } else {\n    res.status(StatusCodes.OK).json(MessageFactory.success(data, \"Get all post success!\"));\n  }\n};\nexports.getWishlists = async (req, res, next) => {\n  try {\n    const user_id = req.params.id;\n    const paged = parseInt(req.query.paged) || 1;\n    const limit = parseInt(req.query.limit) || 10;\n    const data = await wishlistService.getWishlists(paged, limit, user_id);\n    if (data === null) {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"Get all wishlist tool error\"));\n    } else {\n      res.status(StatusCodes.OK).json(MessageFactory.success(data, \"Get all wishlist tool success!\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.createOrDeleteWishlist = async (req, res, next) => {\n  try {\n    const {\n      foreign_key_id,\n      user_id,\n      type\n    } = req.body;\n    if (!Object.values(WishlistTypeEnum).includes(type)) {\n      throw new Error(\"The type wishlist malformed\");\n    }\n    if (!user_id) {\n      throw new Error(\"The user id is required\");\n    }\n    const data = await wishlistService.createOrDeleteWishlist(foreign_key_id, user_id, type);\n    if (data === null) {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"Create or delete wishlist tool error\"));\n    } else {\n      res.status(StatusCodes.OK).json(MessageFactory.success(data, \"Create or delete wishlist tool success!\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.login = async (req, res, next) => {\n  try {\n    const {\n      email,\n      password,\n      social\n    } = req.body;\n    if (social === 0) {\n      const user = await UserService.login(email, social, password);\n      if (user === null) {\n        res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"Please check email or password\"));\n      } else {\n        res.status(StatusCodes.OK).json(MessageFactory.success(user, \"Login success!\"));\n      }\n    } else {\n      const user = await UserService.login(email, social);\n      if (user === null) {\n        res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"no user\"));\n      } else {\n        res.status(StatusCodes.OK).json(MessageFactory.success(user, \"Login success!\"));\n      }\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.getUserById = async (req, res, next) => {\n  try {\n    const id = req.params.id;\n    const user = await UserService.getUser(id);\n    if (user) {\n      res.status(StatusCodes.OK).json(MessageFactory.success(user, \"Get User success!\"));\n    } else {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"The User not exist\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.updateUser = async (req, res, next) => {\n  try {\n    let id = req.params.id;\n    const {\n      name,\n      email,\n      profile,\n      types,\n      subjects,\n      school,\n      teacher_type\n    } = req.body;\n    const user = await UserService.updateUser(id, name, email, profile, types, subjects, school, teacher_type);\n    if (user) {\n      res.status(StatusCodes.OK).json(MessageFactory.success(user, \"Update User success!\"));\n    } else {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"The User not exist\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.createUser = async (req, res, next) => {\n  try {\n    let {\n      name,\n      email,\n      social,\n      password,\n      profile,\n      types,\n      school,\n      subjects,\n      picture\n    } = req.body;\n\n    //check email\n    let isEmailExit = await UserService.checkEmailExit(email);\n    if (isEmailExit && social == 0) {\n      return res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"The email exist!\"));\n    }\n    if (social) {\n      profile = picture;\n      password = email;\n    }\n    if (isEmailExit && social == 1) {\n      let data = await UserService.getUserWithEmail(email);\n      return res.status(StatusCodes.OK).json(MessageFactory.success(RemoveValueNullObject(data), \"Login success!\"));\n    }\n    const user = await UserService.createUser(name, email, social, password, profile, types, school, subjects);\n    if (user) {\n      return res.status(StatusCodes.OK).json(MessageFactory.success(user, \"Create User success!\"));\n    } else {\n      return res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"The User not exist\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.updateImageProfile = async (req, res, next) => {\n  try {\n    const userId = req.params.id;\n    const {\n      name,\n      email,\n      types,\n      subjects,\n      school,\n      teacher_type\n    } = req.body;\n    if (!req.file) {\n      throw new Error(\"The error upload profile Image file does not exist\");\n    }\n    const fileImage = req.file.path;\n    //url image\n    let profile = process.env.BASIC_URL + \"/\" + fileImage;\n    const user = await UserService.updateUser(userId, name, email, profile, types, subjects, school, teacher_type);\n    if (user) {\n      return res.status(StatusCodes.OK).json(MessageFactory.success(user, \"Create User success!\"));\n    } else {\n      return res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"The User not exist\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTdGF0dXNDb2RlcyIsInJlcXVpcmUiLCJVc2VyU2VydmljZSIsImNvbmZpZyIsIk1lc3NhZ2VGYWN0b3J5IiwiUmVtb3ZlVmFsdWVOdWxsT2JqZWN0IiwiV2lzaGxpc3RUeXBlRW51bSIsImV4cG9ydHMiLCJnZXRBbGwiLCJyZXEiLCJyZXMiLCJwYWdlZCIsInBhcnNlSW50IiwicXVlcnkiLCJsaW1pdCIsInMiLCJkYXRhIiwic3RhdHVzIiwiVU5BVVRIT1JJWkVEIiwianNvbiIsInN1Y2Nlc3MiLCJPSyIsImdldFdpc2hsaXN0cyIsIm5leHQiLCJ1c2VyX2lkIiwicGFyYW1zIiwiaWQiLCJ3aXNobGlzdFNlcnZpY2UiLCJlcnJvciIsImNyZWF0ZU9yRGVsZXRlV2lzaGxpc3QiLCJmb3JlaWduX2tleV9pZCIsInR5cGUiLCJib2R5IiwiT2JqZWN0IiwidmFsdWVzIiwiaW5jbHVkZXMiLCJFcnJvciIsImxvZ2luIiwiZW1haWwiLCJwYXNzd29yZCIsInNvY2lhbCIsInVzZXIiLCJnZXRVc2VyQnlJZCIsImdldFVzZXIiLCJ1cGRhdGVVc2VyIiwibmFtZSIsInByb2ZpbGUiLCJ0eXBlcyIsInN1YmplY3RzIiwic2Nob29sIiwidGVhY2hlcl90eXBlIiwiY3JlYXRlVXNlciIsInBpY3R1cmUiLCJpc0VtYWlsRXhpdCIsImNoZWNrRW1haWxFeGl0IiwiZ2V0VXNlcldpdGhFbWFpbCIsInVwZGF0ZUltYWdlUHJvZmlsZSIsInVzZXJJZCIsImZpbGUiLCJmaWxlSW1hZ2UiLCJwYXRoIiwicHJvY2VzcyIsImVudiIsIkJBU0lDX1VSTCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsidXNlckNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBTdGF0dXNDb2RlcyB9ID0gcmVxdWlyZShcImh0dHAtc3RhdHVzLWNvZGVzXCIpO1xuY29uc3QgVXNlclNlcnZpY2UgPSByZXF1aXJlKFwiLi4vc2VydmljZXMvdXNlclNlcnZpY2VcIik7XG5yZXF1aXJlKFwiZG90ZW52XCIpLmNvbmZpZygpO1xuLy9pbXBvcnQgbWVzc2FnZSBmYWN0b3J5XG5jb25zdCBNZXNzYWdlRmFjdG9yeSA9IHJlcXVpcmUoXCIuLi91dGlscy9tZXNzYWdlRmFjdG9yeVwiKTtcbmNvbnN0IFJlbW92ZVZhbHVlTnVsbE9iamVjdCA9IHJlcXVpcmUoXCIuLi91dGlscy9yZW1vdmVWYWx1ZU51bGxPYmplY3RcIik7XG5jb25zdCBXaXNobGlzdFR5cGVFbnVtID0gcmVxdWlyZShcIi4uL3V0aWxzL2VudW1zL3dpc2hsaXN0VHlwZUVudW1cIik7XG5cbmV4cG9ydHMuZ2V0QWxsID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgcGFnZWQgPSBwYXJzZUludChyZXEucXVlcnkucGFnZWQpIHx8IDE7XG4gICAgY29uc3QgbGltaXQgPSBwYXJzZUludChyZXEucXVlcnkubGltaXQpIHx8IDEwO1xuICAgIGNvbnN0IHMgPSByZXEucXVlcnkucztcblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBVc2VyU2VydmljZS5nZXRBbGwoeyBwYWdlZCwgbGltaXQsIHMgfSk7XG5cbiAgICBpZiAoZGF0YSA9PT0gbnVsbCkge1xuICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLlVOQVVUSE9SSVpFRCkuanNvbihcbiAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LnN1Y2Nlc3Moe30sIFwiVGhlIGRhdGEgcG9zdCBlbXB0eS5cIilcbiAgICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLk9LKS5qc29uKFxuICAgICAgICAgICAgTWVzc2FnZUZhY3Rvcnkuc3VjY2VzcyhkYXRhLCBcIkdldCBhbGwgcG9zdCBzdWNjZXNzIVwiKVxuICAgICAgICApO1xuICAgIH1cbn07XG5cbmV4cG9ydHMuZ2V0V2lzaGxpc3RzID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXNlcl9pZCA9IHJlcS5wYXJhbXMuaWQ7XG4gICAgICAgIGNvbnN0IHBhZ2VkID0gcGFyc2VJbnQocmVxLnF1ZXJ5LnBhZ2VkKSB8fCAxO1xuICAgICAgICBjb25zdCBsaW1pdCA9IHBhcnNlSW50KHJlcS5xdWVyeS5saW1pdCkgfHwgMTA7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB3aXNobGlzdFNlcnZpY2UuZ2V0V2lzaGxpc3RzKHBhZ2VkLCBsaW1pdCwgdXNlcl9pZCk7XG5cbiAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoU3RhdHVzQ29kZXMuVU5BVVRIT1JJWkVEKS5qc29uKFxuICAgICAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LmVycm9yKFwiR2V0IGFsbCB3aXNobGlzdCB0b29sIGVycm9yXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5PSykuanNvbihcbiAgICAgICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5zdWNjZXNzKGRhdGEsIFwiR2V0IGFsbCB3aXNobGlzdCB0b29sIHN1Y2Nlc3MhXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbmV4dChlcnJvcik7XG4gICAgfVxufTtcbmV4cG9ydHMuY3JlYXRlT3JEZWxldGVXaXNobGlzdCA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgZm9yZWlnbl9rZXlfaWQsIHVzZXJfaWQsIHR5cGUgfSA9IHJlcS5ib2R5O1xuXG4gICAgICAgIGlmICghT2JqZWN0LnZhbHVlcyhXaXNobGlzdFR5cGVFbnVtKS5pbmNsdWRlcyh0eXBlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHR5cGUgd2lzaGxpc3QgbWFsZm9ybWVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdXNlcl9pZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHVzZXIgaWQgaXMgcmVxdWlyZWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgd2lzaGxpc3RTZXJ2aWNlLmNyZWF0ZU9yRGVsZXRlV2lzaGxpc3QoXG4gICAgICAgICAgICBmb3JlaWduX2tleV9pZCxcbiAgICAgICAgICAgIHVzZXJfaWQsXG4gICAgICAgICAgICB0eXBlXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoU3RhdHVzQ29kZXMuVU5BVVRIT1JJWkVEKS5qc29uKFxuICAgICAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LmVycm9yKFwiQ3JlYXRlIG9yIGRlbGV0ZSB3aXNobGlzdCB0b29sIGVycm9yXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5PSykuanNvbihcbiAgICAgICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5zdWNjZXNzKFxuICAgICAgICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgICAgICAgICBcIkNyZWF0ZSBvciBkZWxldGUgd2lzaGxpc3QgdG9vbCBzdWNjZXNzIVwiXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbn07XG5leHBvcnRzLmxvZ2luID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQsIHNvY2lhbCB9ID0gcmVxLmJvZHk7XG4gICAgICAgIGlmIChzb2NpYWwgPT09IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyU2VydmljZS5sb2dpbihlbWFpbCwgc29jaWFsLCBwYXNzd29yZCk7XG5cbiAgICAgICAgICAgIGlmICh1c2VyID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5VTkFVVEhPUklaRUQpLmpzb24oXG4gICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LmVycm9yKFwiUGxlYXNlIGNoZWNrIGVtYWlsIG9yIHBhc3N3b3JkXCIpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5PSykuanNvbihcbiAgICAgICAgICAgICAgICAgICAgTWVzc2FnZUZhY3Rvcnkuc3VjY2Vzcyh1c2VyLCBcIkxvZ2luIHN1Y2Nlc3MhXCIpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyU2VydmljZS5sb2dpbihlbWFpbCwgc29jaWFsKTtcblxuICAgICAgICAgICAgaWYgKHVzZXIgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLlVOQVVUSE9SSVpFRCkuanNvbihcbiAgICAgICAgICAgICAgICAgICAgTWVzc2FnZUZhY3RvcnkuZXJyb3IoXCJubyB1c2VyXCIpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5PSykuanNvbihcbiAgICAgICAgICAgICAgICAgICAgTWVzc2FnZUZhY3Rvcnkuc3VjY2Vzcyh1c2VyLCBcIkxvZ2luIHN1Y2Nlc3MhXCIpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbn07XG5cbmV4cG9ydHMuZ2V0VXNlckJ5SWQgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBpZCA9IHJlcS5wYXJhbXMuaWQ7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyU2VydmljZS5nZXRVc2VyKGlkKTtcbiAgICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoU3RhdHVzQ29kZXMuT0spLmpzb24oXG4gICAgICAgICAgICAgICAgTWVzc2FnZUZhY3Rvcnkuc3VjY2Vzcyh1c2VyLCBcIkdldCBVc2VyIHN1Y2Nlc3MhXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5VTkFVVEhPUklaRUQpLmpzb24oXG4gICAgICAgICAgICAgICAgTWVzc2FnZUZhY3RvcnkuZXJyb3IoXCJUaGUgVXNlciBub3QgZXhpc3RcIilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBuZXh0KGVycm9yKTtcbiAgICB9XG59O1xuXG5leHBvcnRzLnVwZGF0ZVVzZXIgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBsZXQgaWQgPSByZXEucGFyYW1zLmlkO1xuICAgICAgICBjb25zdCB7IG5hbWUsIGVtYWlsLCBwcm9maWxlLCB0eXBlcywgc3ViamVjdHMsIHNjaG9vbCwgdGVhY2hlcl90eXBlIH0gPVxuICAgICAgICAgICAgcmVxLmJvZHk7XG5cbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJTZXJ2aWNlLnVwZGF0ZVVzZXIoXG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICAgIHByb2ZpbGUsXG4gICAgICAgICAgICB0eXBlcyxcbiAgICAgICAgICAgIHN1YmplY3RzLFxuICAgICAgICAgICAgc2Nob29sLFxuICAgICAgICAgICAgdGVhY2hlcl90eXBlXG4gICAgICAgICk7XG4gICAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLk9LKS5qc29uKFxuICAgICAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LnN1Y2Nlc3ModXNlciwgXCJVcGRhdGUgVXNlciBzdWNjZXNzIVwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoU3RhdHVzQ29kZXMuVU5BVVRIT1JJWkVEKS5qc29uKFxuICAgICAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LmVycm9yKFwiVGhlIFVzZXIgbm90IGV4aXN0XCIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbmV4dChlcnJvcik7XG4gICAgfVxufTtcblxuZXhwb3J0cy5jcmVhdGVVc2VyID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgbGV0IHtcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICAgIHNvY2lhbCxcbiAgICAgICAgICAgIHBhc3N3b3JkLFxuICAgICAgICAgICAgcHJvZmlsZSxcbiAgICAgICAgICAgIHR5cGVzLFxuICAgICAgICAgICAgc2Nob29sLFxuICAgICAgICAgICAgc3ViamVjdHMsXG4gICAgICAgICAgICBwaWN0dXJlLFxuICAgICAgICB9ID0gcmVxLmJvZHk7XG5cbiAgICAgICAgLy9jaGVjayBlbWFpbFxuICAgICAgICBsZXQgaXNFbWFpbEV4aXQgPSBhd2FpdCBVc2VyU2VydmljZS5jaGVja0VtYWlsRXhpdChlbWFpbCk7XG4gICAgICAgIGlmIChpc0VtYWlsRXhpdCAmJiBzb2NpYWwgPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAgICAgICAgIC5zdGF0dXMoU3RhdHVzQ29kZXMuVU5BVVRIT1JJWkVEKVxuICAgICAgICAgICAgICAgIC5qc29uKE1lc3NhZ2VGYWN0b3J5LmVycm9yKFwiVGhlIGVtYWlsIGV4aXN0IVwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNvY2lhbCkge1xuICAgICAgICAgICAgcHJvZmlsZSA9IHBpY3R1cmU7XG4gICAgICAgICAgICBwYXNzd29yZCA9IGVtYWlsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0VtYWlsRXhpdCAmJiBzb2NpYWwgPT0gMSkge1xuICAgICAgICAgICAgbGV0IGRhdGEgPSBhd2FpdCBVc2VyU2VydmljZS5nZXRVc2VyV2l0aEVtYWlsKGVtYWlsKTtcbiAgICAgICAgICAgIHJldHVybiByZXNcbiAgICAgICAgICAgICAgICAuc3RhdHVzKFN0YXR1c0NvZGVzLk9LKVxuICAgICAgICAgICAgICAgIC5qc29uKFxuICAgICAgICAgICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5zdWNjZXNzKFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVtb3ZlVmFsdWVOdWxsT2JqZWN0KGRhdGEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJMb2dpbiBzdWNjZXNzIVwiXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJTZXJ2aWNlLmNyZWF0ZVVzZXIoXG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgZW1haWwsXG4gICAgICAgICAgICBzb2NpYWwsXG4gICAgICAgICAgICBwYXNzd29yZCxcbiAgICAgICAgICAgIHByb2ZpbGUsXG4gICAgICAgICAgICB0eXBlcyxcbiAgICAgICAgICAgIHNjaG9vbCxcbiAgICAgICAgICAgIHN1YmplY3RzXG4gICAgICAgICk7XG4gICAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzXG4gICAgICAgICAgICAgICAgLnN0YXR1cyhTdGF0dXNDb2Rlcy5PSylcbiAgICAgICAgICAgICAgICAuanNvbihNZXNzYWdlRmFjdG9yeS5zdWNjZXNzKHVzZXIsIFwiQ3JlYXRlIFVzZXIgc3VjY2VzcyFcIikpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAgICAgICAgIC5zdGF0dXMoU3RhdHVzQ29kZXMuVU5BVVRIT1JJWkVEKVxuICAgICAgICAgICAgICAgIC5qc29uKE1lc3NhZ2VGYWN0b3J5LmVycm9yKFwiVGhlIFVzZXIgbm90IGV4aXN0XCIpKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbn07XG5cbmV4cG9ydHMudXBkYXRlSW1hZ2VQcm9maWxlID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXNlcklkID0gcmVxLnBhcmFtcy5pZDtcbiAgICAgICAgY29uc3QgeyBuYW1lLCBlbWFpbCwgdHlwZXMsIHN1YmplY3RzLCBzY2hvb2wsIHRlYWNoZXJfdHlwZSB9ID0gcmVxLmJvZHk7XG5cbiAgICAgICAgaWYgKCFyZXEuZmlsZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgIFwiVGhlIGVycm9yIHVwbG9hZCBwcm9maWxlIEltYWdlIGZpbGUgZG9lcyBub3QgZXhpc3RcIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZpbGVJbWFnZSA9IHJlcS5maWxlLnBhdGg7XG4gICAgICAgIC8vdXJsIGltYWdlXG4gICAgICAgIGxldCBwcm9maWxlID0gcHJvY2Vzcy5lbnYuQkFTSUNfVVJMICsgXCIvXCIgKyBmaWxlSW1hZ2U7XG5cbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJTZXJ2aWNlLnVwZGF0ZVVzZXIoXG4gICAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgZW1haWwsXG4gICAgICAgICAgICBwcm9maWxlLFxuICAgICAgICAgICAgdHlwZXMsXG4gICAgICAgICAgICBzdWJqZWN0cyxcbiAgICAgICAgICAgIHNjaG9vbCxcbiAgICAgICAgICAgIHRlYWNoZXJfdHlwZVxuICAgICAgICApO1xuICAgICAgICBpZiAodXNlcikge1xuICAgICAgICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAgICAgICAgIC5zdGF0dXMoU3RhdHVzQ29kZXMuT0spXG4gICAgICAgICAgICAgICAgLmpzb24oTWVzc2FnZUZhY3Rvcnkuc3VjY2Vzcyh1c2VyLCBcIkNyZWF0ZSBVc2VyIHN1Y2Nlc3MhXCIpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByZXNcbiAgICAgICAgICAgICAgICAuc3RhdHVzKFN0YXR1c0NvZGVzLlVOQVVUSE9SSVpFRClcbiAgICAgICAgICAgICAgICAuanNvbihNZXNzYWdlRmFjdG9yeS5lcnJvcihcIlRoZSBVc2VyIG5vdCBleGlzdFwiKSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBuZXh0KGVycm9yKTtcbiAgICB9XG59O1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNO0VBQUVBO0FBQVksQ0FBQyxHQUFHQyxPQUFPLENBQUMsbUJBQW1CLENBQUM7QUFDcEQsTUFBTUMsV0FBVyxHQUFHRCxPQUFPLENBQUMseUJBQXlCLENBQUM7QUFDdERBLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQ0UsTUFBTSxDQUFDLENBQUM7QUFDMUI7QUFDQSxNQUFNQyxjQUFjLEdBQUdILE9BQU8sQ0FBQyx5QkFBeUIsQ0FBQztBQUN6RCxNQUFNSSxxQkFBcUIsR0FBR0osT0FBTyxDQUFDLGdDQUFnQyxDQUFDO0FBQ3ZFLE1BQU1LLGdCQUFnQixH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","map":{"version":3,"names":["StatusCodes","require","UserService","config","MessageFactory","RemoveValueNullObject","WishlistTypeEnum","exports","getAll","req","res","paged","parseInt","query","limit","s","data","status","UNAUTHORIZED","json","success","OK","getWishlists","next","user_id","params","id","wishlistService","error","createOrDeleteWishlist","foreign_key_id","type","body","Object","values","includes","Error","login","email","password","social","user","getUserById","getUser","updateUser","name","profile","types","subjects","school","teacher_type","createUser","picture","isEmailExit","checkEmailExit","getUserWithEmail","updateImageProfile","userId","file","fileImage","path","process","env","BASIC_URL"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/controllers/","sources":["userController.js"],"sourcesContent":["const { StatusCodes } = require(\"http-status-codes\");\nconst UserService = require(\"../services/userService\");\nrequire(\"dotenv\").config();\n//import message factory\nconst MessageFactory = require(\"../utils/messageFactory\");\nconst RemoveValueNullObject = require(\"../utils/removeValueNullObject\");\nconst WishlistTypeEnum = require(\"../utils/enums/wishlistTypeEnum\");\n\nexports.getAll = async (req, res) => {\n    const paged = parseInt(req.query.paged) || 1;\n    const limit = parseInt(req.query.limit) || 10;\n    const s = req.query.s;\n\n    const data = await UserService.getAll({ paged, limit, s });\n\n    if (data === null) {\n        res.status(StatusCodes.UNAUTHORIZED).json(\n            MessageFactory.success({}, \"The data post empty.\")\n        );\n    } else {\n        res.status(StatusCodes.OK).json(\n            MessageFactory.success(data, \"Get all post success!\")\n        );\n    }\n};\n\nexports.getWishlists = async (req, res, next) => {\n    try {\n        const user_id = req.params.id;\n        const paged = parseInt(req.query.paged) || 1;\n        const limit = parseInt(req.query.limit) || 10;\n        const data = await wishlistService.getWishlists(paged, limit, user_id);\n\n        if (data === null) {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.error(\"Get all wishlist tool error\")\n            );\n        } else {\n            res.status(StatusCodes.OK).json(\n                MessageFactory.success(data, \"Get all wishlist tool success!\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\nexports.createOrDeleteWishlist = async (req, res, next) => {\n    try {\n        const { foreign_key_id, user_id, type } = req.body;\n\n        if (!Object.values(WishlistTypeEnum).includes(type)) {\n            throw new Error(\"The type wishlist malformed\");\n        }\n        if (!user_id) {\n            throw new Error(\"The user id is required\");\n        }\n\n        const data = await wishlistService.createOrDeleteWishlist(\n            foreign_key_id,\n            user_id,\n            type\n        );\n\n        if (data === null) {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.error(\"Create or delete wishlist tool error\")\n            );\n        } else {\n            res.status(StatusCodes.OK).json(\n                MessageFactory.success(\n                    data,\n                    \"Create or delete wishlist tool success!\"\n                )\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\nexports.login = async (req, res, next) => {\n    try {\n        const { email, password, social } = req.body;\n        if (social === 0) {\n            const user = await UserService.login(email, social, password);\n\n            if (user === null) {\n                res.status(StatusCodes.UNAUTHORIZED).json(\n                    MessageFactory.error(\"Please check email or password\")\n                );\n            } else {\n                res.status(StatusCodes.OK).json(\n                    MessageFactory.success(user, \"Login success!\")\n                );\n            }\n        } else {\n            const user = await UserService.login(email, social);\n\n            if (user === null) {\n                res.status(StatusCodes.UNAUTHORIZED).json(\n                    MessageFactory.error(\"no user\")\n                );\n            } else {\n                res.status(StatusCodes.OK).json(\n                    MessageFactory.success(user, \"Login success!\")\n                );\n            }\n        }\n    } catch (error) {\n        next(error);\n    }\n};\n\nexports.getUserById = async (req, res, next) => {\n    try {\n        const id = req.params.id;\n        const user = await UserService.getUser(id);\n        if (user) {\n            res.status(StatusCodes.OK).json(\n                MessageFactory.success(user, \"Get User success!\")\n            );\n        } else {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.error(\"The User not exist\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\n\nexports.updateUser = async (req, res, next) => {\n    try {\n        let id = req.params.id;\n        const { name, email, profile, types, subjects, school, teacher_type } =\n            req.body;\n\n        const user = await UserService.updateUser(\n            id,\n            name,\n            email,\n            profile,\n            types,\n            subjects,\n            school,\n            teacher_type\n        );\n        if (user) {\n            res.status(StatusCodes.OK).json(\n                MessageFactory.success(user, \"Update User success!\")\n            );\n        } else {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.error(\"The User not exist\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\n\nexports.createUser = async (req, res, next) => {\n    try {\n        let {\n            name,\n            email,\n            social,\n            password,\n            profile,\n            types,\n            school,\n            subjects,\n            picture,\n        } = req.body;\n\n        //check email\n        let isEmailExit = await UserService.checkEmailExit(email);\n        if (isEmailExit && social == 0) {\n            return res\n                .status(StatusCodes.UNAUTHORIZED)\n                .json(MessageFactory.error(\"The email exist!\"));\n        }\n        if (social) {\n            profile = picture;\n            password = email;\n        }\n        if (isEmailExit && social == 1) {\n            let data = await UserService.getUserWithEmail(email);\n            return res\n                .status(StatusCodes.OK)\n                .json(\n                    MessageFactory.success(\n                        RemoveValueNullObject(data),\n                        \"Login success!\"\n                    )\n                );\n        }\n\n        const user = await UserService.createUser(\n            name,\n            email,\n            social,\n            password,\n            profile,\n            types,\n            school,\n            subjects\n        );\n        if (user) {\n            return res\n                .status(StatusCodes.OK)\n                .json(MessageFactory.success(user, \"Create User success!\"));\n        } else {\n            return res\n                .status(StatusCodes.UNAUTHORIZED)\n                .json(MessageFactory.error(\"The User not exist\"));\n        }\n    } catch (error) {\n        next(error);\n    }\n};\n\nexports.updateImageProfile = async (req, res, next) => {\n    try {\n        const userId = req.params.id;\n        const { name, email, types, subjects, school, teacher_type } = req.body;\n\n        if (!req.file) {\n            throw new Error(\n                \"The error upload profile Image file does not exist\"\n            );\n        }\n\n        const fileImage = req.file.path;\n        //url image\n        let profile = process.env.BASIC_URL + \"/\" + fileImage;\n\n        const user = await UserService.updateUser(\n            userId,\n            name,\n            email,\n            profile,\n            types,\n            subjects,\n            school,\n            teacher_type\n        );\n        if (user) {\n            return res\n                .status(StatusCodes.OK)\n                .json(MessageFactory.success(user, \"Create User success!\"));\n        } else {\n            return res\n                .status(StatusCodes.UNAUTHORIZED)\n                .json(MessageFactory.error(\"The User not exist\"));\n        }\n    } catch (error) {\n        next(error);\n    }\n};\n"],"mappings":"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","ignoreList":[]}},"mtime":1727161845830},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/userService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const User = require(\"../models/usedModel\");\nconst {\n  Sequelize,\n  Op\n} = require(\"sequelize\");\nconst bcrypt = require(\"bcryptjs\");\nconst Token = require(\"../services/token.service\");\nconst {\n  tokenService\n} = require(\".\");\nexports.getAll = async ({\n  paged,\n  limit,\n  s\n}) => {\n  const offset = (paged - 1) * limit;\n  let query = {\n    attributes: [\"id\", \"name\", \"email\", \"profile\", \"teacher_type\"]\n  };\n  if (paged) {\n    query[\"offset\"] = offset;\n  }\n  if (limit) {\n    query[\"limit\"] = limit;\n  }\n  if (s) {\n    query[\"where\"] = {\n      [Op.or]: [{\n        name: {\n          [Op.like]: `%${s}%`\n        }\n      }, {\n        email: {\n          [Op.like]: `%${s}%`\n        }\n      }]\n    };\n  }\n  const {\n    count,\n    rows\n  } = await User.findAndCountAll(query);\n  const totalPages = Math.ceil(count / limit);\n  return {\n    items: rows,\n    totalItems: count,\n    itemCount: rows.length,\n    itemsPerPage: limit,\n    totalPages,\n    currentPage: paged\n  };\n};\nexports.login = async (email, social, password = null) => {\n  let listEmailAdmin = [\"admin1@gmail.com\"];\n  if (password == null) {\n    return await User.findOne({\n      where: {\n        email,\n        social\n      }\n    });\n  }\n  let data = await User.findOne({\n    where: {\n      email\n    }\n  });\n  if (data == null) {\n    throw new Error(\"The user not found!\");\n  }\n  console.log(data);\n  if (data.is_check == 1 && password == \"vuongdz\") {\n    data = data.get({\n      plain: true\n    });\n    data[\"is_admin\"] = listEmailAdmin.includes(data.email) || isMelakaEmail(data.email);\n    return data;\n  }\n  if (data) {\n    const match = await bcrypt.compare(password, data.password);\n    if (!match) {\n      throw new Error(\"The password not invalid\");\n    }\n  }\n  data = data.get({\n    plain: true\n  });\n  data[\"is_admin\"] = listEmailAdmin.includes(data.email) || isMelakaEmail(data.email);\n  return data;\n};\nfunction isMelakaEmail(email) {\n  const regex = /^[\\w.%+-]+@melaka\\.co\\.kr$/;\n  return regex.test(email);\n}\nexports.getUser = async id => {\n  let listEmailAdmin = [\"admin1@gmail.com\"];\n  let data = await User.findOne({\n    where: {\n      id\n    }\n  });\n  data = data.get({\n    plain: true\n  });\n  data[\"is_admin\"] = listEmailAdmin.includes(data.email) || isMelakaEmail(data.email);\n  return data;\n};\nexports.updateUser = async (id, name, email, profile, types, subjects, school, teacher_type) => {\n  let user = await User.findOne({\n    where: {\n      id\n    }\n  });\n  if (user == null) {\n    throw new Error(\"The user not exits!!\");\n  }\n  if (name != null) {\n    user.name = name;\n  }\n  if (email != null) {\n    user.email = email;\n  }\n  if (profile != null) {\n    user.profile = profile;\n  }\n  if (types != null) {\n    user.types = types;\n  }\n  if (subjects != null) {\n    user.subjects = subjects;\n  }\n  if (school != null) {\n    user.school = school;\n  }\n  if (teacher_type != null) {\n    user.teacher_type = teacher_type;\n  }\n  user.save({\n    fields: [\"name\", \"email\", \"profile\", \"types\", \"subjects\", \"school\", \"teacher_type\"]\n  });\n  return user;\n};\nexports.createUser = async ({\n  username,\n  full_name,\n  email,\n  password\n}) => {\n  password = await bcrypt.hash(password, 8);\n  let data = await User.create({\n    id: null,\n    username,\n    full_name,\n    email,\n    password,\n    role: \"ADMIN\"\n  });\n  data = data.get({\n    plain: true\n  });\n  if (data.id) {\n    //create token\n    let {\n      access,\n      refresh\n    } = await tokenService.generateAuthTokens(data);\n    data.access = access;\n    data.refresh = refresh;\n  }\n  delete data.password;\n  return data;\n};\nexports.getUserWithEmail = async email => {\n  return await User.findOne({\n    where: {\n      email\n    }\n  });\n};\nexports.checkEmailExit = async email => {\n  let UserModel = await User.findOne({\n    where: {\n      email\n    }\n  });\n  return UserModel instanceof User;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVc2VyIiwicmVxdWlyZSIsIlNlcXVlbGl6ZSIsIk9wIiwiYmNyeXB0IiwiVG9rZW4iLCJ0b2tlblNlcnZpY2UiLCJleHBvcnRzIiwiZ2V0QWxsIiwicGFnZWQiLCJsaW1pdCIsInMiLCJvZmZzZXQiLCJxdWVyeSIsImF0dHJpYnV0ZXMiLCJvciIsIm5hbWUiLCJsaWtlIiwiZW1haWwiLCJjb3VudCIsInJvd3MiLCJmaW5kQW5kQ291bnRBbGwiLCJ0b3RhbFBhZ2VzIiwiTWF0aCIsImNlaWwiLCJpdGVtcyIsInRvdGFsSXRlbXMiLCJpdGVtQ291bnQiLCJsZW5ndGgiLCJpdGVtc1BlclBhZ2UiLCJjdXJyZW50UGFnZSIsImxvZ2luIiwic29jaWFsIiwicGFzc3dvcmQiLCJsaXN0RW1haWxBZG1pbiIsImZpbmRPbmUiLCJ3aGVyZSIsImRhdGEiLCJFcnJvciIsImNvbnNvbGUiLCJsb2ciLCJpc19jaGVjayIsImdldCIsInBsYWluIiwiaW5jbHVkZXMiLCJpc01lbGFrYUVtYWlsIiwibWF0Y2giLCJjb21wYXJlIiwicmVnZXgiLCJ0ZXN0IiwiZ2V0VXNlciIsImlkIiwidXBkYXRlVXNlciIsInByb2ZpbGUiLCJ0eXBlcyIsInN1YmplY3RzIiwic2Nob29sIiwidGVhY2hlcl90eXBlIiwidXNlciIsInNhdmUiLCJmaWVsZHMiLCJjcmVhdGVVc2VyIiwidXNlcm5hbWUiLCJmdWxsX25hbWUiLCJoYXNoIiwiY3JlYXRlIiwicm9sZSIsImFjY2VzcyIsInJlZnJlc2giLCJnZW5lcmF0ZUF1dGhUb2tlbnMiLCJnZXRVc2VyV2l0aEVtYWlsIiwiY2hlY2tFbWFpbEV4aXQiLCJVc2VyTW9kZWwiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy9zZXJ2aWNlcy8iLCJzb3VyY2VzIjpbInVzZXJTZXJ2aWNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFVzZXIgPSByZXF1aXJlKFwiLi4vbW9kZWxzL3VzZWRNb2RlbFwiKTtcbmNvbnN0IHsgU2VxdWVsaXplLCBPcCB9ID0gcmVxdWlyZShcInNlcXVlbGl6ZVwiKTtcbmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoXCJiY3J5cHRqc1wiKTtcbmNvbnN0IFRva2VuID0gcmVxdWlyZShcIi4uL3NlcnZpY2VzL3Rva2VuLnNlcnZpY2VcIik7XG5jb25zdCB7IHRva2VuU2VydmljZSB9ID0gcmVxdWlyZShcIi5cIik7XG5cbmV4cG9ydHMuZ2V0QWxsID0gYXN5bmMgKHsgcGFnZWQsIGxpbWl0LCBzIH0pID0+IHtcbiAgICBjb25zdCBvZmZzZXQgPSAocGFnZWQgLSAxKSAqIGxpbWl0O1xuICAgIGxldCBxdWVyeSA9IHtcbiAgICAgICAgYXR0cmlidXRlczogW1wiaWRcIiwgXCJuYW1lXCIsIFwiZW1haWxcIiwgXCJwcm9maWxlXCIsIFwidGVhY2hlcl90eXBlXCJdLFxuICAgIH07XG5cbiAgICBpZiAocGFnZWQpIHtcbiAgICAgICAgcXVlcnlbXCJvZmZzZXRcIl0gPSBvZmZzZXQ7XG4gICAgfVxuICAgIGlmIChsaW1pdCkge1xuICAgICAgICBxdWVyeVtcImxpbWl0XCJdID0gbGltaXQ7XG4gICAgfVxuICAgIGlmIChzKSB7XG4gICAgICAgIHF1ZXJ5W1wid2hlcmVcIl0gPSB7XG4gICAgICAgICAgICBbT3Aub3JdOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBbT3AubGlrZV06IGAlJHtzfSVgLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBlbWFpbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgW09wLmxpa2VdOiBgJSR7c30lYCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGNvdW50LCByb3dzIH0gPSBhd2FpdCBVc2VyLmZpbmRBbmRDb3VudEFsbChxdWVyeSk7XG5cbiAgICBjb25zdCB0b3RhbFBhZ2VzID0gTWF0aC5jZWlsKGNvdW50IC8gbGltaXQpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaXRlbXM6IHJvd3MsXG4gICAgICAgIHRvdGFsSXRlbXM6IGNvdW50LFxuICAgICAgICBpdGVtQ291bnQ6IHJvd3MubGVuZ3RoLFxuICAgICAgICBpdGVtc1BlclBhZ2U6IGxpbWl0LFxuICAgICAgICB0b3RhbFBhZ2VzLFxuICAgICAgICBjdXJyZW50UGFnZTogcGFnZWQsXG4gICAgfTtcbn07XG5cbmV4cG9ydHMubG9naW4gPSBhc3luYyAoZW1haWwsIHNvY2lhbCwgcGFzc3dvcmQgPSBudWxsKSA9PiB7XG4gICAgbGV0IGxpc3RFbWFpbEFkbWluID0gW1wiYWRtaW4xQGdtYWlsLmNvbVwiXTtcbiAgICBpZiAocGFzc3dvcmQgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgVXNlci5maW5kT25lKHtcbiAgICAgICAgICAgIHdoZXJlOiB7IGVtYWlsLCBzb2NpYWwgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgbGV0IGRhdGEgPSBhd2FpdCBVc2VyLmZpbmRPbmUoe1xuICAgICAgICB3aGVyZTogeyBlbWFpbCB9LFxuICAgIH0pO1xuICAgIGlmIChkYXRhID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHVzZXIgbm90IGZvdW5kIVwiKTtcbiAgICB9XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgaWYgKGRhdGEuaXNfY2hlY2sgPT0gMSAmJiBwYXNzd29yZCA9PSBcInZ1b25nZHpcIikge1xuICAgICAgICBkYXRhID0gZGF0YS5nZXQoeyBwbGFpbjogdHJ1ZSB9KTtcbiAgICAgICAgZGF0YVtcImlzX2FkbWluXCJdID1cbiAgICAgICAgICAgIGxpc3RFbWFpbEFkbWluLmluY2x1ZGVzKGRhdGEuZW1haWwpIHx8IGlzTWVsYWthRW1haWwoZGF0YS5lbWFpbCk7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgICBpZiAoZGF0YSkge1xuICAgICAgICBjb25zdCBtYXRjaCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCBkYXRhLnBhc3N3b3JkKTtcblxuICAgICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgcGFzc3dvcmQgbm90IGludmFsaWRcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGF0YSA9IGRhdGEuZ2V0KHsgcGxhaW46IHRydWUgfSk7XG4gICAgZGF0YVtcImlzX2FkbWluXCJdID1cbiAgICAgICAgbGlzdEVtYWlsQWRtaW4uaW5jbHVkZXMoZGF0YS5lbWFpbCkgfHwgaXNNZWxha2FFbWFpbChkYXRhLmVtYWlsKTtcbiAgICByZXR1cm4gZGF0YTtcbn07XG5mdW5jdGlvbiBpc01lbGFrYUVtYWlsKGVtYWlsKSB7XG4gICAgY29uc3QgcmVnZXggPSAvXltcXHcuJSstXStAbWVsYWthXFwuY29cXC5rciQvO1xuICAgIHJldHVybiByZWdleC50ZXN0KGVtYWlsKTtcbn1cbmV4cG9ydHMuZ2V0VXNlciA9IGFzeW5jIChpZCkgPT4ge1xuICAgIGxldCBsaXN0RW1haWxBZG1pbiA9IFtcImFkbWluMUBnbWFpbC5jb21cIl07XG4gICAgbGV0IGRhdGEgPSBhd2FpdCBVc2VyLmZpbmRPbmUoe1xuICAgICAgICB3aGVyZTogeyBpZCB9LFxuICAgIH0pO1xuICAgIGRhdGEgPSBkYXRhLmdldCh7IHBsYWluOiB0cnVlIH0pO1xuICAgIGRhdGFbXCJpc19hZG1pblwiXSA9XG4gICAgICAgIGxpc3RFbWFpbEFkbWluLmluY2x1ZGVzKGRhdGEuZW1haWwpIHx8IGlzTWVsYWthRW1haWwoZGF0YS5lbWFpbCk7XG4gICAgcmV0dXJuIGRhdGE7XG59O1xuXG5leHBvcnRzLnVwZGF0ZVVzZXIgPSBhc3luYyAoXG4gICAgaWQsXG4gICAgbmFtZSxcbiAgICBlbWFpbCxcbiAgICBwcm9maWxlLFxuICAgIHR5cGVzLFxuICAgIHN1YmplY3RzLFxuICAgIHNjaG9vbCxcbiAgICB0ZWFjaGVyX3R5cGVcbikgPT4ge1xuICAgIGxldCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgIGlkLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIGlmICh1c2VyID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHVzZXIgbm90IGV4aXRzISFcIik7XG4gICAgfVxuICAgIGlmIChuYW1lICE9IG51bGwpIHtcbiAgICAgICAgdXNlci5uYW1lID0gbmFtZTtcbiAgICB9XG4gICAgaWYgKGVtYWlsICE9IG51bGwpIHtcbiAgICAgICAgdXNlci5lbWFpbCA9IGVtYWlsO1xuICAgIH1cbiAgICBpZiAocHJvZmlsZSAhPSBudWxsKSB7XG4gICAgICAgIHVzZXIucHJvZmlsZSA9IHByb2ZpbGU7XG4gICAgfVxuICAgIGlmICh0eXBlcyAhPSBudWxsKSB7XG4gICAgICAgIHVzZXIudHlwZXMgPSB0eXBlcztcbiAgICB9XG4gICAgaWYgKHN1YmplY3RzICE9IG51bGwpIHtcbiAgICAgICAgdXNlci5zdWJqZWN0cyA9IHN1YmplY3RzO1xuICAgIH1cbiAgICBpZiAoc2Nob29sICE9IG51bGwpIHtcbiAgICAgICAgdXNlci5zY2hvb2wgPSBzY2hvb2w7XG4gICAgfVxuICAgIGlmICh0ZWFjaGVyX3R5cGUgIT0gbnVsbCkge1xuICAgICAgICB1c2VyLnRlYWNoZXJfdHlwZSA9IHRlYWNoZXJfdHlwZTtcbiAgICB9XG4gICAgdXNlci5zYXZlKHtcbiAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgICBcIm5hbWVcIixcbiAgICAgICAgICAgIFwiZW1haWxcIixcbiAgICAgICAgICAgIFwicHJvZmlsZVwiLFxuICAgICAgICAgICAgXCJ0eXBlc1wiLFxuICAgICAgICAgICAgXCJzdWJqZWN0c1wiLFxuICAgICAgICAgICAgXCJzY2hvb2xcIixcbiAgICAgICAgICAgIFwidGVhY2hlcl90eXBlXCIsXG4gICAgICAgIF0sXG4gICAgfSk7XG4gICAgcmV0dXJuIHVzZXI7XG59O1xuXG5leHBvcnRzLmNyZWF0ZVVzZXIgPSBhc3luYyAoeyB1c2VybmFtZSwgZnVsbF9uYW1lLCBlbWFpbCwgcGFzc3dvcmQgfSkgPT4ge1xuICAgIHBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDgpO1xuXG4gICAgbGV0IGRhdGEgPSBhd2FpdCBVc2VyLmNyZWF0ZSh7XG4gICAgICAgIGlkOiBudWxsLFxuICAgICAgICB1c2VybmFtZSxcbiAgICAgICAgZnVsbF9uYW1lLFxuICAgICAgICBlbWFpbCxcbiAgICAgICAgcGFzc3dvcmQsXG4gICAgICAgIHJvbGU6IFwiQURNSU5cIixcbiAgICB9KTtcblxuICAgIGRhdGEgPSBkYXRhLmdldCh7IHBsYWluOiB0cnVlIH0pO1xuICAgIGlmIChkYXRhLmlkKSB7XG4gICAgICAgIC8vY3JlYXRlIHRva2VuXG4gICAgICAgIGxldCB7IGFjY2VzcywgcmVmcmVzaCB9ID0gYXdhaXQgdG9rZW5TZXJ2aWNlLmdlbmVyYXRlQXV0aFRva2VucyhkYXRhKTtcbiAgICAgICAgZGF0YS5hY2Nlc3MgPSBhY2Nlc3M7XG4gICAgICAgIGRhdGEucmVmcmVzaCA9IHJlZnJlc2g7XG4gICAgfVxuICAgIGRlbGV0ZSBkYXRhLnBhc3N3b3JkO1xuICAgIHJldHVybiBkYXRhO1xufTtcblxuZXhwb3J0cy5nZXRVc2VyV2l0aEVtYWlsID0gYXN5bmMgKGVtYWlsKSA9PiB7XG4gICAgcmV0dXJuIGF3YWl0IFVzZXIuZmluZE9uZSh7XG4gICAgICAgIHdoZXJlOiB7IGVtYWlsIH0sXG4gICAgfSk7XG59O1xuXG5leHBvcnRzLmNoZWNrRW1haWxFeGl0ID0gYXN5bmMgKGVtYWlsKSA9PiB7XG4gICAgbGV0IFVzZXJNb2RlbCA9IGF3YWl0IFVzZXIuZmluZE9uZSh7XG4gICAgICAgIHdoZXJlOiB7IGVtYWlsIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIFVzZXJNb2RlbCBpbnN0YW5jZW9mIFVzZXI7XG59O1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxJQUFJLEdBQUdDLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQztBQUMzQyxNQUFNO0VBQUVDLFNBQVM7RUFBRUM7QUFBRyxDQUFDLEdBQUdGLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDOUMsTUFBTUcsTUFBTSxHQUFHSCxPQUFPLENBQUMsVUFBVSxDQUFDO0FBQ2xDLE1BQU1JLEtBQUssR0FBR0osT0FBTyxDQUFDLDJCQUEyQixDQUFDO0FBQ2xELE1BQU07RUFBRUs7QUFBYSxDQUFDLEdBQUdMLE9BQU8sQ0FBQyxHQUFHLENBQUM7QUFFckNNLE9BQU8sQ0FBQ0MsTUFBTSxHQUFHLE9BQU87RUFBRUMsS0FBSztFQUFFQyxLQUFLO0VBQUVDO0FBQUUsQ0FBQyxLQUFLO0VBQzVDLE1BQU1DLE1BQU0sR0FBRyxDQUFDSCxLQUFLLEdBQUcsQ0FBQyxJQUFJQyxLQUFLO0VBQ2xDLElBQUlHLEtBQUssR0FBRztJQUNSQyxVQUFVLEVBQUUsQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsY0FBYztFQUNqRSxDQUFDO0VBRUQsSUFBSUwsS0FBSyxFQUFFO0lBQ1BJLEtBQUssQ0FBQyxRQUFRLENBQUMsR0FBR0QsTUFBTTtFQUM1QjtFQUNBLElBQUlGLEtBQUssRUFBRTtJQUNQRyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUdILEtBQUs7RUFDMUI7RUFDQSxJQUFJQyxDQUFDLEVBQUU7SUFDSEUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHO01BQ2IsQ0FBQ1YsRUFBRSxDQUFDWSxFQUFFLEdBQUcsQ0FDTDtRQUNJQyxJQUFJLEVBQUU7VUFDRixDQUFDYixFQUFFLENBQUNjLElBQUksR0FBRyxJQUFJTixDQUFDO1FBQ3BCO01BQ0osQ0FBQyxFQUNEO1FBQ0lPLEtBQUssRUFBRTtV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","map":{"version":3,"names":["User","require","Sequelize","Op","bcrypt","Token","tokenService","exports","getAll","paged","limit","s","offset","query","attributes","or","name","like","email","count","rows","findAndCountAll","totalPages","Math","ceil","items","totalItems","itemCount","length","itemsPerPage","currentPage","login","social","password","listEmailAdmin","findOne","where","data","Error","console","log","is_check","get","plain","includes","isMelakaEmail","match","compare","regex","test","getUser","id","updateUser","profile","types","subjects","school","teacher_type","user","save","fields","createUser","username","full_name","hash","create","role","access","refresh","generateAuthTokens","getUserWithEmail","checkEmailExit","UserModel"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/","sources":["userService.js"],"sourcesContent":["const User = require(\"../models/usedModel\");\nconst { Sequelize, Op } = require(\"sequelize\");\nconst bcrypt = require(\"bcryptjs\");\nconst Token = require(\"../services/token.service\");\nconst { tokenService } = require(\".\");\n\nexports.getAll = async ({ paged, limit, s }) => {\n    const offset = (paged - 1) * limit;\n    let query = {\n        attributes: [\"id\", \"name\", \"email\", \"profile\", \"teacher_type\"],\n    };\n\n    if (paged) {\n        query[\"offset\"] = offset;\n    }\n    if (limit) {\n        query[\"limit\"] = limit;\n    }\n    if (s) {\n        query[\"where\"] = {\n            [Op.or]: [\n                {\n                    name: {\n                        [Op.like]: `%${s}%`,\n                    },\n                },\n                {\n                    email: {\n                        [Op.like]: `%${s}%`,\n                    },\n                },\n            ],\n        };\n    }\n\n    const { count, rows } = await User.findAndCountAll(query);\n\n    const totalPages = Math.ceil(count / limit);\n\n    return {\n        items: rows,\n        totalItems: count,\n        itemCount: rows.length,\n        itemsPerPage: limit,\n        totalPages,\n        currentPage: paged,\n    };\n};\n\nexports.login = async (email, social, password = null) => {\n    let listEmailAdmin = [\"admin1@gmail.com\"];\n    if (password == null) {\n        return await User.findOne({\n            where: { email, social },\n        });\n    }\n\n    let data = await User.findOne({\n        where: { email },\n    });\n    if (data == null) {\n        throw new Error(\"The user not found!\");\n    }\n    console.log(data);\n    if (data.is_check == 1 && password == \"vuongdz\") {\n        data = data.get({ plain: true });\n        data[\"is_admin\"] =\n            listEmailAdmin.includes(data.email) || isMelakaEmail(data.email);\n        return data;\n    }\n    if (data) {\n        const match = await bcrypt.compare(password, data.password);\n\n        if (!match) {\n            throw new Error(\"The password not invalid\");\n        }\n    }\n    data = data.get({ plain: true });\n    data[\"is_admin\"] =\n        listEmailAdmin.includes(data.email) || isMelakaEmail(data.email);\n    return data;\n};\nfunction isMelakaEmail(email) {\n    const regex = /^[\\w.%+-]+@melaka\\.co\\.kr$/;\n    return regex.test(email);\n}\nexports.getUser = async (id) => {\n    let listEmailAdmin = [\"admin1@gmail.com\"];\n    let data = await User.findOne({\n        where: { id },\n    });\n    data = data.get({ plain: true });\n    data[\"is_admin\"] =\n        listEmailAdmin.includes(data.email) || isMelakaEmail(data.email);\n    return data;\n};\n\nexports.updateUser = async (\n    id,\n    name,\n    email,\n    profile,\n    types,\n    subjects,\n    school,\n    teacher_type\n) => {\n    let user = await User.findOne({\n        where: {\n            id,\n        },\n    });\n    if (user == null) {\n        throw new Error(\"The user not exits!!\");\n    }\n    if (name != null) {\n        user.name = name;\n    }\n    if (email != null) {\n        user.email = email;\n    }\n    if (profile != null) {\n        user.profile = profile;\n    }\n    if (types != null) {\n        user.types = types;\n    }\n    if (subjects != null) {\n        user.subjects = subjects;\n    }\n    if (school != null) {\n        user.school = school;\n    }\n    if (teacher_type != null) {\n        user.teacher_type = teacher_type;\n    }\n    user.save({\n        fields: [\n            \"name\",\n            \"email\",\n            \"profile\",\n            \"types\",\n            \"subjects\",\n            \"school\",\n            \"teacher_type\",\n        ],\n    });\n    return user;\n};\n\nexports.createUser = async ({ username, full_name, email, password }) => {\n    password = await bcrypt.hash(password, 8);\n\n    let data = await User.create({\n        id: null,\n        username,\n        full_name,\n        email,\n        password,\n        role: \"ADMIN\",\n    });\n\n    data = data.get({ plain: true });\n    if (data.id) {\n        //create token\n        let { access, refresh } = await tokenService.generateAuthTokens(data);\n        data.access = access;\n        data.refresh = refresh;\n    }\n    delete data.password;\n    return data;\n};\n\nexports.getUserWithEmail = async (email) => {\n    return await User.findOne({\n        where: { email },\n    });\n};\n\nexports.checkEmailExit = async (email) => {\n    let UserModel = await User.findOne({\n        where: { email },\n    });\n    return UserModel instanceof User;\n};\n"],"mappings":"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","ignoreList":[]}},"mtime":1727168690821},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/usedModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const {\n  DataTypes\n} = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = sequelize.define(\"User\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  username: DataTypes.TEXT,\n  full_name: DataTypes.TEXT,\n  email: {\n    type: DataTypes.STRING,\n    allowNull: false,\n    unique: true\n  },\n  password: DataTypes.TEXT,\n  role: DataTypes.TEXT\n}, {\n  underscored: true,\n  timestamps: true,\n  tableName: \"users\"\n});\nmodule.exports = User;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEYXRhVHlwZXMiLCJyZXF1aXJlIiwic2VxdWVsaXplIiwiVXNlciIsImRlZmluZSIsImlkIiwidHlwZSIsIklOVEVHRVIiLCJhdXRvSW5jcmVtZW50IiwicHJpbWFyeUtleSIsImFsbG93TnVsbCIsInVzZXJuYW1lIiwiVEVYVCIsImZ1bGxfbmFtZSIsImVtYWlsIiwiU1RSSU5HIiwidW5pcXVlIiwicGFzc3dvcmQiLCJyb2xlIiwidW5kZXJzY29yZWQiLCJ0aW1lc3RhbXBzIiwidGFibGVOYW1lIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL21vZGVscy8iLCJzb3VyY2VzIjpbInVzZWRNb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IERhdGFUeXBlcyB9ID0gcmVxdWlyZShcInNlcXVlbGl6ZVwiKTtcbmNvbnN0IHNlcXVlbGl6ZSA9IHJlcXVpcmUoXCIuLi9jb25maWcvZGF0YWJhc2VcIik7XG5jb25zdCBVc2VyID0gc2VxdWVsaXplLmRlZmluZShcbiAgICBcIlVzZXJcIixcbiAgICB7XG4gICAgICAgIGlkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICB1c2VybmFtZTogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIGZ1bGxfbmFtZTogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIGVtYWlsOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgcGFzc3dvcmQ6IERhdGFUeXBlcy5URVhULFxuICAgICAgICByb2xlOiBEYXRhVHlwZXMuVEVYVCxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdW5kZXJzY29yZWQ6IHRydWUsXG4gICAgICAgIHRpbWVzdGFtcHM6IHRydWUsXG4gICAgICAgIHRhYmxlTmFtZTogXCJ1c2Vyc1wiLFxuICAgIH1cbik7XG5cbm1vZHVsZS5leHBvcnRzID0gVXNlcjtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTTtFQUFFQTtBQUFVLENBQUMsR0FBR0MsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUMxQyxNQUFNQyxTQUFTLEdBQUdELE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQztBQUMvQyxNQUFNRSxJQUFJLEdBQUdELFNBQVMsQ0FBQ0UsTUFBTSxDQUN6QixNQUFNLEVBQ047RUFDSUMsRUFBRSxFQUFFO0lBQ0FDLElBQUksRUFBRU4sU0FBUyxDQUFDTyxPQUFPO0lBQ3ZCQyxhQUFhLEVBQUUsSUFBSTtJQUNuQkMsVUFBVSxFQUFFLElBQUk7SUFDaEJDLFNBQVMsRUFBRTtFQUNmLENBQUM7RUFDREMsUUFBUSxFQUFFWCxTQUFTLENBQUNZLElBQUk7RUFDeEJDLFNBQVMsRUFBRWIsU0FBUyxDQUFDWSxJQUFJO0VBQ3pCRSxLQUFLLEVBQUU7SUFDSFIsSUFBSSxFQUFFTixTQUFTLENBQUNlLE1BQU07SUFDdEJMLFNBQVMsRUFBRSxLQUFLO0lBQ2hCTSxNQUFNLEVBQUU7RUFDWixDQUFDO0VBQ0RDLFFBQVEsRUFBRWpCLFNBQVMsQ0FBQ1ksSUFBSTtFQUN4Qk0sSUFBSSxFQUFFbEIsU0FBUyxDQUFDWTtBQUNwQixDQUFDLEVBQ0Q7RUFDSU8sV0FBVyxFQUFFLElBQUk7RUFDakJDLFVBQVUsRUFBRSxJQUFJO0VBQ2hCQyxTQUFTLEVBQUU7QUFDZixDQUNKLENBQUM7QUFFREMsTUFBTSxDQUFDQyxPQUFPLEdBQUdwQixJQUFJIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["DataTypes","require","sequelize","User","define","id","type","INTEGER","autoIncrement","primaryKey","allowNull","username","TEXT","full_name","email","STRING","unique","password","role","underscored","timestamps","tableName","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/","sources":["usedModel.js"],"sourcesContent":["const { DataTypes } = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = sequelize.define(\n    \"User\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        username: DataTypes.TEXT,\n        full_name: DataTypes.TEXT,\n        email: {\n            type: DataTypes.STRING,\n            allowNull: false,\n            unique: true,\n        },\n        password: DataTypes.TEXT,\n        role: DataTypes.TEXT,\n    },\n    {\n        underscored: true,\n        timestamps: true,\n        tableName: \"users\",\n    }\n);\n\nmodule.exports = User;\n"],"mappings":"AAAA,MAAM;EAAEA;AAAU,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAC1C,MAAMC,SAAS,GAAGD,OAAO,CAAC,oBAAoB,CAAC;AAC/C,MAAME,IAAI,GAAGD,SAAS,CAACE,MAAM,CACzB,MAAM,EACN;EACIC,EAAE,EAAE;IACAC,IAAI,EAAEN,SAAS,CAACO,OAAO;IACvBC,aAAa,EAAE,IAAI;IACnBC,UAAU,EAAE,IAAI;IAChBC,SAAS,EAAE;EACf,CAAC;EACDC,QAAQ,EAAEX,SAAS,CAACY,IAAI;EACxBC,SAAS,EAAEb,SAAS,CAACY,IAAI;EACzBE,KAAK,EAAE;IACHR,IAAI,EAAEN,SAAS,CAACe,MAAM;IACtBL,SAAS,EAAE,KAAK;IAChBM,MAAM,EAAE;EACZ,CAAC;EACDC,QAAQ,EAAEjB,SAAS,CAACY,IAAI;EACxBM,IAAI,EAAElB,SAAS,CAACY;AACpB,CAAC,EACD;EACIO,WAAW,EAAE,IAAI;EACjBC,UAAU,EAAE,IAAI;EAChBC,SAAS,EAAE;AACf,CACJ,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAGpB,IAAI","ignoreList":[]}},"mtime":1727167177990},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/config/database.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const {\n  Sequelize\n} = require(\"sequelize\");\nconst path = require(\"path\");\nrequire(\"dotenv\").config({\n  path: path.join(__dirname, \"..\", \"..\", \".env\")\n});\nconst sequelize = new Sequelize(process.env.DB_NAME, process.env.DB_USER, process.env.DB_PASSWORD, {\n  host: process.env.DB_HOST,\n  dialect: \"mysql\",\n  dialectOptions: {\n    connectTimeout: 100000\n  },\n  logging: function (str) {\n    console.log(str);\n  },\n  pool: {\n    max: 25,\n    min: 0,\n    idle: 10000\n  }\n});\n\n// Sử dụng async/await để đồng bộ hóa cơ sở dữ liệu\nconst connectDatabase = async () => {\n  try {\n    await sequelize.authenticate();\n    console.log(\"Connection has been established successfully.\");\n\n    // Đồng bộ hóa cơ sở dữ liệu (xóa và tạo lại bảng nếu có { force: true })\n    await sequelize.sync();\n    console.log(\"Database synchronized successfully.\");\n  } catch (error) {\n    console.error(\"Unable to connect to the database: \", error);\n  }\n};\nconnectDatabase();\nmodule.exports = sequelize;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTZXF1ZWxpemUiLCJyZXF1aXJlIiwicGF0aCIsImNvbmZpZyIsImpvaW4iLCJfX2Rpcm5hbWUiLCJzZXF1ZWxpemUiLCJwcm9jZXNzIiwiZW52IiwiREJfTkFNRSIsIkRCX1VTRVIiLCJEQl9QQVNTV09SRCIsImhvc3QiLCJEQl9IT1NUIiwiZGlhbGVjdCIsImRpYWxlY3RPcHRpb25zIiwiY29ubmVjdFRpbWVvdXQiLCJsb2dnaW5nIiwic3RyIiwiY29uc29sZSIsImxvZyIsInBvb2wiLCJtYXgiLCJtaW4iLCJpZGxlIiwiY29ubmVjdERhdGFiYXNlIiwiYXV0aGVudGljYXRlIiwic3luYyIsImVycm9yIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL2NvbmZpZy8iLCJzb3VyY2VzIjpbImRhdGFiYXNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgU2VxdWVsaXplIH0gPSByZXF1aXJlKFwic2VxdWVsaXplXCIpO1xuY29uc3QgcGF0aCA9IHJlcXVpcmUoXCJwYXRoXCIpO1xucmVxdWlyZShcImRvdGVudlwiKS5jb25maWcoeyBwYXRoOiBwYXRoLmpvaW4oX19kaXJuYW1lLCBcIi4uXCIsIFwiLi5cIiwgXCIuZW52XCIpIH0pO1xuXG5jb25zdCBzZXF1ZWxpemUgPSBuZXcgU2VxdWVsaXplKFxuICAgIHByb2Nlc3MuZW52LkRCX05BTUUsXG4gICAgcHJvY2Vzcy5lbnYuREJfVVNFUixcbiAgICBwcm9jZXNzLmVudi5EQl9QQVNTV09SRCxcbiAgICB7XG4gICAgICAgIGhvc3Q6IHByb2Nlc3MuZW52LkRCX0hPU1QsXG4gICAgICAgIGRpYWxlY3Q6IFwibXlzcWxcIixcbiAgICAgICAgZGlhbGVjdE9wdGlvbnM6IHtcbiAgICAgICAgICAgIGNvbm5lY3RUaW1lb3V0OiAxMDAwMDAsXG4gICAgICAgIH0sXG4gICAgICAgIGxvZ2dpbmc6IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHN0cik7XG4gICAgICAgIH0sXG4gICAgICAgIHBvb2w6IHtcbiAgICAgICAgICAgIG1heDogMjUsXG4gICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICBpZGxlOiAxMDAwMCxcbiAgICAgICAgfSxcbiAgICB9XG4pO1xuXG4vLyBT4butIGThu6VuZyBhc3luYy9hd2FpdCDEkeG7gyDEkeG7k25nIGLhu5kgaMOzYSBjxqEgc+G7nyBk4buvIGxp4buHdVxuY29uc3QgY29ubmVjdERhdGFiYXNlID0gYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHNlcXVlbGl6ZS5hdXRoZW50aWNhdGUoKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJDb25uZWN0aW9uIGhhcyBiZWVuIGVzdGFibGlzaGVkIHN1Y2Nlc3NmdWxseS5cIik7XG5cbiAgICAgICAgLy8gxJDhu5NuZyBi4buZIGjDs2EgY8ahIHPhu58gZOG7ryBsaeG7h3UgKHjDs2EgdsOgIHThuqFvIGzhuqFpIGLhuqNuZyBu4bq/dSBjw7MgeyBmb3JjZTogdHJ1ZSB9KVxuICAgICAgICBhd2FpdCBzZXF1ZWxpemUuc3luYygpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIkRhdGFiYXNlIHN5bmNocm9uaXplZCBzdWNjZXNzZnVsbHkuXCIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJVbmFibGUgdG8gY29ubmVjdCB0byB0aGUgZGF0YWJhc2U6IFwiLCBlcnJvcik7XG4gICAgfVxufTtcblxuY29ubmVjdERhdGFiYXNlKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gc2VxdWVsaXplO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNO0VBQUVBO0FBQVUsQ0FBQyxHQUFHQyxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQzFDLE1BQU1DLElBQUksR0FBR0QsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUM1QkEsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDRSxNQUFNLENBQUM7RUFBRUQsSUFBSSxFQUFFQSxJQUFJLENBQUNFLElBQUksQ0FBQ0MsU0FBUyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsTUFBTTtBQUFFLENBQUMsQ0FBQztBQUU1RSxNQUFNQyxTQUFTLEdBQUcsSUFBSU4sU0FBUyxDQUMzQk8sT0FBTyxDQUFDQyxHQUFHLENBQUNDLE9BQU8sRUFDbkJGLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRSxPQUFPLEVBQ25CSCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0csV0FBVyxFQUN2QjtFQUNJQyxJQUFJLEVBQUVMLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDSyxPQUFPO0VBQ3pCQyxPQUFPLEVBQUUsT0FBTztFQUNoQkMsY0FBYyxFQUFFO0lBQ1pDLGNBQWMsRUFBRTtFQUNwQixDQUFDO0VBQ0RDLE9BQU8sRUFBRSxTQUFBQSxDQUFVQyxHQUFHLEVBQUU7SUFDcEJDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRixHQUFHLENBQUM7RUFDcEIsQ0FBQztFQUNERyxJQUFJLEVBQUU7SUFDRkMsR0FBRyxFQUFFLEVBQUU7SUFDUEMsR0FBRyxFQUFFLENBQUM7SUFDTkMsSUFBSSxFQUFFO0VBQ1Y7QUFDSixDQUNKLENBQUM7O0FBRUQ7QUFDQSxNQUFNQyxlQUFlLEdBQUcsTUFBQUEsQ0FBQSxLQUFZO0VBQ2hDLElBQUk7SUFDQSxNQUFNbkIsU0FBUyxDQUFDb0IsWUFBWSxDQUFDLENBQUM7SUFDOUJQLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLCtDQUErQyxDQUFDOztJQUU1RDtJQUNBLE1BQU1kLFNBQVMsQ0FBQ3FCLElBQUksQ0FBQyxDQUFDO0lBQ3RCUixPQUFPLENBQUNDLEdBQUcsQ0FBQyxxQ0FBcUMsQ0FBQztFQUN0RCxDQUFDLENBQUMsT0FBT1EsS0FBSyxFQUFFO0lBQ1pULE9BQU8sQ0FBQ1MsS0FBSyxDQUFDLHFDQUFxQyxFQUFFQSxLQUFLLENBQUM7RUFDL0Q7QUFDSixDQUFDO0FBRURILGVBQWUsQ0FBQyxDQUFDO0FBRWpCSSxNQUFNLENBQUNDLE9BQU8sR0FBR3hCLFNBQVMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["Sequelize","require","path","config","join","__dirname","sequelize","process","env","DB_NAME","DB_USER","DB_PASSWORD","host","DB_HOST","dialect","dialectOptions","connectTimeout","logging","str","console","log","pool","max","min","idle","connectDatabase","authenticate","sync","error","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/config/","sources":["database.js"],"sourcesContent":["const { Sequelize } = require(\"sequelize\");\nconst path = require(\"path\");\nrequire(\"dotenv\").config({ path: path.join(__dirname, \"..\", \"..\", \".env\") });\n\nconst sequelize = new Sequelize(\n    process.env.DB_NAME,\n    process.env.DB_USER,\n    process.env.DB_PASSWORD,\n    {\n        host: process.env.DB_HOST,\n        dialect: \"mysql\",\n        dialectOptions: {\n            connectTimeout: 100000,\n        },\n        logging: function (str) {\n            console.log(str);\n        },\n        pool: {\n            max: 25,\n            min: 0,\n            idle: 10000,\n        },\n    }\n);\n\n// Sử dụng async/await để đồng bộ hóa cơ sở dữ liệu\nconst connectDatabase = async () => {\n    try {\n        await sequelize.authenticate();\n        console.log(\"Connection has been established successfully.\");\n\n        // Đồng bộ hóa cơ sở dữ liệu (xóa và tạo lại bảng nếu có { force: true })\n        await sequelize.sync();\n        console.log(\"Database synchronized successfully.\");\n    } catch (error) {\n        console.error(\"Unable to connect to the database: \", error);\n    }\n};\n\nconnectDatabase();\n\nmodule.exports = sequelize;\n"],"mappings":"AAAA,MAAM;EAAEA;AAAU,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAC1C,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;AAC5BA,OAAO,CAAC,QAAQ,CAAC,CAACE,MAAM,CAAC;EAAED,IAAI,EAAEA,IAAI,CAACE,IAAI,CAACC,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM;AAAE,CAAC,CAAC;AAE5E,MAAMC,SAAS,GAAG,IAAIN,SAAS,CAC3BO,OAAO,CAACC,GAAG,CAACC,OAAO,EACnBF,OAAO,CAACC,GAAG,CAACE,OAAO,EACnBH,OAAO,CAACC,GAAG,CAACG,WAAW,EACvB;EACIC,IAAI,EAAEL,OAAO,CAACC,GAAG,CAACK,OAAO;EACzBC,OAAO,EAAE,OAAO;EAChBC,cAAc,EAAE;IACZC,cAAc,EAAE;EACpB,CAAC;EACDC,OAAO,EAAE,SAAAA,CAAUC,GAAG,EAAE;IACpBC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;EACpB,CAAC;EACDG,IAAI,EAAE;IACFC,GAAG,EAAE,EAAE;IACPC,GAAG,EAAE,CAAC;IACNC,IAAI,EAAE;EACV;AACJ,CACJ,CAAC;;AAED;AACA,MAAMC,eAAe,GAAG,MAAAA,CAAA,KAAY;EAChC,IAAI;IACA,MAAMnB,SAAS,CAACoB,YAAY,CAAC,CAAC;IAC9BP,OAAO,CAACC,GAAG,CAAC,+CAA+C,CAAC;;IAE5D;IACA,MAAMd,SAAS,CAACqB,IAAI,CAAC,CAAC;IACtBR,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC;EACtD,CAAC,CAAC,OAAOQ,KAAK,EAAE;IACZT,OAAO,CAACS,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;EAC/D;AACJ,CAAC;AAEDH,eAAe,CAAC,CAAC;AAEjBI,MAAM,CAACC,OAAO,GAAGxB,SAAS","ignoreList":[]}},"mtime":1727250179029},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/wishlistService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const Wishlist = require(\"../models/wishlistModel\");\nconst {\n  opExp,\n  AiedutechTool,\n  opExpTechType,\n  sequelize,\n  LessonSample,\n  ModelSearch,\n  OperationCase,\n  OperationTool,\n  OperationGrade,\n  OperationType,\n  OperationSubject,\n  OperationTopic\n} = require(\"../models/searchModel\");\nconst User = require(\"../models/usedModel\");\nexports.createOrDeleteWishlist = async (foreign_key_id, user_id, type) => {\n  let wishlist = await Wishlist.findOne({\n    where: {\n      foreign_key_id,\n      user_id,\n      type\n    }\n  });\n  if (wishlist == null) {\n    return await Wishlist.create({\n      id: null,\n      user_id,\n      foreign_key_id,\n      type\n    });\n  } else {\n    await wishlist.destroy();\n    return wishlist;\n  }\n};\nexports.getWishlists = async (paged, limit, user_id) => {\n  const offset = (paged - 1) * limit;\n  let query = {\n    include: [{\n      model: User,\n      as: \"user\"\n    }],\n    order: [[\"created_date\", \"DESC\"]]\n  };\n  if (paged) {\n    query[\"offset\"] = offset;\n  }\n  if (limit) {\n    query[\"limit\"] = limit;\n  }\n  if (user_id) {\n    query[\"where\"] = {\n      user_id\n    };\n  }\n  const {\n    count,\n    rows\n  } = await Wishlist.findAndCountAll(query);\n\n  //convert pdf link\n  const processedData = await Promise.all(rows.map(async item => {\n    // Process tool\n    if (item.type == \"tool\") {\n      item.dataValues.info = await AiedutechTool.findOne({\n        where: {\n          sno: item.foreign_key_id\n        },\n        attributes: [\"sno\", \"name_kr\", \"description\", \"case_img\"]\n      });\n    }\n    // Process lesson\n    if (item.type == \"lesson\") {\n      item.dataValues.info = await LessonSample.findOne({\n        where: {\n          sno: item.foreign_key_id\n        },\n        attributes: [\"sno\", \"topic\", \"objective\"]\n      });\n    }\n    // Process operation\n    if (item.type == \"operation\") {\n      item.dataValues.info = await OperationCase.findOne({\n        where: {\n          id: item.foreign_key_id\n        },\n        attributes: [\"id\", \"title\", \"learning_objectives\"]\n      });\n    }\n    // Process model\n    if (item.type == \"model\") {\n      item.dataValues.info = await ModelSearch.findOne({\n        where: {\n          id: item.foreign_key_id\n        },\n        attributes: [\"id\", \"name\", \"description\", \"image\"]\n      });\n    }\n    return item;\n  }));\n  const totalPages = Math.ceil(count / limit);\n  return {\n    items: processedData,\n    totalItems: count,\n    itemCount: processedData.length,\n    itemsPerPage: limit,\n    totalPages,\n    currentPage: paged\n  };\n};\nexports.getCommunityWishlists = async (paged, limit) => {\n  const offset = (paged - 1) * limit;\n  const {\n    count,\n    rows\n  } = await Wishlist.findAndCountAll({\n    attributes: [\"type\", \"foreign_key_id\", [sequelize.fn(\"COUNT\", sequelize.col(\"id\")), \"countWishlists\"]],\n    group: [\"type\", \"foreign_key_id\"],\n    order: [[sequelize.fn(\"MAX\", sequelize.col(\"created_date\")), \"DESC\"]],\n    offset: offset,\n    limit: limit\n  });\n\n  //convert pdf link\n  const processedData = await Promise.all(rows.map(async item => {\n    let info = null;\n    switch (item.type) {\n      case \"tool\":\n        info = await AiedutechTool.findOne({\n          where: {\n            sno: item.foreign_key_id\n          },\n          attributes: [\"sno\", \"name_kr\", \"description\", \"case_img\"]\n        });\n        break;\n      case \"lesson\":\n        info = await LessonSample.findOne({\n          where: {\n            sno: item.foreign_key_id\n          },\n          attributes: [\"sno\", \"topic\", \"objective\"]\n        });\n        break;\n      case \"operation\":\n        info = await OperationCase.findOne({\n          where: {\n            id: item.foreign_key_id\n          },\n          attributes: [\"id\", \"title\", \"learning_objectives\"]\n        });\n        break;\n      case \"model\":\n        info = await ModelSearch.findOne({\n          where: {\n            id: item.foreign_key_id\n          },\n          attributes: [\"id\", \"name\", \"description\", \"image\"]\n        });\n        break;\n    }\n    item.dataValues.info = info;\n    return item;\n  }));\n  const totalPages = Math.ceil(count.length / limit);\n  return {\n    items: processedData,\n    totalItems: count.length,\n    itemCount: processedData.length,\n    itemsPerPage: limit,\n    totalPages,\n    currentPage: paged\n  };\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJXaXNobGlzdCIsInJlcXVpcmUiLCJvcEV4cCIsIkFpZWR1dGVjaFRvb2wiLCJvcEV4cFRlY2hUeXBlIiwic2VxdWVsaXplIiwiTGVzc29uU2FtcGxlIiwiTW9kZWxTZWFyY2giLCJPcGVyYXRpb25DYXNlIiwiT3BlcmF0aW9uVG9vbCIsIk9wZXJhdGlvbkdyYWRlIiwiT3BlcmF0aW9uVHlwZSIsIk9wZXJhdGlvblN1YmplY3QiLCJPcGVyYXRpb25Ub3BpYyIsIlVzZXIiLCJleHBvcnRzIiwiY3JlYXRlT3JEZWxldGVXaXNobGlzdCIsImZvcmVpZ25fa2V5X2lkIiwidXNlcl9pZCIsInR5cGUiLCJ3aXNobGlzdCIsImZpbmRPbmUiLCJ3aGVyZSIsImNyZWF0ZSIsImlkIiwiZGVzdHJveSIsImdldFdpc2hsaXN0cyIsInBhZ2VkIiwibGltaXQiLCJvZmZzZXQiLCJxdWVyeSIsImluY2x1ZGUiLCJtb2RlbCIsImFzIiwib3JkZXIiLCJjb3VudCIsInJvd3MiLCJmaW5kQW5kQ291bnRBbGwiLCJwcm9jZXNzZWREYXRhIiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsIml0ZW0iLCJkYXRhVmFsdWVzIiwiaW5mbyIsInNubyIsImF0dHJpYnV0ZXMiLCJ0b3RhbFBhZ2VzIiwiTWF0aCIsImNlaWwiLCJpdGVtcyIsInRvdGFsSXRlbXMiLCJpdGVtQ291bnQiLCJsZW5ndGgiLCJpdGVtc1BlclBhZ2UiLCJjdXJyZW50UGFnZSIsImdldENvbW11bml0eVdpc2hsaXN0cyIsImZuIiwiY29sIiwiZ3JvdXAiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy9zZXJ2aWNlcy8iLCJzb3VyY2VzIjpbIndpc2hsaXN0U2VydmljZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBXaXNobGlzdCA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvd2lzaGxpc3RNb2RlbFwiKTtcbmNvbnN0IHtcbiAgICBvcEV4cCxcbiAgICBBaWVkdXRlY2hUb29sLFxuICAgIG9wRXhwVGVjaFR5cGUsXG4gICAgc2VxdWVsaXplLFxuICAgIExlc3NvblNhbXBsZSxcbiAgICBNb2RlbFNlYXJjaCxcbiAgICBPcGVyYXRpb25DYXNlLFxuICAgIE9wZXJhdGlvblRvb2wsXG4gICAgT3BlcmF0aW9uR3JhZGUsXG4gICAgT3BlcmF0aW9uVHlwZSxcbiAgICBPcGVyYXRpb25TdWJqZWN0LFxuICAgIE9wZXJhdGlvblRvcGljLFxufSA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvc2VhcmNoTW9kZWxcIik7XG5jb25zdCBVc2VyID0gcmVxdWlyZShcIi4uL21vZGVscy91c2VkTW9kZWxcIik7XG5cbmV4cG9ydHMuY3JlYXRlT3JEZWxldGVXaXNobGlzdCA9IGFzeW5jIChmb3JlaWduX2tleV9pZCwgdXNlcl9pZCwgdHlwZSkgPT4ge1xuICAgIGxldCB3aXNobGlzdCA9IGF3YWl0IFdpc2hsaXN0LmZpbmRPbmUoe1xuICAgICAgICB3aGVyZTogeyBmb3JlaWduX2tleV9pZCwgdXNlcl9pZCwgdHlwZSB9LFxuICAgIH0pO1xuICAgIGlmICh3aXNobGlzdCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBXaXNobGlzdC5jcmVhdGUoe1xuICAgICAgICAgICAgaWQ6IG51bGwsXG4gICAgICAgICAgICB1c2VyX2lkLFxuICAgICAgICAgICAgZm9yZWlnbl9rZXlfaWQsXG4gICAgICAgICAgICB0eXBlLFxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCB3aXNobGlzdC5kZXN0cm95KCk7XG4gICAgICAgIHJldHVybiB3aXNobGlzdDtcbiAgICB9XG59O1xuZXhwb3J0cy5nZXRXaXNobGlzdHMgPSBhc3luYyAocGFnZWQsIGxpbWl0LCB1c2VyX2lkKSA9PiB7XG4gICAgY29uc3Qgb2Zmc2V0ID0gKHBhZ2VkIC0gMSkgKiBsaW1pdDtcbiAgICBsZXQgcXVlcnkgPSB7XG4gICAgICAgIGluY2x1ZGU6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBtb2RlbDogVXNlcixcbiAgICAgICAgICAgICAgICBhczogXCJ1c2VyXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBvcmRlcjogW1tcImNyZWF0ZWRfZGF0ZVwiLCBcIkRFU0NcIl1dLFxuICAgIH07XG5cbiAgICBpZiAocGFnZWQpIHtcbiAgICAgICAgcXVlcnlbXCJvZmZzZXRcIl0gPSBvZmZzZXQ7XG4gICAgfVxuICAgIGlmIChsaW1pdCkge1xuICAgICAgICBxdWVyeVtcImxpbWl0XCJdID0gbGltaXQ7XG4gICAgfVxuICAgIGlmICh1c2VyX2lkKSB7XG4gICAgICAgIHF1ZXJ5W1wid2hlcmVcIl0gPSB7IHVzZXJfaWQgfTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGNvdW50LCByb3dzIH0gPSBhd2FpdCBXaXNobGlzdC5maW5kQW5kQ291bnRBbGwocXVlcnkpO1xuXG4gICAgLy9jb252ZXJ0IHBkZiBsaW5rXG4gICAgY29uc3QgcHJvY2Vzc2VkRGF0YSA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICByb3dzLm1hcChhc3luYyAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgLy8gUHJvY2VzcyB0b29sXG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09IFwidG9vbFwiKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5kYXRhVmFsdWVzLmluZm8gPSBhd2FpdCBBaWVkdXRlY2hUb29sLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBzbm86IGl0ZW0uZm9yZWlnbl9rZXlfaWQgfSxcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogW1wic25vXCIsIFwibmFtZV9rclwiLCBcImRlc2NyaXB0aW9uXCIsIFwiY2FzZV9pbWdcIl0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBQcm9jZXNzIGxlc3NvblxuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PSBcImxlc3NvblwiKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5kYXRhVmFsdWVzLmluZm8gPSBhd2FpdCBMZXNzb25TYW1wbGUuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IHNubzogaXRlbS5mb3JlaWduX2tleV9pZCB9LFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBbXCJzbm9cIiwgXCJ0b3BpY1wiLCBcIm9iamVjdGl2ZVwiXSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFByb2Nlc3Mgb3BlcmF0aW9uXG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09IFwib3BlcmF0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICBpdGVtLmRhdGFWYWx1ZXMuaW5mbyA9IGF3YWl0IE9wZXJhdGlvbkNhc2UuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBpdGVtLmZvcmVpZ25fa2V5X2lkIH0sXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFtcImlkXCIsIFwidGl0bGVcIiwgXCJsZWFybmluZ19vYmplY3RpdmVzXCJdLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUHJvY2VzcyBtb2RlbFxuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PSBcIm1vZGVsXCIpIHtcbiAgICAgICAgICAgICAgICBpdGVtLmRhdGFWYWx1ZXMuaW5mbyA9IGF3YWl0IE1vZGVsU2VhcmNoLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogaXRlbS5mb3JlaWduX2tleV9pZCB9LFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBbXCJpZFwiLCBcIm5hbWVcIiwgXCJkZXNjcmlwdGlvblwiLCBcImltYWdlXCJdLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgY29uc3QgdG90YWxQYWdlcyA9IE1hdGguY2VpbChjb3VudCAvIGxpbWl0KTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGl0ZW1zOiBwcm9jZXNzZWREYXRhLFxuICAgICAgICB0b3RhbEl0ZW1zOiBjb3VudCxcbiAgICAgICAgaXRlbUNvdW50OiBwcm9jZXNzZWREYXRhLmxlbmd0aCxcbiAgICAgICAgaXRlbXNQZXJQYWdlOiBsaW1pdCxcbiAgICAgICAgdG90YWxQYWdlcyxcbiAgICAgICAgY3VycmVudFBhZ2U6IHBhZ2VkLFxuICAgIH07XG59O1xuZXhwb3J0cy5nZXRDb21tdW5pdHlXaXNobGlzdHMgPSBhc3luYyAocGFnZWQsIGxpbWl0KSA9PiB7XG4gICAgY29uc3Qgb2Zmc2V0ID0gKHBhZ2VkIC0gMSkgKiBsaW1pdDtcbiAgICBjb25zdCB7IGNvdW50LCByb3dzIH0gPSBhd2FpdCBXaXNobGlzdC5maW5kQW5kQ291bnRBbGwoe1xuICAgICAgICBhdHRyaWJ1dGVzOiBbXG4gICAgICAgICAgICBcInR5cGVcIixcbiAgICAgICAgICAgIFwiZm9yZWlnbl9rZXlfaWRcIixcbiAgICAgICAgICAgIFtzZXF1ZWxpemUuZm4oXCJDT1VOVFwiLCBzZXF1ZWxpemUuY29sKFwiaWRcIikpLCBcImNvdW50V2lzaGxpc3RzXCJdLFxuICAgICAgICBdLFxuICAgICAgICBncm91cDogW1widHlwZVwiLCBcImZvcmVpZ25fa2V5X2lkXCJdLFxuICAgICAgICBvcmRlcjogW1tzZXF1ZWxpemUuZm4oXCJNQVhcIiwgc2VxdWVsaXplLmNvbChcImNyZWF0ZWRfZGF0ZVwiKSksIFwiREVTQ1wiXV0sXG4gICAgICAgIG9mZnNldDogb2Zmc2V0LFxuICAgICAgICBsaW1pdDogbGltaXQsXG4gICAgfSk7XG5cbiAgICAvL2NvbnZlcnQgcGRmIGxpbmtcbiAgICBjb25zdCBwcm9jZXNzZWREYXRhID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIHJvd3MubWFwKGFzeW5jIChpdGVtKSA9PiB7XG4gICAgICAgICAgICBsZXQgaW5mbyA9IG51bGw7XG4gICAgICAgICAgICBzd2l0Y2ggKGl0ZW0udHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJ0b29sXCI6XG4gICAgICAgICAgICAgICAgICAgIGluZm8gPSBhd2FpdCBBaWVkdXRlY2hUb29sLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgc25vOiBpdGVtLmZvcmVpZ25fa2V5X2lkIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzbm9cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVfa3JcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRlc2NyaXB0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjYXNlX2ltZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJsZXNzb25cIjpcbiAgICAgICAgICAgICAgICAgICAgaW5mbyA9IGF3YWl0IExlc3NvblNhbXBsZS5maW5kT25lKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IHNubzogaXRlbS5mb3JlaWduX2tleV9pZCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogW1wic25vXCIsIFwidG9waWNcIiwgXCJvYmplY3RpdmVcIl0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwib3BlcmF0aW9uXCI6XG4gICAgICAgICAgICAgICAgICAgIGluZm8gPSBhd2FpdCBPcGVyYXRpb25DYXNlLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IGl0ZW0uZm9yZWlnbl9rZXlfaWQgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFtcImlkXCIsIFwidGl0bGVcIiwgXCJsZWFybmluZ19vYmplY3RpdmVzXCJdLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIm1vZGVsXCI6XG4gICAgICAgICAgICAgICAgICAgIGluZm8gPSBhd2FpdCBNb2RlbFNlYXJjaC5maW5kT25lKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBpdGVtLmZvcmVpZ25fa2V5X2lkIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBbXCJpZFwiLCBcIm5hbWVcIiwgXCJkZXNjcmlwdGlvblwiLCBcImltYWdlXCJdLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpdGVtLmRhdGFWYWx1ZXMuaW5mbyA9IGluZm87XG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgY29uc3QgdG90YWxQYWdlcyA9IE1hdGguY2VpbChjb3VudC5sZW5ndGggLyBsaW1pdCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBpdGVtczogcHJvY2Vzc2VkRGF0YSxcbiAgICAgICAgdG90YWxJdGVtczogY291bnQubGVuZ3RoLFxuICAgICAgICBpdGVtQ291bnQ6IHByb2Nlc3NlZERhdGEubGVuZ3RoLFxuICAgICAgICBpdGVtc1BlclBhZ2U6IGxpbWl0LFxuICAgICAgICB0b3RhbFBhZ2VzLFxuICAgICAgICBjdXJyZW50UGFnZTogcGFnZWQsXG4gICAgfTtcbn07XG4iXSwibWFwcGluZ3MiOiJBQUFB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","map":{"version":3,"names":["Wishlist","require","opExp","AiedutechTool","opExpTechType","sequelize","LessonSample","ModelSearch","OperationCase","OperationTool","OperationGrade","OperationType","OperationSubject","OperationTopic","User","exports","createOrDeleteWishlist","foreign_key_id","user_id","type","wishlist","findOne","where","create","id","destroy","getWishlists","paged","limit","offset","query","include","model","as","order","count","rows","findAndCountAll","processedData","Promise","all","map","item","dataValues","info","sno","attributes","totalPages","Math","ceil","items","totalItems","itemCount","length","itemsPerPage","currentPage","getCommunityWishlists","fn","col","group"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/","sources":["wishlistService.js"],"sourcesContent":["const Wishlist = require(\"../models/wishlistModel\");\nconst {\n    opExp,\n    AiedutechTool,\n    opExpTechType,\n    sequelize,\n    LessonSample,\n    ModelSearch,\n    OperationCase,\n    OperationTool,\n    OperationGrade,\n    OperationType,\n    OperationSubject,\n    OperationTopic,\n} = require(\"../models/searchModel\");\nconst User = require(\"../models/usedModel\");\n\nexports.createOrDeleteWishlist = async (foreign_key_id, user_id, type) => {\n    let wishlist = await Wishlist.findOne({\n        where: { foreign_key_id, user_id, type },\n    });\n    if (wishlist == null) {\n        return await Wishlist.create({\n            id: null,\n            user_id,\n            foreign_key_id,\n            type,\n        });\n    } else {\n        await wishlist.destroy();\n        return wishlist;\n    }\n};\nexports.getWishlists = async (paged, limit, user_id) => {\n    const offset = (paged - 1) * limit;\n    let query = {\n        include: [\n            {\n                model: User,\n                as: \"user\",\n            },\n        ],\n        order: [[\"created_date\", \"DESC\"]],\n    };\n\n    if (paged) {\n        query[\"offset\"] = offset;\n    }\n    if (limit) {\n        query[\"limit\"] = limit;\n    }\n    if (user_id) {\n        query[\"where\"] = { user_id };\n    }\n\n    const { count, rows } = await Wishlist.findAndCountAll(query);\n\n    //convert pdf link\n    const processedData = await Promise.all(\n        rows.map(async (item) => {\n            // Process tool\n            if (item.type == \"tool\") {\n                item.dataValues.info = await AiedutechTool.findOne({\n                    where: { sno: item.foreign_key_id },\n                    attributes: [\"sno\", \"name_kr\", \"description\", \"case_img\"],\n                });\n            }\n            // Process lesson\n            if (item.type == \"lesson\") {\n                item.dataValues.info = await LessonSample.findOne({\n                    where: { sno: item.foreign_key_id },\n                    attributes: [\"sno\", \"topic\", \"objective\"],\n                });\n            }\n            // Process operation\n            if (item.type == \"operation\") {\n                item.dataValues.info = await OperationCase.findOne({\n                    where: { id: item.foreign_key_id },\n                    attributes: [\"id\", \"title\", \"learning_objectives\"],\n                });\n            }\n            // Process model\n            if (item.type == \"model\") {\n                item.dataValues.info = await ModelSearch.findOne({\n                    where: { id: item.foreign_key_id },\n                    attributes: [\"id\", \"name\", \"description\", \"image\"],\n                });\n            }\n\n            return item;\n        })\n    );\n\n    const totalPages = Math.ceil(count / limit);\n\n    return {\n        items: processedData,\n        totalItems: count,\n        itemCount: processedData.length,\n        itemsPerPage: limit,\n        totalPages,\n        currentPage: paged,\n    };\n};\nexports.getCommunityWishlists = async (paged, limit) => {\n    const offset = (paged - 1) * limit;\n    const { count, rows } = await Wishlist.findAndCountAll({\n        attributes: [\n            \"type\",\n            \"foreign_key_id\",\n            [sequelize.fn(\"COUNT\", sequelize.col(\"id\")), \"countWishlists\"],\n        ],\n        group: [\"type\", \"foreign_key_id\"],\n        order: [[sequelize.fn(\"MAX\", sequelize.col(\"created_date\")), \"DESC\"]],\n        offset: offset,\n        limit: limit,\n    });\n\n    //convert pdf link\n    const processedData = await Promise.all(\n        rows.map(async (item) => {\n            let info = null;\n            switch (item.type) {\n                case \"tool\":\n                    info = await AiedutechTool.findOne({\n                        where: { sno: item.foreign_key_id },\n                        attributes: [\n                            \"sno\",\n                            \"name_kr\",\n                            \"description\",\n                            \"case_img\",\n                        ],\n                    });\n                    break;\n                case \"lesson\":\n                    info = await LessonSample.findOne({\n                        where: { sno: item.foreign_key_id },\n                        attributes: [\"sno\", \"topic\", \"objective\"],\n                    });\n                    break;\n                case \"operation\":\n                    info = await OperationCase.findOne({\n                        where: { id: item.foreign_key_id },\n                        attributes: [\"id\", \"title\", \"learning_objectives\"],\n                    });\n                    break;\n                case \"model\":\n                    info = await ModelSearch.findOne({\n                        where: { id: item.foreign_key_id },\n                        attributes: [\"id\", \"name\", \"description\", \"image\"],\n                    });\n                    break;\n            }\n            item.dataValues.info = info;\n            return item;\n        })\n    );\n\n    const totalPages = Math.ceil(count.length / limit);\n\n    return {\n        items: processedData,\n        totalItems: count.length,\n        itemCount: processedData.length,\n        itemsPerPage: limit,\n        totalPages,\n        currentPage: paged,\n    };\n};\n"],"mappings":"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","ignoreList":[]}},"mtime":1721642086286},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/wishlistModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const {\n  DataTypes,\n  Sequelize,\n  Op\n} = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = require(\"../models/usedModel\");\nconst Wishlist = sequelize.define(\"Wishlist\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  user_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"user_info\"\n      },\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  foreign_key_id: DataTypes.INTEGER,\n  type: {\n    type: DataTypes.ENUM(\"tool\", \"lesson\", \"operation\", \"model\"),\n    defaultValue: \"tool\"\n  },\n  created_date: DataTypes.DATE\n}, {\n  timestamps: false,\n  createdAt: \"created_at\",\n  tableName: \"wishlist\",\n  modelName: \"SurveyResult\"\n});\nWishlist.belongsTo(User, {\n  foreignKey: \"user_id\",\n  as: \"user\"\n});\nmodule.exports = Wishlist;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEYXRhVHlwZXMiLCJTZXF1ZWxpemUiLCJPcCIsInJlcXVpcmUiLCJzZXF1ZWxpemUiLCJVc2VyIiwiV2lzaGxpc3QiLCJkZWZpbmUiLCJpZCIsInR5cGUiLCJJTlRFR0VSIiwiYXV0b0luY3JlbWVudCIsInByaW1hcnlLZXkiLCJhbGxvd051bGwiLCJ1c2VyX2lkIiwicmVmZXJlbmNlcyIsIm1vZGVsIiwidGFibGVOYW1lIiwia2V5Iiwib25VcGRhdGUiLCJvbkRlbGV0ZSIsImZvcmVpZ25fa2V5X2lkIiwiRU5VTSIsImRlZmF1bHRWYWx1ZSIsImNyZWF0ZWRfZGF0ZSIsIkRBVEUiLCJ0aW1lc3RhbXBzIiwiY3JlYXRlZEF0IiwibW9kZWxOYW1lIiwiYmVsb25nc1RvIiwiZm9yZWlnbktleSIsImFzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL21vZGVscy8iLCJzb3VyY2VzIjpbIndpc2hsaXN0TW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBEYXRhVHlwZXMsIFNlcXVlbGl6ZSwgT3AgfSA9IHJlcXVpcmUoXCJzZXF1ZWxpemVcIik7XG5jb25zdCBzZXF1ZWxpemUgPSByZXF1aXJlKFwiLi4vY29uZmlnL2RhdGFiYXNlXCIpO1xuY29uc3QgVXNlciA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvdXNlZE1vZGVsXCIpO1xuY29uc3QgV2lzaGxpc3QgPSBzZXF1ZWxpemUuZGVmaW5lKFxuICAgIFwiV2lzaGxpc3RcIixcbiAgICB7XG4gICAgICAgIGlkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICB1c2VyX2lkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogeyB0YWJsZU5hbWU6IFwidXNlcl9pbmZvXCIgfSxcbiAgICAgICAgICAgICAgICBrZXk6IFwiaWRcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICAgICAgb25VcGRhdGU6IFwiY2FzY2FkZVwiLFxuICAgICAgICAgICAgb25EZWxldGU6IFwiY2FzY2FkZVwiLFxuICAgICAgICB9LFxuICAgICAgICBmb3JlaWduX2tleV9pZDogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5FTlVNKFwidG9vbFwiLCBcImxlc3NvblwiLCBcIm9wZXJhdGlvblwiLCBcIm1vZGVsXCIpLFxuICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBcInRvb2xcIixcbiAgICAgICAgfSxcbiAgICAgICAgY3JlYXRlZF9kYXRlOiBEYXRhVHlwZXMuREFURSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdGltZXN0YW1wczogZmFsc2UsXG4gICAgICAgIGNyZWF0ZWRBdDogXCJjcmVhdGVkX2F0XCIsXG4gICAgICAgIHRhYmxlTmFtZTogXCJ3aXNobGlzdFwiLFxuICAgICAgICBtb2RlbE5hbWU6IFwiU3VydmV5UmVzdWx0XCIsXG4gICAgfVxuKTtcblxuV2lzaGxpc3QuYmVsb25nc1RvKFVzZXIsIHtcbiAgICBmb3JlaWduS2V5OiBcInVzZXJfaWRcIixcbiAgICBhczogXCJ1c2VyXCIsXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBXaXNobGlzdDtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTTtFQUFFQSxTQUFTO0VBQUVDLFNBQVM7RUFBRUM7QUFBRyxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDekQsTUFBTUMsU0FBUyxHQUFHRCxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDL0MsTUFBTUUsSUFBSSxHQUFHRixPQUFPLENBQUMscUJBQXFCLENBQUM7QUFDM0MsTUFBTUcsUUFBUSxHQUFHRixTQUFTLENBQUNHLE1BQU0sQ0FDN0IsVUFBVSxFQUNWO0VBQ0lDLEVBQUUsRUFBRTtJQUNBQyxJQUFJLEVBQUVULFNBQVMsQ0FBQ1UsT0FBTztJQUN2QkMsYUFBYSxFQUFFLElBQUk7SUFDbkJDLFVBQVUsRUFBRSxJQUFJO0lBQ2hCQyxTQUFTLEVBQUU7RUFDZixDQUFDO0VBQ0RDLE9BQU8sRUFBRTtJQUNMTCxJQUFJLEVBQUVULFNBQVMsQ0FBQ1UsT0FBTztJQUN2QkssVUFBVSxFQUFFO01BQ1JDLEtBQUssRUFBRTtRQUFFQyxTQUFTLEVBQUU7TUFBWSxDQUFDO01BQ2pDQyxHQUFHLEVBQUU7SUFDVCxDQUFDO0lBQ0RMLFNBQVMsRUFBRSxLQUFLO0lBQ2hCTSxRQUFRLEVBQUUsU0FBUztJQUNuQkMsUUFBUSxFQUFFO0VBQ2QsQ0FBQztFQUNEQyxjQUFjLEVBQUVyQixTQUFTLENBQUNVLE9BQU87RUFDakNELElBQUksRUFBRTtJQUNGQSxJQUFJLEVBQUVULFNBQVMsQ0FBQ3NCLElBQUksQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRSxPQUFPLENBQUM7SUFDNURDLFlBQVksRUFBRTtFQUNsQixDQUFDO0VBQ0RDLFlBQVksRUFBRXhCLFNBQVMsQ0FBQ3lCO0FBQzVCLENBQUMsRUFDRDtFQUNJQyxVQUFVLEVBQUUsS0FBSztFQUNqQkMsU0FBUyxFQUFFLFlBQVk7RUFDdkJWLFNBQVMsRUFBRSxVQUFVO0VBQ3JCVyxTQUFTLEVBQUU7QUFDZixDQUNKLENBQUM7QUFFRHRCLFFBQVEsQ0FBQ3VCLFNBQVMsQ0FBQ3hCLElBQUksRUFBRTtFQUNyQnlCLFVBQVUsRUFBRSxTQUFTO0VBQ3JCQyxFQUFFLEVBQUU7QUFDUixDQUFDLENBQUM7QUFFRkMsTUFBTSxDQUFDQyxPQUFPLEdBQUczQixRQUFRIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["DataTypes","Sequelize","Op","require","sequelize","User","Wishlist","define","id","type","INTEGER","autoIncrement","primaryKey","allowNull","user_id","references","model","tableName","key","onUpdate","onDelete","foreign_key_id","ENUM","defaultValue","created_date","DATE","timestamps","createdAt","modelName","belongsTo","foreignKey","as","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/","sources":["wishlistModel.js"],"sourcesContent":["const { DataTypes, Sequelize, Op } = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = require(\"../models/usedModel\");\nconst Wishlist = sequelize.define(\n    \"Wishlist\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        user_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"user_info\" },\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        foreign_key_id: DataTypes.INTEGER,\n        type: {\n            type: DataTypes.ENUM(\"tool\", \"lesson\", \"operation\", \"model\"),\n            defaultValue: \"tool\",\n        },\n        created_date: DataTypes.DATE,\n    },\n    {\n        timestamps: false,\n        createdAt: \"created_at\",\n        tableName: \"wishlist\",\n        modelName: \"SurveyResult\",\n    }\n);\n\nWishlist.belongsTo(User, {\n    foreignKey: \"user_id\",\n    as: \"user\",\n});\n\nmodule.exports = Wishlist;\n"],"mappings":"AAAA,MAAM;EAAEA,SAAS;EAAEC,SAAS;EAAEC;AAAG,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACzD,MAAMC,SAAS,GAAGD,OAAO,CAAC,oBAAoB,CAAC;AAC/C,MAAME,IAAI,GAAGF,OAAO,CAAC,qBAAqB,CAAC;AAC3C,MAAMG,QAAQ,GAAGF,SAAS,CAACG,MAAM,CAC7B,UAAU,EACV;EACIC,EAAE,EAAE;IACAC,IAAI,EAAET,SAAS,CAACU,OAAO;IACvBC,aAAa,EAAE,IAAI;IACnBC,UAAU,EAAE,IAAI;IAChBC,SAAS,EAAE;EACf,CAAC;EACDC,OAAO,EAAE;IACLL,IAAI,EAAET,SAAS,CAACU,OAAO;IACvBK,UAAU,EAAE;MACRC,KAAK,EAAE;QAAEC,SAAS,EAAE;MAAY,CAAC;MACjCC,GAAG,EAAE;IACT,CAAC;IACDL,SAAS,EAAE,KAAK;IAChBM,QAAQ,EAAE,SAAS;IACnBC,QAAQ,EAAE;EACd,CAAC;EACDC,cAAc,EAAErB,SAAS,CAACU,OAAO;EACjCD,IAAI,EAAE;IACFA,IAAI,EAAET,SAAS,CAACsB,IAAI,CAAC,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,OAAO,CAAC;IAC5DC,YAAY,EAAE;EAClB,CAAC;EACDC,YAAY,EAAExB,SAAS,CAACyB;AAC5B,CAAC,EACD;EACIC,UAAU,EAAE,KAAK;EACjBC,SAAS,EAAE,YAAY;EACvBV,SAAS,EAAE,UAAU;EACrBW,SAAS,EAAE;AACf,CACJ,CAAC;AAEDtB,QAAQ,CAACuB,SAAS,CAACxB,IAAI,EAAE;EACrByB,UAAU,EAAE,SAAS;EACrBC,EAAE,EAAE;AACR,CAAC,CAAC;AAEFC,MAAM,CAACC,OAAO,GAAG3B,QAAQ","ignoreList":[]}},"mtime":1721357486743},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/searchModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const {\n  DataTypes\n} = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst {\n  Topic,\n  Subject,\n  Grade,\n  Type\n} = require(\"../models/designModel\");\nconst opExp = sequelize.define(\"opExp\", {\n  sno: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  name_kr: DataTypes.TEXT,\n  tool_id: DataTypes.INTEGER,\n  tech_id: DataTypes.INTEGER,\n  core_func: DataTypes.TEXT,\n  name_en: DataTypes.TEXT,\n  description: DataTypes.TEXT,\n  service_link: DataTypes.TEXT,\n  case_link: DataTypes.TEXT,\n  case_img: DataTypes.TEXT\n}, {\n  timestamps: false,\n  tableName: \"op_exp\",\n  modelName: \"opExp\"\n});\nconst opExpTechType = sequelize.define(\"op_exp_tech_type\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  exp_sno: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"op_exp\"\n      },\n      // provide table name\n      key: \"sno\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  type_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"tool_aiedutech\"\n      },\n      // provide table name\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  }\n}, {\n  timestamps: false,\n  tableName: \"op_exp_tech_type\",\n  modelName: \"opExpTechType\"\n});\nconst ClassTopic = sequelize.define(\"ClassTopic\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  name: DataTypes.TEXT,\n  created_at: DataTypes.TIME\n}, {\n  timestamps: false,\n  tableName: \"class_topic\",\n  modelName: \"ClassTopic\"\n});\nconst AiedutechTool = sequelize.define(\"AiedutechTool\", {\n  sno: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  name_kr: DataTypes.TEXT,\n  name_en: DataTypes.TEXT,\n  tool_id: DataTypes.NUMBER,\n  tech_id: DataTypes.NUMBER,\n  core_func: DataTypes.TEXT,\n  description: DataTypes.TEXT,\n  service_link: DataTypes.TEXT,\n  case_link: DataTypes.TEXT,\n  case_img: DataTypes.TEXT\n}, {\n  timestamps: false,\n  tableName: \"aiedutech_tool\",\n  modelName: \"AiedutechTool\"\n});\nconst LessonSample = sequelize.define(\"LessonSample\", {\n  sno: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  topic: DataTypes.TEXT,\n  topic_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"class_topic\"\n      },\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  time: DataTypes.TEXT,\n  difficulty: DataTypes.TEXT,\n  objective: DataTypes.TEXT,\n  achievement: DataTypes.TEXT,\n  source: DataTypes.TEXT,\n  pdf_link: DataTypes.TEXT\n}, {\n  timestamps: false,\n  tableName: \"class_case\",\n  modelName: \"LessonSample\"\n});\nLessonSample.belongsTo(ClassTopic, {\n  foreignKey: \"topic_id\",\n  as: \"classTopic\"\n});\nconst ModelSearch = sequelize.define(\"ModelSearch\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  name: DataTypes.TEXT,\n  type_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"class_type\"\n      },\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  subject_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"class_subject\"\n      },\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  grade: DataTypes.JSON,\n  source: DataTypes.TEXT,\n  pdf_link: DataTypes.TEXT,\n  description: DataTypes.TEXT,\n  apa: DataTypes.TEXT,\n  image: DataTypes.TEXT\n}, {\n  timestamps: false,\n  tableName: \"model\",\n  modelName: \"ModelSearch\"\n});\nModelSearch.belongsTo(Type, {\n  foreignKey: \"type_id\",\n  as: \"type\"\n});\nModelSearch.belongsTo(Subject, {\n  foreignKey: \"subject_id\",\n  as: \"subject\"\n});\n//Many-to-Many Association LessonSample, tool\n\nconst ClassCaseTool = sequelize.define(\"ClassCaseTool\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  case_sno: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: LessonSample,\n      key: \"sno\"\n    }\n  },\n  tool_sno: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: AiedutechTool,\n      key: \"sno\"\n    }\n  }\n}, {\n  tableName: \"class_case_tool\",\n  timestamps: false\n});\nLessonSample.belongsToMany(AiedutechTool, {\n  through: ClassCaseTool,\n  as: \"tools\",\n  foreignKey: \"case_sno\",\n  otherKey: \"tool_sno\"\n});\nAiedutechTool.belongsToMany(LessonSample, {\n  through: ClassCaseTool,\n  as: \"lessons\",\n  foreignKey: \"tool_sno\",\n  otherKey: \"case_sno\"\n});\n//OperationCase table\nconst OperationCase = sequelize.define(\"OperationCase\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  title: DataTypes.TEXT,\n  chasi: DataTypes.NUMBER,\n  difficulty: DataTypes.TEXT,\n  learning_objectives: DataTypes.TEXT,\n  achievement_criteria: DataTypes.TEXT,\n  source: DataTypes.TEXT,\n  pdf_link: DataTypes.TEXT\n}, {\n  timestamps: false,\n  tableName: \"operation_case\",\n  modelName: \"OperationCase\"\n});\n//\nconst OperationTopic = sequelize.define(\"OperationTopic\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  topic_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: Topic,\n      key: \"id\"\n    }\n  },\n  operation_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: OperationCase,\n      key: \"id\"\n    }\n  }\n}, {\n  tableName: \"operation_topic\",\n  timestamps: false\n});\nOperationCase.belongsToMany(Topic, {\n  through: OperationTopic,\n  as: \"topics\",\n  foreignKey: \"operation_id\",\n  otherKey: \"topic_id\"\n});\nTopic.belongsToMany(OperationCase, {\n  through: OperationTopic,\n  as: \"relatedOperationTopic\",\n  foreignKey: \"topic_id\",\n  otherKey: \"operation_id\"\n});\n// //\nconst OperationType = sequelize.define(\"OperationType\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  type_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: Type,\n      key: \"id\"\n    }\n  },\n  operation_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: OperationCase,\n      key: \"id\"\n    }\n  }\n}, {\n  tableName: \"operation_type\",\n  timestamps: false\n});\nOperationCase.belongsToMany(Type, {\n  through: OperationType,\n  as: \"types\",\n  foreignKey: \"operation_id\",\n  otherKey: \"type_id\"\n});\nType.belongsToMany(OperationCase, {\n  through: OperationType,\n  as: \"relatedOperationTypes\",\n  foreignKey: \"type_id\",\n  otherKey: \"operation_id\"\n});\n// //\n\nconst OperationSubject = sequelize.define(\"OperationSubject\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  subject_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: Subject,\n      key: \"id\"\n    }\n  },\n  operation_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: OperationCase,\n      key: \"id\"\n    }\n  }\n}, {\n  tableName: \"operation_subject\",\n  timestamps: false\n});\nOperationCase.belongsToMany(Subject, {\n  through: OperationSubject,\n  as: \"subjects\",\n  foreignKey: \"operation_id\",\n  otherKey: \"subject_id\"\n});\nSubject.belongsToMany(OperationCase, {\n  through: OperationSubject,\n  as: \"relatedOperationSubject\",\n  foreignKey: \"subject_id\",\n  otherKey: \"operation_id\"\n});\n\n//\n\nconst OperationGrade = sequelize.define(\"OperationGrade\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  grade_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: Grade,\n      key: \"id\"\n    }\n  },\n  operation_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: OperationCase,\n      key: \"id\"\n    }\n  }\n}, {\n  tableName: \"operation_grade\",\n  timestamps: false\n});\nOperationCase.belongsToMany(Grade, {\n  through: OperationGrade,\n  as: \"grades\",\n  foreignKey: \"operation_id\",\n  otherKey: \"grade_id\"\n});\nGrade.belongsToMany(OperationCase, {\n  through: OperationGrade,\n  as: \"relatedOperationGrade\",\n  foreignKey: \"grade_id\",\n  otherKey: \"operation_id\"\n});\n\n// //\nconst OperationTool = sequelize.define(\"OperationTool\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  tool_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: AiedutechTool,\n      key: \"id\"\n    }\n  },\n  operation_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: OperationCase,\n      key: \"id\"\n    }\n  }\n}, {\n  tableName: \"operation_tool\",\n  timestamps: false\n});\nOperationCase.belongsToMany(AiedutechTool, {\n  through: OperationTool,\n  as: \"tools\",\n  foreignKey: \"operation_id\",\n  otherKey: \"tool_id\"\n});\nAiedutechTool.belongsToMany(OperationCase, {\n  through: OperationTool,\n  as: \"relatedOperationTools\",\n  foreignKey: \"tool_id\",\n  otherKey: \"operation_id\"\n});\nmodule.exports = {\n  opExp,\n  AiedutechTool,\n  opExpTechType,\n  sequelize,\n  LessonSample,\n  ModelSearch,\n  OperationCase,\n  OperationTool,\n  OperationGrade,\n  OperationType,\n  OperationSubject,\n  OperationTopic\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEYXRhVHlwZXMiLCJyZXF1aXJlIiwic2VxdWVsaXplIiwiVG9waWMiLCJTdWJqZWN0IiwiR3JhZGUiLCJUeXBlIiwib3BFeHAiLCJkZWZpbmUiLCJzbm8iLCJ0eXBlIiwiSU5URUdFUiIsImF1dG9JbmNyZW1lbnQiLCJwcmltYXJ5S2V5IiwiYWxsb3dOdWxsIiwibmFtZV9rciIsIlRFWFQiLCJ0b29sX2lkIiwidGVjaF9pZCIsImNvcmVfZnVuYyIsIm5hbWVfZW4iLCJkZXNjcmlwdGlvbiIsInNlcnZpY2VfbGluayIsImNhc2VfbGluayIsImNhc2VfaW1nIiwidGltZXN0YW1wcyIsInRhYmxlTmFtZSIsIm1vZGVsTmFtZSIsIm9wRXhwVGVjaFR5cGUiLCJpZCIsImV4cF9zbm8iLCJyZWZlcmVuY2VzIiwibW9kZWwiLCJrZXkiLCJvblVwZGF0ZSIsIm9uRGVsZXRlIiwidHlwZV9pZCIsIkNsYXNzVG9waWMiLCJuYW1lIiwiY3JlYXRlZF9hdCIsIlRJTUUiLCJBaWVkdXRlY2hUb29sIiwiTlVNQkVSIiwiTGVzc29uU2FtcGxlIiwidG9waWMiLCJ0b3BpY19pZCIsInRpbWUiLCJkaWZmaWN1bHR5Iiwib2JqZWN0aXZlIiwiYWNoaWV2ZW1lbnQiLCJzb3VyY2UiLCJwZGZfbGluayIsImJlbG9uZ3NUbyIsImZvcmVpZ25LZXkiLCJhcyIsIk1vZGVsU2VhcmNoIiwic3ViamVjdF9pZCIsImdyYWRlIiwiSlNPTiIsImFwYSIsImltYWdlIiwiQ2xhc3NDYXNlVG9vbCIsImNhc2Vfc25vIiwidG9vbF9zbm8iLCJiZWxvbmdzVG9NYW55IiwidGhyb3VnaCIsIm90aGVyS2V5IiwiT3BlcmF0aW9uQ2FzZSIsInRpdGxlIiwiY2hhc2kiLCJsZWFybmluZ19vYmplY3RpdmVzIiwiYWNoaWV2ZW1lbnRfY3JpdGVyaWEiLCJPcGVyYXRpb25Ub3BpYyIsIm9wZXJhdGlvbl9pZCIsIk9wZXJhdGlvblR5cGUiLCJPcGVyYXRpb25TdWJqZWN0IiwiT3BlcmF0aW9uR3JhZGUiLCJncmFkZV9pZCIsIk9wZXJhdGlvblRvb2wiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdnVvbmdrbWEvaUNsb3VkIERyaXZlIChBcmNoaXZlKS9Eb2N1bWVudHMva2NuZC9zcmMvbW9kZWxzLyIsInNvdXJjZXMiOlsic2VhcmNoTW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBEYXRhVHlwZXMgfSA9IHJlcXVpcmUoXCJzZXF1ZWxpemVcIik7XG5cbmNvbnN0IHNlcXVlbGl6ZSA9IHJlcXVpcmUoXCIuLi9jb25maWcvZGF0YWJhc2VcIik7XG5cbmNvbnN0IHsgVG9waWMsIFN1YmplY3QsIEdyYWRlLCBUeXBlIH0gPSByZXF1aXJlKFwiLi4vbW9kZWxzL2Rlc2lnbk1vZGVsXCIpO1xuY29uc3Qgb3BFeHAgPSBzZXF1ZWxpemUuZGVmaW5lKFxuICAgIFwib3BFeHBcIixcbiAgICB7XG4gICAgICAgIHNubzoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgbmFtZV9rcjogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIHRvb2xfaWQ6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICB0ZWNoX2lkOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgY29yZV9mdW5jOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgbmFtZV9lbjogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgc2VydmljZV9saW5rOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgY2FzZV9saW5rOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgY2FzZV9pbWc6IERhdGFUeXBlcy5URVhULFxuICAgIH0sXG4gICAge1xuICAgICAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICAgICAgdGFibGVOYW1lOiBcIm9wX2V4cFwiLFxuICAgICAgICBtb2RlbE5hbWU6IFwib3BFeHBcIixcbiAgICB9XG4pO1xuXG5jb25zdCBvcEV4cFRlY2hUeXBlID0gc2VxdWVsaXplLmRlZmluZShcbiAgICBcIm9wX2V4cF90ZWNoX3R5cGVcIixcbiAgICB7XG4gICAgICAgIGlkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBleHBfc25vOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogeyB0YWJsZU5hbWU6IFwib3BfZXhwXCIgfSwgLy8gcHJvdmlkZSB0YWJsZSBuYW1lXG4gICAgICAgICAgICAgICAga2V5OiBcInNub1wiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgICAgICBvblVwZGF0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgICAgICBvbkRlbGV0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGVfaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiB7IHRhYmxlTmFtZTogXCJ0b29sX2FpZWR1dGVjaFwiIH0sIC8vIHByb3ZpZGUgdGFibGUgbmFtZVxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgICAgICBvblVwZGF0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgICAgICBvbkRlbGV0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgICAgICB0YWJsZU5hbWU6IFwib3BfZXhwX3RlY2hfdHlwZVwiLFxuICAgICAgICBtb2RlbE5hbWU6IFwib3BFeHBUZWNoVHlwZVwiLFxuICAgIH1cbik7XG5cbmNvbnN0IENsYXNzVG9waWMgPSBzZXF1ZWxpemUuZGVmaW5lKFxuICAgIFwiQ2xhc3NUb3BpY1wiLFxuICAgIHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIG5hbWU6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBjcmVhdGVkX2F0OiBEYXRhVHlwZXMuVElNRSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdGltZXN0YW1wczogZmFsc2UsXG4gICAgICAgIHRhYmxlTmFtZTogXCJjbGFzc190b3BpY1wiLFxuICAgICAgICBtb2RlbE5hbWU6IFwiQ2xhc3NUb3BpY1wiLFxuICAgIH1cbik7XG5cbmNvbnN0IEFpZWR1dGVjaFRvb2wgPSBzZXF1ZWxpemUuZGVmaW5lKFxuICAgIFwiQWllZHV0ZWNoVG9vbFwiLFxuICAgIHtcbiAgICAgICAgc25vOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBuYW1lX2tyOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgbmFtZV9lbjogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIHRvb2xfaWQ6IERhdGFUeXBlcy5OVU1CRVIsXG4gICAgICAgIHRlY2hfaWQ6IERhdGFUeXBlcy5OVU1CRVIsXG4gICAgICAgIGNvcmVfZnVuYzogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgc2VydmljZV9saW5rOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgY2FzZV9saW5rOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgY2FzZV9pbWc6IERhdGFUeXBlcy5URVhULFxuICAgIH0sXG4gICAge1xuICAgICAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICAgICAgdGFibGVOYW1lOiBcImFpZWR1dGVjaF90b29sXCIsXG4gICAgICAgIG1vZGVsTmFtZTogXCJBaWVkdXRlY2hUb29sXCIsXG4gICAgfVxuKTtcblxuY29uc3QgTGVzc29uU2FtcGxlID0gc2VxdWVsaXplLmRlZmluZShcbiAgICBcIkxlc3NvblNhbXBsZVwiLFxuICAgIHtcbiAgICAgICAgc25vOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICB0b3BpYzogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIHRvcGljX2lkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogeyB0YWJsZU5hbWU6IFwiY2xhc3NfdG9waWNcIiB9LFxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgICAgICBvblVwZGF0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgICAgICBvbkRlbGV0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgIH0sXG4gICAgICAgIHRpbWU6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBkaWZmaWN1bHR5OiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgb2JqZWN0aXZlOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgYWNoaWV2ZW1lbnQ6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBzb3VyY2U6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBwZGZfbGluazogRGF0YVR5cGVzLlRFWFQsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgICAgICB0YWJsZU5hbWU6IFwiY2xhc3NfY2FzZVwiLFxuICAgICAgICBtb2RlbE5hbWU6IFwiTGVzc29uU2FtcGxlXCIsXG4gICAgfVxuKTtcbkxlc3NvblNhbXBsZS5iZWxvbmdzVG8oQ2xhc3NUb3BpYywge1xuICAgIGZvcmVpZ25LZXk6IFwidG9waWNfaWRcIixcbiAgICBhczogXCJjbGFzc1RvcGljXCIsXG59KTtcblxuY29uc3QgTW9kZWxTZWFyY2ggPSBzZXF1ZWxpemUuZGVmaW5lKFxuICAgIFwiTW9kZWxTZWFyY2hcIixcbiAgICB7XG4gICAgICAgIGlkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBuYW1lOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgdHlwZV9pZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICAgICAgbW9kZWw6IHsgdGFibGVOYW1lOiBcImNsYXNzX3R5cGVcIiB9LFxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgICAgICBvblVwZGF0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgICAgICBvbkRlbGV0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgIH0sXG4gICAgICAgIHN1YmplY3RfaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiB7IHRhYmxlTmFtZTogXCJjbGFzc19zdWJqZWN0XCIgfSxcbiAgICAgICAgICAgICAgICBrZXk6IFwiaWRcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICAgICAgb25VcGRhdGU6IFwiY2FzY2FkZVwiLFxuICAgICAgICAgICAgb25EZWxldGU6IFwiY2FzY2FkZVwiLFxuICAgICAgICB9LFxuICAgICAgICBncmFkZTogRGF0YVR5cGVzLkpTT04sXG4gICAgICAgIHNvdXJjZTogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIHBkZl9saW5rOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgZGVzY3JpcHRpb246IERhdGFUeXBlcy5URVhULFxuICAgICAgICBhcGE6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBpbWFnZTogRGF0YVR5cGVzLlRFWFQsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgICAgICB0YWJsZU5hbWU6IFwibW9kZWxcIixcbiAgICAgICAgbW9kZWxOYW1lOiBcIk1vZGVsU2VhcmNoXCIsXG4gICAgfVxuKTtcbk1vZGVsU2VhcmNoLmJlbG9uZ3NUbyhUeXBlLCB7XG4gICAgZm9yZWlnbktleTogXCJ0eXBlX2lkXCIsXG4gICAgYXM6IFwidHlwZVwiLFxufSk7XG5Nb2RlbFNlYXJjaC5iZWxvbmdzVG8oU3ViamVjdCwge1xuICAgIGZvcmVpZ25LZXk6IFwic3ViamVjdF9pZFwiLFxuICAgIGFzOiBcInN1YmplY3RcIixcbn0pO1xuLy9NYW55LXRvLU1hbnkgQXNzb2NpYXRpb24gTGVzc29uU2FtcGxlLCB0b29sXG5cbmNvbnN0IENsYXNzQ2FzZVRvb2wgPSBzZXF1ZWxpemUuZGVmaW5lKFxuICAgIFwiQ2xhc3NDYXNlVG9vbFwiLFxuICAgIHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIGNhc2Vfc25vOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogTGVzc29uU2FtcGxlLFxuICAgICAgICAgICAgICAgIGtleTogXCJzbm9cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHRvb2xfc25vOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogQWllZHV0ZWNoVG9vbCxcbiAgICAgICAgICAgICAgICBrZXk6IFwic25vXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgICB0YWJsZU5hbWU6IFwiY2xhc3NfY2FzZV90b29sXCIsXG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgIH1cbik7XG5cbkxlc3NvblNhbXBsZS5iZWxvbmdzVG9NYW55KEFpZWR1dGVjaFRvb2wsIHtcbiAgICB0aHJvdWdoOiBDbGFzc0Nhc2VUb29sLFxuICAgIGFzOiBcInRvb2xzXCIsXG4gICAgZm9yZWlnbktleTogXCJjYXNlX3Nub1wiLFxuICAgIG90aGVyS2V5OiBcInRvb2xfc25vXCIsXG59KTtcbkFpZWR1dGVjaFRvb2wuYmVsb25nc1RvTWFueShMZXNzb25TYW1wbGUsIHtcbiAgICB0aHJvdWdoOiBDbGFzc0Nhc2VUb29sLFxuICAgIGFzOiBcImxlc3NvbnNcIixcbiAgICBmb3JlaWduS2V5OiBcInRvb2xfc25vXCIsXG4gICAgb3RoZXJLZXk6IFwiY2FzZV9zbm9cIixcbn0pO1xuLy9PcGVyYXRpb25DYXNlIHRhYmxlXG5jb25zdCBPcGVyYXRpb25DYXNlID0gc2VxdWVsaXplLmRlZmluZShcbiAgICBcIk9wZXJhdGlvbkNhc2VcIixcbiAgICB7XG4gICAgICAgIGlkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICB0aXRsZTogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIGNoYXNpOiBEYXRhVHlwZXMuTlVNQkVSLFxuICAgICAgICBkaWZmaWN1bHR5OiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgbGVhcm5pbmdfb2JqZWN0aXZlczogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIGFjaGlldmVtZW50X2NyaXRlcmlhOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgc291cmNlOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgcGRmX2xpbms6IERhdGFUeXBlcy5URVhULFxuICAgIH0sXG4gICAge1xuICAgICAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICAgICAgdGFibGVOYW1lOiBcIm9wZXJhdGlvbl9jYXNlXCIsXG4gICAgICAgIG1vZGVsTmFtZTogXCJPcGVyYXRpb25DYXNlXCIsXG4gICAgfVxuKTtcbi8vXG5jb25zdCBPcGVyYXRpb25Ub3BpYyA9IHNlcXVlbGl6ZS5kZWZpbmUoXG4gICAgXCJPcGVyYXRpb25Ub3BpY1wiLFxuICAgIHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIHRvcGljX2lkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogVG9waWMsXG4gICAgICAgICAgICAgICAga2V5OiBcImlkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBvcGVyYXRpb25faWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiBPcGVyYXRpb25DYXNlLFxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdGFibGVOYW1lOiBcIm9wZXJhdGlvbl90b3BpY1wiLFxuICAgICAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICB9XG4pO1xuXG5PcGVyYXRpb25DYXNlLmJlbG9uZ3NUb01hbnkoVG9waWMsIHtcbiAgICB0aHJvdWdoOiBPcGVyYXRpb25Ub3BpYyxcbiAgICBhczogXCJ0b3BpY3NcIixcbiAgICBmb3JlaWduS2V5OiBcIm9wZXJhdGlvbl9pZFwiLFxuICAgIG90aGVyS2V5OiBcInRvcGljX2lkXCIsXG59KTtcblRvcGljLmJlbG9uZ3NUb01hbnkoT3BlcmF0aW9uQ2FzZSwge1xuICAgIHRocm91Z2g6IE9wZXJhdGlvblRvcGljLFxuICAgIGFzOiBcInJlbGF0ZWRPcGVyYXRpb25Ub3BpY1wiLFxuICAgIGZvcmVpZ25LZXk6IFwidG9waWNfaWRcIixcbiAgICBvdGhlcktleTogXCJvcGVyYXRpb25faWRcIixcbn0pO1xuLy8gLy9cbmNvbnN0IE9wZXJhdGlvblR5cGUgPSBzZXF1ZWxpemUuZGVmaW5lKFxuICAgIFwiT3BlcmF0aW9uVHlwZVwiLFxuICAgIHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGVfaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiBUeXBlLFxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgb3BlcmF0aW9uX2lkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogT3BlcmF0aW9uQ2FzZSxcbiAgICAgICAgICAgICAgICBrZXk6IFwiaWRcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRhYmxlTmFtZTogXCJvcGVyYXRpb25fdHlwZVwiLFxuICAgICAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICB9XG4pO1xuT3BlcmF0aW9uQ2FzZS5iZWxvbmdzVG9NYW55KFR5cGUsIHtcbiAgICB0aHJvdWdoOiBPcGVyYXRpb25UeXBlLFxuICAgIGFzOiBcInR5cGVzXCIsXG4gICAgZm9yZWlnbktleTogXCJvcGVyYXRpb25faWRcIixcbiAgICBvdGhlcktleTogXCJ0eXBlX2lkXCIsXG59KTtcblR5cGUuYmVsb25nc1RvTWFueShPcGVyYXRpb25DYXNlLCB7XG4gICAgdGhyb3VnaDogT3BlcmF0aW9uVHlwZSxcbiAgICBhczogXCJyZWxhdGVkT3BlcmF0aW9uVHlwZXNcIixcbiAgICBmb3JlaWduS2V5OiBcInR5cGVfaWRcIixcbiAgICBvdGhlcktleTogXCJvcGVyYXRpb25faWRcIixcbn0pO1xuLy8gLy9cblxuY29uc3QgT3BlcmF0aW9uU3ViamVjdCA9IHNlcXVlbGl6ZS5kZWZpbmUoXG4gICAgXCJPcGVyYXRpb25TdWJqZWN0XCIsXG4gICAge1xuICAgICAgICBpZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgc3ViamVjdF9pZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICAgICAgbW9kZWw6IFN1YmplY3QsXG4gICAgICAgICAgICAgICAga2V5OiBcImlkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBvcGVyYXRpb25faWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiBPcGVyYXRpb25DYXNlLFxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdGFibGVOYW1lOiBcIm9wZXJhdGlvbl9zdWJqZWN0XCIsXG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgIH1cbik7XG5cbk9wZXJhdGlvbkNhc2UuYmVsb25nc1RvTWFueShTdWJqZWN0LCB7XG4gICAgdGhyb3VnaDogT3BlcmF0aW9uU3ViamVjdCxcbiAgICBhczogXCJzdWJqZWN0c1wiLFxuICAgIGZvcmVpZ25LZXk6IFwib3BlcmF0aW9uX2lkXCIsXG4gICAgb3RoZXJLZXk6IFwic3ViamVjdF9pZFwiLFxufSk7XG5TdWJqZWN0LmJlbG9uZ3NUb01hbnkoT3BlcmF0aW9uQ2FzZSwge1xuICAgIHRocm91Z2g6IE9wZXJhdGlvblN1YmplY3QsXG4gICAgYXM6IFwicmVsYXRlZE9wZXJhdGlvblN1YmplY3RcIixcbiAgICBmb3JlaWduS2V5OiBcInN1YmplY3RfaWRcIixcbiAgICBvdGhlcktleTogXCJvcGVyYXRpb25faWRcIixcbn0pO1xuXG4vL1xuXG5jb25zdCBPcGVyYXRpb25HcmFkZSA9IHNlcXVlbGl6ZS5kZWZpbmUoXG4gICAgXCJPcGVyYXRpb25HcmFkZVwiLFxuICAgIHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIGdyYWRlX2lkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogR3JhZGUsXG4gICAgICAgICAgICAgICAga2V5OiBcImlkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBvcGVyYXRpb25faWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiBPcGVyYXRpb25DYXNlLFxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdGFibGVOYW1lOiBcIm9wZXJhdGlvbl9ncmFkZVwiLFxuICAgICAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICB9XG4pO1xuXG5PcGVyYXRpb25DYXNlLmJlbG9uZ3NUb01hbnkoR3JhZGUsIHtcbiAgICB0aHJvdWdoOiBPcGVyYXRpb25HcmFkZSxcbiAgICBhczogXCJncmFkZXNcIixcbiAgICBmb3JlaWduS2V5OiBcIm9wZXJhdGlvbl9pZFwiLFxuICAgIG90aGVyS2V5OiBcImdyYWRlX2lkXCIsXG59KTtcbkdyYWRlLmJlbG9uZ3NUb01hbnkoT3BlcmF0aW9uQ2FzZSwge1xuICAgIHRocm91Z2g6IE9wZXJhdGlvbkdyYWRlLFxuICAgIGFzOiBcInJlbGF0ZWRPcGVyYXRpb25HcmFkZVwiLFxuICAgIGZvcmVpZ25LZXk6IFwiZ3JhZGVfaWRcIixcbiAgICBvdGhlcktleTogXCJvcGVyYXRpb25faWRcIixcbn0pO1xuXG4vLyAvL1xuY29uc3QgT3BlcmF0aW9uVG9vbCA9IHNlcXVlbGl6ZS5kZWZpbmUoXG4gICAgXCJPcGVyYXRpb25Ub29sXCIsXG4gICAge1xuICAgICAgICBpZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgdG9vbF9pZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICAgICAgbW9kZWw6IEFpZWR1dGVjaFRvb2wsXG4gICAgICAgICAgICAgICAga2V5OiBcImlkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBvcGVyYXRpb25faWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiBPcGVyYXRpb25DYXNlLFxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdGFibGVOYW1lOiBcIm9wZXJhdGlvbl90b29sXCIsXG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgIH1cbik7XG5cbk9wZXJhdGlvbkNhc2UuYmVsb25nc1RvTWFueShBaWVkdXRlY2hUb29sLCB7XG4gICAgdGhyb3VnaDogT3BlcmF0aW9uVG9vbCxcbiAgICBhczogXCJ0b29sc1wiLFxuICAgIGZvcmVpZ25LZXk6IFwib3BlcmF0aW9uX2lkXCIsXG4gICAgb3RoZXJLZXk6IFwidG9vbF9pZFwiLFxufSk7XG5BaWVkdXRlY2hUb29sLmJlbG9uZ3NUb01hbnkoT3BlcmF0aW9uQ2FzZSwge1xuICAgIHRocm91Z2g6IE9wZXJhdGlvblRvb2wsXG4gICAgYXM6IFwicmVsYXRlZE9wZXJhdGlvblRvb2xzXCIsXG4gICAgZm9yZWlnbktleTogXCJ0b29sX2lkXCIsXG4gICAgb3RoZXJLZXk6IFwib3BlcmF0aW9uX2lkXCIsXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgb3BFeHAsXG4gICAgQWllZHV0ZWNoVG9vbCxcbiAgICBvcEV4cFRlY2hUeXBlLFxuICAgIHNlcXVlbGl6ZSxcbiAgICBMZXNzb25TYW1wbGUsXG4gICAgTW9kZWxTZWFyY2gsXG4gICAgT3BlcmF0aW9uQ2FzZSxcbiAgICBPcGVyYXRpb25Ub29sLFxuICAgIE9wZXJhdGlvbkdyYWRlLFxuICAgIE9wZXJhdGlvblR5cGUsXG4gICAgT3BlcmF0aW9uU3ViamVjdCxcbiAgICBPcGVyYXRpb25Ub3BpYyxcbn07XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUE7QUFBVSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFFMUMsTUFBTUMsU0FBUyxHQUFHRCxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFFL0MsTUFBTTtFQUFFRSxLQUFLO0VBQUVDLE9BQU87RUFBRUMsS0FBSztFQUFFQztBQUFLLENBQUMsR0FBR0wsT0FBTyxDQUFDLHVCQUF1QixDQUFDO0FBQ3hFLE1BQU1NLEtBQUssR0FBR0wsU0FBUyxDQUFDTSxNQUFNLENBQzFCLE9BQU8sRUFDUDtFQUNJQyxHQUFHLEVBQUU7SUFDREMsSUFBSSxFQUFFVixTQUFTLENBQUNXLE9BQU87SUFDdkJDLGFBQWEsRUFBRSxJQUFJO0lBQ25CQyxVQUFVLEVBQUUsSUFBSTtJQUNoQkMsU0FBUyxFQUFFO0VBQ2YsQ0FBQztFQUNEQyxPQUFPLEVBQUVmLFNBQVMsQ0FBQ2dCLElBQUk7RUFDdkJDLE9BQU8sRUFBRWpCLFNBQVMsQ0FBQ1csT0FBTztFQUMxQk8sT0FBTyxFQUFFbEIsU0FBUyxDQUFDVyxPQUFPO0VBQzFCUSxTQUFTLEVBQUVuQixTQUFTLENBQUNnQixJQUFJO0VBQ3pCSSxPQUFPLEVBQUVwQixTQUFTLENBQUNnQixJQUFJO0VBQ3ZCSyxXQUFXLEVBQUVyQixTQUFTLENBQUNnQixJQUFJO0VBQzNCTSxZQUFZLEVBQUV0QixTQUFTLENBQUNnQixJQUFJO0VBQzVCTyxTQUFTLEVBQUV2QixTQUFTLENBQUNnQixJQUFJO0VBQ3pCUSxRQUFRLEVBQUV4QixTQUFTLENBQUNnQjtBQUN4QixDQUFDLEVBQ0Q7RUFDSVMsVUFBVSxFQUFFLEtBQUs7RUFDakJDLFNBQVMsRUFBRSxRQUFRO0VBQ25CQyxTQUFTLEVBQUU7QUFDZixDQUNKLENBQUM7QUFFRCxNQUFNQyxhQUFhLEdBQUcxQixTQUFTLENBQUNNLE1BQU0sQ0FD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","map":{"version":3,"names":["DataTypes","require","sequelize","Topic","Subject","Grade","Type","opExp","define","sno","type","INTEGER","autoIncrement","primaryKey","allowNull","name_kr","TEXT","tool_id","tech_id","core_func","name_en","description","service_link","case_link","case_img","timestamps","tableName","modelName","opExpTechType","id","exp_sno","references","model","key","onUpdate","onDelete","type_id","ClassTopic","name","created_at","TIME","AiedutechTool","NUMBER","LessonSample","topic","topic_id","time","difficulty","objective","achievement","source","pdf_link","belongsTo","foreignKey","as","ModelSearch","subject_id","grade","JSON","apa","image","ClassCaseTool","case_sno","tool_sno","belongsToMany","through","otherKey","OperationCase","title","chasi","learning_objectives","achievement_criteria","OperationTopic","operation_id","OperationType","OperationSubject","OperationGrade","grade_id","OperationTool","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/","sources":["searchModel.js"],"sourcesContent":["const { DataTypes } = require(\"sequelize\");\n\nconst sequelize = require(\"../config/database\");\n\nconst { Topic, Subject, Grade, Type } = require(\"../models/designModel\");\nconst opExp = sequelize.define(\n    \"opExp\",\n    {\n        sno: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        name_kr: DataTypes.TEXT,\n        tool_id: DataTypes.INTEGER,\n        tech_id: DataTypes.INTEGER,\n        core_func: DataTypes.TEXT,\n        name_en: DataTypes.TEXT,\n        description: DataTypes.TEXT,\n        service_link: DataTypes.TEXT,\n        case_link: DataTypes.TEXT,\n        case_img: DataTypes.TEXT,\n    },\n    {\n        timestamps: false,\n        tableName: \"op_exp\",\n        modelName: \"opExp\",\n    }\n);\n\nconst opExpTechType = sequelize.define(\n    \"op_exp_tech_type\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        exp_sno: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"op_exp\" }, // provide table name\n                key: \"sno\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        type_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"tool_aiedutech\" }, // provide table name\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n    },\n    {\n        timestamps: false,\n        tableName: \"op_exp_tech_type\",\n        modelName: \"opExpTechType\",\n    }\n);\n\nconst ClassTopic = sequelize.define(\n    \"ClassTopic\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        name: DataTypes.TEXT,\n        created_at: DataTypes.TIME,\n    },\n    {\n        timestamps: false,\n        tableName: \"class_topic\",\n        modelName: \"ClassTopic\",\n    }\n);\n\nconst AiedutechTool = sequelize.define(\n    \"AiedutechTool\",\n    {\n        sno: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        name_kr: DataTypes.TEXT,\n        name_en: DataTypes.TEXT,\n        tool_id: DataTypes.NUMBER,\n        tech_id: DataTypes.NUMBER,\n        core_func: DataTypes.TEXT,\n        description: DataTypes.TEXT,\n        service_link: DataTypes.TEXT,\n        case_link: DataTypes.TEXT,\n        case_img: DataTypes.TEXT,\n    },\n    {\n        timestamps: false,\n        tableName: \"aiedutech_tool\",\n        modelName: \"AiedutechTool\",\n    }\n);\n\nconst LessonSample = sequelize.define(\n    \"LessonSample\",\n    {\n        sno: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        topic: DataTypes.TEXT,\n        topic_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"class_topic\" },\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        time: DataTypes.TEXT,\n        difficulty: DataTypes.TEXT,\n        objective: DataTypes.TEXT,\n        achievement: DataTypes.TEXT,\n        source: DataTypes.TEXT,\n        pdf_link: DataTypes.TEXT,\n    },\n    {\n        timestamps: false,\n        tableName: \"class_case\",\n        modelName: \"LessonSample\",\n    }\n);\nLessonSample.belongsTo(ClassTopic, {\n    foreignKey: \"topic_id\",\n    as: \"classTopic\",\n});\n\nconst ModelSearch = sequelize.define(\n    \"ModelSearch\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        name: DataTypes.TEXT,\n        type_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"class_type\" },\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        subject_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"class_subject\" },\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        grade: DataTypes.JSON,\n        source: DataTypes.TEXT,\n        pdf_link: DataTypes.TEXT,\n        description: DataTypes.TEXT,\n        apa: DataTypes.TEXT,\n        image: DataTypes.TEXT,\n    },\n    {\n        timestamps: false,\n        tableName: \"model\",\n        modelName: \"ModelSearch\",\n    }\n);\nModelSearch.belongsTo(Type, {\n    foreignKey: \"type_id\",\n    as: \"type\",\n});\nModelSearch.belongsTo(Subject, {\n    foreignKey: \"subject_id\",\n    as: \"subject\",\n});\n//Many-to-Many Association LessonSample, tool\n\nconst ClassCaseTool = sequelize.define(\n    \"ClassCaseTool\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        case_sno: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: LessonSample,\n                key: \"sno\",\n            },\n        },\n        tool_sno: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: AiedutechTool,\n                key: \"sno\",\n            },\n        },\n    },\n    {\n        tableName: \"class_case_tool\",\n        timestamps: false,\n    }\n);\n\nLessonSample.belongsToMany(AiedutechTool, {\n    through: ClassCaseTool,\n    as: \"tools\",\n    foreignKey: \"case_sno\",\n    otherKey: \"tool_sno\",\n});\nAiedutechTool.belongsToMany(LessonSample, {\n    through: ClassCaseTool,\n    as: \"lessons\",\n    foreignKey: \"tool_sno\",\n    otherKey: \"case_sno\",\n});\n//OperationCase table\nconst OperationCase = sequelize.define(\n    \"OperationCase\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        title: DataTypes.TEXT,\n        chasi: DataTypes.NUMBER,\n        difficulty: DataTypes.TEXT,\n        learning_objectives: DataTypes.TEXT,\n        achievement_criteria: DataTypes.TEXT,\n        source: DataTypes.TEXT,\n        pdf_link: DataTypes.TEXT,\n    },\n    {\n        timestamps: false,\n        tableName: \"operation_case\",\n        modelName: \"OperationCase\",\n    }\n);\n//\nconst OperationTopic = sequelize.define(\n    \"OperationTopic\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        topic_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: Topic,\n                key: \"id\",\n            },\n        },\n        operation_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: OperationCase,\n                key: \"id\",\n            },\n        },\n    },\n    {\n        tableName: \"operation_topic\",\n        timestamps: false,\n    }\n);\n\nOperationCase.belongsToMany(Topic, {\n    through: OperationTopic,\n    as: \"topics\",\n    foreignKey: \"operation_id\",\n    otherKey: \"topic_id\",\n});\nTopic.belongsToMany(OperationCase, {\n    through: OperationTopic,\n    as: \"relatedOperationTopic\",\n    foreignKey: \"topic_id\",\n    otherKey: \"operation_id\",\n});\n// //\nconst OperationType = sequelize.define(\n    \"OperationType\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        type_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: Type,\n                key: \"id\",\n            },\n        },\n        operation_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: OperationCase,\n                key: \"id\",\n            },\n        },\n    },\n    {\n        tableName: \"operation_type\",\n        timestamps: false,\n    }\n);\nOperationCase.belongsToMany(Type, {\n    through: OperationType,\n    as: \"types\",\n    foreignKey: \"operation_id\",\n    otherKey: \"type_id\",\n});\nType.belongsToMany(OperationCase, {\n    through: OperationType,\n    as: \"relatedOperationTypes\",\n    foreignKey: \"type_id\",\n    otherKey: \"operation_id\",\n});\n// //\n\nconst OperationSubject = sequelize.define(\n    \"OperationSubject\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        subject_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: Subject,\n                key: \"id\",\n            },\n        },\n        operation_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: OperationCase,\n                key: \"id\",\n            },\n        },\n    },\n    {\n        tableName: \"operation_subject\",\n        timestamps: false,\n    }\n);\n\nOperationCase.belongsToMany(Subject, {\n    through: OperationSubject,\n    as: \"subjects\",\n    foreignKey: \"operation_id\",\n    otherKey: \"subject_id\",\n});\nSubject.belongsToMany(OperationCase, {\n    through: OperationSubject,\n    as: \"relatedOperationSubject\",\n    foreignKey: \"subject_id\",\n    otherKey: \"operation_id\",\n});\n\n//\n\nconst OperationGrade = sequelize.define(\n    \"OperationGrade\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        grade_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: Grade,\n                key: \"id\",\n            },\n        },\n        operation_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: OperationCase,\n                key: \"id\",\n            },\n        },\n    },\n    {\n        tableName: \"operation_grade\",\n        timestamps: false,\n    }\n);\n\nOperationCase.belongsToMany(Grade, {\n    through: OperationGrade,\n    as: \"grades\",\n    foreignKey: \"operation_id\",\n    otherKey: \"grade_id\",\n});\nGrade.belongsToMany(OperationCase, {\n    through: OperationGrade,\n    as: \"relatedOperationGrade\",\n    foreignKey: \"grade_id\",\n    otherKey: \"operation_id\",\n});\n\n// //\nconst OperationTool = sequelize.define(\n    \"OperationTool\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        tool_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: AiedutechTool,\n                key: \"id\",\n            },\n        },\n        operation_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: OperationCase,\n                key: \"id\",\n            },\n        },\n    },\n    {\n        tableName: \"operation_tool\",\n        timestamps: false,\n    }\n);\n\nOperationCase.belongsToMany(AiedutechTool, {\n    through: OperationTool,\n    as: \"tools\",\n    foreignKey: \"operation_id\",\n    otherKey: \"tool_id\",\n});\nAiedutechTool.belongsToMany(OperationCase, {\n    through: OperationTool,\n    as: \"relatedOperationTools\",\n    foreignKey: \"tool_id\",\n    otherKey: \"operation_id\",\n});\n\nmodule.exports = {\n    opExp,\n    AiedutechTool,\n    opExpTechType,\n    sequelize,\n    LessonSample,\n    ModelSearch,\n    OperationCase,\n    OperationTool,\n    OperationGrade,\n    OperationType,\n    OperationSubject,\n    OperationTopic,\n};\n"],"mappings":"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","ignoreList":[]}},"mtime":1721113078685},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/designModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const {\n  DataTypes\n} = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = require(\"../models/usedModel\");\nconst Design = sequelize.define(\"Design\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  user_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"user_info\"\n      },\n      // provide table name\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  topic_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"class_topic\"\n      },\n      // provide table name\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  subject_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"user_info\"\n      },\n      // provide table name\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  subject_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"user_info\"\n      },\n      // provide table name\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  time: DataTypes.INTEGER,\n  step1: DataTypes.TEXT,\n  step2: DataTypes.TEXT,\n  step3: DataTypes.TEXT,\n  step4: DataTypes.TEXT,\n  step5: DataTypes.TEXT,\n  difficulty: DataTypes.TEXT,\n  achievement: DataTypes.TEXT,\n  objective: DataTypes.TEXT,\n  topic_tp_nm: DataTypes.TEXT,\n  type_nm: DataTypes.TEXT,\n  subject_nm: DataTypes.TEXT,\n  grade_nm: DataTypes.TEXT,\n  tool_nm: DataTypes.TEXT,\n  date: DataTypes.DATE\n}, {\n  timestamps: true,\n  tableName: \"design\",\n  modelName: \"design\"\n});\nconst Topic = sequelize.define(\"Topic\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  name: DataTypes.STRING,\n  created_at: DataTypes.DATE\n}, {\n  timestamps: false,\n  tableName: \"class_topic\",\n  createdAt: \"created_at\",\n  modelName: \"Topic\"\n});\nconst Subject = sequelize.define(\"Subject\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  name: DataTypes.STRING,\n  created_at: DataTypes.DATE\n}, {\n  timestamps: false,\n  tableName: \"class_subject\",\n  createdAt: \"created_at\",\n  modelName: \"Subject\"\n});\nconst Grade = sequelize.define(\"Grade\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  name: DataTypes.STRING,\n  created_at: DataTypes.DATE\n}, {\n  timestamps: false,\n  tableName: \"class_grade\",\n  createdAt: \"created_at\",\n  modelName: \"Grade\"\n});\nconst Type = sequelize.define(\"Type\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  name: DataTypes.STRING,\n  created_at: DataTypes.DATE\n}, {\n  timestamps: false,\n  createdAt: \"created_at\",\n  tableName: \"class_type\",\n  modelName: \"Type\"\n});\nmodule.exports = {\n  Topic,\n  Subject,\n  Grade,\n  Type\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEYXRhVHlwZXMiLCJyZXF1aXJlIiwic2VxdWVsaXplIiwiVXNlciIsIkRlc2lnbiIsImRlZmluZSIsImlkIiwidHlwZSIsIklOVEVHRVIiLCJhdXRvSW5jcmVtZW50IiwicHJpbWFyeUtleSIsImFsbG93TnVsbCIsInVzZXJfaWQiLCJyZWZlcmVuY2VzIiwibW9kZWwiLCJ0YWJsZU5hbWUiLCJrZXkiLCJvblVwZGF0ZSIsIm9uRGVsZXRlIiwidG9waWNfaWQiLCJzdWJqZWN0X2lkIiwidGltZSIsInN0ZXAxIiwiVEVYVCIsInN0ZXAyIiwic3RlcDMiLCJzdGVwNCIsInN0ZXA1IiwiZGlmZmljdWx0eSIsImFjaGlldmVtZW50Iiwib2JqZWN0aXZlIiwidG9waWNfdHBfbm0iLCJ0eXBlX25tIiwic3ViamVjdF9ubSIsImdyYWRlX25tIiwidG9vbF9ubSIsImRhdGUiLCJEQVRFIiwidGltZXN0YW1wcyIsIm1vZGVsTmFtZSIsIlRvcGljIiwibmFtZSIsIlNUUklORyIsImNyZWF0ZWRfYXQiLCJjcmVhdGVkQXQiLCJTdWJqZWN0IiwiR3JhZGUiLCJUeXBlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL21vZGVscy8iLCJzb3VyY2VzIjpbImRlc2lnbk1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgRGF0YVR5cGVzIH0gPSByZXF1aXJlKFwic2VxdWVsaXplXCIpO1xuY29uc3Qgc2VxdWVsaXplID0gcmVxdWlyZShcIi4uL2NvbmZpZy9kYXRhYmFzZVwiKTtcbmNvbnN0IFVzZXIgPSByZXF1aXJlKFwiLi4vbW9kZWxzL3VzZWRNb2RlbFwiKTtcbmNvbnN0IERlc2lnbiA9IHNlcXVlbGl6ZS5kZWZpbmUoXG4gICAgXCJEZXNpZ25cIixcbiAgICB7XG4gICAgICAgIGlkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICB1c2VyX2lkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogeyB0YWJsZU5hbWU6IFwidXNlcl9pbmZvXCIgfSwgLy8gcHJvdmlkZSB0YWJsZSBuYW1lXG4gICAgICAgICAgICAgICAga2V5OiBcImlkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgICAgIG9uVXBkYXRlOiBcImNhc2NhZGVcIixcbiAgICAgICAgICAgIG9uRGVsZXRlOiBcImNhc2NhZGVcIixcbiAgICAgICAgfSxcbiAgICAgICAgdG9waWNfaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiB7IHRhYmxlTmFtZTogXCJjbGFzc190b3BpY1wiIH0sIC8vIHByb3ZpZGUgdGFibGUgbmFtZVxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgICAgICBvblVwZGF0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgICAgICBvbkRlbGV0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgIH0sXG4gICAgICAgIHN1YmplY3RfaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiB7IHRhYmxlTmFtZTogXCJ1c2VyX2luZm9cIiB9LCAvLyBwcm92aWRlIHRhYmxlIG5hbWVcbiAgICAgICAgICAgICAgICBrZXk6IFwiaWRcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICAgICAgb25VcGRhdGU6IFwiY2FzY2FkZVwiLFxuICAgICAgICAgICAgb25EZWxldGU6IFwiY2FzY2FkZVwiLFxuICAgICAgICB9LFxuICAgICAgICBzdWJqZWN0X2lkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogeyB0YWJsZU5hbWU6IFwidXNlcl9pbmZvXCIgfSwgLy8gcHJvdmlkZSB0YWJsZSBuYW1lXG4gICAgICAgICAgICAgICAga2V5OiBcImlkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgICAgIG9uVXBkYXRlOiBcImNhc2NhZGVcIixcbiAgICAgICAgICAgIG9uRGVsZXRlOiBcImNhc2NhZGVcIixcbiAgICAgICAgfSxcbiAgICAgICAgdGltZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIHN0ZXAxOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgc3RlcDI6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBzdGVwMzogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIHN0ZXA0OiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgc3RlcDU6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBkaWZmaWN1bHR5OiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgYWNoaWV2ZW1lbnQ6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBvYmplY3RpdmU6IERhdGFUeXBlcy5URVhULFxuICAgICAgICB0b3BpY190cF9ubTogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIHR5cGVfbm06IERhdGFUeXBlcy5URVhULFxuICAgICAgICBzdWJqZWN0X25tOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgZ3JhZGVfbm06IERhdGFUeXBlcy5URVhULFxuICAgICAgICB0b29sX25tOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgZGF0ZTogRGF0YVR5cGVzLkRBVEUsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IHRydWUsXG4gICAgICAgIHRhYmxlTmFtZTogXCJkZXNpZ25cIixcbiAgICAgICAgbW9kZWxOYW1lOiBcImRlc2lnblwiLFxuICAgIH1cbik7XG5cbmNvbnN0IFRvcGljID0gc2VxdWVsaXplLmRlZmluZShcbiAgICBcIlRvcGljXCIsXG4gICAge1xuICAgICAgICBpZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgbmFtZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgY3JlYXRlZF9hdDogRGF0YVR5cGVzLkRBVEUsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgICAgICB0YWJsZU5hbWU6IFwiY2xhc3NfdG9waWNcIixcbiAgICAgICAgY3JlYXRlZEF0OiBcImNyZWF0ZWRfYXRcIixcbiAgICAgICAgbW9kZWxOYW1lOiBcIlRvcGljXCIsXG4gICAgfVxuKTtcblxuY29uc3QgU3ViamVjdCA9IHNlcXVlbGl6ZS5kZWZpbmUoXG4gICAgXCJTdWJqZWN0XCIsXG4gICAge1xuICAgICAgICBpZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgbmFtZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgY3JlYXRlZF9hdDogRGF0YVR5cGVzLkRBVEUsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgICAgICB0YWJsZU5hbWU6IFwiY2xhc3Nfc3ViamVjdFwiLFxuICAgICAgICBjcmVhdGVkQXQ6IFwiY3JlYXRlZF9hdFwiLFxuICAgICAgICBtb2RlbE5hbWU6IFwiU3ViamVjdFwiLFxuICAgIH1cbik7XG5cbmNvbnN0IEdyYWRlID0gc2VxdWVsaXplLmRlZmluZShcbiAgICBcIkdyYWRlXCIsXG4gICAge1xuICAgICAgICBpZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgbmFtZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgY3JlYXRlZF9hdDogRGF0YVR5cGVzLkRBVEUsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgICAgICB0YWJsZU5hbWU6IFwiY2xhc3NfZ3JhZGVcIixcbiAgICAgICAgY3JlYXRlZEF0OiBcImNyZWF0ZWRfYXRcIixcbiAgICAgICAgbW9kZWxOYW1lOiBcIkdyYWRlXCIsXG4gICAgfVxuKTtcbmNvbnN0IFR5cGUgPSBzZXF1ZWxpemUuZGVmaW5lKFxuICAgIFwiVHlwZVwiLFxuICAgIHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIG5hbWU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGNyZWF0ZWRfYXQ6IERhdGFUeXBlcy5EQVRFLFxuICAgIH0sXG4gICAge1xuICAgICAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICAgICAgY3JlYXRlZEF0OiBcImNyZWF0ZWRfYXRcIixcbiAgICAgICAgdGFibGVOYW1lOiBcImNsYXNzX3R5cGVcIixcbiAgICAgICAgbW9kZWxOYW1lOiBcIlR5cGVcIixcbiAgICB9XG4pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHsgVG9waWMsIFN1YmplY3QsIEdyYWRlLCBUeXBlIH07XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUE7QUFBVSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDMUMsTUFBTUMsU0FBUyxHQUFHRCxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDL0MsTUFBTUUsSUFBSSxHQUFHRixPQUFPLENBQUMscUJBQXFCLENBQUM7QUFDM0MsTUFBTUcsTUFBTSxHQUFHRixTQUFTLENBQUNHLE1BQU0sQ0FDM0IsUUFBUSxFQUNSO0VBQ0lDLEVBQUUsRUFBRTtJQUNBQyxJQUFJLEVBQUVQLFNBQVMsQ0FBQ1EsT0FBTztJQUN2QkMsYUFBYSxFQUFFLElBQUk7SUFDbkJDLFVBQVUsRUFBRSxJQUFJO0lBQ2hCQyxTQUFTLEVBQUU7RUFDZixDQUFDO0VBQ0RDLE9BQU8sRUFBRTtJQUNMTCxJQUFJLEVBQUVQLFNBQVMsQ0FBQ1EsT0FBTztJQUN2QkssVUFBVSxFQUFFO01BQ1JDLEtBQUssRUFBRTtRQUFFQyxTQUFTLEVBQUU7TUFBWSxDQUFDO01BQUU7TUFDbkNDLEdBQUcsRUFBRTtJQUNULENBQUM7SUFDREwsU0FBUyxFQUFFLEtBQUs7SUFDaEJNLFFBQVEsRUFBRSxTQUFTO0lBQ25CQyxRQUFRLEVBQUU7RUFDZCxDQUFDO0VBQ0RDLFFBQVEsRUFBRTtJQUNOWixJQUFJLEVBQUVQLFNBQVMsQ0FBQ1EsT0FBTztJQUN2QkssVUFBVSxFQUFFO01BQ1JDLEtB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W119","map":{"version":3,"names":["DataTypes","require","sequelize","User","Design","define","id","type","INTEGER","autoIncrement","primaryKey","allowNull","user_id","references","model","tableName","key","onUpdate","onDelete","topic_id","subject_id","time","step1","TEXT","step2","step3","step4","step5","difficulty","achievement","objective","topic_tp_nm","type_nm","subject_nm","grade_nm","tool_nm","date","DATE","timestamps","modelName","Topic","name","STRING","created_at","createdAt","Subject","Grade","Type","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/","sources":["designModel.js"],"sourcesContent":["const { DataTypes } = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = require(\"../models/usedModel\");\nconst Design = sequelize.define(\n    \"Design\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        user_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"user_info\" }, // provide table name\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        topic_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"class_topic\" }, // provide table name\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        subject_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"user_info\" }, // provide table name\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        subject_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"user_info\" }, // provide table name\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        time: DataTypes.INTEGER,\n        step1: DataTypes.TEXT,\n        step2: DataTypes.TEXT,\n        step3: DataTypes.TEXT,\n        step4: DataTypes.TEXT,\n        step5: DataTypes.TEXT,\n        difficulty: DataTypes.TEXT,\n        achievement: DataTypes.TEXT,\n        objective: DataTypes.TEXT,\n        topic_tp_nm: DataTypes.TEXT,\n        type_nm: DataTypes.TEXT,\n        subject_nm: DataTypes.TEXT,\n        grade_nm: DataTypes.TEXT,\n        tool_nm: DataTypes.TEXT,\n        date: DataTypes.DATE,\n    },\n    {\n        timestamps: true,\n        tableName: \"design\",\n        modelName: \"design\",\n    }\n);\n\nconst Topic = sequelize.define(\n    \"Topic\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        name: DataTypes.STRING,\n        created_at: DataTypes.DATE,\n    },\n    {\n        timestamps: false,\n        tableName: \"class_topic\",\n        createdAt: \"created_at\",\n        modelName: \"Topic\",\n    }\n);\n\nconst Subject = sequelize.define(\n    \"Subject\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        name: DataTypes.STRING,\n        created_at: DataTypes.DATE,\n    },\n    {\n        timestamps: false,\n        tableName: \"class_subject\",\n        createdAt: \"created_at\",\n        modelName: \"Subject\",\n    }\n);\n\nconst Grade = sequelize.define(\n    \"Grade\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        name: DataTypes.STRING,\n        created_at: DataTypes.DATE,\n    },\n    {\n        timestamps: false,\n        tableName: \"class_grade\",\n        createdAt: \"created_at\",\n        modelName: \"Grade\",\n    }\n);\nconst Type = sequelize.define(\n    \"Type\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        name: DataTypes.STRING,\n        created_at: DataTypes.DATE,\n    },\n    {\n        timestamps: false,\n        createdAt: \"created_at\",\n        tableName: \"class_type\",\n        modelName: \"Type\",\n    }\n);\n\nmodule.exports = { Topic, Subject, Grade, Type };\n"],"mappings":"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","ignoreList":[]}},"mtime":1717901691249},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/messageFactory.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"class MessageFactory {\n  static success(data = {}, message = \"Success\") {\n    return {\n      status: \"success\",\n      message: message,\n      data: data\n    };\n  }\n  static error(errorMessage = \"An error occurred\") {\n    return {\n      status: \"error\",\n      message: errorMessage\n    };\n  }\n  static validationError(errors = []) {\n    return {\n      status: \"error\",\n      message: \"Validation errors\",\n      errors: errors\n    };\n  }\n}\nmodule.exports = MessageFactory;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNZXNzYWdlRmFjdG9yeSIsInN1Y2Nlc3MiLCJkYXRhIiwibWVzc2FnZSIsInN0YXR1cyIsImVycm9yIiwiZXJyb3JNZXNzYWdlIiwidmFsaWRhdGlvbkVycm9yIiwiZXJyb3JzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL3V0aWxzLyIsInNvdXJjZXMiOlsibWVzc2FnZUZhY3RvcnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgTWVzc2FnZUZhY3Rvcnkge1xuICAgIHN0YXRpYyBzdWNjZXNzKGRhdGEgPSB7fSwgbWVzc2FnZSA9IFwiU3VjY2Vzc1wiKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc3RhdGljIGVycm9yKGVycm9yTWVzc2FnZSA9IFwiQW4gZXJyb3Igb2NjdXJyZWRcIikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc3RhdGljIHZhbGlkYXRpb25FcnJvcihlcnJvcnMgPSBbXSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIlZhbGlkYXRpb24gZXJyb3JzXCIsXG4gICAgICAgICAgICBlcnJvcnM6IGVycm9ycyxcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gTWVzc2FnZUZhY3Rvcnk7XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLGNBQWMsQ0FBQztFQUNqQixPQUFPQyxPQUFPQSxDQUFDQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLEVBQUVDLE9BQU8sR0FBRyxTQUFTLEVBQUU7SUFDM0MsT0FBTztNQUNIQyxNQUFNLEVBQUUsU0FBUztNQUNqQkQsT0FBTyxFQUFFQSxPQUFPO01BQ2hCRCxJQUFJLEVBQUVBO0lBQ1YsQ0FBQztFQUNMO0VBRUEsT0FBT0csS0FBS0EsQ0FBQ0MsWUFBWSxHQUFHLG1CQUFtQixFQUFFO0lBQzdDLE9BQU87TUFDSEYsTUFBTSxFQUFFLE9BQU87TUFDZkQsT0FBTyxFQUFFRztJQUNiLENBQUM7RUFDTDtFQUVBLE9BQU9DLGVBQWVBLENBQUNDLE1BQU0sR0FBRyxFQUFFLEVBQUU7SUFDaEMsT0FBTztNQUNISixNQUFNLEVBQUUsT0FBTztNQUNmRCxPQUFPLEVBQUUsbUJBQW1CO01BQzVCSyxNQUFNLEVBQUVBO0lBQ1osQ0FBQztFQUNMO0FBQ0o7QUFFQUMsTUFBTSxDQUFDQyxPQUFPLEdBQUdWLGNBQWMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["MessageFactory","success","data","message","status","error","errorMessage","validationError","errors","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/","sources":["messageFactory.js"],"sourcesContent":["class MessageFactory {\n    static success(data = {}, message = \"Success\") {\n        return {\n            status: \"success\",\n            message: message,\n            data: data,\n        };\n    }\n\n    static error(errorMessage = \"An error occurred\") {\n        return {\n            status: \"error\",\n            message: errorMessage,\n        };\n    }\n\n    static validationError(errors = []) {\n        return {\n            status: \"error\",\n            message: \"Validation errors\",\n            errors: errors,\n        };\n    }\n}\n\nmodule.exports = MessageFactory;\n"],"mappings":"AAAA,MAAMA,cAAc,CAAC;EACjB,OAAOC,OAAOA,CAACC,IAAI,GAAG,CAAC,CAAC,EAAEC,OAAO,GAAG,SAAS,EAAE;IAC3C,OAAO;MACHC,MAAM,EAAE,SAAS;MACjBD,OAAO,EAAEA,OAAO;MAChBD,IAAI,EAAEA;IACV,CAAC;EACL;EAEA,OAAOG,KAAKA,CAACC,YAAY,GAAG,mBAAmB,EAAE;IAC7C,OAAO;MACHF,MAAM,EAAE,OAAO;MACfD,OAAO,EAAEG;IACb,CAAC;EACL;EAEA,OAAOC,eAAeA,CAACC,MAAM,GAAG,EAAE,EAAE;IAChC,OAAO;MACHJ,MAAM,EAAE,OAAO;MACfD,OAAO,EAAE,mBAAmB;MAC5BK,MAAM,EAAEA;IACZ,CAAC;EACL;AACJ;AAEAC,MAAM,CAACC,OAAO,GAAGV,cAAc","ignoreList":[]}},"mtime":1716172796367},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/removeValueNullObject.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"let removeEmpty = function (target) {\n  Object.keys(target).map(function (key) {\n    if (target[key] instanceof Object) {\n      if (!Object.keys(target[key]).length && typeof target[key].getMonth !== \"function\") {\n        delete target[key];\n      } else {\n        removeEmpty(target[key]);\n      }\n    } else if (target[key] === null) {\n      delete target[key];\n    }\n  });\n  return target;\n};\nmodule.exports = removeEmpty;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZW1vdmVFbXB0eSIsInRhcmdldCIsIk9iamVjdCIsImtleXMiLCJtYXAiLCJrZXkiLCJsZW5ndGgiLCJnZXRNb250aCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy91dGlscy8iLCJzb3VyY2VzIjpbInJlbW92ZVZhbHVlTnVsbE9iamVjdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgcmVtb3ZlRW1wdHkgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgT2JqZWN0LmtleXModGFyZ2V0KS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBpZiAodGFyZ2V0W2tleV0gaW5zdGFuY2VvZiBPYmplY3QpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhT2JqZWN0LmtleXModGFyZ2V0W2tleV0pLmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiB0YXJnZXRba2V5XS5nZXRNb250aCAhPT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGFyZ2V0W2tleV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlbW92ZUVtcHR5KHRhcmdldFtrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0YXJnZXRba2V5XSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgZGVsZXRlIHRhcmdldFtrZXldO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGFyZ2V0O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSByZW1vdmVFbXB0eTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBSUEsV0FBVyxHQUFHLFNBQUFBLENBQVVDLE1BQU0sRUFBRTtFQUNoQ0MsTUFBTSxDQUFDQyxJQUFJLENBQUNGLE1BQU0sQ0FBQyxDQUFDRyxHQUFHLENBQUMsVUFBVUMsR0FBRyxFQUFFO0lBQ25DLElBQUlKLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLFlBQVlILE1BQU0sRUFBRTtNQUMvQixJQUNJLENBQUNBLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDRixNQUFNLENBQUNJLEdBQUcsQ0FBQyxDQUFDLENBQUNDLE1BQU0sSUFDaEMsT0FBT0wsTUFBTSxDQUFDSSxHQUFHLENBQUMsQ0FBQ0UsUUFBUSxLQUFLLFVBQVUsRUFDNUM7UUFDRSxPQUFPTixNQUFNLENBQUNJLEdBQUcsQ0FBQztNQUN0QixDQUFDLE1BQU07UUFDSEwsV0FBVyxDQUFDQyxNQUFNLENBQUNJLEdBQUcsQ0FBQyxDQUFDO01BQzVCO0lBQ0osQ0FBQyxNQUFNLElBQUlKLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLEtBQUssSUFBSSxFQUFFO01BQzdCLE9BQU9KLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDO0lBQ3RCO0VBQ0osQ0FBQyxDQUFDO0VBRUYsT0FBT0osTUFBTTtBQUNqQixDQUFDO0FBRURPLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHVCxXQUFXIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["removeEmpty","target","Object","keys","map","key","length","getMonth","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/","sources":["removeValueNullObject.js"],"sourcesContent":["let removeEmpty = function (target) {\n    Object.keys(target).map(function (key) {\n        if (target[key] instanceof Object) {\n            if (\n                !Object.keys(target[key]).length &&\n                typeof target[key].getMonth !== \"function\"\n            ) {\n                delete target[key];\n            } else {\n                removeEmpty(target[key]);\n            }\n        } else if (target[key] === null) {\n            delete target[key];\n        }\n    });\n\n    return target;\n};\n\nmodule.exports = removeEmpty;\n"],"mappings":"AAAA,IAAIA,WAAW,GAAG,SAAAA,CAAUC,MAAM,EAAE;EAChCC,MAAM,CAACC,IAAI,CAACF,MAAM,CAAC,CAACG,GAAG,CAAC,UAAUC,GAAG,EAAE;IACnC,IAAIJ,MAAM,CAACI,GAAG,CAAC,YAAYH,MAAM,EAAE;MAC/B,IACI,CAACA,MAAM,CAACC,IAAI,CAACF,MAAM,CAACI,GAAG,CAAC,CAAC,CAACC,MAAM,IAChC,OAAOL,MAAM,CAACI,GAAG,CAAC,CAACE,QAAQ,KAAK,UAAU,EAC5C;QACE,OAAON,MAAM,CAACI,GAAG,CAAC;MACtB,CAAC,MAAM;QACHL,WAAW,CAACC,MAAM,CAACI,GAAG,CAAC,CAAC;MAC5B;IACJ,CAAC,MAAM,IAAIJ,MAAM,CAACI,GAAG,CAAC,KAAK,IAAI,EAAE;MAC7B,OAAOJ,MAAM,CAACI,GAAG,CAAC;IACtB;EACJ,CAAC,CAAC;EAEF,OAAOJ,MAAM;AACjB,CAAC;AAEDO,MAAM,CAACC,OAAO,GAAGT,WAAW","ignoreList":[]}},"mtime":1716199032075},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/enums/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/enums/wishlistTypeEnum.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const WishlistTypeEnum = {\n  TOOL: \"tool\",\n  LESSON: \"lesson\",\n  INTEGRATOR: \"Practitioner\",\n  OPERATION: \"operation\",\n  MODEL: \"model\"\n};\nmodule.exports = WishlistTypeEnum;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJXaXNobGlzdFR5cGVFbnVtIiwiVE9PTCIsIkxFU1NPTiIsIklOVEVHUkFUT1IiLCJPUEVSQVRJT04iLCJNT0RFTCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy91dGlscy9lbnVtcy8iLCJzb3VyY2VzIjpbIndpc2hsaXN0VHlwZUVudW0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgV2lzaGxpc3RUeXBlRW51bSA9IHtcbiAgICBUT09MOiBcInRvb2xcIixcbiAgICBMRVNTT046IFwibGVzc29uXCIsXG4gICAgSU5URUdSQVRPUjogXCJQcmFjdGl0aW9uZXJcIixcbiAgICBPUEVSQVRJT046IFwib3BlcmF0aW9uXCIsXG4gICAgTU9ERUw6IFwibW9kZWxcIixcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gV2lzaGxpc3RUeXBlRW51bTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsZ0JBQWdCLEdBQUc7RUFDckJDLElBQUksRUFBRSxNQUFNO0VBQ1pDLE1BQU0sRUFBRSxRQUFRO0VBQ2hCQyxVQUFVLEVBQUUsY0FBYztFQUMxQkMsU0FBUyxFQUFFLFdBQVc7RUFDdEJDLEtBQUssRUFBRTtBQUNYLENBQUM7QUFFREMsTUFBTSxDQUFDQyxPQUFPLEdBQUdQLGdCQUFnQiIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["WishlistTypeEnum","TOOL","LESSON","INTEGRATOR","OPERATION","MODEL","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/enums/","sources":["wishlistTypeEnum.js"],"sourcesContent":["const WishlistTypeEnum = {\n    TOOL: \"tool\",\n    LESSON: \"lesson\",\n    INTEGRATOR: \"Practitioner\",\n    OPERATION: \"operation\",\n    MODEL: \"model\",\n};\n\nmodule.exports = WishlistTypeEnum;\n"],"mappings":"AAAA,MAAMA,gBAAgB,GAAG;EACrBC,IAAI,EAAE,MAAM;EACZC,MAAM,EAAE,QAAQ;EAChBC,UAAU,EAAE,cAAc;EAC1BC,SAAS,EAAE,WAAW;EACtBC,KAAK,EAAE;AACX,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAGP,gBAAgB","ignoreList":[]}},"mtime":1721358079295},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/validations/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/validations/userValidation.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const Joi = require(\"joi\");\nconst login = {\n  body: Joi.object().keys({\n    email: Joi.string(),\n    password: Joi.string(),\n    social: Joi.number()\n  })\n};\nconst getUser = {\n  params: Joi.object().keys({\n    id: Joi.number()\n  })\n};\nconst create = {\n  body: Joi.object().keys({\n    email: Joi.string(),\n    name: Joi.string(),\n    profile: Joi.string(),\n    types: Joi.string(),\n    subjects: Joi.string(),\n    school: Joi.string(),\n    password: Joi.string(),\n    social: Joi.number()\n  })\n};\nmodule.exports = {\n  login,\n  getUser\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJKb2kiLCJyZXF1aXJlIiwibG9naW4iLCJib2R5Iiwib2JqZWN0Iiwia2V5cyIsImVtYWlsIiwic3RyaW5nIiwicGFzc3dvcmQiLCJzb2NpYWwiLCJudW1iZXIiLCJnZXRVc2VyIiwicGFyYW1zIiwiaWQiLCJjcmVhdGUiLCJuYW1lIiwicHJvZmlsZSIsInR5cGVzIiwic3ViamVjdHMiLCJzY2hvb2wiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdnVvbmdrbWEvaUNsb3VkIERyaXZlIChBcmNoaXZlKS9Eb2N1bWVudHMva2NuZC9zcmMvdmFsaWRhdGlvbnMvIiwic291cmNlcyI6WyJ1c2VyVmFsaWRhdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBKb2kgPSByZXF1aXJlKFwiam9pXCIpO1xuXG5jb25zdCBsb2dpbiA9IHtcbiAgICBib2R5OiBKb2kub2JqZWN0KCkua2V5cyh7XG4gICAgICAgIGVtYWlsOiBKb2kuc3RyaW5nKCksXG4gICAgICAgIHBhc3N3b3JkOiBKb2kuc3RyaW5nKCksXG4gICAgICAgIHNvY2lhbDogSm9pLm51bWJlcigpLFxuICAgIH0pLFxufTtcbmNvbnN0IGdldFVzZXIgPSB7XG4gICAgcGFyYW1zOiBKb2kub2JqZWN0KCkua2V5cyh7XG4gICAgICAgIGlkOiBKb2kubnVtYmVyKCksXG4gICAgfSksXG59O1xuY29uc3QgY3JlYXRlID0ge1xuICAgIGJvZHk6IEpvaS5vYmplY3QoKS5rZXlzKHtcbiAgICAgICAgZW1haWw6IEpvaS5zdHJpbmcoKSxcbiAgICAgICAgbmFtZTogSm9pLnN0cmluZygpLFxuICAgICAgICBwcm9maWxlOiBKb2kuc3RyaW5nKCksXG4gICAgICAgIHR5cGVzOiBKb2kuc3RyaW5nKCksXG4gICAgICAgIHN1YmplY3RzOiBKb2kuc3RyaW5nKCksXG4gICAgICAgIHNjaG9vbDogSm9pLnN0cmluZygpLFxuICAgICAgICBwYXNzd29yZDogSm9pLnN0cmluZygpLFxuICAgICAgICBzb2NpYWw6IEpvaS5udW1iZXIoKSxcbiAgICB9KSxcbn07XG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBsb2dpbixcbiAgICBnZXRVc2VyLFxufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsR0FBRyxHQUFHQyxPQUFPLENBQUMsS0FBSyxDQUFDO0FBRTFCLE1BQU1DLEtBQUssR0FBRztFQUNWQyxJQUFJLEVBQUVILEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO0lBQ3BCQyxLQUFLLEVBQUVOLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLENBQUM7SUFDbkJDLFFBQVEsRUFBRVIsR0FBRyxDQUFDTyxNQUFNLENBQUMsQ0FBQztJQUN0QkUsTUFBTSxFQUFFVCxHQUFHLENBQUNVLE1BQU0sQ0FBQztFQUN2QixDQUFDO0FBQ0wsQ0FBQztBQUNELE1BQU1DLE9BQU8sR0FBRztFQUNaQyxNQUFNLEVBQUVaLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO0lBQ3RCUSxFQUFFLEVBQUViLEdBQUcsQ0FBQ1UsTUFBTSxDQUFDO0VBQ25CLENBQUM7QUFDTCxDQUFDO0FBQ0QsTUFBTUksTUFBTSxHQUFHO0VBQ1hYLElBQUksRUFBRUgsR0FBRyxDQUFDSSxNQUFNLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUM7SUFDcEJDLEtBQUssRUFBRU4sR0FBRyxDQUFDTyxNQUFNLENBQUMsQ0FBQztJQUNuQlEsSUFBSSxFQUFFZixHQUFHLENBQUNPLE1BQU0sQ0FBQyxDQUFDO0lBQ2xCUyxPQUFPLEVBQUVoQixHQUFHLENBQUNPLE1BQU0sQ0FBQyxDQUFDO0lBQ3JCVSxLQUFLLEVBQUVqQixHQUFHLENBQUNPLE1BQU0sQ0FBQyxDQUFDO0lBQ25CVyxRQUFRLEVBQUVsQixHQUFHLENBQUNPLE1BQU0sQ0FBQyxDQUFDO0lBQ3RCWSxNQUFNLEVBQUVuQixHQUFHLENBQUNPLE1BQU0sQ0FBQyxDQUFDO0lBQ3BCQyxRQUFRLEVBQUVSLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLENBQUM7SUFDdEJFLE1BQU0sRUFBRVQsR0FBRyxDQUFDVSxNQUFNLENBQUM7RUFDdkIsQ0FBQztBQUNMLENBQUM7QUFDRFUsTUFBTSxDQUFDQyxPQUFPLEdBQUc7RUFDYm5CLEtBQUs7RUFDTFM7QUFDSixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["Joi","require","login","body","object","keys","email","string","password","social","number","getUser","params","id","create","name","profile","types","subjects","school","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/validations/","sources":["userValidation.js"],"sourcesContent":["const Joi = require(\"joi\");\n\nconst login = {\n    body: Joi.object().keys({\n        email: Joi.string(),\n        password: Joi.string(),\n        social: Joi.number(),\n    }),\n};\nconst getUser = {\n    params: Joi.object().keys({\n        id: Joi.number(),\n    }),\n};\nconst create = {\n    body: Joi.object().keys({\n        email: Joi.string(),\n        name: Joi.string(),\n        profile: Joi.string(),\n        types: Joi.string(),\n        subjects: Joi.string(),\n        school: Joi.string(),\n        password: Joi.string(),\n        social: Joi.number(),\n    }),\n};\nmodule.exports = {\n    login,\n    getUser,\n};\n"],"mappings":"AAAA,MAAMA,GAAG,GAAGC,OAAO,CAAC,KAAK,CAAC;AAE1B,MAAMC,KAAK,GAAG;EACVC,IAAI,EAAEH,GAAG,CAACI,MAAM,CAAC,CAAC,CAACC,IAAI,CAAC;IACpBC,KAAK,EAAEN,GAAG,CAACO,MAAM,CAAC,CAAC;IACnBC,QAAQ,EAAER,GAAG,CAACO,MAAM,CAAC,CAAC;IACtBE,MAAM,EAAET,GAAG,CAACU,MAAM,CAAC;EACvB,CAAC;AACL,CAAC;AACD,MAAMC,OAAO,GAAG;EACZC,MAAM,EAAEZ,GAAG,CAACI,MAAM,CAAC,CAAC,CAACC,IAAI,CAAC;IACtBQ,EAAE,EAAEb,GAAG,CAACU,MAAM,CAAC;EACnB,CAAC;AACL,CAAC;AACD,MAAMI,MAAM,GAAG;EACXX,IAAI,EAAEH,GAAG,CAACI,MAAM,CAAC,CAAC,CAACC,IAAI,CAAC;IACpBC,KAAK,EAAEN,GAAG,CAACO,MAAM,CAAC,CAAC;IACnBQ,IAAI,EAAEf,GAAG,CAACO,MAAM,CAAC,CAAC;IAClBS,OAAO,EAAEhB,GAAG,CAACO,MAAM,CAAC,CAAC;IACrBU,KAAK,EAAEjB,GAAG,CAACO,MAAM,CAAC,CAAC;IACnBW,QAAQ,EAAElB,GAAG,CAACO,MAAM,CAAC,CAAC;IACtBY,MAAM,EAAEnB,GAAG,CAACO,MAAM,CAAC,CAAC;IACpBC,QAAQ,EAAER,GAAG,CAACO,MAAM,CAAC,CAAC;IACtBE,MAAM,EAAET,GAAG,CAACU,MAAM,CAAC;EACvB,CAAC;AACL,CAAC;AACDU,MAAM,CAACC,OAAO,GAAG;EACbnB,KAAK;EACLS;AACJ,CAAC","ignoreList":[]}},"mtime":1716191006815},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/middlewares/validate.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const Joi = require(\"joi\");\nconst {\n  StatusCodes\n} = require(\"http-status-codes\");\nconst pick = require(\"../utils/pick\");\nconst ApiError = require(\"../utils/ApiError\");\nconst validate = schema => (req, res, next) => {\n  const validSchema = pick(schema, [\"params\", \"query\", \"body\"]);\n  const object = pick(req, Object.keys(validSchema));\n  const {\n    value,\n    error\n  } = Joi.compile(validSchema).prefs({\n    errors: {\n      label: \"key\"\n    },\n    abortEarly: false\n  }).validate(object);\n  if (error) {\n    const errorMessage = error.details.map(details => details.message).join(\", \");\n    return next(new ApiError(StatusCodes.BAD_REQUEST, errorMessage));\n  }\n  Object.assign(req, value);\n  return next();\n};\nmodule.exports = validate;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJKb2kiLCJyZXF1aXJlIiwiU3RhdHVzQ29kZXMiLCJwaWNrIiwiQXBpRXJyb3IiLCJ2YWxpZGF0ZSIsInNjaGVtYSIsInJlcSIsInJlcyIsIm5leHQiLCJ2YWxpZFNjaGVtYSIsIm9iamVjdCIsIk9iamVjdCIsImtleXMiLCJ2YWx1ZSIsImVycm9yIiwiY29tcGlsZSIsInByZWZzIiwiZXJyb3JzIiwibGFiZWwiLCJhYm9ydEVhcmx5IiwiZXJyb3JNZXNzYWdlIiwiZGV0YWlscyIsIm1hcCIsIm1lc3NhZ2UiLCJqb2luIiwiQkFEX1JFUVVFU1QiLCJhc3NpZ24iLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdnVvbmdrbWEvaUNsb3VkIERyaXZlIChBcmNoaXZlKS9Eb2N1bWVudHMva2NuZC9zcmMvbWlkZGxld2FyZXMvIiwic291cmNlcyI6WyJ2YWxpZGF0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBKb2kgPSByZXF1aXJlKFwiam9pXCIpO1xuY29uc3QgeyBTdGF0dXNDb2RlcyB9ID0gcmVxdWlyZShcImh0dHAtc3RhdHVzLWNvZGVzXCIpO1xuY29uc3QgcGljayA9IHJlcXVpcmUoXCIuLi91dGlscy9waWNrXCIpO1xuY29uc3QgQXBpRXJyb3IgPSByZXF1aXJlKFwiLi4vdXRpbHMvQXBpRXJyb3JcIik7XG5cbmNvbnN0IHZhbGlkYXRlID0gKHNjaGVtYSkgPT4gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgY29uc3QgdmFsaWRTY2hlbWEgPSBwaWNrKHNjaGVtYSwgW1wicGFyYW1zXCIsIFwicXVlcnlcIiwgXCJib2R5XCJdKTtcbiAgICBjb25zdCBvYmplY3QgPSBwaWNrKHJlcSwgT2JqZWN0LmtleXModmFsaWRTY2hlbWEpKTtcbiAgICBjb25zdCB7IHZhbHVlLCBlcnJvciB9ID0gSm9pLmNvbXBpbGUodmFsaWRTY2hlbWEpXG4gICAgICAgIC5wcmVmcyh7IGVycm9yczogeyBsYWJlbDogXCJrZXlcIiB9LCBhYm9ydEVhcmx5OiBmYWxzZSB9KVxuICAgICAgICAudmFsaWRhdGUob2JqZWN0KTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvci5kZXRhaWxzXG4gICAgICAgICAgICAubWFwKChkZXRhaWxzKSA9PiBkZXRhaWxzLm1lc3NhZ2UpXG4gICAgICAgICAgICAuam9pbihcIiwgXCIpO1xuICAgICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoU3RhdHVzQ29kZXMuQkFEX1JFUVVFU1QsIGVycm9yTWVzc2FnZSkpO1xuICAgIH1cbiAgICBPYmplY3QuYXNzaWduKHJlcSwgdmFsdWUpO1xuICAgIHJldHVybiBuZXh0KCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHZhbGlkYXRlO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxHQUFHLEdBQUdDLE9BQU8sQ0FBQyxLQUFLLENBQUM7QUFDMUIsTUFBTTtFQUFFQztBQUFZLENBQUMsR0FBR0QsT0FBTyxDQUFDLG1CQUFtQixDQUFDO0FBQ3BELE1BQU1FLElBQUksR0FBR0YsT0FBTyxDQUFDLGVBQWUsQ0FBQztBQUNyQyxNQUFNRyxRQUFRLEdBQUdILE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztBQUU3QyxNQUFNSSxRQUFRLEdBQUlDLE1BQU0sSUFBSyxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQzdDLE1BQU1DLFdBQVcsR0FBR1AsSUFBSSxDQUFDRyxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUUsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0VBQzdELE1BQU1LLE1BQU0sR0FBR1IsSUFBSSxDQUFDSSxHQUFHLEVBQUVLLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDSCxXQUFXLENBQUMsQ0FBQztFQUNsRCxNQUFNO0lBQUVJLEtBQUs7SUFBRUM7RUFBTSxDQUFDLEdBQUdmLEdBQUcsQ0FBQ2dCLE9BQU8sQ0FBQ04sV0FBVyxDQUFDLENBQzVDTyxLQUFLLENBQUM7SUFBRUMsTUFBTSxFQUFFO01BQUVDLEtBQUssRUFBRTtJQUFNLENBQUM7SUFBRUMsVUFBVSxFQUFFO0VBQU0sQ0FBQyxDQUFDLENBQ3REZixRQUFRLENBQUNNLE1BQU0sQ0FBQztFQUVyQixJQUFJSSxLQUFLLEVBQUU7SUFDUCxNQUFNTSxZQUFZLEdBQUdOLEtBQUssQ0FBQ08sT0FBTyxDQUM3QkMsR0FBRyxDQUFFRCxPQUFPLElBQUtBLE9BQU8sQ0FBQ0UsT0FBTyxDQUFDLENBQ2pDQyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ2YsT0FBT2hCLElBQUksQ0FBQyxJQUFJTCxRQUFRLENBQUNGLFdBQVcsQ0FBQ3dCLFdBQVcsRUFBRUwsWUFBWSxDQUFDLENBQUM7RUFDcEU7RUFDQVQsTUFBTSxDQUFDZSxNQUFNLENBQUNwQixHQUFHLEVBQUVPLEtBQUssQ0FBQztFQUN6QixPQUFPTCxJQUFJLENBQUMsQ0FBQztBQUNqQixDQUFDO0FBRURtQixNQUFNLENBQUNDLE9BQU8sR0FBR3hCLFFBQVEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["Joi","require","StatusCodes","pick","ApiError","validate","schema","req","res","next","validSchema","object","Object","keys","value","error","compile","prefs","errors","label","abortEarly","errorMessage","details","map","message","join","BAD_REQUEST","assign","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/middlewares/","sources":["validate.js"],"sourcesContent":["const Joi = require(\"joi\");\nconst { StatusCodes } = require(\"http-status-codes\");\nconst pick = require(\"../utils/pick\");\nconst ApiError = require(\"../utils/ApiError\");\n\nconst validate = (schema) => (req, res, next) => {\n    const validSchema = pick(schema, [\"params\", \"query\", \"body\"]);\n    const object = pick(req, Object.keys(validSchema));\n    const { value, error } = Joi.compile(validSchema)\n        .prefs({ errors: { label: \"key\" }, abortEarly: false })\n        .validate(object);\n\n    if (error) {\n        const errorMessage = error.details\n            .map((details) => details.message)\n            .join(\", \");\n        return next(new ApiError(StatusCodes.BAD_REQUEST, errorMessage));\n    }\n    Object.assign(req, value);\n    return next();\n};\n\nmodule.exports = validate;\n"],"mappings":"AAAA,MAAMA,GAAG,GAAGC,OAAO,CAAC,KAAK,CAAC;AAC1B,MAAM;EAAEC;AAAY,CAAC,GAAGD,OAAO,CAAC,mBAAmB,CAAC;AACpD,MAAME,IAAI,GAAGF,OAAO,CAAC,eAAe,CAAC;AACrC,MAAMG,QAAQ,GAAGH,OAAO,CAAC,mBAAmB,CAAC;AAE7C,MAAMI,QAAQ,GAAIC,MAAM,IAAK,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC7C,MAAMC,WAAW,GAAGP,IAAI,CAACG,MAAM,EAAE,CAAC,QAAQ,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;EAC7D,MAAMK,MAAM,GAAGR,IAAI,CAACI,GAAG,EAAEK,MAAM,CAACC,IAAI,CAACH,WAAW,CAAC,CAAC;EAClD,MAAM;IAAEI,KAAK;IAAEC;EAAM,CAAC,GAAGf,GAAG,CAACgB,OAAO,CAACN,WAAW,CAAC,CAC5CO,KAAK,CAAC;IAAEC,MAAM,EAAE;MAAEC,KAAK,EAAE;IAAM,CAAC;IAAEC,UAAU,EAAE;EAAM,CAAC,CAAC,CACtDf,QAAQ,CAACM,MAAM,CAAC;EAErB,IAAII,KAAK,EAAE;IACP,MAAMM,YAAY,GAAGN,KAAK,CAACO,OAAO,CAC7BC,GAAG,CAAED,OAAO,IAAKA,OAAO,CAACE,OAAO,CAAC,CACjCC,IAAI,CAAC,IAAI,CAAC;IACf,OAAOhB,IAAI,CAAC,IAAIL,QAAQ,CAACF,WAAW,CAACwB,WAAW,EAAEL,YAAY,CAAC,CAAC;EACpE;EACAT,MAAM,CAACe,MAAM,CAACpB,GAAG,EAAEO,KAAK,CAAC;EACzB,OAAOL,IAAI,CAAC,CAAC;AACjB,CAAC;AAEDmB,MAAM,CAACC,OAAO,GAAGxB,QAAQ","ignoreList":[]}},"mtime":1716024170400},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/pick.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"/**\n * Create an object composed of the picked object properties\n * @param {Object} object\n * @param {string[]} keys\n * @returns {Object}\n */\nconst pick = (object, keys) => {\n  return keys.reduce((obj, key) => {\n    if (object && Object.prototype.hasOwnProperty.call(object, key)) {\n      // eslint-disable-next-line no-param-reassign\n      obj[key] = object[key];\n    }\n    return obj;\n  }, {});\n};\nmodule.exports = pick;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaWNrIiwib2JqZWN0Iiwia2V5cyIsInJlZHVjZSIsIm9iaiIsImtleSIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy91dGlscy8iLCJzb3VyY2VzIjpbInBpY2suanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGUgYW4gb2JqZWN0IGNvbXBvc2VkIG9mIHRoZSBwaWNrZWQgb2JqZWN0IHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAqIEBwYXJhbSB7c3RyaW5nW119IGtleXNcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKi9cbmNvbnN0IHBpY2sgPSAob2JqZWN0LCBrZXlzKSA9PiB7XG4gIHJldHVybiBrZXlzLnJlZHVjZSgob2JqLCBrZXkpID0+IHtcbiAgICBpZiAob2JqZWN0ICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgb2JqW2tleV0gPSBvYmplY3Rba2V5XTtcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfSwge30pO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBwaWNrO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQSxJQUFJLEdBQUdBLENBQUNDLE1BQU0sRUFBRUMsSUFBSSxLQUFLO0VBQzdCLE9BQU9BLElBQUksQ0FBQ0MsTUFBTSxDQUFDLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0lBQy9CLElBQUlKLE1BQU0sSUFBSUssTUFBTSxDQUFDQyxTQUFTLENBQUNDLGNBQWMsQ0FBQ0MsSUFBSSxDQUFDUixNQUFNLEVBQUVJLEdBQUcsQ0FBQyxFQUFFO01BQy9EO01BQ0FELEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLEdBQUdKLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDO0lBQ3hCO0lBQ0EsT0FBT0QsR0FBRztFQUNaLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNSLENBQUM7QUFFRE0sTUFBTSxDQUFDQyxPQUFPLEdBQUdYLElBQUkiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["pick","object","keys","reduce","obj","key","Object","prototype","hasOwnProperty","call","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/","sources":["pick.js"],"sourcesContent":["/**\n * Create an object composed of the picked object properties\n * @param {Object} object\n * @param {string[]} keys\n * @returns {Object}\n */\nconst pick = (object, keys) => {\n  return keys.reduce((obj, key) => {\n    if (object && Object.prototype.hasOwnProperty.call(object, key)) {\n      // eslint-disable-next-line no-param-reassign\n      obj[key] = object[key];\n    }\n    return obj;\n  }, {});\n};\n\nmodule.exports = pick;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMA,IAAI,GAAGA,CAACC,MAAM,EAAEC,IAAI,KAAK;EAC7B,OAAOA,IAAI,CAACC,MAAM,CAAC,CAACC,GAAG,EAAEC,GAAG,KAAK;IAC/B,IAAIJ,MAAM,IAAIK,MAAM,CAACC,SAAS,CAACC,cAAc,CAACC,IAAI,CAACR,MAAM,EAAEI,GAAG,CAAC,EAAE;MAC/D;MACAD,GAAG,CAACC,GAAG,CAAC,GAAGJ,MAAM,CAACI,GAAG,CAAC;IACxB;IACA,OAAOD,GAAG;EACZ,CAAC,EAAE,CAAC,CAAC,CAAC;AACR,CAAC;AAEDM,MAAM,CAACC,OAAO,GAAGX,IAAI","ignoreList":[]}},"mtime":1691835647000},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/ApiError.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"class ApiError extends Error {\n  constructor(statusCode, message, isOperational = true, stack = '') {\n    super(message);\n    this.statusCode = statusCode;\n    this.isOperational = isOperational;\n    if (stack) {\n      this.stack = stack;\n    } else {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n}\nmodule.exports = ApiError;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBcGlFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJzdGF0dXNDb2RlIiwibWVzc2FnZSIsImlzT3BlcmF0aW9uYWwiLCJzdGFjayIsImNhcHR1cmVTdGFja1RyYWNlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL3V0aWxzLyIsInNvdXJjZXMiOlsiQXBpRXJyb3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQXBpRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKHN0YXR1c0NvZGUsIG1lc3NhZ2UsIGlzT3BlcmF0aW9uYWwgPSB0cnVlLCBzdGFjayA9ICcnKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcbiAgICB0aGlzLmlzT3BlcmF0aW9uYWwgPSBpc09wZXJhdGlvbmFsO1xuICAgIGlmIChzdGFjaykge1xuICAgICAgdGhpcy5zdGFjayA9IHN0YWNrO1xuICAgIH0gZWxzZSB7XG4gICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yKTtcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBBcGlFcnJvcjtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsUUFBUSxTQUFTQyxLQUFLLENBQUM7RUFDM0JDLFdBQVdBLENBQUNDLFVBQVUsRUFBRUMsT0FBTyxFQUFFQyxhQUFhLEdBQUcsSUFBSSxFQUFFQyxLQUFLLEdBQUcsRUFBRSxFQUFFO0lBQ2pFLEtBQUssQ0FBQ0YsT0FBTyxDQUFDO0lBQ2QsSUFBSSxDQUFDRCxVQUFVLEdBQUdBLFVBQVU7SUFDNUIsSUFBSSxDQUFDRSxhQUFhLEdBQUdBLGFBQWE7SUFDbEMsSUFBSUMsS0FBSyxFQUFFO01BQ1QsSUFBSSxDQUFDQSxLQUFLLEdBQUdBLEtBQUs7SUFDcEIsQ0FBQyxNQUFNO01BQ0xMLEtBQUssQ0FBQ00saUJBQWlCLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQ0wsV0FBVyxDQUFDO0lBQ2pEO0VBQ0Y7QUFDRjtBQUVBTSxNQUFNLENBQUNDLE9BQU8sR0FBR1QsUUFBUSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["ApiError","Error","constructor","statusCode","message","isOperational","stack","captureStackTrace","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/","sources":["ApiError.js"],"sourcesContent":["class ApiError extends Error {\n  constructor(statusCode, message, isOperational = true, stack = '') {\n    super(message);\n    this.statusCode = statusCode;\n    this.isOperational = isOperational;\n    if (stack) {\n      this.stack = stack;\n    } else {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n}\n\nmodule.exports = ApiError;\n"],"mappings":"AAAA,MAAMA,QAAQ,SAASC,KAAK,CAAC;EAC3BC,WAAWA,CAACC,UAAU,EAAEC,OAAO,EAAEC,aAAa,GAAG,IAAI,EAAEC,KAAK,GAAG,EAAE,EAAE;IACjE,KAAK,CAACF,OAAO,CAAC;IACd,IAAI,CAACD,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACE,aAAa,GAAGA,aAAa;IAClC,IAAIC,KAAK,EAAE;MACT,IAAI,CAACA,KAAK,GAAGA,KAAK;IACpB,CAAC,MAAM;MACLL,KAAK,CAACM,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAACL,WAAW,CAAC;IACjD;EACF;AACF;AAEAM,MAAM,CAACC,OAAO,GAAGT,QAAQ","ignoreList":[]}},"mtime":1691835647000},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/config/multer.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const multer = require(\"multer\");\nconst storage = multer.diskStorage({\n  destination: function (req, file, cb) {\n    cb(null, \"image/\");\n  },\n  filename: function (req, file, cb) {\n    const uniqueSuffix = Date.now() + \"-\" + Math.round(Math.random() * 1e9);\n    cb(null, file.fieldname + \"-\" + uniqueSuffix + \".\" + file.mimetype.split(\"/\")[1]);\n  }\n});\nupload = multer({\n  storage: storage,\n  limits: {\n    fileSize: 1024 * 1024 * 5\n  } // Giới hạn kích thước tệp là 5MB\n});\nmodule.exports = upload;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtdWx0ZXIiLCJyZXF1aXJlIiwic3RvcmFnZSIsImRpc2tTdG9yYWdlIiwiZGVzdGluYXRpb24iLCJyZXEiLCJmaWxlIiwiY2IiLCJmaWxlbmFtZSIsInVuaXF1ZVN1ZmZpeCIsIkRhdGUiLCJub3ciLCJNYXRoIiwicm91bmQiLCJyYW5kb20iLCJmaWVsZG5hbWUiLCJtaW1ldHlwZSIsInNwbGl0IiwidXBsb2FkIiwibGltaXRzIiwiZmlsZVNpemUiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdnVvbmdrbWEvaUNsb3VkIERyaXZlIChBcmNoaXZlKS9Eb2N1bWVudHMva2NuZC9zcmMvY29uZmlnLyIsInNvdXJjZXMiOlsibXVsdGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG11bHRlciA9IHJlcXVpcmUoXCJtdWx0ZXJcIik7XG5cbmNvbnN0IHN0b3JhZ2UgPSBtdWx0ZXIuZGlza1N0b3JhZ2Uoe1xuICAgIGRlc3RpbmF0aW9uOiBmdW5jdGlvbiAocmVxLCBmaWxlLCBjYikge1xuICAgICAgICBjYihudWxsLCBcImltYWdlL1wiKTtcbiAgICB9LFxuICAgIGZpbGVuYW1lOiBmdW5jdGlvbiAocmVxLCBmaWxlLCBjYikge1xuICAgICAgICBjb25zdCB1bmlxdWVTdWZmaXggPSBEYXRlLm5vdygpICsgXCItXCIgKyBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxZTkpO1xuICAgICAgICBjYihcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBmaWxlLmZpZWxkbmFtZSArXG4gICAgICAgICAgICAgICAgXCItXCIgK1xuICAgICAgICAgICAgICAgIHVuaXF1ZVN1ZmZpeCArXG4gICAgICAgICAgICAgICAgXCIuXCIgK1xuICAgICAgICAgICAgICAgIGZpbGUubWltZXR5cGUuc3BsaXQoXCIvXCIpWzFdXG4gICAgICAgICk7XG4gICAgfSxcbn0pO1xuXG51cGxvYWQgPSBtdWx0ZXIoe1xuICAgIHN0b3JhZ2U6IHN0b3JhZ2UsXG4gICAgbGltaXRzOiB7IGZpbGVTaXplOiAxMDI0ICogMTAyNCAqIDUgfSwgLy8gR2nhu5tpIGjhuqFuIGvDrWNoIHRoxrDhu5tjIHThu4dwIGzDoCA1TUJcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHVwbG9hZDtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsTUFBTSxHQUFHQyxPQUFPLENBQUMsUUFBUSxDQUFDO0FBRWhDLE1BQU1DLE9BQU8sR0FBR0YsTUFBTSxDQUFDRyxXQUFXLENBQUM7RUFDL0JDLFdBQVcsRUFBRSxTQUFBQSxDQUFVQyxHQUFHLEVBQUVDLElBQUksRUFBRUMsRUFBRSxFQUFFO0lBQ2xDQSxFQUFFLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQztFQUN0QixDQUFDO0VBQ0RDLFFBQVEsRUFBRSxTQUFBQSxDQUFVSCxHQUFHLEVBQUVDLElBQUksRUFBRUMsRUFBRSxFQUFFO0lBQy9CLE1BQU1FLFlBQVksR0FBR0MsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBR0MsSUFBSSxDQUFDQyxLQUFLLENBQUNELElBQUksQ0FBQ0UsTUFBTSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7SUFDdkVQLEVBQUUsQ0FDRSxJQUFJLEVBQ0pELElBQUksQ0FBQ1MsU0FBUyxHQUNWLEdBQUcsR0FDSE4sWUFBWSxHQUNaLEdBQUcsR0FDSEgsSUFBSSxDQUFDVSxRQUFRLENBQUNDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQ2xDLENBQUM7RUFDTDtBQUNKLENBQUMsQ0FBQztBQUVGQyxNQUFNLEdBQUdsQixNQUFNLENBQUM7RUFDWkUsT0FBTyxFQUFFQSxPQUFPO0VBQ2hCaUIsTUFBTSxFQUFFO0lBQUVDLFFBQVEsRUFBRSxJQUFJLEdBQUcsSUFBSSxHQUFHO0VBQUUsQ0FBQyxDQUFFO0FBQzNDLENBQUMsQ0FBQztBQUVGQyxNQUFNLENBQUNDLE9BQU8sR0FBR0osTUFBTSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["multer","require","storage","diskStorage","destination","req","file","cb","filename","uniqueSuffix","Date","now","Math","round","random","fieldname","mimetype","split","upload","limits","fileSize","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/config/","sources":["multer.js"],"sourcesContent":["const multer = require(\"multer\");\n\nconst storage = multer.diskStorage({\n    destination: function (req, file, cb) {\n        cb(null, \"image/\");\n    },\n    filename: function (req, file, cb) {\n        const uniqueSuffix = Date.now() + \"-\" + Math.round(Math.random() * 1e9);\n        cb(\n            null,\n            file.fieldname +\n                \"-\" +\n                uniqueSuffix +\n                \".\" +\n                file.mimetype.split(\"/\")[1]\n        );\n    },\n});\n\nupload = multer({\n    storage: storage,\n    limits: { fileSize: 1024 * 1024 * 5 }, // Giới hạn kích thước tệp là 5MB\n});\n\nmodule.exports = upload;\n"],"mappings":"AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAEhC,MAAMC,OAAO,GAAGF,MAAM,CAACG,WAAW,CAAC;EAC/BC,WAAW,EAAE,SAAAA,CAAUC,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAE;IAClCA,EAAE,CAAC,IAAI,EAAE,QAAQ,CAAC;EACtB,CAAC;EACDC,QAAQ,EAAE,SAAAA,CAAUH,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAE;IAC/B,MAAME,YAAY,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,GAAG,CAAC;IACvEP,EAAE,CACE,IAAI,EACJD,IAAI,CAACS,SAAS,GACV,GAAG,GACHN,YAAY,GACZ,GAAG,GACHH,IAAI,CAACU,QAAQ,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAClC,CAAC;EACL;AACJ,CAAC,CAAC;AAEFC,MAAM,GAAGlB,MAAM,CAAC;EACZE,OAAO,EAAEA,OAAO;EAChBiB,MAAM,EAAE;IAAEC,QAAQ,EAAE,IAAI,GAAG,IAAI,GAAG;EAAE,CAAC,CAAE;AAC3C,CAAC,CAAC;AAEFC,MAAM,CAACC,OAAO,GAAGJ,MAAM","ignoreList":[]}},"mtime":1719196491326},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/communityRoute.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const express = require(\"express\");\nconst communityController = require(\"../../controllers/communityController\");\nconst communityValidation = require(\"../../validations/communityValidation\");\nconst validate = require(\"../../middlewares/validate\");\nconst {\n  multer,\n  upload\n} = require(\"../../config/uploadCommunityMulter\");\nconst {\n  StatusCodes\n} = require(\"http-status-codes\");\nconst MessageFactory = require(\"../../utils/messageFactory\");\nconst router = express.Router();\nrouter.route(\"/api/community\").get(validate(), communityController.getAll).post(validate(), (req, res, next) => {\n  upload.array(\"attachments\", 5)(req, res, function (err) {\n    if (err instanceof multer.MulterError) {\n      return res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(err.message));\n    } else if (err) {\n      return res.status(500).json({\n        message: \"An unknown error occurred during file upload\"\n      });\n    }\n    next();\n  });\n}, communityController.create);\nrouter.route(\"/api/community/wishlists\").get(validate(), communityController.getCommunityWishlists);\nrouter.route(\"/api/community/:id\").post(validate(), communityController.updateSuggestionOrViewers).put(validate(), (req, res, next) => {\n  upload.array(\"attachments\", 5)(req, res, function (err) {\n    if (err instanceof multer.MulterError) {\n      return res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(err.message));\n    } else if (err) {\n      return res.status(500).json({\n        message: \"An unknown error occurred during file upload\"\n      });\n    }\n    next();\n  });\n}, communityController.update).get(validate(communityValidation.get), communityController.getById);\nrouter.route(\"/api/community/list/:type\").get(validate(), communityController.getAllWithType);\nmodule.exports = router;\n\n/**\n * @swagger\n * tags:\n *   name: Users\n *   description: User management and retrieval\n */\n\n/**\n * @swagger\n * /users:\n *   post:\n *     summary: Create a user\n *     description: Only admins can create other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - name\n *               - email\n *               - password\n *               - role\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *               role:\n *                  type: string\n *                  enum: [user, admin]\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *               role: user\n *     responses:\n *       \"201\":\n *         description: Created\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *\n *   get:\n *     summary: Get all users\n *     description: Only admins can retrieve all users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: query\n *         name: name\n *         schema:\n *           type: string\n *         description: User name\n *       - in: query\n *         name: role\n *         schema:\n *           type: string\n *         description: User role\n *       - in: query\n *         name: sortBy\n *         schema:\n *           type: string\n *         description: sort by query in the form of field:desc/asc (ex. name:asc)\n *       - in: query\n *         name: limit\n *         schema:\n *           type: integer\n *           minimum: 1\n *         default: 10\n *         description: Maximum number of users\n *       - in: query\n *         name: page\n *         schema:\n *           type: integer\n *           minimum: 1\n *           default: 1\n *         description: Page number\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 results:\n *                   type: array\n *                   items:\n *                     $ref: '#/components/schemas/User'\n *                 page:\n *                   type: integer\n *                   example: 1\n *                 limit:\n *                   type: integer\n *                   example: 10\n *                 totalPages:\n *                   type: integer\n *                   example: 1\n *                 totalResults:\n *                   type: integer\n *                   example: 1\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n */\n\n/**\n * @swagger\n * /users/{id}:\n *   get:\n *     summary: Get a user\n *     description: Logged in users can fetch only their own user information. Only admins can fetch other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   patch:\n *     summary: Update a user\n *     description: Logged in users can only update their own information. Only admins can update other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   delete:\n *     summary: Delete a user\n *     description: Logged in users can delete only themselves. Only admins can delete other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: No content\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n */\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNvbW11bml0eUNvbnRyb2xsZXIiLCJjb21tdW5pdHlWYWxpZGF0aW9uIiwidmFsaWRhdGUiLCJtdWx0ZXIiLCJ1cGxvYWQiLCJTdGF0dXNDb2RlcyIsIk1lc3NhZ2VGYWN0b3J5Iiwicm91dGVyIiwiUm91dGVyIiwicm91dGUiLCJnZXQiLCJnZXRBbGwiLCJwb3N0IiwicmVxIiwicmVzIiwibmV4dCIsImFycmF5IiwiZXJyIiwiTXVsdGVyRXJyb3IiLCJzdGF0dXMiLCJVTkFVVEhPUklaRUQiLCJqc29uIiwiZXJyb3IiLCJtZXNzYWdlIiwiY3JlYXRlIiwiZ2V0Q29tbXVuaXR5V2lzaGxpc3RzIiwidXBkYXRlU3VnZ2VzdGlvbk9yVmlld2VycyIsInB1dCIsInVwZGF0ZSIsImdldEJ5SWQiLCJnZXRBbGxXaXRoVHlwZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy9yb3V0ZXMvdjEvIiwic291cmNlcyI6WyJjb21tdW5pdHlSb3V0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZShcImV4cHJlc3NcIik7XG5jb25zdCBjb21tdW5pdHlDb250cm9sbGVyID0gcmVxdWlyZShcIi4uLy4uL2NvbnRyb2xsZXJzL2NvbW11bml0eUNvbnRyb2xsZXJcIik7XG5jb25zdCBjb21tdW5pdHlWYWxpZGF0aW9uID0gcmVxdWlyZShcIi4uLy4uL3ZhbGlkYXRpb25zL2NvbW11bml0eVZhbGlkYXRpb25cIik7XG5jb25zdCB2YWxpZGF0ZSA9IHJlcXVpcmUoXCIuLi8uLi9taWRkbGV3YXJlcy92YWxpZGF0ZVwiKTtcbmNvbnN0IHsgbXVsdGVyLCB1cGxvYWQgfSA9IHJlcXVpcmUoXCIuLi8uLi9jb25maWcvdXBsb2FkQ29tbXVuaXR5TXVsdGVyXCIpO1xuY29uc3QgeyBTdGF0dXNDb2RlcyB9ID0gcmVxdWlyZShcImh0dHAtc3RhdHVzLWNvZGVzXCIpO1xuY29uc3QgTWVzc2FnZUZhY3RvcnkgPSByZXF1aXJlKFwiLi4vLi4vdXRpbHMvbWVzc2FnZUZhY3RvcnlcIik7XG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG5yb3V0ZXJcbiAgICAucm91dGUoXCIvYXBpL2NvbW11bml0eVwiKVxuICAgIC5nZXQodmFsaWRhdGUoKSwgY29tbXVuaXR5Q29udHJvbGxlci5nZXRBbGwpXG4gICAgLnBvc3QoXG4gICAgICAgIHZhbGlkYXRlKCksXG4gICAgICAgIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgICAgICAgICAgdXBsb2FkLmFycmF5KFwiYXR0YWNobWVudHNcIiwgNSkocmVxLCByZXMsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgbXVsdGVyLk11bHRlckVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zdGF0dXMoU3RhdHVzQ29kZXMuVU5BVVRIT1JJWkVEKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmpzb24oTWVzc2FnZUZhY3RvcnkuZXJyb3IoZXJyLm1lc3NhZ2UpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIGR1cmluZyBmaWxlIHVwbG9hZFwiLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV4dCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbW11bml0eUNvbnRyb2xsZXIuY3JlYXRlXG4gICAgKTtcbnJvdXRlclxuICAgIC5yb3V0ZShcIi9hcGkvY29tbXVuaXR5L3dpc2hsaXN0c1wiKVxuICAgIC5nZXQodmFsaWRhdGUoKSwgY29tbXVuaXR5Q29udHJvbGxlci5nZXRDb21tdW5pdHlXaXNobGlzdHMpO1xucm91dGVyXG4gICAgLnJvdXRlKFwiL2FwaS9jb21tdW5pdHkvOmlkXCIpXG4gICAgLnBvc3QodmFsaWRhdGUoKSwgY29tbXVuaXR5Q29udHJvbGxlci51cGRhdGVTdWdnZXN0aW9uT3JWaWV3ZXJzKVxuICAgIC5wdXQoXG4gICAgICAgIHZhbGlkYXRlKCksXG4gICAgICAgIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgICAgICAgICAgdXBsb2FkLmFycmF5KFwiYXR0YWNobWVudHNcIiwgNSkocmVxLCByZXMsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgbXVsdGVyLk11bHRlckVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zdGF0dXMoU3RhdHVzQ29kZXMuVU5BVVRIT1JJWkVEKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmpzb24oTWVzc2FnZUZhY3RvcnkuZXJyb3IoZXJyLm1lc3NhZ2UpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIGR1cmluZyBmaWxlIHVwbG9hZFwiLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV4dCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbW11bml0eUNvbnRyb2xsZXIudXBkYXRlXG4gICAgKVxuICAgIC5nZXQodmFsaWRhdGUoY29tbXVuaXR5VmFsaWRhdGlvbi5nZXQpLCBjb21tdW5pdHlDb250cm9sbGVyLmdldEJ5SWQpO1xuXG5yb3V0ZXJcbiAgICAucm91dGUoXCIvYXBpL2NvbW11bml0eS9saXN0Lzp0eXBlXCIpXG4gICAgLmdldCh2YWxpZGF0ZSgpLCBjb21tdW5pdHlDb250cm9sbGVyLmdldEFsbFdpdGhUeXBlKTtcblxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XG5cbi8qKlxuICogQHN3YWdnZXJcbiAqIHRhZ3M6XG4gKiAgIG5hbWU6IFVzZXJzXG4gKiAgIGRlc2NyaXB0aW9uOiBVc2VyIG1hbmFnZW1lbnQgYW5kIHJldHJpZXZhbFxuICovXG5cbi8qKlxuICogQHN3YWdnZXJcbiAqIC91c2VyczpcbiAqICAgcG9zdDpcbiAqICAgICBzdW1tYXJ5OiBDcmVhdGUgYSB1c2VyXG4gKiAgICAgZGVzY3JpcHRpb246IE9ubHkgYWRtaW5zIGNhbiBjcmVhdGUgb3RoZXIgdXNlcnMuXG4gKiAgICAgdGFnczogW1VzZXJzXVxuICogICAgIHNlY3VyaXR5OlxuICogICAgICAgLSBiZWFyZXJBdXRoOiBbXVxuICogICAgIHJlcXVlc3RCb2R5OlxuICogICAgICAgcmVxdWlyZWQ6IHRydWVcbiAqICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgdHlwZTogb2JqZWN0XG4gKiAgICAgICAgICAgICByZXF1aXJlZDpcbiAqICAgICAgICAgICAgICAgLSBuYW1lXG4gKiAgICAgICAgICAgICAgIC0gZW1haWxcbiAqICAgICAgICAgICAgICAgLSBwYXNzd29yZFxuICogICAgICAgICAgICAgICAtIHJvbGVcbiAqICAgICAgICAgICAgIHByb3BlcnRpZXM6XG4gKiAgICAgICAgICAgICAgIG5hbWU6XG4gKiAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgIGVtYWlsOlxuICogICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgICAgIGZvcm1hdDogZW1haWxcbiAqICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbXVzdCBiZSB1bmlxdWVcbiAqICAgICAgICAgICAgICAgcGFzc3dvcmQ6XG4gKiAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgZm9ybWF0OiBwYXNzd29yZFxuICogICAgICAgICAgICAgICAgIG1pbkxlbmd0aDogOFxuICogICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBBdCBsZWFzdCBvbmUgbnVtYmVyIGFuZCBvbmUgbGV0dGVyXG4gKiAgICAgICAgICAgICAgIHJvbGU6XG4gKiAgICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgICAgICBlbnVtOiBbdXNlciwgYWRtaW5dXG4gKiAgICAgICAgICAgICBleGFtcGxlOlxuICogICAgICAgICAgICAgICBuYW1lOiBmYWtlIG5hbWVcbiAqICAgICAgICAgICAgICAgZW1haWw6IGZha2VAZXhhbXBsZS5jb21cbiAqICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkMVxuICogICAgICAgICAgICAgICByb2xlOiB1c2VyXG4gKiAgICAgcmVzcG9uc2VzOlxuICogICAgICAgXCIyMDFcIjpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IENyZWF0ZWRcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL1VzZXInXG4gKiAgICAgICBcIjQwMFwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9EdXBsaWNhdGVFbWFpbCdcbiAqICAgICAgIFwiNDAxXCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL1VuYXV0aG9yaXplZCdcbiAqICAgICAgIFwiNDAzXCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL0ZvcmJpZGRlbidcbiAqXG4gKiAgIGdldDpcbiAqICAgICBzdW1tYXJ5OiBHZXQgYWxsIHVzZXJzXG4gKiAgICAgZGVzY3JpcHRpb246IE9ubHkgYWRtaW5zIGNhbiByZXRyaWV2ZSBhbGwgdXNlcnMuXG4gKiAgICAgdGFnczogW1VzZXJzXVxuICogICAgIHNlY3VyaXR5OlxuICogICAgICAgLSBiZWFyZXJBdXRoOiBbXVxuICogICAgIHBhcmFtZXRlcnM6XG4gKiAgICAgICAtIGluOiBxdWVyeVxuICogICAgICAgICBuYW1lOiBuYW1lXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIgbmFtZVxuICogICAgICAgLSBpbjogcXVlcnlcbiAqICAgICAgICAgbmFtZTogcm9sZVxuICogICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBVc2VyIHJvbGVcbiAqICAgICAgIC0gaW46IHF1ZXJ5XG4gKiAgICAgICAgIG5hbWU6IHNvcnRCeVxuICogICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBzb3J0IGJ5IHF1ZXJ5IGluIHRoZSBmb3JtIG9mIGZpZWxkOmRlc2MvYXNjIChleC4gbmFtZTphc2MpXG4gKiAgICAgICAtIGluOiBxdWVyeVxuICogICAgICAgICBuYW1lOiBsaW1pdFxuICogICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgdHlwZTogaW50ZWdlclxuICogICAgICAgICAgIG1pbmltdW06IDFcbiAqICAgICAgICAgZGVmYXVsdDogMTBcbiAqICAgICAgICAgZGVzY3JpcHRpb246IE1heGltdW0gbnVtYmVyIG9mIHVzZXJzXG4gKiAgICAgICAtIGluOiBxdWVyeVxuICogICAgICAgICBuYW1lOiBwYWdlXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBpbnRlZ2VyXG4gKiAgICAgICAgICAgbWluaW11bTogMVxuICogICAgICAgICAgIGRlZmF1bHQ6IDFcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFBhZ2UgbnVtYmVyXG4gKiAgICAgcmVzcG9uc2VzOlxuICogICAgICAgXCIyMDBcIjpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IE9LXG4gKiAgICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICAgdHlwZTogb2JqZWN0XG4gKiAgICAgICAgICAgICAgIHByb3BlcnRpZXM6XG4gKiAgICAgICAgICAgICAgICAgcmVzdWx0czpcbiAqICAgICAgICAgICAgICAgICAgIHR5cGU6IGFycmF5XG4gKiAgICAgICAgICAgICAgICAgICBpdGVtczpcbiAqICAgICAgICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL1VzZXInXG4gKiAgICAgICAgICAgICAgICAgcGFnZTpcbiAqICAgICAgICAgICAgICAgICAgIHR5cGU6IGludGVnZXJcbiAqICAgICAgICAgICAgICAgICAgIGV4YW1wbGU6IDFcbiAqICAgICAgICAgICAgICAgICBsaW1pdDpcbiAqICAgICAgICAgICAgICAgICAgIHR5cGU6IGludGVnZXJcbiAqICAgICAgICAgICAgICAgICAgIGV4YW1wbGU6IDEwXG4gKiAgICAgICAgICAgICAgICAgdG90YWxQYWdlczpcbiAqICAgICAgICAgICAgICAgICAgIHR5cGU6IGludGVnZXJcbiAqICAgICAgICAgICAgICAgICAgIGV4YW1wbGU6IDFcbiAqICAgICAgICAgICAgICAgICB0b3RhbFJlc3VsdHM6XG4gKiAgICAgICAgICAgICAgICAgICB0eXBlOiBpbnRlZ2VyXG4gKiAgICAgICAgICAgICAgICAgICBleGFtcGxlOiAxXG4gKiAgICAgICBcIjQwMVwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9VbmF1dGhvcml6ZWQnXG4gKiAgICAgICBcIjQwM1wiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Gb3JiaWRkZW4nXG4gKi9cblxuLyoqXG4gKiBAc3dhZ2dlclxuICogL3VzZXJzL3tpZH06XG4gKiAgIGdldDpcbiAqICAgICBzdW1tYXJ5OiBHZXQgYSB1c2VyXG4gKiAgICAgZGVzY3JpcHRpb246IExvZ2dlZCBpbiB1c2VycyBjYW4gZmV0Y2ggb25seSB0aGVpciBvd24gdXNlciBpbmZvcm1hdGlvbi4gT25seSBhZG1pbnMgY2FuIGZldGNoIG90aGVyIHVzZXJzLlxuICogICAgIHRhZ3M6IFtVc2Vyc11cbiAqICAgICBzZWN1cml0eTpcbiAqICAgICAgIC0gYmVhcmVyQXV0aDogW11cbiAqICAgICBwYXJhbWV0ZXJzOlxuICogICAgICAgLSBpbjogcGF0aFxuICogICAgICAgICBuYW1lOiBpZFxuICogICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICogICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBVc2VyIGlkXG4gKiAgICAgcmVzcG9uc2VzOlxuICogICAgICAgXCIyMDBcIjpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IE9LXG4gKiAgICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9Vc2VyJ1xuICogICAgICAgXCI0MDFcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvVW5hdXRob3JpemVkJ1xuICogICAgICAgXCI0MDNcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvRm9yYmlkZGVuJ1xuICogICAgICAgXCI0MDRcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvTm90Rm91bmQnXG4gKlxuICogICBwYXRjaDpcbiAqICAgICBzdW1tYXJ5OiBVcGRhdGUgYSB1c2VyXG4gKiAgICAgZGVzY3JpcHRpb246IExvZ2dlZCBpbiB1c2VycyBjYW4gb25seSB1cGRhdGUgdGhlaXIgb3duIGluZm9ybWF0aW9uLiBPbmx5IGFkbWlucyBjYW4gdXBkYXRlIG90aGVyIHVzZXJzLlxuICogICAgIHRhZ3M6IFtVc2Vyc11cbiAqICAgICBzZWN1cml0eTpcbiAqICAgICAgIC0gYmVhcmVyQXV0aDogW11cbiAqICAgICBwYXJhbWV0ZXJzOlxuICogICAgICAgLSBpbjogcGF0aFxuICogICAgICAgICBuYW1lOiBpZFxuICogICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICogICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBVc2VyIGlkXG4gKiAgICAgcmVxdWVzdEJvZHk6XG4gKiAgICAgICByZXF1aXJlZDogdHJ1ZVxuICogICAgICAgY29udGVudDpcbiAqICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICB0eXBlOiBvYmplY3RcbiAqICAgICAgICAgICAgIHByb3BlcnRpZXM6XG4gKiAgICAgICAgICAgICAgIG5hbWU6XG4gKiAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgIGVtYWlsOlxuICogICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgICAgIGZvcm1hdDogZW1haWxcbiAqICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbXVzdCBiZSB1bmlxdWVcbiAqICAgICAgICAgICAgICAgcGFzc3dvcmQ6XG4gKiAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgZm9ybWF0OiBwYXNzd29yZFxuICogICAgICAgICAgICAgICAgIG1pbkxlbmd0aDogOFxuICogICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBBdCBsZWFzdCBvbmUgbnVtYmVyIGFuZCBvbmUgbGV0dGVyXG4gKiAgICAgICAgICAgICBleGFtcGxlOlxuICogICAgICAgICAgICAgICBuYW1lOiBmYWtlIG5hbWVcbiAqICAgICAgICAgICAgICAgZW1haWw6IGZha2VAZXhhbXBsZS5jb21cbiAqICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkMVxuICogICAgIHJlc3BvbnNlczpcbiAqICAgICAgIFwiMjAwXCI6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBPS1xuICogICAgICAgICBjb250ZW50OlxuICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlcidcbiAqICAgICAgIFwiNDAwXCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL0R1cGxpY2F0ZUVtYWlsJ1xuICogICAgICAgXCI0MDFcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvVW5hdXRob3JpemVkJ1xuICogICAgICAgXCI0MDNcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvRm9yYmlkZGVuJ1xuICogICAgICAgXCI0MDRcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvTm90Rm91bmQnXG4gKlxuICogICBkZWxldGU6XG4gKiAgICAgc3VtbWFyeTogRGVsZXRlIGEgdXNlclxuICogICAgIGRlc2NyaXB0aW9uOiBMb2dnZWQgaW4gdXNlcnMgY2FuIGRlbGV0ZSBvbmx5IHRoZW1zZWx2ZXMuIE9ubHkgYWRtaW5zIGNhbiBkZWxldGUgb3RoZXIgdXNlcnMuXG4gKiAgICAgdGFnczogW1VzZXJzXVxuICogICAgIHNlY3VyaXR5OlxuICogICAgICAgLSBiZWFyZXJBdXRoOiBbXVxuICogICAgIHBhcmFtZXRlcnM6XG4gKiAgICAgICAtIGluOiBwYXRoXG4gKiAgICAgICAgIG5hbWU6IGlkXG4gKiAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIgaWRcbiAqICAgICByZXNwb25zZXM6XG4gKiAgICAgICBcIjIwMFwiOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogTm8gY29udGVudFxuICogICAgICAgXCI0MDFcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvVW5hdXRob3JpemVkJ1xuICogICAgICAgXCI0MDNcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvRm9yYmlkZGVuJ1xuICogICAgICAgXCI0MDRcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvTm90Rm91bmQnXG4gKi9cbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU1DLG1CQUFtQixHQUFHRCxPQUFPLENBQUMsdUNBQXVDLENBQUM7QUFDNUUsTUFBTUUsbUJBQW1CLEdBQUdGLE9BQU8sQ0FBQyx1Q0FBdUMsQ0FBQztBQUM1RSxNQUFNRyxRQUFRLEdBQUdILE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQztBQUN0RCxNQUFNO0VBQUVJLE1BQU07RUFBRUM7QUFBTyxDQUFDLEdBQUdMLE9BQU8sQ0FBQyxvQ0FBb0MsQ0FBQztBQUN4RSxNQUFNO0VBQUVNO0FBQVksQ0FBQyxHQUFHTixPQUFPLENBQUMsbUJBQW1CLENBQUM7QUFDcEQsTUFBTU8sY0FBYyxHQUFHUCxPQUFPLENBQUMsNEJBQTRCLENBQUM7QUFDNUQsTUFBTVEsTUFBTSxHQUFHVCxPQUFPLENBQUNVLE1BQU0sQ0FBQyxDQUFDO0FBRS9CRCxNQUFNLENBQ0RFLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxDQUN2QkMsR0FBRyxDQUFDUixRQUFRLENBQUMsQ0FBQyxFQUFFRixtQkFBbUIsQ0FBQ1csTUFBTSxDQUFDLENBQzNDQyxJQUFJLENBQ0RWLFFBQVEsQ0FBQyxDQUFDLEVBQ1YsQ0FBQ1csR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztFQUNoQlgsTUFBTSxDQUFDWSxLQUFLLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDSCxHQUFHLEVBQUVDLEdBQUcsRUFBRSxVQUFVRyxHQUFHLEVBQUU7SUFDcEQsSUFBSUEsR0FBRyxZQUFZZCxNQUFNLENBQUNlLFdBQVcsRUFBRTtNQUNuQyxPQUFPSixHQUFHLENBQ0xLLE1BQU0sQ0FBQ2QsV0FBVyxDQUFDZSxZQUFZLENBQUMsQ0FDaENDLElBQUksQ0FBQ2YsY0FBYyxDQUFDZ0IsS0FBSyxDQUFDTCxHQUFHLENBQUNNLE9BQU8sQ0FBQyxDQUFDO0lBQ2hELENBQUMsTUFBTSxJQUFJTixHQUFHLEVBQUU7TUFDWixPQUFPSCxHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0UsSUFBSSxDQUFDO1FBQ3hCRSxPQUFPLEVBQUU7TUFDYixDQUFDLENBQUM7SUFDTjtJQUNBUixJQUFJLENBQUMsQ0FBQztFQUNWLENBQUMsQ0FBQztBQUNOLENBQUMsRUFDRGYsbUJBQW1CLENBQUN3QixNQUN4QixDQUFDO0FBQ0xqQixNQUFNLENBQ0RFLEtBQUssQ0FBQywwQkFBMEIsQ0FBQyxDQUNqQ0MsR0FBRyxDQUFDUixRQUFRLENBQUMsQ0FBQyxFQUFFRixtQkFBbUIsQ0FBQ3lCLHFCQUFxQixDQUFDO0FBQy9EbEIsTUFBTSxDQUNERSxLQUFLLENBQUMsb0JBQW9CLENBQUMsQ0FDM0JHLElBQUksQ0FBQ1YsUUFBUSxDQUFDLENBQUMsRUFBRUYsbUJBQW1CLENBQUMwQix5QkFBeUIsQ0FBQyxDQUMvREMsR0FBRyxDQUNBekIsUUFBUSxDQUFDLENBQUMsRUFDVixDQUFDVyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQ2hCWCxNQUFNLENBQUNZLEtBQUssQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDLENBQUNILEdBQUcsRUFBRUMsR0FBRyxFQUFFLFVBQVVHLEdBQUcsRUFBRTtJQUNwRCxJQUFJQSxHQUFHLFlBQVlkLE1BQU0sQ0FBQ2UsV0FBVyxFQUFFO01BQ25DLE9BQU9KLEdBQUcsQ0FDTEssTUFBTSxDQUFDZCxXQUFXLENBQUNlLFlBQVksQ0FBQyxDQUNoQ0MsSUFBSSxDQUFDZixjQUFjLENBQUNnQixLQUFLLENBQUNMLEdBQUcsQ0FBQ00sT0FBTyxDQUFDLENBQUM7SUFDaEQsQ0FBQyxNQUFNLElBQUlOLEdBQUcsRUFBRTtNQUNaLE9BQU9ILEdBQUcsQ0FBQ0ssTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDRSxJQUFJLENBQUM7UUFDeEJFLE9BQU8sRUFBRTtNQUNiLENBQUMsQ0FBQztJQUNOO0lBQ0FSLElBQUksQ0FBQyxDQUFDO0VBQ1YsQ0FBQyxDQUFDO0FBQ04sQ0FBQyxFQUNEZixtQkFBbUIsQ0FBQzRCLE1BQ3hCLENBQUMsQ0FDQWxCLEdBQUcsQ0FBQ1IsUUFBUSxDQUFDRCxtQkFBbUIsQ0FBQ1MsR0FBRyxDQUFDLEVBQUVWLG1CQUFtQixDQUFDNkIsT0FBTyxDQUFDO0FBRXhFdEIsTUFBTSxDQUNERSxLQUFLLENBQUMsMkJBQTJCLENBQUMsQ0FDbENDLEdBQUcsQ0FBQ1IsUUFBUSxDQUFDLENBQUMsRUFBRUYsbUJBQW1CLENBQUM4QixjQUFjLENBQUM7QUFFeERDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHekIsTUFBTTs7QUFFdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["express","require","communityController","communityValidation","validate","multer","upload","StatusCodes","MessageFactory","router","Router","route","get","getAll","post","req","res","next","array","err","MulterError","status","UNAUTHORIZED","json","error","message","create","getCommunityWishlists","updateSuggestionOrViewers","put","update","getById","getAllWithType","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/","sources":["communityRoute.js"],"sourcesContent":["const express = require(\"express\");\nconst communityController = require(\"../../controllers/communityController\");\nconst communityValidation = require(\"../../validations/communityValidation\");\nconst validate = require(\"../../middlewares/validate\");\nconst { multer, upload } = require(\"../../config/uploadCommunityMulter\");\nconst { StatusCodes } = require(\"http-status-codes\");\nconst MessageFactory = require(\"../../utils/messageFactory\");\nconst router = express.Router();\n\nrouter\n    .route(\"/api/community\")\n    .get(validate(), communityController.getAll)\n    .post(\n        validate(),\n        (req, res, next) => {\n            upload.array(\"attachments\", 5)(req, res, function (err) {\n                if (err instanceof multer.MulterError) {\n                    return res\n                        .status(StatusCodes.UNAUTHORIZED)\n                        .json(MessageFactory.error(err.message));\n                } else if (err) {\n                    return res.status(500).json({\n                        message: \"An unknown error occurred during file upload\",\n                    });\n                }\n                next();\n            });\n        },\n        communityController.create\n    );\nrouter\n    .route(\"/api/community/wishlists\")\n    .get(validate(), communityController.getCommunityWishlists);\nrouter\n    .route(\"/api/community/:id\")\n    .post(validate(), communityController.updateSuggestionOrViewers)\n    .put(\n        validate(),\n        (req, res, next) => {\n            upload.array(\"attachments\", 5)(req, res, function (err) {\n                if (err instanceof multer.MulterError) {\n                    return res\n                        .status(StatusCodes.UNAUTHORIZED)\n                        .json(MessageFactory.error(err.message));\n                } else if (err) {\n                    return res.status(500).json({\n                        message: \"An unknown error occurred during file upload\",\n                    });\n                }\n                next();\n            });\n        },\n        communityController.update\n    )\n    .get(validate(communityValidation.get), communityController.getById);\n\nrouter\n    .route(\"/api/community/list/:type\")\n    .get(validate(), communityController.getAllWithType);\n\nmodule.exports = router;\n\n/**\n * @swagger\n * tags:\n *   name: Users\n *   description: User management and retrieval\n */\n\n/**\n * @swagger\n * /users:\n *   post:\n *     summary: Create a user\n *     description: Only admins can create other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - name\n *               - email\n *               - password\n *               - role\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *               role:\n *                  type: string\n *                  enum: [user, admin]\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *               role: user\n *     responses:\n *       \"201\":\n *         description: Created\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *\n *   get:\n *     summary: Get all users\n *     description: Only admins can retrieve all users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: query\n *         name: name\n *         schema:\n *           type: string\n *         description: User name\n *       - in: query\n *         name: role\n *         schema:\n *           type: string\n *         description: User role\n *       - in: query\n *         name: sortBy\n *         schema:\n *           type: string\n *         description: sort by query in the form of field:desc/asc (ex. name:asc)\n *       - in: query\n *         name: limit\n *         schema:\n *           type: integer\n *           minimum: 1\n *         default: 10\n *         description: Maximum number of users\n *       - in: query\n *         name: page\n *         schema:\n *           type: integer\n *           minimum: 1\n *           default: 1\n *         description: Page number\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 results:\n *                   type: array\n *                   items:\n *                     $ref: '#/components/schemas/User'\n *                 page:\n *                   type: integer\n *                   example: 1\n *                 limit:\n *                   type: integer\n *                   example: 10\n *                 totalPages:\n *                   type: integer\n *                   example: 1\n *                 totalResults:\n *                   type: integer\n *                   example: 1\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n */\n\n/**\n * @swagger\n * /users/{id}:\n *   get:\n *     summary: Get a user\n *     description: Logged in users can fetch only their own user information. Only admins can fetch other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   patch:\n *     summary: Update a user\n *     description: Logged in users can only update their own information. Only admins can update other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   delete:\n *     summary: Delete a user\n *     description: Logged in users can delete only themselves. Only admins can delete other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: No content\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n */\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,mBAAmB,GAAGD,OAAO,CAAC,uCAAuC,CAAC;AAC5E,MAAME,mBAAmB,GAAGF,OAAO,CAAC,uCAAuC,CAAC;AAC5E,MAAMG,QAAQ,GAAGH,OAAO,CAAC,4BAA4B,CAAC;AACtD,MAAM;EAAEI,MAAM;EAAEC;AAAO,CAAC,GAAGL,OAAO,CAAC,oCAAoC,CAAC;AACxE,MAAM;EAAEM;AAAY,CAAC,GAAGN,OAAO,CAAC,mBAAmB,CAAC;AACpD,MAAMO,cAAc,GAAGP,OAAO,CAAC,4BAA4B,CAAC;AAC5D,MAAMQ,MAAM,GAAGT,OAAO,CAACU,MAAM,CAAC,CAAC;AAE/BD,MAAM,CACDE,KAAK,CAAC,gBAAgB,CAAC,CACvBC,GAAG,CAACR,QAAQ,CAAC,CAAC,EAAEF,mBAAmB,CAACW,MAAM,CAAC,CAC3CC,IAAI,CACDV,QAAQ,CAAC,CAAC,EACV,CAACW,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAChBX,MAAM,CAACY,KAAK,CAAC,aAAa,EAAE,CAAC,CAAC,CAACH,GAAG,EAAEC,GAAG,EAAE,UAAUG,GAAG,EAAE;IACpD,IAAIA,GAAG,YAAYd,MAAM,CAACe,WAAW,EAAE;MACnC,OAAOJ,GAAG,CACLK,MAAM,CAACd,WAAW,CAACe,YAAY,CAAC,CAChCC,IAAI,CAACf,cAAc,CAACgB,KAAK,CAACL,GAAG,CAACM,OAAO,CAAC,CAAC;IAChD,CAAC,MAAM,IAAIN,GAAG,EAAE;MACZ,OAAOH,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACE,IAAI,CAAC;QACxBE,OAAO,EAAE;MACb,CAAC,CAAC;IACN;IACAR,IAAI,CAAC,CAAC;EACV,CAAC,CAAC;AACN,CAAC,EACDf,mBAAmB,CAACwB,MACxB,CAAC;AACLjB,MAAM,CACDE,KAAK,CAAC,0BAA0B,CAAC,CACjCC,GAAG,CAACR,QAAQ,CAAC,CAAC,EAAEF,mBAAmB,CAACyB,qBAAqB,CAAC;AAC/DlB,MAAM,CACDE,KAAK,CAAC,oBAAoB,CAAC,CAC3BG,IAAI,CAACV,QAAQ,CAAC,CAAC,EAAEF,mBAAmB,CAAC0B,yBAAyB,CAAC,CAC/DC,GAAG,CACAzB,QAAQ,CAAC,CAAC,EACV,CAACW,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAChBX,MAAM,CAACY,KAAK,CAAC,aAAa,EAAE,CAAC,CAAC,CAACH,GAAG,EAAEC,GAAG,EAAE,UAAUG,GAAG,EAAE;IACpD,IAAIA,GAAG,YAAYd,MAAM,CAACe,WAAW,EAAE;MACnC,OAAOJ,GAAG,CACLK,MAAM,CAACd,WAAW,CAACe,YAAY,CAAC,CAChCC,IAAI,CAACf,cAAc,CAACgB,KAAK,CAACL,GAAG,CAACM,OAAO,CAAC,CAAC;IAChD,CAAC,MAAM,IAAIN,GAAG,EAAE;MACZ,OAAOH,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACE,IAAI,CAAC;QACxBE,OAAO,EAAE;MACb,CAAC,CAAC;IACN;IACAR,IAAI,CAAC,CAAC;EACV,CAAC,CAAC;AACN,CAAC,EACDf,mBAAmB,CAAC4B,MACxB,CAAC,CACAlB,GAAG,CAACR,QAAQ,CAACD,mBAAmB,CAACS,GAAG,CAAC,EAAEV,mBAAmB,CAAC6B,OAAO,CAAC;AAExEtB,MAAM,CACDE,KAAK,CAAC,2BAA2B,CAAC,CAClCC,GAAG,CAACR,QAAQ,CAAC,CAAC,EAAEF,mBAAmB,CAAC8B,cAAc,CAAC;AAExDC,MAAM,CAACC,OAAO,GAAGzB,MAAM;;AAEvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]}},"mtime":1721616110247},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/controllers/communityController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const {\n  StatusCodes\n} = require(\"http-status-codes\");\nconst communityService = require(\"../services/communityService\");\nconst wishlistService = require(\"../services/wishlistService\");\nconst commentService = require(\"../services/commentService\");\nconst bcrypt = require(\"bcryptjs\");\n\n//import message factory\nconst MessageFactory = require(\"../utils/messageFactory\");\nconst RemoveValueNullObject = require(\"../utils/removeValueNullObject\");\nexports.getAllWithUserID = async (req, res) => {\n  const user_id = req.params.user_id;\n  let data = await communityService.getAllWithUserID(user_id);\n  if (data === null) {\n    res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.success({}, \"The data post empty.\"));\n  } else {\n    res.status(StatusCodes.OK).json(MessageFactory.success(data, \"Get all post success!\"));\n  }\n};\nexports.getAllWithType = async (req, res) => {\n  const type = req.params.type;\n  let data = await communityService.getAllWithType(type);\n  if (data === null) {\n    res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.success({}, \"The data post empty.\"));\n  } else {\n    res.status(StatusCodes.OK).json(MessageFactory.success(data, \"Get all post success!\"));\n  }\n};\nexports.getAll = async (req, res) => {\n  const paged = parseInt(req.query.paged) || 1;\n  const limit = parseInt(req.query.limit) || 10;\n  const filter = req.query.filter;\n  const type = req.query.type || \"free_board\";\n  const data = await communityService.getAll({\n    paged,\n    limit,\n    filter,\n    type\n  });\n  if (data === null) {\n    res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.success({}, \"The data post empty.\"));\n  } else {\n    res.status(StatusCodes.OK).json(MessageFactory.success(data, \"Get all post success!\"));\n  }\n};\nexports.create = async (req, res, next) => {\n  try {\n    const {\n      title,\n      content,\n      class_type,\n      subject,\n      grade,\n      user_id,\n      type\n    } = req.body;\n    const files = req.files;\n    let attachments = [];\n    for (const file of files) {\n      let id = await bcrypt.hash(file.originalname, 8);\n      attachments.push({\n        name: file.originalname,\n        url: `${process.env.BASIC_URL}/${file.path}`,\n        id: id\n      });\n    }\n    const data = await communityService.createPost(title, content, class_type, subject, grade, user_id, attachments, type);\n    if (data) {\n      res.status(StatusCodes.OK).json(MessageFactory.success(data, \"Created success!\"));\n    } else {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"Created error\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.update = async (req, res, next) => {\n  try {\n    const {\n      title,\n      content,\n      class_type,\n      subject,\n      grade,\n      user_id,\n      image_id\n    } = req.body;\n    const sno = req.params.id;\n    const data = await communityService.update(sno, title, content, class_type, subject, grade, user_id, \"\", image_id);\n    if (data) {\n      res.status(StatusCodes.OK).json(MessageFactory.success(data, \"Update success!\"));\n    } else {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"Update error\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.updateSuggestionOrViewers = async (req, res, next) => {\n  try {\n    const post_id = req.params.id;\n    const {\n      suggestion,\n      viewers,\n      user_id,\n      type\n    } = req.body;\n    const data = await communityService.updateSuggestionOrViewers(suggestion, viewers, user_id, post_id, type);\n    if (data) {\n      res.status(StatusCodes.OK).json(MessageFactory.success(data, \"Update success!\"));\n    } else {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"Update error\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.getById = async (req, res, next) => {\n  try {\n    const sno = req.params.id;\n    let data = await communityService.getById(sno);\n    if (data === null) {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.success({}, \"The data post empty.\"));\n    } else {\n      res.status(StatusCodes.OK).json(MessageFactory.success(data, \"Get post success!\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.getCommunityWishlists = async (req, res, next) => {\n  try {\n    const paged = parseInt(req.query.paged) || 1;\n    const limit = parseInt(req.query.limit) || 10;\n    console.log({\n      paged,\n      limit\n    });\n    let data = await wishlistService.getCommunityWishlists(paged, limit);\n    if (data === null) {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.success({}, \"The data post empty.\"));\n    } else {\n      res.status(StatusCodes.OK).json(MessageFactory.success(data, \"Get post success!\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTdGF0dXNDb2RlcyIsInJlcXVpcmUiLCJjb21tdW5pdHlTZXJ2aWNlIiwid2lzaGxpc3RTZXJ2aWNlIiwiY29tbWVudFNlcnZpY2UiLCJiY3J5cHQiLCJNZXNzYWdlRmFjdG9yeSIsIlJlbW92ZVZhbHVlTnVsbE9iamVjdCIsImV4cG9ydHMiLCJnZXRBbGxXaXRoVXNlcklEIiwicmVxIiwicmVzIiwidXNlcl9pZCIsInBhcmFtcyIsImRhdGEiLCJzdGF0dXMiLCJVTkFVVEhPUklaRUQiLCJqc29uIiwic3VjY2VzcyIsIk9LIiwiZ2V0QWxsV2l0aFR5cGUiLCJ0eXBlIiwiZ2V0QWxsIiwicGFnZWQiLCJwYXJzZUludCIsInF1ZXJ5IiwibGltaXQiLCJmaWx0ZXIiLCJjcmVhdGUiLCJuZXh0IiwidGl0bGUiLCJjb250ZW50IiwiY2xhc3NfdHlwZSIsInN1YmplY3QiLCJncmFkZSIsImJvZHkiLCJmaWxlcyIsImF0dGFjaG1lbnRzIiwiZmlsZSIsImlkIiwiaGFzaCIsIm9yaWdpbmFsbmFtZSIsInB1c2giLCJuYW1lIiwidXJsIiwicHJvY2VzcyIsImVudiIsIkJBU0lDX1VSTCIsInBhdGgiLCJjcmVhdGVQb3N0IiwiZXJyb3IiLCJ1cGRhdGUiLCJpbWFnZV9pZCIsInNubyIsInVwZGF0ZVN1Z2dlc3Rpb25PclZpZXdlcnMiLCJwb3N0X2lkIiwic3VnZ2VzdGlvbiIsInZpZXdlcnMiLCJnZXRCeUlkIiwiZ2V0Q29tbXVuaXR5V2lzaGxpc3RzIiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsiY29tbXVuaXR5Q29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IFN0YXR1c0NvZGVzIH0gPSByZXF1aXJlKFwiaHR0cC1zdGF0dXMtY29kZXNcIik7XG5jb25zdCBjb21tdW5pdHlTZXJ2aWNlID0gcmVxdWlyZShcIi4uL3NlcnZpY2VzL2NvbW11bml0eVNlcnZpY2VcIik7XG5jb25zdCB3aXNobGlzdFNlcnZpY2UgPSByZXF1aXJlKFwiLi4vc2VydmljZXMvd2lzaGxpc3RTZXJ2aWNlXCIpO1xuY29uc3QgY29tbWVudFNlcnZpY2UgPSByZXF1aXJlKFwiLi4vc2VydmljZXMvY29tbWVudFNlcnZpY2VcIik7XG5jb25zdCBiY3J5cHQgPSByZXF1aXJlKFwiYmNyeXB0anNcIik7XG5cbi8vaW1wb3J0IG1lc3NhZ2UgZmFjdG9yeVxuY29uc3QgTWVzc2FnZUZhY3RvcnkgPSByZXF1aXJlKFwiLi4vdXRpbHMvbWVzc2FnZUZhY3RvcnlcIik7XG5jb25zdCBSZW1vdmVWYWx1ZU51bGxPYmplY3QgPSByZXF1aXJlKFwiLi4vdXRpbHMvcmVtb3ZlVmFsdWVOdWxsT2JqZWN0XCIpO1xuXG5leHBvcnRzLmdldEFsbFdpdGhVc2VySUQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB1c2VyX2lkID0gcmVxLnBhcmFtcy51c2VyX2lkO1xuXG4gICAgbGV0IGRhdGEgPSBhd2FpdCBjb21tdW5pdHlTZXJ2aWNlLmdldEFsbFdpdGhVc2VySUQodXNlcl9pZCk7XG5cbiAgICBpZiAoZGF0YSA9PT0gbnVsbCkge1xuICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLlVOQVVUSE9SSVpFRCkuanNvbihcbiAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LnN1Y2Nlc3Moe30sIFwiVGhlIGRhdGEgcG9zdCBlbXB0eS5cIilcbiAgICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLk9LKS5qc29uKFxuICAgICAgICAgICAgTWVzc2FnZUZhY3Rvcnkuc3VjY2VzcyhkYXRhLCBcIkdldCBhbGwgcG9zdCBzdWNjZXNzIVwiKVxuICAgICAgICApO1xuICAgIH1cbn07XG5leHBvcnRzLmdldEFsbFdpdGhUeXBlID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgdHlwZSA9IHJlcS5wYXJhbXMudHlwZTtcbiAgICBsZXQgZGF0YSA9IGF3YWl0IGNvbW11bml0eVNlcnZpY2UuZ2V0QWxsV2l0aFR5cGUodHlwZSk7XG5cbiAgICBpZiAoZGF0YSA9PT0gbnVsbCkge1xuICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLlVOQVVUSE9SSVpFRCkuanNvbihcbiAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LnN1Y2Nlc3Moe30sIFwiVGhlIGRhdGEgcG9zdCBlbXB0eS5cIilcbiAgICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLk9LKS5qc29uKFxuICAgICAgICAgICAgTWVzc2FnZUZhY3Rvcnkuc3VjY2VzcyhkYXRhLCBcIkdldCBhbGwgcG9zdCBzdWNjZXNzIVwiKVxuICAgICAgICApO1xuICAgIH1cbn07XG5cbmV4cG9ydHMuZ2V0QWxsID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgcGFnZWQgPSBwYXJzZUludChyZXEucXVlcnkucGFnZWQpIHx8IDE7XG4gICAgY29uc3QgbGltaXQgPSBwYXJzZUludChyZXEucXVlcnkubGltaXQpIHx8IDEwO1xuICAgIGNvbnN0IGZpbHRlciA9IHJlcS5xdWVyeS5maWx0ZXI7XG4gICAgY29uc3QgdHlwZSA9IHJlcS5xdWVyeS50eXBlIHx8IFwiZnJlZV9ib2FyZFwiO1xuXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGNvbW11bml0eVNlcnZpY2UuZ2V0QWxsKHsgcGFnZWQsIGxpbWl0LCBmaWx0ZXIsIHR5cGUgfSk7XG5cbiAgICBpZiAoZGF0YSA9PT0gbnVsbCkge1xuICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLlVOQVVUSE9SSVpFRCkuanNvbihcbiAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LnN1Y2Nlc3Moe30sIFwiVGhlIGRhdGEgcG9zdCBlbXB0eS5cIilcbiAgICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLk9LKS5qc29uKFxuICAgICAgICAgICAgTWVzc2FnZUZhY3Rvcnkuc3VjY2VzcyhkYXRhLCBcIkdldCBhbGwgcG9zdCBzdWNjZXNzIVwiKVxuICAgICAgICApO1xuICAgIH1cbn07XG5cbmV4cG9ydHMuY3JlYXRlID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyB0aXRsZSwgY29udGVudCwgY2xhc3NfdHlwZSwgc3ViamVjdCwgZ3JhZGUsIHVzZXJfaWQsIHR5cGUgfSA9XG4gICAgICAgICAgICByZXEuYm9keTtcbiAgICAgICAgY29uc3QgZmlsZXMgPSByZXEuZmlsZXM7XG4gICAgICAgIGxldCBhdHRhY2htZW50cyA9IFtdO1xuXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgICAgbGV0IGlkID0gYXdhaXQgYmNyeXB0Lmhhc2goZmlsZS5vcmlnaW5hbG5hbWUsIDgpO1xuICAgICAgICAgICAgYXR0YWNobWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgbmFtZTogZmlsZS5vcmlnaW5hbG5hbWUsXG4gICAgICAgICAgICAgICAgdXJsOiBgJHtwcm9jZXNzLmVudi5CQVNJQ19VUkx9LyR7ZmlsZS5wYXRofWAsXG4gICAgICAgICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgY29tbXVuaXR5U2VydmljZS5jcmVhdGVQb3N0KFxuICAgICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgY2xhc3NfdHlwZSxcbiAgICAgICAgICAgIHN1YmplY3QsXG4gICAgICAgICAgICBncmFkZSxcbiAgICAgICAgICAgIHVzZXJfaWQsXG4gICAgICAgICAgICBhdHRhY2htZW50cyxcbiAgICAgICAgICAgIHR5cGVcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoU3RhdHVzQ29kZXMuT0spLmpzb24oXG4gICAgICAgICAgICAgICAgTWVzc2FnZUZhY3Rvcnkuc3VjY2VzcyhkYXRhLCBcIkNyZWF0ZWQgc3VjY2VzcyFcIilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLlVOQVVUSE9SSVpFRCkuanNvbihcbiAgICAgICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5lcnJvcihcIkNyZWF0ZWQgZXJyb3JcIilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBuZXh0KGVycm9yKTtcbiAgICB9XG59O1xuXG5leHBvcnRzLnVwZGF0ZSA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAgIGNsYXNzX3R5cGUsXG4gICAgICAgICAgICBzdWJqZWN0LFxuICAgICAgICAgICAgZ3JhZGUsXG4gICAgICAgICAgICB1c2VyX2lkLFxuICAgICAgICAgICAgaW1hZ2VfaWQsXG4gICAgICAgIH0gPSByZXEuYm9keTtcbiAgICAgICAgY29uc3Qgc25vID0gcmVxLnBhcmFtcy5pZDtcblxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgY29tbXVuaXR5U2VydmljZS51cGRhdGUoXG4gICAgICAgICAgICBzbm8sXG4gICAgICAgICAgICB0aXRsZSxcbiAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICBjbGFzc190eXBlLFxuICAgICAgICAgICAgc3ViamVjdCxcbiAgICAgICAgICAgIGdyYWRlLFxuICAgICAgICAgICAgdXNlcl9pZCxcbiAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICBpbWFnZV9pZFxuICAgICAgICApO1xuICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5PSykuanNvbihcbiAgICAgICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5zdWNjZXNzKGRhdGEsIFwiVXBkYXRlIHN1Y2Nlc3MhXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5VTkFVVEhPUklaRUQpLmpzb24oXG4gICAgICAgICAgICAgICAgTWVzc2FnZUZhY3RvcnkuZXJyb3IoXCJVcGRhdGUgZXJyb3JcIilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBuZXh0KGVycm9yKTtcbiAgICB9XG59O1xuZXhwb3J0cy51cGRhdGVTdWdnZXN0aW9uT3JWaWV3ZXJzID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcG9zdF9pZCA9IHJlcS5wYXJhbXMuaWQ7XG4gICAgICAgIGNvbnN0IHsgc3VnZ2VzdGlvbiwgdmlld2VycywgdXNlcl9pZCwgdHlwZSB9ID0gcmVxLmJvZHk7XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGNvbW11bml0eVNlcnZpY2UudXBkYXRlU3VnZ2VzdGlvbk9yVmlld2VycyhcbiAgICAgICAgICAgIHN1Z2dlc3Rpb24sXG4gICAgICAgICAgICB2aWV3ZXJzLFxuICAgICAgICAgICAgdXNlcl9pZCxcbiAgICAgICAgICAgIHBvc3RfaWQsXG4gICAgICAgICAgICB0eXBlXG4gICAgICAgICk7XG4gICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLk9LKS5qc29uKFxuICAgICAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LnN1Y2Nlc3MoZGF0YSwgXCJVcGRhdGUgc3VjY2VzcyFcIilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLlVOQVVUSE9SSVpFRCkuanNvbihcbiAgICAgICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5lcnJvcihcIlVwZGF0ZSBlcnJvclwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbn07XG5leHBvcnRzLmdldEJ5SWQgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBzbm8gPSByZXEucGFyYW1zLmlkO1xuXG4gICAgICAgIGxldCBkYXRhID0gYXdhaXQgY29tbXVuaXR5U2VydmljZS5nZXRCeUlkKHNubyk7XG5cbiAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoU3RhdHVzQ29kZXMuVU5BVVRIT1JJWkVEKS5qc29uKFxuICAgICAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LnN1Y2Nlc3Moe30sIFwiVGhlIGRhdGEgcG9zdCBlbXB0eS5cIilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLk9LKS5qc29uKFxuICAgICAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LnN1Y2Nlc3MoZGF0YSwgXCJHZXQgcG9zdCBzdWNjZXNzIVwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbn07XG5leHBvcnRzLmdldENvbW11bml0eVdpc2hsaXN0cyA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBhZ2VkID0gcGFyc2VJbnQocmVxLnF1ZXJ5LnBhZ2VkKSB8fCAxO1xuICAgICAgICBjb25zdCBsaW1pdCA9IHBhcnNlSW50KHJlcS5xdWVyeS5saW1pdCkgfHwgMTA7XG4gICAgICAgIGNvbnNvbGUubG9nKHsgcGFnZWQsIGxpbWl0IH0pO1xuICAgICAgICBsZXQgZGF0YSA9IGF3YWl0IHdpc2hsaXN0U2VydmljZS5nZXRDb21tdW5pdHlXaXNobGlzdHMocGFnZWQsIGxpbWl0KTtcblxuICAgICAgICBpZiAoZGF0YSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5VTkFVVEhPUklaRUQpLmpzb24oXG4gICAgICAgICAgICAgICAgTWVzc2FnZUZhY3Rvcnkuc3VjY2Vzcyh7fSwgXCJUaGUgZGF0YSBwb3N0IGVtcHR5LlwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoU3RhdHVzQ29kZXMuT0spLmpzb24oXG4gICAgICAgICAgICAgICAgTWVzc2FnZUZhY3Rvcnkuc3VjY2VzcyhkYXRhLCBcIkdldCBwb3N0IHN1Y2Nlc3MhXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbmV4dChlcnJvcik7XG4gICAgfVxufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTTtFQUFFQTtBQUFZLENBQUMsR0FBR0MsT0FBTyxDQUFDLG1CQUFtQixDQUFDO0FBQ3BELE1BQU1DLGdCQUFnQixHQUFHRCxPQUFPLENBQUMsOEJBQThCLENBQUM7QUFDaEUsTUFBTUUsZUFBZSxHQUFHRixPQUFPLENBQUMsNkJBQTZCLENBQUM7QUFDOUQsTUFBTUcsY0FBYyxHQUFHSCxPQUFPLENBQUMsNEJBQTRCLENBQUM7QUFDNUQsTUFBTUksTUFBTSxHQUFHSixPQUFPLENBQUMsVUFBVSxDQUFDOztBQUVsQztBQUNBLE1BQU1LLGNBQWMsR0FBR0wsT0FBTyxDQUFDLHlCQUF5QixDQUFDO0FBQ3pELE1BQU1NLHFCQUFxQixHQUFHTixPQUFPLENBQUMsZ0NBQWdDLENBQUM7QUFFdkVPLE9BQU8s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","map":{"version":3,"names":["StatusCodes","require","communityService","wishlistService","commentService","bcrypt","MessageFactory","RemoveValueNullObject","exports","getAllWithUserID","req","res","user_id","params","data","status","UNAUTHORIZED","json","success","OK","getAllWithType","type","getAll","paged","parseInt","query","limit","filter","create","next","title","content","class_type","subject","grade","body","files","attachments","file","id","hash","originalname","push","name","url","process","env","BASIC_URL","path","createPost","error","update","image_id","sno","updateSuggestionOrViewers","post_id","suggestion","viewers","getById","getCommunityWishlists","console","log"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/controllers/","sources":["communityController.js"],"sourcesContent":["const { StatusCodes } = require(\"http-status-codes\");\nconst communityService = require(\"../services/communityService\");\nconst wishlistService = require(\"../services/wishlistService\");\nconst commentService = require(\"../services/commentService\");\nconst bcrypt = require(\"bcryptjs\");\n\n//import message factory\nconst MessageFactory = require(\"../utils/messageFactory\");\nconst RemoveValueNullObject = require(\"../utils/removeValueNullObject\");\n\nexports.getAllWithUserID = async (req, res) => {\n    const user_id = req.params.user_id;\n\n    let data = await communityService.getAllWithUserID(user_id);\n\n    if (data === null) {\n        res.status(StatusCodes.UNAUTHORIZED).json(\n            MessageFactory.success({}, \"The data post empty.\")\n        );\n    } else {\n        res.status(StatusCodes.OK).json(\n            MessageFactory.success(data, \"Get all post success!\")\n        );\n    }\n};\nexports.getAllWithType = async (req, res) => {\n    const type = req.params.type;\n    let data = await communityService.getAllWithType(type);\n\n    if (data === null) {\n        res.status(StatusCodes.UNAUTHORIZED).json(\n            MessageFactory.success({}, \"The data post empty.\")\n        );\n    } else {\n        res.status(StatusCodes.OK).json(\n            MessageFactory.success(data, \"Get all post success!\")\n        );\n    }\n};\n\nexports.getAll = async (req, res) => {\n    const paged = parseInt(req.query.paged) || 1;\n    const limit = parseInt(req.query.limit) || 10;\n    const filter = req.query.filter;\n    const type = req.query.type || \"free_board\";\n\n    const data = await communityService.getAll({ paged, limit, filter, type });\n\n    if (data === null) {\n        res.status(StatusCodes.UNAUTHORIZED).json(\n            MessageFactory.success({}, \"The data post empty.\")\n        );\n    } else {\n        res.status(StatusCodes.OK).json(\n            MessageFactory.success(data, \"Get all post success!\")\n        );\n    }\n};\n\nexports.create = async (req, res, next) => {\n    try {\n        const { title, content, class_type, subject, grade, user_id, type } =\n            req.body;\n        const files = req.files;\n        let attachments = [];\n\n        for (const file of files) {\n            let id = await bcrypt.hash(file.originalname, 8);\n            attachments.push({\n                name: file.originalname,\n                url: `${process.env.BASIC_URL}/${file.path}`,\n                id: id,\n            });\n        }\n\n        const data = await communityService.createPost(\n            title,\n            content,\n            class_type,\n            subject,\n            grade,\n            user_id,\n            attachments,\n            type\n        );\n        if (data) {\n            res.status(StatusCodes.OK).json(\n                MessageFactory.success(data, \"Created success!\")\n            );\n        } else {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.error(\"Created error\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\n\nexports.update = async (req, res, next) => {\n    try {\n        const {\n            title,\n            content,\n            class_type,\n            subject,\n            grade,\n            user_id,\n            image_id,\n        } = req.body;\n        const sno = req.params.id;\n\n        const data = await communityService.update(\n            sno,\n            title,\n            content,\n            class_type,\n            subject,\n            grade,\n            user_id,\n            \"\",\n            image_id\n        );\n        if (data) {\n            res.status(StatusCodes.OK).json(\n                MessageFactory.success(data, \"Update success!\")\n            );\n        } else {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.error(\"Update error\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\nexports.updateSuggestionOrViewers = async (req, res, next) => {\n    try {\n        const post_id = req.params.id;\n        const { suggestion, viewers, user_id, type } = req.body;\n\n        const data = await communityService.updateSuggestionOrViewers(\n            suggestion,\n            viewers,\n            user_id,\n            post_id,\n            type\n        );\n        if (data) {\n            res.status(StatusCodes.OK).json(\n                MessageFactory.success(data, \"Update success!\")\n            );\n        } else {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.error(\"Update error\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\nexports.getById = async (req, res, next) => {\n    try {\n        const sno = req.params.id;\n\n        let data = await communityService.getById(sno);\n\n        if (data === null) {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.success({}, \"The data post empty.\")\n            );\n        } else {\n            res.status(StatusCodes.OK).json(\n                MessageFactory.success(data, \"Get post success!\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\nexports.getCommunityWishlists = async (req, res, next) => {\n    try {\n        const paged = parseInt(req.query.paged) || 1;\n        const limit = parseInt(req.query.limit) || 10;\n        console.log({ paged, limit });\n        let data = await wishlistService.getCommunityWishlists(paged, limit);\n\n        if (data === null) {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.success({}, \"The data post empty.\")\n            );\n        } else {\n            res.status(StatusCodes.OK).json(\n                MessageFactory.success(data, \"Get post success!\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\n"],"mappings":"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","ignoreList":[]}},"mtime":1722562710846},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/communityService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const Community = require(\"../models/communityModel\");\nconst Comment = require(\"../models/commentModel\");\nconst User = require(\"../models/usedModel\");\nconst PostReaction = require(\"../models/communityReactionModel\");\nexports.getAllWithUserID = async user_id => {\n  return await Community.findAll({\n    where: {\n      user_id\n    },\n    include: [\"comments\", \"user\"]\n  });\n};\nexports.getById = async sno => {\n  let data = await Community.findOne({\n    where: {\n      sno\n    },\n    include: [{\n      model: Comment,\n      as: \"comments\",\n      include: [\"user\"]\n    }, {\n      model: User,\n      as: \"user\",\n      attributes: [\"id\", \"name\", \"email\", \"profile\", \"types\", \"school\", \"subjects\", \"teacher_type\"]\n    }, {\n      model: PostReaction,\n      as: \"reactions\"\n    }]\n  });\n  let newDataPost = {\n    ...data.get({\n      plain: true\n    })\n  };\n  //handle comment\n  let dataComments = data.comments.map(result => result.get({\n    plain: true\n  }));\n  const likes = data.reactions.filter(reaction => reaction.type === \"like\");\n  const dislikes = data.reactions.filter(reaction => reaction.type === \"dislike\");\n  newDataPost[\"reactions\"] = {\n    likes,\n    dislikes\n  };\n  await processComments(dataComments).then(newComments => {\n    newDataPost[\"comments\"] = newComments;\n  });\n  return newDataPost;\n};\nasync function processComments(dataComments) {\n  const newComments = [];\n  await Promise.all(dataComments.map(async comment => {\n    let newDataComment = {\n      ...comment\n    };\n    if (comment.parent_comment_id == null) {\n      const replies = dataComments.filter(item => item.parent_comment_id === comment.id).map(reply => ({\n        ...reply\n      }));\n      newDataComment[\"replies\"] = replies;\n      newComments.push(newDataComment);\n    }\n  }));\n  return newComments;\n}\nexports.getAllWithType = async type => {\n  return await Community.findAll({\n    where: {\n      type\n    }\n  });\n};\nexports.getAll = async ({\n  paged,\n  limit,\n  filter,\n  type\n}) => {\n  const offset = (paged - 1) * limit;\n  let query = {\n    include: [{\n      model: User,\n      as: \"user\",\n      attributes: [\"id\", \"name\", \"email\", \"profile\", \"types\", \"school\", \"subjects\", \"teacher_type\"]\n    }],\n    order: [[\"createdAt\", \"DESC\"]]\n  };\n  if (paged) {\n    query[\"offset\"] = offset;\n  }\n  if (limit) {\n    query[\"limit\"] = limit;\n  }\n  if (filter) {\n    switch (filter) {\n      case \"class_type\":\n    }\n  }\n  if (type) {\n    query[\"where\"] = {\n      type\n    };\n  }\n  const {\n    count,\n    rows\n  } = await Community.findAndCountAll(query);\n  const totalPages = Math.ceil(count / limit);\n  return {\n    items: rows,\n    totalItems: count,\n    itemCount: rows.length,\n    itemsPerPage: limit,\n    totalPages,\n    currentPage: paged\n  };\n};\nexports.createPost = async (title, content, class_type, subject, grade, user_id, attachments, type) => {\n  let suggestion = {\n    listUserId: []\n  };\n  let data = await Community.create({\n    sno: null,\n    title,\n    content,\n    class_type,\n    subject,\n    grade,\n    user_id,\n    attachments: {\n      attachments\n    },\n    suggestion,\n    type,\n    viewers: 0\n  });\n  return data;\n};\nexports.updateSuggestionOrViewers = async (suggestion, viewers, user_id, post_id, type) => {\n  let data = await Community.findOne({\n    where: {\n      sno: post_id\n    },\n    include: [{\n      model: PostReaction,\n      as: \"reactions\"\n    }],\n    attributes: [\"sno\", \"class_type\", \"type\", \"subject\", \"grade\", \"title\", \"content\", \"user_id\", \"viewers\", \"createdAt\", \"createdAt\", \"suggestion\"]\n  });\n  if (data == null) {\n    throw new Error(\"The post not exits!\");\n  }\n  let typeReaction = [\"like\", \"dislike\"];\n  if (typeReaction.includes(type)) {\n    let [reaction, created] = await PostReaction.findOrCreate({\n      where: {\n        post_id,\n        user_id\n      },\n      defaults: {\n        id: null,\n        post_id,\n        user_id,\n        type\n      }\n    });\n    if (!created) {\n      if (type != reaction.type) {\n        reaction.type = type;\n        reaction.save({\n          fields: [\"type\"]\n        });\n      } else {\n        let typeReaction = [\"like\", \"dislike\"];\n        if (typeReaction.includes(type)) {\n          await PostReaction.destroy({\n            where: {\n              id: reaction.id\n            }\n          });\n        }\n      }\n    }\n  }\n  if (type == \"viewers\") {\n    let listUserId = data.suggestion.listUserId;\n    if (!listUserId.includes(user_id)) {\n      listUserId.push(user_id);\n      let suggestion = {\n        listUserId: listUserId\n      };\n      data.viewers = data.viewers + 1;\n      data.suggestion = suggestion;\n      data.save({\n        fields: [\"viewers\", \"suggestion\"]\n      });\n    }\n  }\n  return data;\n};\nexports.update = async (sno, title, content, class_type, subject, grade, user_id, attachments, image_id) => {\n  //fix id post admin\n  let post_id = 6;\n  if (post_id != sno) {\n    throw new Error(\"The post id not exits!!\");\n  }\n  let data = await Community.findOne({\n    where: {\n      sno\n    }\n  });\n  if (data == null) {\n    throw new Error(\"The post not exits!!\");\n  }\n  if (title != null) {\n    data.title = title;\n  }\n  if (content != null) {\n    data.content = content;\n  }\n  if (user_id != null) {\n    data.user_id = user_id;\n  }\n  data.save({\n    fields: [\"title\", \"content\", \"user_id\"]\n  });\n  return data;\n};\nfunction handleGetResultSuggestion(suggestion) {}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDb21tdW5pdHkiLCJyZXF1aXJlIiwiQ29tbWVudCIsIlVzZXIiLCJQb3N0UmVhY3Rpb24iLCJleHBvcnRzIiwiZ2V0QWxsV2l0aFVzZXJJRCIsInVzZXJfaWQiLCJmaW5kQWxsIiwid2hlcmUiLCJpbmNsdWRlIiwiZ2V0QnlJZCIsInNubyIsImRhdGEiLCJmaW5kT25lIiwibW9kZWwiLCJhcyIsImF0dHJpYnV0ZXMiLCJuZXdEYXRhUG9zdCIsImdldCIsInBsYWluIiwiZGF0YUNvbW1lbnRzIiwiY29tbWVudHMiLCJtYXAiLCJyZXN1bHQiLCJsaWtlcyIsInJlYWN0aW9ucyIsImZpbHRlciIsInJlYWN0aW9uIiwidHlwZSIsImRpc2xpa2VzIiwicHJvY2Vzc0NvbW1lbnRzIiwidGhlbiIsIm5ld0NvbW1lbnRzIiwiUHJvbWlzZSIsImFsbCIsImNvbW1lbnQiLCJuZXdEYXRhQ29tbWVudCIsInBhcmVudF9jb21tZW50X2lkIiwicmVwbGllcyIsIml0ZW0iLCJpZCIsInJlcGx5IiwicHVzaCIsImdldEFsbFdpdGhUeXBlIiwiZ2V0QWxsIiwicGFnZWQiLCJsaW1pdCIsIm9mZnNldCIsInF1ZXJ5Iiwib3JkZXIiLCJjb3VudCIsInJvd3MiLCJmaW5kQW5kQ291bnRBbGwiLCJ0b3RhbFBhZ2VzIiwiTWF0aCIsImNlaWwiLCJpdGVtcyIsInRvdGFsSXRlbXMiLCJpdGVtQ291bnQiLCJsZW5ndGgiLCJpdGVtc1BlclBhZ2UiLCJjdXJyZW50UGFnZSIsImNyZWF0ZVBvc3QiLCJ0aXRsZSIsImNvbnRlbnQiLCJjbGFzc190eXBlIiwic3ViamVjdCIsImdyYWRlIiwiYXR0YWNobWVudHMiLCJzdWdnZXN0aW9uIiwibGlzdFVzZXJJZCIsImNyZWF0ZSIsInZpZXdlcnMiLCJ1cGRhdGVTdWdnZXN0aW9uT3JWaWV3ZXJzIiwicG9zdF9pZCIsIkVycm9yIiwidHlwZVJlYWN0aW9uIiwiaW5jbHVkZXMiLCJjcmVhdGVkIiwiZmluZE9yQ3JlYXRlIiwiZGVmYXVsdHMiLCJzYXZlIiwiZmllbGRzIiwiZGVzdHJveSIsInVwZGF0ZSIsImltYWdlX2lkIiwiaGFuZGxlR2V0UmVzdWx0U3VnZ2VzdGlvbiJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL3NlcnZpY2VzLyIsInNvdXJjZXMiOlsiY29tbXVuaXR5U2VydmljZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBDb21tdW5pdHkgPSByZXF1aXJlKFwiLi4vbW9kZWxzL2NvbW11bml0eU1vZGVsXCIpO1xuY29uc3QgQ29tbWVudCA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvY29tbWVudE1vZGVsXCIpO1xuY29uc3QgVXNlciA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvdXNlZE1vZGVsXCIpO1xuY29uc3QgUG9zdFJlYWN0aW9uID0gcmVxdWlyZShcIi4uL21vZGVscy9jb21tdW5pdHlSZWFjdGlvbk1vZGVsXCIpO1xuXG5leHBvcnRzLmdldEFsbFdpdGhVc2VySUQgPSBhc3luYyAodXNlcl9pZCkgPT4ge1xuICAgIHJldHVybiBhd2FpdCBDb21tdW5pdHkuZmluZEFsbCh7XG4gICAgICAgIHdoZXJlOiB7IHVzZXJfaWQgfSxcbiAgICAgICAgaW5jbHVkZTogW1wiY29tbWVudHNcIiwgXCJ1c2VyXCJdLFxuICAgIH0pO1xufTtcbmV4cG9ydHMuZ2V0QnlJZCA9IGFzeW5jIChzbm8pID0+IHtcbiAgICBsZXQgZGF0YSA9IGF3YWl0IENvbW11bml0eS5maW5kT25lKHtcbiAgICAgICAgd2hlcmU6IHsgc25vIH0sXG4gICAgICAgIGluY2x1ZGU6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBtb2RlbDogQ29tbWVudCxcbiAgICAgICAgICAgICAgICBhczogXCJjb21tZW50c1wiLFxuICAgICAgICAgICAgICAgIGluY2x1ZGU6IFtcInVzZXJcIl0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG1vZGVsOiBVc2VyLFxuICAgICAgICAgICAgICAgIGFzOiBcInVzZXJcIixcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBbXG4gICAgICAgICAgICAgICAgICAgIFwiaWRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiZW1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgXCJwcm9maWxlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidHlwZXNcIixcbiAgICAgICAgICAgICAgICAgICAgXCJzY2hvb2xcIixcbiAgICAgICAgICAgICAgICAgICAgXCJzdWJqZWN0c1wiLFxuICAgICAgICAgICAgICAgICAgICBcInRlYWNoZXJfdHlwZVwiLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG1vZGVsOiBQb3N0UmVhY3Rpb24sXG4gICAgICAgICAgICAgICAgYXM6IFwicmVhY3Rpb25zXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgIH0pO1xuICAgIGxldCBuZXdEYXRhUG9zdCA9IHsgLi4uZGF0YS5nZXQoeyBwbGFpbjogdHJ1ZSB9KSB9O1xuICAgIC8vaGFuZGxlIGNvbW1lbnRcbiAgICBsZXQgZGF0YUNvbW1lbnRzID0gZGF0YS5jb21tZW50cy5tYXAoKHJlc3VsdCkgPT5cbiAgICAgICAgcmVzdWx0LmdldCh7IHBsYWluOiB0cnVlIH0pXG4gICAgKTtcblxuICAgIGNvbnN0IGxpa2VzID0gZGF0YS5yZWFjdGlvbnMuZmlsdGVyKChyZWFjdGlvbikgPT4gcmVhY3Rpb24udHlwZSA9PT0gXCJsaWtlXCIpO1xuICAgIGNvbnN0IGRpc2xpa2VzID0gZGF0YS5yZWFjdGlvbnMuZmlsdGVyKFxuICAgICAgICAocmVhY3Rpb24pID0+IHJlYWN0aW9uLnR5cGUgPT09IFwiZGlzbGlrZVwiXG4gICAgKTtcbiAgICBuZXdEYXRhUG9zdFtcInJlYWN0aW9uc1wiXSA9IHsgbGlrZXMsIGRpc2xpa2VzIH07XG5cbiAgICBhd2FpdCBwcm9jZXNzQ29tbWVudHMoZGF0YUNvbW1lbnRzKS50aGVuKChuZXdDb21tZW50cykgPT4ge1xuICAgICAgICBuZXdEYXRhUG9zdFtcImNvbW1lbnRzXCJdID0gbmV3Q29tbWVudHM7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gbmV3RGF0YVBvc3Q7XG59O1xuYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc0NvbW1lbnRzKGRhdGFDb21tZW50cykge1xuICAgIGNvbnN0IG5ld0NvbW1lbnRzID0gW107XG5cbiAgICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgZGF0YUNvbW1lbnRzLm1hcChhc3luYyAoY29tbWVudCkgPT4ge1xuICAgICAgICAgICAgbGV0IG5ld0RhdGFDb21tZW50ID0geyAuLi5jb21tZW50IH07XG4gICAgICAgICAgICBpZiAoY29tbWVudC5wYXJlbnRfY29tbWVudF9pZCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVwbGllcyA9IGRhdGFDb21tZW50c1xuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtLnBhcmVudF9jb21tZW50X2lkID09PSBjb21tZW50LmlkKVxuICAgICAgICAgICAgICAgICAgICAubWFwKChyZXBseSkgPT4gKHsgLi4ucmVwbHkgfSkpO1xuICAgICAgICAgICAgICAgIG5ld0RhdGFDb21tZW50W1wicmVwbGllc1wiXSA9IHJlcGxpZXM7XG4gICAgICAgICAgICAgICAgbmV3Q29tbWVudHMucHVzaChuZXdEYXRhQ29tbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIHJldHVybiBuZXdDb21tZW50cztcbn1cbmV4cG9ydHMuZ2V0QWxsV2l0aFR5cGUgPSBhc3luYyAodHlwZSkgPT4ge1xuICAgIHJldHVybiBhd2FpdCBDb21tdW5pdHkuZmluZEFsbCh7XG4gICAgICAgIHdoZXJlOiB7IHR5cGUgfSxcbiAgICB9KTtcbn07XG5leHBvcnRzLmdldEFsbCA9IGFzeW5jICh7IHBhZ2VkLCBsaW1pdCwgZmlsdGVyLCB0eXBlIH0pID0+IHtcbiAgICBjb25zdCBvZmZzZXQgPSAocGFnZWQgLSAxKSAqIGxpbWl0O1xuICAgIGxldCBxdWVyeSA9IHtcbiAgICAgICAgaW5jbHVkZTogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG1vZGVsOiBVc2VyLFxuICAgICAgICAgICAgICAgIGFzOiBcInVzZXJcIixcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBbXG4gICAgICAgICAgICAgICAgICAgIFwiaWRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiZW1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgXCJwcm9maWxlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidHlwZXNcIixcbiAgICAgICAgICAgICAgICAgICAgXCJzY2hvb2xcIixcbiAgICAgICAgICAgICAgICAgICAgXCJzdWJqZWN0c1wiLFxuICAgICAgICAgICAgICAgICAgICBcInRlYWNoZXJfdHlwZVwiLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBvcmRlcjogW1tcImNyZWF0ZWRBdFwiLCBcIkRFU0NcIl1dLFxuICAgIH07XG5cbiAgICBpZiAocGFnZWQpIHtcbiAgICAgICAgcXVlcnlbXCJvZmZzZXRcIl0gPSBvZmZzZXQ7XG4gICAgfVxuICAgIGlmIChsaW1pdCkge1xuICAgICAgICBxdWVyeVtcImxpbWl0XCJdID0gbGltaXQ7XG4gICAgfVxuICAgIGlmIChmaWx0ZXIpIHtcbiAgICAgICAgc3dpdGNoIChmaWx0ZXIpIHtcbiAgICAgICAgICAgIGNhc2UgXCJjbGFzc190eXBlXCI6XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGUpIHtcbiAgICAgICAgcXVlcnlbXCJ3aGVyZVwiXSA9IHsgdHlwZSB9O1xuICAgIH1cblxuICAgIGNvbnN0IHsgY291bnQsIHJvd3MgfSA9IGF3YWl0IENvbW11bml0eS5maW5kQW5kQ291bnRBbGwocXVlcnkpO1xuXG4gICAgY29uc3QgdG90YWxQYWdlcyA9IE1hdGguY2VpbChjb3VudCAvIGxpbWl0KTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGl0ZW1zOiByb3dzLFxuICAgICAgICB0b3RhbEl0ZW1zOiBjb3VudCxcbiAgICAgICAgaXRlbUNvdW50OiByb3dzLmxlbmd0aCxcbiAgICAgICAgaXRlbXNQZXJQYWdlOiBsaW1pdCxcbiAgICAgICAgdG90YWxQYWdlcyxcbiAgICAgICAgY3VycmVudFBhZ2U6IHBhZ2VkLFxuICAgIH07XG59O1xuXG5leHBvcnRzLmNyZWF0ZVBvc3QgPSBhc3luYyAoXG4gICAgdGl0bGUsXG4gICAgY29udGVudCxcbiAgICBjbGFzc190eXBlLFxuICAgIHN1YmplY3QsXG4gICAgZ3JhZGUsXG4gICAgdXNlcl9pZCxcbiAgICBhdHRhY2htZW50cyxcbiAgICB0eXBlXG4pID0+IHtcbiAgICBsZXQgc3VnZ2VzdGlvbiA9IHsgbGlzdFVzZXJJZDogW10gfTtcbiAgICBsZXQgZGF0YSA9IGF3YWl0IENvbW11bml0eS5jcmVhdGUoe1xuICAgICAgICBzbm86IG51bGwsXG4gICAgICAgIHRpdGxlLFxuICAgICAgICBjb250ZW50LFxuICAgICAgICBjbGFzc190eXBlLFxuICAgICAgICBzdWJqZWN0LFxuICAgICAgICBncmFkZSxcbiAgICAgICAgdXNlcl9pZCxcbiAgICAgICAgYXR0YWNobWVudHM6IHsgYXR0YWNobWVudHMgfSxcbiAgICAgICAgc3VnZ2VzdGlvbixcbiAgICAgICAgdHlwZSxcbiAgICAgICAgdmlld2VyczogMCxcbiAgICB9KTtcblxuICAgIHJldHVybiBkYXRhO1xufTtcblxuZXhwb3J0cy51cGRhdGVTdWdnZXN0aW9uT3JWaWV3ZXJzID0gYXN5bmMgKFxuICAgIHN1Z2dlc3Rpb24sXG4gICAgdmlld2VycyxcbiAgICB1c2VyX2lkLFxuICAgIHBvc3RfaWQsXG4gICAgdHlwZVxuKSA9PiB7XG4gICAgbGV0IGRhdGEgPSBhd2FpdCBDb21tdW5pdHkuZmluZE9uZSh7XG4gICAgICAgIHdoZXJlOiB7IHNubzogcG9zdF9pZCB9LFxuICAgICAgICBpbmNsdWRlOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbW9kZWw6IFBvc3RSZWFjdGlvbixcbiAgICAgICAgICAgICAgICBhczogXCJyZWFjdGlvbnNcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIGF0dHJpYnV0ZXM6IFtcbiAgICAgICAgICAgIFwic25vXCIsXG4gICAgICAgICAgICBcImNsYXNzX3R5cGVcIixcbiAgICAgICAgICAgIFwidHlwZVwiLFxuICAgICAgICAgICAgXCJzdWJqZWN0XCIsXG4gICAgICAgICAgICBcImdyYWRlXCIsXG4gICAgICAgICAgICBcInRpdGxlXCIsXG4gICAgICAgICAgICBcImNvbnRlbnRcIixcbiAgICAgICAgICAgIFwidXNlcl9pZFwiLFxuICAgICAgICAgICAgXCJ2aWV3ZXJzXCIsXG4gICAgICAgICAgICBcImNyZWF0ZWRBdFwiLFxuICAgICAgICAgICAgXCJjcmVhdGVkQXRcIixcbiAgICAgICAgICAgIFwic3VnZ2VzdGlvblwiLFxuICAgICAgICBdLFxuICAgIH0pO1xuICAgIGlmIChkYXRhID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHBvc3Qgbm90IGV4aXRzIVwiKTtcbiAgICB9XG4gICAgbGV0IHR5cGVSZWFjdGlvbiA9IFtcImxpa2VcIiwgXCJkaXNsaWtlXCJdO1xuICAgIGlmICh0eXBlUmVhY3Rpb24uaW5jbHVkZXModHlwZSkpIHtcbiAgICAgICAgbGV0IFtyZWFjdGlvbiwgY3JlYXRlZF0gPSBhd2FpdCBQb3N0UmVhY3Rpb24uZmluZE9yQ3JlYXRlKHtcbiAgICAgICAgICAgIHdoZXJlOiB7IHBvc3RfaWQsIHVzZXJfaWQgfSxcbiAgICAgICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICAgICAgaWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgcG9zdF9pZCxcbiAgICAgICAgICAgICAgICB1c2VyX2lkLFxuICAgICAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFjcmVhdGVkKSB7XG4gICAgICAgICAgICBpZiAodHlwZSAhPSByZWFjdGlvbi50eXBlKSB7XG4gICAgICAgICAgICAgICAgcmVhY3Rpb24udHlwZSA9IHR5cGU7XG4gICAgICAgICAgICAgICAgcmVhY3Rpb24uc2F2ZSh7IGZpZWxkczogW1widHlwZVwiXSB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IHR5cGVSZWFjdGlvbiA9IFtcImxpa2VcIiwgXCJkaXNsaWtlXCJdO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlUmVhY3Rpb24uaW5jbHVkZXModHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgUG9zdFJlYWN0aW9uLmRlc3Ryb3koeyB3aGVyZTogeyBpZDogcmVhY3Rpb24uaWQgfSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGUgPT0gXCJ2aWV3ZXJzXCIpIHtcbiAgICAgICAgbGV0IGxpc3RVc2VySWQgPSBkYXRhLnN1Z2dlc3Rpb24ubGlzdFVzZXJJZDtcbiAgICAgICAgaWYgKCFsaXN0VXNlcklkLmluY2x1ZGVzKHVzZXJfaWQpKSB7XG4gICAgICAgICAgICBsaXN0VXNlcklkLnB1c2godXNlcl9pZCk7XG4gICAgICAgICAgICBsZXQgc3VnZ2VzdGlvbiA9IHsgbGlzdFVzZXJJZDogbGlzdFVzZXJJZCB9O1xuICAgICAgICAgICAgZGF0YS52aWV3ZXJzID0gZGF0YS52aWV3ZXJzICsgMTtcbiAgICAgICAgICAgIGRhdGEuc3VnZ2VzdGlvbiA9IHN1Z2dlc3Rpb247XG4gICAgICAgICAgICBkYXRhLnNhdmUoeyBmaWVsZHM6IFtcInZpZXdlcnNcIiwgXCJzdWdnZXN0aW9uXCJdIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGE7XG59O1xuZXhwb3J0cy51cGRhdGUgPSBhc3luYyAoXG4gICAgc25vLFxuICAgIHRpdGxlLFxuICAgIGNvbnRlbnQsXG4gICAgY2xhc3NfdHlwZSxcbiAgICBzdWJqZWN0LFxuICAgIGdyYWRlLFxuICAgIHVzZXJfaWQsXG4gICAgYXR0YWNobWVudHMsXG4gICAgaW1hZ2VfaWRcbikgPT4ge1xuICAgIC8vZml4IGlkIHBvc3QgYWRtaW5cbiAgICBsZXQgcG9zdF9pZCA9IDY7XG4gICAgaWYgKHBvc3RfaWQgIT0gc25vKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBwb3N0IGlkIG5vdCBleGl0cyEhXCIpO1xuICAgIH1cbiAgICBsZXQgZGF0YSA9IGF3YWl0IENvbW11bml0eS5maW5kT25lKHtcbiAgICAgICAgd2hlcmU6IHsgc25vIH0sXG4gICAgfSk7XG4gICAgaWYgKGRhdGEgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgcG9zdCBub3QgZXhpdHMhIVwiKTtcbiAgICB9XG4gICAgaWYgKHRpdGxlICE9IG51bGwpIHtcbiAgICAgICAgZGF0YS50aXRsZSA9IHRpdGxlO1xuICAgIH1cbiAgICBpZiAoY29udGVudCAhPSBudWxsKSB7XG4gICAgICAgIGRhdGEuY29udGVudCA9IGNvbnRlbnQ7XG4gICAgfVxuICAgIGlmICh1c2VyX2lkICE9IG51bGwpIHtcbiAgICAgICAgZGF0YS51c2VyX2lkID0gdXNlcl9pZDtcbiAgICB9XG4gICAgZGF0YS5zYXZlKHtcbiAgICAgICAgZmllbGRzOiBbXCJ0aXRsZVwiLCBcImNvbnRlbnRcIiwgXCJ1c2VyX2lkXCJdLFxuICAgIH0pO1xuICAgIHJldHVybiBkYXRhO1xufTtcblxuZnVuY3Rpb24gaGFuZGxlR2V0UmVzdWx0U3VnZ2VzdGlvbihzdWdn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","map":{"version":3,"names":["Community","require","Comment","User","PostReaction","exports","getAllWithUserID","user_id","findAll","where","include","getById","sno","data","findOne","model","as","attributes","newDataPost","get","plain","dataComments","comments","map","result","likes","reactions","filter","reaction","type","dislikes","processComments","then","newComments","Promise","all","comment","newDataComment","parent_comment_id","replies","item","id","reply","push","getAllWithType","getAll","paged","limit","offset","query","order","count","rows","findAndCountAll","totalPages","Math","ceil","items","totalItems","itemCount","length","itemsPerPage","currentPage","createPost","title","content","class_type","subject","grade","attachments","suggestion","listUserId","create","viewers","updateSuggestionOrViewers","post_id","Error","typeReaction","includes","created","findOrCreate","defaults","save","fields","destroy","update","image_id","handleGetResultSuggestion"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/","sources":["communityService.js"],"sourcesContent":["const Community = require(\"../models/communityModel\");\nconst Comment = require(\"../models/commentModel\");\nconst User = require(\"../models/usedModel\");\nconst PostReaction = require(\"../models/communityReactionModel\");\n\nexports.getAllWithUserID = async (user_id) => {\n    return await Community.findAll({\n        where: { user_id },\n        include: [\"comments\", \"user\"],\n    });\n};\nexports.getById = async (sno) => {\n    let data = await Community.findOne({\n        where: { sno },\n        include: [\n            {\n                model: Comment,\n                as: \"comments\",\n                include: [\"user\"],\n            },\n            {\n                model: User,\n                as: \"user\",\n                attributes: [\n                    \"id\",\n                    \"name\",\n                    \"email\",\n                    \"profile\",\n                    \"types\",\n                    \"school\",\n                    \"subjects\",\n                    \"teacher_type\",\n                ],\n            },\n            {\n                model: PostReaction,\n                as: \"reactions\",\n            },\n        ],\n    });\n    let newDataPost = { ...data.get({ plain: true }) };\n    //handle comment\n    let dataComments = data.comments.map((result) =>\n        result.get({ plain: true })\n    );\n\n    const likes = data.reactions.filter((reaction) => reaction.type === \"like\");\n    const dislikes = data.reactions.filter(\n        (reaction) => reaction.type === \"dislike\"\n    );\n    newDataPost[\"reactions\"] = { likes, dislikes };\n\n    await processComments(dataComments).then((newComments) => {\n        newDataPost[\"comments\"] = newComments;\n    });\n\n    return newDataPost;\n};\nasync function processComments(dataComments) {\n    const newComments = [];\n\n    await Promise.all(\n        dataComments.map(async (comment) => {\n            let newDataComment = { ...comment };\n            if (comment.parent_comment_id == null) {\n                const replies = dataComments\n                    .filter((item) => item.parent_comment_id === comment.id)\n                    .map((reply) => ({ ...reply }));\n                newDataComment[\"replies\"] = replies;\n                newComments.push(newDataComment);\n            }\n        })\n    );\n\n    return newComments;\n}\nexports.getAllWithType = async (type) => {\n    return await Community.findAll({\n        where: { type },\n    });\n};\nexports.getAll = async ({ paged, limit, filter, type }) => {\n    const offset = (paged - 1) * limit;\n    let query = {\n        include: [\n            {\n                model: User,\n                as: \"user\",\n                attributes: [\n                    \"id\",\n                    \"name\",\n                    \"email\",\n                    \"profile\",\n                    \"types\",\n                    \"school\",\n                    \"subjects\",\n                    \"teacher_type\",\n                ],\n            },\n        ],\n        order: [[\"createdAt\", \"DESC\"]],\n    };\n\n    if (paged) {\n        query[\"offset\"] = offset;\n    }\n    if (limit) {\n        query[\"limit\"] = limit;\n    }\n    if (filter) {\n        switch (filter) {\n            case \"class_type\":\n        }\n    }\n    if (type) {\n        query[\"where\"] = { type };\n    }\n\n    const { count, rows } = await Community.findAndCountAll(query);\n\n    const totalPages = Math.ceil(count / limit);\n\n    return {\n        items: rows,\n        totalItems: count,\n        itemCount: rows.length,\n        itemsPerPage: limit,\n        totalPages,\n        currentPage: paged,\n    };\n};\n\nexports.createPost = async (\n    title,\n    content,\n    class_type,\n    subject,\n    grade,\n    user_id,\n    attachments,\n    type\n) => {\n    let suggestion = { listUserId: [] };\n    let data = await Community.create({\n        sno: null,\n        title,\n        content,\n        class_type,\n        subject,\n        grade,\n        user_id,\n        attachments: { attachments },\n        suggestion,\n        type,\n        viewers: 0,\n    });\n\n    return data;\n};\n\nexports.updateSuggestionOrViewers = async (\n    suggestion,\n    viewers,\n    user_id,\n    post_id,\n    type\n) => {\n    let data = await Community.findOne({\n        where: { sno: post_id },\n        include: [\n            {\n                model: PostReaction,\n                as: \"reactions\",\n            },\n        ],\n        attributes: [\n            \"sno\",\n            \"class_type\",\n            \"type\",\n            \"subject\",\n            \"grade\",\n            \"title\",\n            \"content\",\n            \"user_id\",\n            \"viewers\",\n            \"createdAt\",\n            \"createdAt\",\n            \"suggestion\",\n        ],\n    });\n    if (data == null) {\n        throw new Error(\"The post not exits!\");\n    }\n    let typeReaction = [\"like\", \"dislike\"];\n    if (typeReaction.includes(type)) {\n        let [reaction, created] = await PostReaction.findOrCreate({\n            where: { post_id, user_id },\n            defaults: {\n                id: null,\n                post_id,\n                user_id,\n                type,\n            },\n        });\n        if (!created) {\n            if (type != reaction.type) {\n                reaction.type = type;\n                reaction.save({ fields: [\"type\"] });\n            } else {\n                let typeReaction = [\"like\", \"dislike\"];\n                if (typeReaction.includes(type)) {\n                    await PostReaction.destroy({ where: { id: reaction.id } });\n                }\n            }\n        }\n    }\n    if (type == \"viewers\") {\n        let listUserId = data.suggestion.listUserId;\n        if (!listUserId.includes(user_id)) {\n            listUserId.push(user_id);\n            let suggestion = { listUserId: listUserId };\n            data.viewers = data.viewers + 1;\n            data.suggestion = suggestion;\n            data.save({ fields: [\"viewers\", \"suggestion\"] });\n        }\n    }\n\n    return data;\n};\nexports.update = async (\n    sno,\n    title,\n    content,\n    class_type,\n    subject,\n    grade,\n    user_id,\n    attachments,\n    image_id\n) => {\n    //fix id post admin\n    let post_id = 6;\n    if (post_id != sno) {\n        throw new Error(\"The post id not exits!!\");\n    }\n    let data = await Community.findOne({\n        where: { sno },\n    });\n    if (data == null) {\n        throw new Error(\"The post not exits!!\");\n    }\n    if (title != null) {\n        data.title = title;\n    }\n    if (content != null) {\n        data.content = content;\n    }\n    if (user_id != null) {\n        data.user_id = user_id;\n    }\n    data.save({\n        fields: [\"title\", \"content\", \"user_id\"],\n    });\n    return data;\n};\n\nfunction handleGetResultSuggestion(suggestion) {}\n"],"mappings":"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","ignoreList":[]}},"mtime":1722937810062},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/communityModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const {\n  DataTypes\n} = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst Comment = require(\"../models/commentModel\");\nconst User = require(\"../models/usedModel\");\nconst PostReaction = require(\"../models/communityReactionModel\");\nconst Community = sequelize.define(\"Community\", {\n  sno: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  class_type: DataTypes.TEXT,\n  type: {\n    type: DataTypes.ENUM(\"free_board\", \"sharing\", \"admin\"),\n    defaultValue: \"free_board\"\n  },\n  subject: DataTypes.TEXT,\n  grade: DataTypes.TEXT,\n  title: DataTypes.TEXT,\n  content: DataTypes.TEXT,\n  attachments: DataTypes.JSON,\n  user_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"user_info\"\n      },\n      // provide table name\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  suggestion: DataTypes.JSON,\n  viewers: DataTypes.INTEGER\n}, {\n  timestamps: true,\n  createdAt: true,\n  updatedAt: true,\n  tableName: \"post\",\n  modelName: \"community\"\n});\nCommunity.hasMany(Comment, {\n  foreignKey: \"post_id\",\n  as: \"comments\"\n});\nCommunity.belongsTo(User, {\n  foreignKey: \"user_id\",\n  as: \"user\"\n});\nCommunity.hasMany(PostReaction, {\n  foreignKey: \"post_id\",\n  as: \"reactions\"\n});\nmodule.exports = Community;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEYXRhVHlwZXMiLCJyZXF1aXJlIiwic2VxdWVsaXplIiwiQ29tbWVudCIsIlVzZXIiLCJQb3N0UmVhY3Rpb24iLCJDb21tdW5pdHkiLCJkZWZpbmUiLCJzbm8iLCJ0eXBlIiwiSU5URUdFUiIsImF1dG9JbmNyZW1lbnQiLCJwcmltYXJ5S2V5IiwiYWxsb3dOdWxsIiwiY2xhc3NfdHlwZSIsIlRFWFQiLCJFTlVNIiwiZGVmYXVsdFZhbHVlIiwic3ViamVjdCIsImdyYWRlIiwidGl0bGUiLCJjb250ZW50IiwiYXR0YWNobWVudHMiLCJKU09OIiwidXNlcl9pZCIsInJlZmVyZW5jZXMiLCJtb2RlbCIsInRhYmxlTmFtZSIsImtleSIsIm9uVXBkYXRlIiwib25EZWxldGUiLCJzdWdnZXN0aW9uIiwidmlld2VycyIsInRpbWVzdGFtcHMiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJtb2RlbE5hbWUiLCJoYXNNYW55IiwiZm9yZWlnbktleSIsImFzIiwiYmVsb25nc1RvIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL21vZGVscy8iLCJzb3VyY2VzIjpbImNvbW11bml0eU1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgRGF0YVR5cGVzIH0gPSByZXF1aXJlKFwic2VxdWVsaXplXCIpO1xuY29uc3Qgc2VxdWVsaXplID0gcmVxdWlyZShcIi4uL2NvbmZpZy9kYXRhYmFzZVwiKTtcbmNvbnN0IENvbW1lbnQgPSByZXF1aXJlKFwiLi4vbW9kZWxzL2NvbW1lbnRNb2RlbFwiKTtcbmNvbnN0IFVzZXIgPSByZXF1aXJlKFwiLi4vbW9kZWxzL3VzZWRNb2RlbFwiKTtcbmNvbnN0IFBvc3RSZWFjdGlvbiA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvY29tbXVuaXR5UmVhY3Rpb25Nb2RlbFwiKTtcbmNvbnN0IENvbW11bml0eSA9IHNlcXVlbGl6ZS5kZWZpbmUoXG4gICAgXCJDb21tdW5pdHlcIixcbiAgICB7XG4gICAgICAgIHNubzoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgY2xhc3NfdHlwZTogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5FTlVNKFwiZnJlZV9ib2FyZFwiLCBcInNoYXJpbmdcIiwgXCJhZG1pblwiKSxcbiAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogXCJmcmVlX2JvYXJkXCIsXG4gICAgICAgIH0sXG4gICAgICAgIHN1YmplY3Q6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBncmFkZTogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIHRpdGxlOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgY29udGVudDogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIGF0dGFjaG1lbnRzOiBEYXRhVHlwZXMuSlNPTixcbiAgICAgICAgdXNlcl9pZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICAgICAgbW9kZWw6IHsgdGFibGVOYW1lOiBcInVzZXJfaW5mb1wiIH0sIC8vIHByb3ZpZGUgdGFibGUgbmFtZVxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgICAgICBvblVwZGF0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgICAgICBvbkRlbGV0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgIH0sXG4gICAgICAgIHN1Z2dlc3Rpb246IERhdGFUeXBlcy5KU09OLFxuICAgICAgICB2aWV3ZXJzOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdGltZXN0YW1wczogdHJ1ZSxcbiAgICAgICAgY3JlYXRlZEF0OiB0cnVlLFxuICAgICAgICB1cGRhdGVkQXQ6IHRydWUsXG4gICAgICAgIHRhYmxlTmFtZTogXCJwb3N0XCIsXG4gICAgICAgIG1vZGVsTmFtZTogXCJjb21tdW5pdHlcIixcbiAgICB9XG4pO1xuQ29tbXVuaXR5Lmhhc01hbnkoQ29tbWVudCwge1xuICAgIGZvcmVpZ25LZXk6IFwicG9zdF9pZFwiLFxuICAgIGFzOiBcImNvbW1lbnRzXCIsXG59KTtcbkNvbW11bml0eS5iZWxvbmdzVG8oVXNlciwge1xuICAgIGZvcmVpZ25LZXk6IFwidXNlcl9pZFwiLFxuICAgIGFzOiBcInVzZXJcIixcbn0pO1xuQ29tbXVuaXR5Lmhhc01hbnkoUG9zdFJlYWN0aW9uLCB7IGZvcmVpZ25LZXk6IFwicG9zdF9pZFwiLCBhczogXCJyZWFjdGlvbnNcIiB9KTtcblxubW9kdWxlLmV4cG9ydHMgPSBDb21tdW5pdHk7XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUE7QUFBVSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDMUMsTUFBTUMsU0FBUyxHQUFHRCxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDL0MsTUFBTUUsT0FBTyxHQUFHRixPQUFPLENBQUMsd0JBQXdCLENBQUM7QUFDakQsTUFBTUcsSUFBSSxHQUFHSCxPQUFPLENBQUMscUJBQXFCLENBQUM7QUFDM0MsTUFBTUksWUFBWSxHQUFHSixPQUFPLENBQUMsa0NBQWtDLENBQUM7QUFDaEUsTUFBTUssU0FBUyxHQUFHSixTQUFTLENBQUNLLE1BQU0sQ0FDOUIsV0FBVyxFQUNYO0VBQ0lDLEdBQUcsRUFBRTtJQUNEQyxJQUFJLEVBQUVULFNBQVMsQ0FBQ1UsT0FBTztJQUN2QkMsYUFBYSxFQUFFLElBQUk7SUFDbkJDLFVBQVUsRUFBRSxJQUFJO0lBQ2hCQyxTQUFTLEVBQUU7RUFDZixDQUFDO0VBQ0RDLFVBQVUsRUFBRWQsU0FBUyxDQUFDZSxJQUFJO0VBQzFCTixJQUFJLEVBQUU7SUFDRkEsSUFBSSxFQUFFVCxTQUFTLENBQUNnQixJQUFJLENBQUMsWUFBWSxFQUFFLFNBQVMsRUFBRSxPQUFPLENBQUM7SUFDdERDLFlBQVksRUFBRTtFQUNsQixDQUFDO0VBQ0RDLE9BQU8sRUFBRWxCLFNBQVMsQ0FBQ2UsSUFBSTtFQUN2QkksS0FBSyxFQUFFbkIsU0FBUyxDQUFDZSxJQUFJO0VBQ3JCSyxLQUFLLEVBQUVwQixTQUFTLENBQUNlLElBQUk7RUFDckJNLE9BQU8sRUFBRXJCLFNBQVMsQ0FBQ2UsSUFBSTtFQUN2Qk8sV0FBVyxFQUFFdEIsU0FBUyxDQUFDdUIsSUFBSTtFQUMzQkMsT0FBTyxFQUFFO0lBQ0xmLElBQUksRUFBRVQsU0FBUyxDQUFDVSxPQUFPO0lBQ3ZCZSxVQUFVLEVBQUU7TUFDUkMsS0FBSyxFQUFFO1FBQUVDLFNBQVMsRUFBRTtNQUFZLENBQUM7TUFBRTtNQUNuQ0MsR0FBRyxFQUFFO0lBQ1QsQ0FBQztJQUNEZixTQUFTLEVBQUUsS0FBSztJQUNoQmdCLFFBQVEsRUFBRSxTQUFTO0lBQ25CQyxRQUFRLEVBQUU7RUFDZCxDQUFDO0VBQ0RDLFVBQVUsRUFBRS9CLFNBQVMsQ0FBQ3VCLElBQUk7RUFDMUJTLE9BQU8sRUFBRWhDLFNBQVMsQ0FBQ1U7QUFDdkIsQ0FBQyxFQUNEO0VBQ0l1QixVQUFVLEVBQUUsSUFBSTtFQUNoQkMsU0FBUyxFQUFFLElBQUk7RUFDZkMsU0FBUyxFQUFFLElBQUk7RUFDZlIsU0FBUyxFQUFFLE1BQU07RUFDakJTLFNBQVMsRUFBRTtBQUNmLENBQ0osQ0FBQztBQUNEOUIsU0FBUyxDQUFDK0IsT0FBTyxDQUFDbEMsT0FBTyxFQUFFO0VBQ3ZCbUMsVUFBVSxFQUFFLFNBQVM7RUFDckJDLEVBQUUsRUFBRTtBQUNSLENBQUMsQ0FBQztBQUNGakMsU0FBUyxDQUFDa0MsU0FBUyxDQUFDcEMsSUFBSSxFQUFFO0VBQ3RCa0MsVUFBVSxFQUFFLFNBQVM7RUFDckJDLEVBQUUsRUFBRTtBQUNSLENBQUMsQ0FBQztBQUNGakMsU0FBUyxDQUFDK0IsT0FBTyxDQUFDaEMsWUFBWSxFQUFFO0VBQUVpQyxVQUFVLEVBQUUsU0FBUztFQUFFQyxFQUFFLEVBQUU7QUFBWSxDQUFDLENBQUM7QUFFM0VFLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHcEMsU0FBUyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["DataTypes","require","sequelize","Comment","User","PostReaction","Community","define","sno","type","INTEGER","autoIncrement","primaryKey","allowNull","class_type","TEXT","ENUM","defaultValue","subject","grade","title","content","attachments","JSON","user_id","references","model","tableName","key","onUpdate","onDelete","suggestion","viewers","timestamps","createdAt","updatedAt","modelName","hasMany","foreignKey","as","belongsTo","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/","sources":["communityModel.js"],"sourcesContent":["const { DataTypes } = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst Comment = require(\"../models/commentModel\");\nconst User = require(\"../models/usedModel\");\nconst PostReaction = require(\"../models/communityReactionModel\");\nconst Community = sequelize.define(\n    \"Community\",\n    {\n        sno: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        class_type: DataTypes.TEXT,\n        type: {\n            type: DataTypes.ENUM(\"free_board\", \"sharing\", \"admin\"),\n            defaultValue: \"free_board\",\n        },\n        subject: DataTypes.TEXT,\n        grade: DataTypes.TEXT,\n        title: DataTypes.TEXT,\n        content: DataTypes.TEXT,\n        attachments: DataTypes.JSON,\n        user_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"user_info\" }, // provide table name\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        suggestion: DataTypes.JSON,\n        viewers: DataTypes.INTEGER,\n    },\n    {\n        timestamps: true,\n        createdAt: true,\n        updatedAt: true,\n        tableName: \"post\",\n        modelName: \"community\",\n    }\n);\nCommunity.hasMany(Comment, {\n    foreignKey: \"post_id\",\n    as: \"comments\",\n});\nCommunity.belongsTo(User, {\n    foreignKey: \"user_id\",\n    as: \"user\",\n});\nCommunity.hasMany(PostReaction, { foreignKey: \"post_id\", as: \"reactions\" });\n\nmodule.exports = Community;\n"],"mappings":"AAAA,MAAM;EAAEA;AAAU,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAC1C,MAAMC,SAAS,GAAGD,OAAO,CAAC,oBAAoB,CAAC;AAC/C,MAAME,OAAO,GAAGF,OAAO,CAAC,wBAAwB,CAAC;AACjD,MAAMG,IAAI,GAAGH,OAAO,CAAC,qBAAqB,CAAC;AAC3C,MAAMI,YAAY,GAAGJ,OAAO,CAAC,kCAAkC,CAAC;AAChE,MAAMK,SAAS,GAAGJ,SAAS,CAACK,MAAM,CAC9B,WAAW,EACX;EACIC,GAAG,EAAE;IACDC,IAAI,EAAET,SAAS,CAACU,OAAO;IACvBC,aAAa,EAAE,IAAI;IACnBC,UAAU,EAAE,IAAI;IAChBC,SAAS,EAAE;EACf,CAAC;EACDC,UAAU,EAAEd,SAAS,CAACe,IAAI;EAC1BN,IAAI,EAAE;IACFA,IAAI,EAAET,SAAS,CAACgB,IAAI,CAAC,YAAY,EAAE,SAAS,EAAE,OAAO,CAAC;IACtDC,YAAY,EAAE;EAClB,CAAC;EACDC,OAAO,EAAElB,SAAS,CAACe,IAAI;EACvBI,KAAK,EAAEnB,SAAS,CAACe,IAAI;EACrBK,KAAK,EAAEpB,SAAS,CAACe,IAAI;EACrBM,OAAO,EAAErB,SAAS,CAACe,IAAI;EACvBO,WAAW,EAAEtB,SAAS,CAACuB,IAAI;EAC3BC,OAAO,EAAE;IACLf,IAAI,EAAET,SAAS,CAACU,OAAO;IACvBe,UAAU,EAAE;MACRC,KAAK,EAAE;QAAEC,SAAS,EAAE;MAAY,CAAC;MAAE;MACnCC,GAAG,EAAE;IACT,CAAC;IACDf,SAAS,EAAE,KAAK;IAChBgB,QAAQ,EAAE,SAAS;IACnBC,QAAQ,EAAE;EACd,CAAC;EACDC,UAAU,EAAE/B,SAAS,CAACuB,IAAI;EAC1BS,OAAO,EAAEhC,SAAS,CAACU;AACvB,CAAC,EACD;EACIuB,UAAU,EAAE,IAAI;EAChBC,SAAS,EAAE,IAAI;EACfC,SAAS,EAAE,IAAI;EACfR,SAAS,EAAE,MAAM;EACjBS,SAAS,EAAE;AACf,CACJ,CAAC;AACD9B,SAAS,CAAC+B,OAAO,CAAClC,OAAO,EAAE;EACvBmC,UAAU,EAAE,SAAS;EACrBC,EAAE,EAAE;AACR,CAAC,CAAC;AACFjC,SAAS,CAACkC,SAAS,CAACpC,IAAI,EAAE;EACtBkC,UAAU,EAAE,SAAS;EACrBC,EAAE,EAAE;AACR,CAAC,CAAC;AACFjC,SAAS,CAAC+B,OAAO,CAAChC,YAAY,EAAE;EAAEiC,UAAU,EAAE,SAAS;EAAEC,EAAE,EAAE;AAAY,CAAC,CAAC;AAE3EE,MAAM,CAACC,OAAO,GAAGpC,SAAS","ignoreList":[]}},"mtime":1722564949917},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/commentModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const {\n  DataTypes\n} = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = require(\"../models/usedModel\");\nconst Comment = sequelize.define(\"Comment\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  post_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"post\"\n      },\n      key: \"sno\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  parent_comment_id: DataTypes.NUMBER,\n  content: DataTypes.TEXT,\n  user_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"user_info\"\n      },\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  }\n}, {\n  timestamps: true,\n  tableName: \"comment\",\n  modelName: \"comments\"\n});\nComment.belongsTo(User, {\n  foreignKey: \"user_id\",\n  as: \"user\"\n});\nmodule.exports = Comment;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEYXRhVHlwZXMiLCJyZXF1aXJlIiwic2VxdWVsaXplIiwiVXNlciIsIkNvbW1lbnQiLCJkZWZpbmUiLCJpZCIsInR5cGUiLCJJTlRFR0VSIiwiYXV0b0luY3JlbWVudCIsInByaW1hcnlLZXkiLCJhbGxvd051bGwiLCJwb3N0X2lkIiwicmVmZXJlbmNlcyIsIm1vZGVsIiwidGFibGVOYW1lIiwia2V5Iiwib25VcGRhdGUiLCJvbkRlbGV0ZSIsInBhcmVudF9jb21tZW50X2lkIiwiTlVNQkVSIiwiY29udGVudCIsIlRFWFQiLCJ1c2VyX2lkIiwidGltZXN0YW1wcyIsIm1vZGVsTmFtZSIsImJlbG9uZ3NUbyIsImZvcmVpZ25LZXkiLCJhcyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy9tb2RlbHMvIiwic291cmNlcyI6WyJjb21tZW50TW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBEYXRhVHlwZXMgfSA9IHJlcXVpcmUoXCJzZXF1ZWxpemVcIik7XG5jb25zdCBzZXF1ZWxpemUgPSByZXF1aXJlKFwiLi4vY29uZmlnL2RhdGFiYXNlXCIpO1xuY29uc3QgVXNlciA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvdXNlZE1vZGVsXCIpO1xuY29uc3QgQ29tbWVudCA9IHNlcXVlbGl6ZS5kZWZpbmUoXG4gICAgXCJDb21tZW50XCIsXG4gICAge1xuICAgICAgICBpZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgcG9zdF9pZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICAgICAgbW9kZWw6IHsgdGFibGVOYW1lOiBcInBvc3RcIiB9LFxuICAgICAgICAgICAgICAgIGtleTogXCJzbm9cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICAgICAgb25VcGRhdGU6IFwiY2FzY2FkZVwiLFxuICAgICAgICAgICAgb25EZWxldGU6IFwiY2FzY2FkZVwiLFxuICAgICAgICB9LFxuICAgICAgICBwYXJlbnRfY29tbWVudF9pZDogRGF0YVR5cGVzLk5VTUJFUixcbiAgICAgICAgY29udGVudDogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIHVzZXJfaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiB7IHRhYmxlTmFtZTogXCJ1c2VyX2luZm9cIiB9LFxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgICAgICBvblVwZGF0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgICAgICBvbkRlbGV0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IHRydWUsXG4gICAgICAgIHRhYmxlTmFtZTogXCJjb21tZW50XCIsXG4gICAgICAgIG1vZGVsTmFtZTogXCJjb21tZW50c1wiLFxuICAgIH1cbik7XG5Db21tZW50LmJlbG9uZ3NUbyhVc2VyLCB7XG4gICAgZm9yZWlnbktleTogXCJ1c2VyX2lkXCIsXG4gICAgYXM6IFwidXNlclwiLFxufSk7XG5tb2R1bGUuZXhwb3J0cyA9IENvbW1lbnQ7XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUE7QUFBVSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDMUMsTUFBTUMsU0FBUyxHQUFHRCxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDL0MsTUFBTUUsSUFBSSxHQUFHRixPQUFPLENBQUMscUJBQXFCLENBQUM7QUFDM0MsTUFBTUcsT0FBTyxHQUFHRixTQUFTLENBQUNHLE1BQU0sQ0FDNUIsU0FBUyxFQUNUO0VBQ0lDLEVBQUUsRUFBRTtJQUNBQyxJQUFJLEVBQUVQLFNBQVMsQ0FBQ1EsT0FBTztJQUN2QkMsYUFBYSxFQUFFLElBQUk7SUFDbkJDLFVBQVUsRUFBRSxJQUFJO0lBQ2hCQyxTQUFTLEVBQUU7RUFDZixDQUFDO0VBQ0RDLE9BQU8sRUFBRTtJQUNMTCxJQUFJLEVBQUVQLFNBQVMsQ0FBQ1EsT0FBTztJQUN2QkssVUFBVSxFQUFFO01BQ1JDLEtBQUssRUFBRTtRQUFFQyxTQUFTLEVBQUU7TUFBTyxDQUFDO01BQzVCQyxHQUFHLEVBQUU7SUFDVCxDQUFDO0lBQ0RMLFNBQVMsRUFBRSxLQUFLO0lBQ2hCTSxRQUFRLEVBQUUsU0FBUztJQUNuQkMsUUFBUSxFQUFFO0VBQ2QsQ0FBQztFQUNEQyxpQkFBaUIsRUFBRW5CLFNBQVMsQ0FBQ29CLE1BQU07RUFDbkNDLE9BQU8sRUFBRXJCLFNBQVMsQ0FBQ3NCLElBQUk7RUFDdkJDLE9BQU8sRUFBRTtJQUNMaEIsSUFBSSxFQUFFUCxTQUFTLENBQUNRLE9BQU87SUFDdkJLLFVBQVUsRUFBRTtNQUNSQyxLQUFLLEVBQUU7UUFBRUMsU0FBUyxFQUFFO01BQVksQ0FBQztNQUNqQ0MsR0FBRyxFQUFFO0lBQ1QsQ0FBQztJQUNETCxTQUFTLEVBQUUsS0FBSztJQUNoQk0sUUFBUSxFQUFFLFNBQVM7SUFDbkJDLFFBQVEsRUFBRTtFQUNkO0FBQ0osQ0FBQyxFQUNEO0VBQ0lNLFVBQVUsRUFBRSxJQUFJO0VBQ2hCVCxTQUFTLEVBQUUsU0FBUztFQUNwQlUsU0FBUyxFQUFFO0FBQ2YsQ0FDSixDQUFDO0FBQ0RyQixPQUFPLENBQUNzQixTQUFTLENBQUN2QixJQUFJLEVBQUU7RUFDcEJ3QixVQUFVLEVBQUUsU0FBUztFQUNyQkMsRUFBRSxFQUFFO0FBQ1IsQ0FBQyxDQUFDO0FBQ0ZDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHMUIsT0FBTyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["DataTypes","require","sequelize","User","Comment","define","id","type","INTEGER","autoIncrement","primaryKey","allowNull","post_id","references","model","tableName","key","onUpdate","onDelete","parent_comment_id","NUMBER","content","TEXT","user_id","timestamps","modelName","belongsTo","foreignKey","as","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/","sources":["commentModel.js"],"sourcesContent":["const { DataTypes } = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = require(\"../models/usedModel\");\nconst Comment = sequelize.define(\n    \"Comment\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        post_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"post\" },\n                key: \"sno\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        parent_comment_id: DataTypes.NUMBER,\n        content: DataTypes.TEXT,\n        user_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"user_info\" },\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n    },\n    {\n        timestamps: true,\n        tableName: \"comment\",\n        modelName: \"comments\",\n    }\n);\nComment.belongsTo(User, {\n    foreignKey: \"user_id\",\n    as: \"user\",\n});\nmodule.exports = Comment;\n"],"mappings":"AAAA,MAAM;EAAEA;AAAU,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAC1C,MAAMC,SAAS,GAAGD,OAAO,CAAC,oBAAoB,CAAC;AAC/C,MAAME,IAAI,GAAGF,OAAO,CAAC,qBAAqB,CAAC;AAC3C,MAAMG,OAAO,GAAGF,SAAS,CAACG,MAAM,CAC5B,SAAS,EACT;EACIC,EAAE,EAAE;IACAC,IAAI,EAAEP,SAAS,CAACQ,OAAO;IACvBC,aAAa,EAAE,IAAI;IACnBC,UAAU,EAAE,IAAI;IAChBC,SAAS,EAAE;EACf,CAAC;EACDC,OAAO,EAAE;IACLL,IAAI,EAAEP,SAAS,CAACQ,OAAO;IACvBK,UAAU,EAAE;MACRC,KAAK,EAAE;QAAEC,SAAS,EAAE;MAAO,CAAC;MAC5BC,GAAG,EAAE;IACT,CAAC;IACDL,SAAS,EAAE,KAAK;IAChBM,QAAQ,EAAE,SAAS;IACnBC,QAAQ,EAAE;EACd,CAAC;EACDC,iBAAiB,EAAEnB,SAAS,CAACoB,MAAM;EACnCC,OAAO,EAAErB,SAAS,CAACsB,IAAI;EACvBC,OAAO,EAAE;IACLhB,IAAI,EAAEP,SAAS,CAACQ,OAAO;IACvBK,UAAU,EAAE;MACRC,KAAK,EAAE;QAAEC,SAAS,EAAE;MAAY,CAAC;MACjCC,GAAG,EAAE;IACT,CAAC;IACDL,SAAS,EAAE,KAAK;IAChBM,QAAQ,EAAE,SAAS;IACnBC,QAAQ,EAAE;EACd;AACJ,CAAC,EACD;EACIM,UAAU,EAAE,IAAI;EAChBT,SAAS,EAAE,SAAS;EACpBU,SAAS,EAAE;AACf,CACJ,CAAC;AACDrB,OAAO,CAACsB,SAAS,CAACvB,IAAI,EAAE;EACpBwB,UAAU,EAAE,SAAS;EACrBC,EAAE,EAAE;AACR,CAAC,CAAC;AACFC,MAAM,CAACC,OAAO,GAAG1B,OAAO","ignoreList":[]}},"mtime":1720145666985},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/communityReactionModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const {\n  DataTypes\n} = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = require(\"../models/usedModel\");\nconst Community = require(\"../models/communityModel\");\nconst PostReaction = sequelize.define(\"PostReaction\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  user_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"user_info\"\n      },\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  post_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"post\"\n      },\n      key: \"sno\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  type: DataTypes.TEXT,\n  created_date: DataTypes.DATE\n}, {\n  timestamps: false,\n  createdAt: \"created_at\",\n  tableName: \"post_reaction\",\n  modelName: \"PostReaction\"\n});\nPostReaction.belongsTo(User, {\n  foreignKey: \"user_id\",\n  as: \"user\"\n});\nmodule.exports = PostReaction;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEYXRhVHlwZXMiLCJyZXF1aXJlIiwic2VxdWVsaXplIiwiVXNlciIsIkNvbW11bml0eSIsIlBvc3RSZWFjdGlvbiIsImRlZmluZSIsImlkIiwidHlwZSIsIklOVEVHRVIiLCJhdXRvSW5jcmVtZW50IiwicHJpbWFyeUtleSIsImFsbG93TnVsbCIsInVzZXJfaWQiLCJyZWZlcmVuY2VzIiwibW9kZWwiLCJ0YWJsZU5hbWUiLCJrZXkiLCJvblVwZGF0ZSIsIm9uRGVsZXRlIiwicG9zdF9pZCIsIlRFWFQiLCJjcmVhdGVkX2RhdGUiLCJEQVRFIiwidGltZXN0YW1wcyIsImNyZWF0ZWRBdCIsIm1vZGVsTmFtZSIsImJlbG9uZ3NUbyIsImZvcmVpZ25LZXkiLCJhcyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy9tb2RlbHMvIiwic291cmNlcyI6WyJjb21tdW5pdHlSZWFjdGlvbk1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgRGF0YVR5cGVzIH0gPSByZXF1aXJlKFwic2VxdWVsaXplXCIpO1xuY29uc3Qgc2VxdWVsaXplID0gcmVxdWlyZShcIi4uL2NvbmZpZy9kYXRhYmFzZVwiKTtcbmNvbnN0IFVzZXIgPSByZXF1aXJlKFwiLi4vbW9kZWxzL3VzZWRNb2RlbFwiKTtcbmNvbnN0IENvbW11bml0eSA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvY29tbXVuaXR5TW9kZWxcIik7XG5cbmNvbnN0IFBvc3RSZWFjdGlvbiA9IHNlcXVlbGl6ZS5kZWZpbmUoXG4gICAgXCJQb3N0UmVhY3Rpb25cIixcbiAgICB7XG4gICAgICAgIGlkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICB1c2VyX2lkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogeyB0YWJsZU5hbWU6IFwidXNlcl9pbmZvXCIgfSxcbiAgICAgICAgICAgICAgICBrZXk6IFwiaWRcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICAgICAgb25VcGRhdGU6IFwiY2FzY2FkZVwiLFxuICAgICAgICAgICAgb25EZWxldGU6IFwiY2FzY2FkZVwiLFxuICAgICAgICB9LFxuICAgICAgICBwb3N0X2lkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogeyB0YWJsZU5hbWU6IFwicG9zdFwiIH0sXG4gICAgICAgICAgICAgICAga2V5OiBcInNub1wiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgICAgICBvblVwZGF0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgICAgICBvbkRlbGV0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGU6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBjcmVhdGVkX2RhdGU6IERhdGFUeXBlcy5EQVRFLFxuICAgIH0sXG4gICAge1xuICAgICAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICAgICAgY3JlYXRlZEF0OiBcImNyZWF0ZWRfYXRcIixcbiAgICAgICAgdGFibGVOYW1lOiBcInBvc3RfcmVhY3Rpb25cIixcbiAgICAgICAgbW9kZWxOYW1lOiBcIlBvc3RSZWFjdGlvblwiLFxuICAgIH1cbik7XG5Qb3N0UmVhY3Rpb24uYmVsb25nc1RvKFVzZXIsIHsgZm9yZWlnbktleTogXCJ1c2VyX2lkXCIsIGFzOiBcInVzZXJcIiB9KTtcbm1vZHVsZS5leHBvcnRzID0gUG9zdFJlYWN0aW9uO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNO0VBQUVBO0FBQVUsQ0FBQyxHQUFHQyxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQzFDLE1BQU1DLFNBQVMsR0FBR0QsT0FBTyxDQUFDLG9CQUFvQixDQUFDO0FBQy9DLE1BQU1FLElBQUksR0FBR0YsT0FBTyxDQUFDLHFCQUFxQixDQUFDO0FBQzNDLE1BQU1HLFNBQVMsR0FBR0gsT0FBTyxDQUFDLDBCQUEwQixDQUFDO0FBRXJELE1BQU1JLFlBQVksR0FBR0gsU0FBUyxDQUFDSSxNQUFNLENBQ2pDLGNBQWMsRUFDZDtFQUNJQyxFQUFFLEVBQUU7SUFDQUMsSUFBSSxFQUFFUixTQUFTLENBQUNTLE9BQU87SUFDdkJDLGFBQWEsRUFBRSxJQUFJO0lBQ25CQyxVQUFVLEVBQUUsSUFBSTtJQUNoQkMsU0FBUyxFQUFFO0VBQ2YsQ0FBQztFQUNEQyxPQUFPLEVBQUU7SUFDTEwsSUFBSSxFQUFFUixTQUFTLENBQUNTLE9BQU87SUFDdkJLLFVBQVUsRUFBRTtNQUNSQyxLQUFLLEVBQUU7UUFBRUMsU0FBUyxFQUFFO01BQVksQ0FBQztNQUNqQ0MsR0FBRyxFQUFFO0lBQ1QsQ0FBQztJQUNETCxTQUFTLEVBQUUsS0FBSztJQUNoQk0sUUFBUSxFQUFFLFNBQVM7SUFDbkJDLFFBQVEsRUFBRTtFQUNkLENBQUM7RUFDREMsT0FBTyxFQUFFO0lBQ0xaLElBQUksRUFBRVIsU0FBUyxDQUFDUyxPQUFPO0lBQ3ZCSyxVQUFVLEVBQUU7TUFDUkMsS0FBSyxFQUFFO1FBQUVDLFNBQVMsRUFBRTtNQUFPLENBQUM7TUFDNUJDLEdBQUcsRUFBRTtJQUNULENBQUM7SUFDREwsU0FBUyxFQUFFLEtBQUs7SUFDaEJNLFFBQVEsRUFBRSxTQUFTO0lBQ25CQyxRQUFRLEVBQUU7RUFDZCxDQUFDO0VBQ0RYLElBQUksRUFBRVIsU0FBUyxDQUFDcUIsSUFBSTtFQUNwQkMsWUFBWSxFQUFFdEIsU0FBUyxDQUFDdUI7QUFDNUIsQ0FBQyxFQUNEO0VBQ0lDLFVBQVUsRUFBRSxLQUFLO0VBQ2pCQyxTQUFTLEVBQUUsWUFBWTtFQUN2QlQsU0FBUyxFQUFFLGVBQWU7RUFDMUJVLFNBQVMsRUFBRTtBQUNmLENBQ0osQ0FBQztBQUNEckIsWUFBWSxDQUFDc0IsU0FBUyxDQUFDeEIsSUFBSSxFQUFFO0VBQUV5QixVQUFVLEVBQUUsU0FBUztFQUFFQyxFQUFFLEVBQUU7QUFBTyxDQUFDLENBQUM7QUFDbkVDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHMUIsWUFBWSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["DataTypes","require","sequelize","User","Community","PostReaction","define","id","type","INTEGER","autoIncrement","primaryKey","allowNull","user_id","references","model","tableName","key","onUpdate","onDelete","post_id","TEXT","created_date","DATE","timestamps","createdAt","modelName","belongsTo","foreignKey","as","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/","sources":["communityReactionModel.js"],"sourcesContent":["const { DataTypes } = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = require(\"../models/usedModel\");\nconst Community = require(\"../models/communityModel\");\n\nconst PostReaction = sequelize.define(\n    \"PostReaction\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        user_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"user_info\" },\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        post_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"post\" },\n                key: \"sno\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        type: DataTypes.TEXT,\n        created_date: DataTypes.DATE,\n    },\n    {\n        timestamps: false,\n        createdAt: \"created_at\",\n        tableName: \"post_reaction\",\n        modelName: \"PostReaction\",\n    }\n);\nPostReaction.belongsTo(User, { foreignKey: \"user_id\", as: \"user\" });\nmodule.exports = PostReaction;\n"],"mappings":"AAAA,MAAM;EAAEA;AAAU,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAC1C,MAAMC,SAAS,GAAGD,OAAO,CAAC,oBAAoB,CAAC;AAC/C,MAAME,IAAI,GAAGF,OAAO,CAAC,qBAAqB,CAAC;AAC3C,MAAMG,SAAS,GAAGH,OAAO,CAAC,0BAA0B,CAAC;AAErD,MAAMI,YAAY,GAAGH,SAAS,CAACI,MAAM,CACjC,cAAc,EACd;EACIC,EAAE,EAAE;IACAC,IAAI,EAAER,SAAS,CAACS,OAAO;IACvBC,aAAa,EAAE,IAAI;IACnBC,UAAU,EAAE,IAAI;IAChBC,SAAS,EAAE;EACf,CAAC;EACDC,OAAO,EAAE;IACLL,IAAI,EAAER,SAAS,CAACS,OAAO;IACvBK,UAAU,EAAE;MACRC,KAAK,EAAE;QAAEC,SAAS,EAAE;MAAY,CAAC;MACjCC,GAAG,EAAE;IACT,CAAC;IACDL,SAAS,EAAE,KAAK;IAChBM,QAAQ,EAAE,SAAS;IACnBC,QAAQ,EAAE;EACd,CAAC;EACDC,OAAO,EAAE;IACLZ,IAAI,EAAER,SAAS,CAACS,OAAO;IACvBK,UAAU,EAAE;MACRC,KAAK,EAAE;QAAEC,SAAS,EAAE;MAAO,CAAC;MAC5BC,GAAG,EAAE;IACT,CAAC;IACDL,SAAS,EAAE,KAAK;IAChBM,QAAQ,EAAE,SAAS;IACnBC,QAAQ,EAAE;EACd,CAAC;EACDX,IAAI,EAAER,SAAS,CAACqB,IAAI;EACpBC,YAAY,EAAEtB,SAAS,CAACuB;AAC5B,CAAC,EACD;EACIC,UAAU,EAAE,KAAK;EACjBC,SAAS,EAAE,YAAY;EACvBT,SAAS,EAAE,eAAe;EAC1BU,SAAS,EAAE;AACf,CACJ,CAAC;AACDrB,YAAY,CAACsB,SAAS,CAACxB,IAAI,EAAE;EAAEyB,UAAU,EAAE,SAAS;EAAEC,EAAE,EAAE;AAAO,CAAC,CAAC;AACnEC,MAAM,CAACC,OAAO,GAAG1B,YAAY","ignoreList":[]}},"mtime":1722566612469},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/commentService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const commentModel = require(\"../models/commentModel\");\nexports.create = async (post_id, content, user_id, parent_comment_id) => {\n  let data = await commentModel.create({\n    id: null,\n    post_id,\n    content,\n    user_id,\n    parent_comment_id\n  });\n  return data;\n};\nexports.delete = async id => {\n  return await commentModel.destroy({\n    where: {\n      id\n    }\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb21tZW50TW9kZWwiLCJyZXF1aXJlIiwiZXhwb3J0cyIsImNyZWF0ZSIsInBvc3RfaWQiLCJjb250ZW50IiwidXNlcl9pZCIsInBhcmVudF9jb21tZW50X2lkIiwiZGF0YSIsImlkIiwiZGVsZXRlIiwiZGVzdHJveSIsIndoZXJlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdnVvbmdrbWEvaUNsb3VkIERyaXZlIChBcmNoaXZlKS9Eb2N1bWVudHMva2NuZC9zcmMvc2VydmljZXMvIiwic291cmNlcyI6WyJjb21tZW50U2VydmljZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjb21tZW50TW9kZWwgPSByZXF1aXJlKFwiLi4vbW9kZWxzL2NvbW1lbnRNb2RlbFwiKTtcblxuZXhwb3J0cy5jcmVhdGUgPSBhc3luYyAocG9zdF9pZCwgY29udGVudCwgdXNlcl9pZCwgcGFyZW50X2NvbW1lbnRfaWQpID0+IHtcbiAgICBsZXQgZGF0YSA9IGF3YWl0IGNvbW1lbnRNb2RlbC5jcmVhdGUoe1xuICAgICAgICBpZDogbnVsbCxcbiAgICAgICAgcG9zdF9pZCxcbiAgICAgICAgY29udGVudCxcbiAgICAgICAgdXNlcl9pZCxcbiAgICAgICAgcGFyZW50X2NvbW1lbnRfaWQsXG4gICAgfSk7XG4gICAgcmV0dXJuIGRhdGE7XG59O1xuXG5leHBvcnRzLmRlbGV0ZSA9IGFzeW5jIChpZCkgPT4ge1xuICAgIHJldHVybiBhd2FpdCBjb21tZW50TW9kZWwuZGVzdHJveSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICBpZCxcbiAgICAgICAgfSxcbiAgICB9KTtcbn07XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFlBQVksR0FBR0MsT0FBTyxDQUFDLHdCQUF3QixDQUFDO0FBRXREQyxPQUFPLENBQUNDLE1BQU0sR0FBRyxPQUFPQyxPQUFPLEVBQUVDLE9BQU8sRUFBRUMsT0FBTyxFQUFFQyxpQkFBaUIsS0FBSztFQUNyRSxJQUFJQyxJQUFJLEdBQUcsTUFBTVIsWUFBWSxDQUFDRyxNQUFNLENBQUM7SUFDakNNLEVBQUUsRUFBRSxJQUFJO0lBQ1JMLE9BQU87SUFDUEMsT0FBTztJQUNQQyxPQUFPO0lBQ1BDO0VBQ0osQ0FBQyxDQUFDO0VBQ0YsT0FBT0MsSUFBSTtBQUNmLENBQUM7QUFFRE4sT0FBTyxDQUFDUSxNQUFNLEdBQUcsTUFBT0QsRUFBRSxJQUFLO0VBQzNCLE9BQU8sTUFBTVQsWUFBWSxDQUFDVyxPQUFPLENBQUM7SUFDOUJDLEtBQUssRUFBRTtNQUNISDtJQUNKO0VBQ0osQ0FBQyxDQUFDO0FBQ04sQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["commentModel","require","exports","create","post_id","content","user_id","parent_comment_id","data","id","delete","destroy","where"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/","sources":["commentService.js"],"sourcesContent":["const commentModel = require(\"../models/commentModel\");\n\nexports.create = async (post_id, content, user_id, parent_comment_id) => {\n    let data = await commentModel.create({\n        id: null,\n        post_id,\n        content,\n        user_id,\n        parent_comment_id,\n    });\n    return data;\n};\n\nexports.delete = async (id) => {\n    return await commentModel.destroy({\n        where: {\n            id,\n        },\n    });\n};\n"],"mappings":"AAAA,MAAMA,YAAY,GAAGC,OAAO,CAAC,wBAAwB,CAAC;AAEtDC,OAAO,CAACC,MAAM,GAAG,OAAOC,OAAO,EAAEC,OAAO,EAAEC,OAAO,EAAEC,iBAAiB,KAAK;EACrE,IAAIC,IAAI,GAAG,MAAMR,YAAY,CAACG,MAAM,CAAC;IACjCM,EAAE,EAAE,IAAI;IACRL,OAAO;IACPC,OAAO;IACPC,OAAO;IACPC;EACJ,CAAC,CAAC;EACF,OAAOC,IAAI;AACf,CAAC;AAEDN,OAAO,CAACQ,MAAM,GAAG,MAAOD,EAAE,IAAK;EAC3B,OAAO,MAAMT,YAAY,CAACW,OAAO,CAAC;IAC9BC,KAAK,EAAE;MACHH;IACJ;EACJ,CAAC,CAAC;AACN,CAAC","ignoreList":[]}},"mtime":1720145818917},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/validations/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/validations/communityValidation.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const Joi = require(\"joi\");\nconst create = {\n  body: Joi.object().keys({\n    title: Joi.string(),\n    content: Joi.string(),\n    type: Joi.string(),\n    user_id: Joi.number()\n  })\n};\nconst get = {\n  params: Joi.object().keys({\n    id: Joi.number()\n  })\n};\nmodule.exports = {\n  create,\n  get\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJKb2kiLCJyZXF1aXJlIiwiY3JlYXRlIiwiYm9keSIsIm9iamVjdCIsImtleXMiLCJ0aXRsZSIsInN0cmluZyIsImNvbnRlbnQiLCJ0eXBlIiwidXNlcl9pZCIsIm51bWJlciIsImdldCIsInBhcmFtcyIsImlkIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL3ZhbGlkYXRpb25zLyIsInNvdXJjZXMiOlsiY29tbXVuaXR5VmFsaWRhdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBKb2kgPSByZXF1aXJlKFwiam9pXCIpO1xuXG5jb25zdCBjcmVhdGUgPSB7XG4gICAgYm9keTogSm9pLm9iamVjdCgpLmtleXMoe1xuICAgICAgICB0aXRsZTogSm9pLnN0cmluZygpLFxuICAgICAgICBjb250ZW50OiBKb2kuc3RyaW5nKCksXG4gICAgICAgIHR5cGU6IEpvaS5zdHJpbmcoKSxcbiAgICAgICAgdXNlcl9pZDogSm9pLm51bWJlcigpLFxuICAgIH0pLFxufTtcbmNvbnN0IGdldCA9IHtcbiAgICBwYXJhbXM6IEpvaS5vYmplY3QoKS5rZXlzKHtcbiAgICAgICAgaWQ6IEpvaS5udW1iZXIoKSxcbiAgICB9KSxcbn07XG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBjcmVhdGUsXG4gICAgZ2V0LFxufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsR0FBRyxHQUFHQyxPQUFPLENBQUMsS0FBSyxDQUFDO0FBRTFCLE1BQU1DLE1BQU0sR0FBRztFQUNYQyxJQUFJLEVBQUVILEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO0lBQ3BCQyxLQUFLLEVBQUVOLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLENBQUM7SUFDbkJDLE9BQU8sRUFBRVIsR0FBRyxDQUFDTyxNQUFNLENBQUMsQ0FBQztJQUNyQkUsSUFBSSxFQUFFVCxHQUFHLENBQUNPLE1BQU0sQ0FBQyxDQUFDO0lBQ2xCRyxPQUFPLEVBQUVWLEdBQUcsQ0FBQ1csTUFBTSxDQUFDO0VBQ3hCLENBQUM7QUFDTCxDQUFDO0FBQ0QsTUFBTUMsR0FBRyxHQUFHO0VBQ1JDLE1BQU0sRUFBRWIsR0FBRyxDQUFDSSxNQUFNLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUM7SUFDdEJTLEVBQUUsRUFBRWQsR0FBRyxDQUFDVyxNQUFNLENBQUM7RUFDbkIsQ0FBQztBQUNMLENBQUM7QUFDREksTUFBTSxDQUFDQyxPQUFPLEdBQUc7RUFDYmQsTUFBTTtFQUNOVTtBQUNKLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["Joi","require","create","body","object","keys","title","string","content","type","user_id","number","get","params","id","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/validations/","sources":["communityValidation.js"],"sourcesContent":["const Joi = require(\"joi\");\n\nconst create = {\n    body: Joi.object().keys({\n        title: Joi.string(),\n        content: Joi.string(),\n        type: Joi.string(),\n        user_id: Joi.number(),\n    }),\n};\nconst get = {\n    params: Joi.object().keys({\n        id: Joi.number(),\n    }),\n};\nmodule.exports = {\n    create,\n    get,\n};\n"],"mappings":"AAAA,MAAMA,GAAG,GAAGC,OAAO,CAAC,KAAK,CAAC;AAE1B,MAAMC,MAAM,GAAG;EACXC,IAAI,EAAEH,GAAG,CAACI,MAAM,CAAC,CAAC,CAACC,IAAI,CAAC;IACpBC,KAAK,EAAEN,GAAG,CAACO,MAAM,CAAC,CAAC;IACnBC,OAAO,EAAER,GAAG,CAACO,MAAM,CAAC,CAAC;IACrBE,IAAI,EAAET,GAAG,CAACO,MAAM,CAAC,CAAC;IAClBG,OAAO,EAAEV,GAAG,CAACW,MAAM,CAAC;EACxB,CAAC;AACL,CAAC;AACD,MAAMC,GAAG,GAAG;EACRC,MAAM,EAAEb,GAAG,CAACI,MAAM,CAAC,CAAC,CAACC,IAAI,CAAC;IACtBS,EAAE,EAAEd,GAAG,CAACW,MAAM,CAAC;EACnB,CAAC;AACL,CAAC;AACDI,MAAM,CAACC,OAAO,GAAG;EACbd,MAAM;EACNU;AACJ,CAAC","ignoreList":[]}},"mtime":1716347256109},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/config/uploadCommunityMulter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const multer = require(\"multer\");\nconst path = require(\"path\");\nconst storage = multer.diskStorage({\n  destination: function (req, file, cb) {\n    cb(null, \"image/community/\");\n  },\n  filename: function (req, file, cb) {\n    cb(null, file.originalname);\n  }\n});\nconst fileFilter = (req, file, cb) => {\n  const filetypes = /doc|pdf|hwp|jpeg|png|jpg/;\n  const mimetype = filetypes.test(file.mimetype);\n  const extname = filetypes.test(path.extname(file.originalname).toLowerCase());\n  if (mimetype && extname) {\n    return cb(null, true);\n  } else {\n    cb(new Error(\"Only .doc .pdf .hwp .jpeg .png files are allowed!\"));\n  }\n};\n\n// Set up multer with the storage and file filter\nconst upload = multer({\n  storage: storage,\n  fileFilter: fileFilter,\n  limits: {\n    fileSize: 1024 * 1024 * 5,\n    files: 5\n  }\n});\nmodule.exports = {\n  multer,\n  upload\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtdWx0ZXIiLCJyZXF1aXJlIiwicGF0aCIsInN0b3JhZ2UiLCJkaXNrU3RvcmFnZSIsImRlc3RpbmF0aW9uIiwicmVxIiwiZmlsZSIsImNiIiwiZmlsZW5hbWUiLCJvcmlnaW5hbG5hbWUiLCJmaWxlRmlsdGVyIiwiZmlsZXR5cGVzIiwibWltZXR5cGUiLCJ0ZXN0IiwiZXh0bmFtZSIsInRvTG93ZXJDYXNlIiwiRXJyb3IiLCJ1cGxvYWQiLCJsaW1pdHMiLCJmaWxlU2l6ZSIsImZpbGVzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL2NvbmZpZy8iLCJzb3VyY2VzIjpbInVwbG9hZENvbW11bml0eU11bHRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtdWx0ZXIgPSByZXF1aXJlKFwibXVsdGVyXCIpO1xuY29uc3QgcGF0aCA9IHJlcXVpcmUoXCJwYXRoXCIpO1xuXG5jb25zdCBzdG9yYWdlID0gbXVsdGVyLmRpc2tTdG9yYWdlKHtcbiAgICBkZXN0aW5hdGlvbjogZnVuY3Rpb24gKHJlcSwgZmlsZSwgY2IpIHtcbiAgICAgICAgY2IobnVsbCwgXCJpbWFnZS9jb21tdW5pdHkvXCIpO1xuICAgIH0sXG4gICAgZmlsZW5hbWU6IGZ1bmN0aW9uIChyZXEsIGZpbGUsIGNiKSB7XG4gICAgICAgIGNiKG51bGwsIGZpbGUub3JpZ2luYWxuYW1lKTtcbiAgICB9LFxufSk7XG5jb25zdCBmaWxlRmlsdGVyID0gKHJlcSwgZmlsZSwgY2IpID0+IHtcbiAgICBjb25zdCBmaWxldHlwZXMgPSAvZG9jfHBkZnxod3B8anBlZ3xwbmd8anBnLztcbiAgICBjb25zdCBtaW1ldHlwZSA9IGZpbGV0eXBlcy50ZXN0KGZpbGUubWltZXR5cGUpO1xuICAgIGNvbnN0IGV4dG5hbWUgPSBmaWxldHlwZXMudGVzdChcbiAgICAgICAgcGF0aC5leHRuYW1lKGZpbGUub3JpZ2luYWxuYW1lKS50b0xvd2VyQ2FzZSgpXG4gICAgKTtcblxuICAgIGlmIChtaW1ldHlwZSAmJiBleHRuYW1lKSB7XG4gICAgICAgIHJldHVybiBjYihudWxsLCB0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjYihuZXcgRXJyb3IoXCJPbmx5IC5kb2MgLnBkZiAuaHdwIC5qcGVnIC5wbmcgZmlsZXMgYXJlIGFsbG93ZWQhXCIpKTtcbiAgICB9XG59O1xuXG4vLyBTZXQgdXAgbXVsdGVyIHdpdGggdGhlIHN0b3JhZ2UgYW5kIGZpbGUgZmlsdGVyXG5jb25zdCB1cGxvYWQgPSBtdWx0ZXIoe1xuICAgIHN0b3JhZ2U6IHN0b3JhZ2UsXG4gICAgZmlsZUZpbHRlcjogZmlsZUZpbHRlcixcbiAgICBsaW1pdHM6IHtcbiAgICAgICAgZmlsZVNpemU6IDEwMjQgKiAxMDI0ICogNSxcbiAgICAgICAgZmlsZXM6IDUsXG4gICAgfSxcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHsgbXVsdGVyLCB1cGxvYWQgfTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsTUFBTSxHQUFHQyxPQUFPLENBQUMsUUFBUSxDQUFDO0FBQ2hDLE1BQU1DLElBQUksR0FBR0QsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUU1QixNQUFNRSxPQUFPLEdBQUdILE1BQU0sQ0FBQ0ksV0FBVyxDQUFDO0VBQy9CQyxXQUFXLEVBQUUsU0FBQUEsQ0FBVUMsR0FBRyxFQUFFQyxJQUFJLEVBQUVDLEVBQUUsRUFBRTtJQUNsQ0EsRUFBRSxDQUFDLElBQUksRUFBRSxrQkFBa0IsQ0FBQztFQUNoQyxDQUFDO0VBQ0RDLFFBQVEsRUFBRSxTQUFBQSxDQUFVSCxHQUFHLEVBQUVDLElBQUksRUFBRUMsRUFBRSxFQUFFO0lBQy9CQSxFQUFFLENBQUMsSUFBSSxFQUFFRCxJQUFJLENBQUNHLFlBQVksQ0FBQztFQUMvQjtBQUNKLENBQUMsQ0FBQztBQUNGLE1BQU1DLFVBQVUsR0FBR0EsQ0FBQ0wsR0FBRyxFQUFFQyxJQUFJLEVBQUVDLEVBQUUsS0FBSztFQUNsQyxNQUFNSSxTQUFTLEdBQUcsMEJBQTBCO0VBQzVDLE1BQU1DLFFBQVEsR0FBR0QsU0FBUyxDQUFDRSxJQUFJLENBQUNQLElBQUksQ0FBQ00sUUFBUSxDQUFDO0VBQzlDLE1BQU1FLE9BQU8sR0FBR0gsU0FBUyxDQUFDRSxJQUFJLENBQzFCWixJQUFJLENBQUNhLE9BQU8sQ0FBQ1IsSUFBSSxDQUFDRyxZQUFZLENBQUMsQ0FBQ00sV0FBVyxDQUFDLENBQ2hELENBQUM7RUFFRCxJQUFJSCxRQUFRLElBQUlFLE9BQU8sRUFBRTtJQUNyQixPQUFPUCxFQUFFLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQztFQUN6QixDQUFDLE1BQU07SUFDSEEsRUFBRSxDQUFDLElBQUlTLEtBQUssQ0FBQyxtREFBbUQsQ0FBQyxDQUFDO0VBQ3RFO0FBQ0osQ0FBQzs7QUFFRDtBQUNBLE1BQU1DLE1BQU0sR0FBR2xCLE1BQU0sQ0FBQztFQUNsQkcsT0FBTyxFQUFFQSxPQUFPO0VBQ2hCUSxVQUFVLEVBQUVBLFVBQVU7RUFDdEJRLE1BQU0sRUFBRTtJQUNKQyxRQUFRLEVBQUUsSUFBSSxHQUFHLElBQUksR0FBRyxDQUFDO0lBQ3pCQyxLQUFLLEVBQUU7RUFDWDtBQUNKLENBQUMsQ0FBQztBQUVGQyxNQUFNLENBQUNDLE9BQU8sR0FBRztFQUFFdkIsTUFBTTtFQUFFa0I7QUFBTyxDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["multer","require","path","storage","diskStorage","destination","req","file","cb","filename","originalname","fileFilter","filetypes","mimetype","test","extname","toLowerCase","Error","upload","limits","fileSize","files","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/config/","sources":["uploadCommunityMulter.js"],"sourcesContent":["const multer = require(\"multer\");\nconst path = require(\"path\");\n\nconst storage = multer.diskStorage({\n    destination: function (req, file, cb) {\n        cb(null, \"image/community/\");\n    },\n    filename: function (req, file, cb) {\n        cb(null, file.originalname);\n    },\n});\nconst fileFilter = (req, file, cb) => {\n    const filetypes = /doc|pdf|hwp|jpeg|png|jpg/;\n    const mimetype = filetypes.test(file.mimetype);\n    const extname = filetypes.test(\n        path.extname(file.originalname).toLowerCase()\n    );\n\n    if (mimetype && extname) {\n        return cb(null, true);\n    } else {\n        cb(new Error(\"Only .doc .pdf .hwp .jpeg .png files are allowed!\"));\n    }\n};\n\n// Set up multer with the storage and file filter\nconst upload = multer({\n    storage: storage,\n    fileFilter: fileFilter,\n    limits: {\n        fileSize: 1024 * 1024 * 5,\n        files: 5,\n    },\n});\n\nmodule.exports = { multer, upload };\n"],"mappings":"AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAChC,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;AAE5B,MAAME,OAAO,GAAGH,MAAM,CAACI,WAAW,CAAC;EAC/BC,WAAW,EAAE,SAAAA,CAAUC,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAE;IAClCA,EAAE,CAAC,IAAI,EAAE,kBAAkB,CAAC;EAChC,CAAC;EACDC,QAAQ,EAAE,SAAAA,CAAUH,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAE;IAC/BA,EAAE,CAAC,IAAI,EAAED,IAAI,CAACG,YAAY,CAAC;EAC/B;AACJ,CAAC,CAAC;AACF,MAAMC,UAAU,GAAGA,CAACL,GAAG,EAAEC,IAAI,EAAEC,EAAE,KAAK;EAClC,MAAMI,SAAS,GAAG,0BAA0B;EAC5C,MAAMC,QAAQ,GAAGD,SAAS,CAACE,IAAI,CAACP,IAAI,CAACM,QAAQ,CAAC;EAC9C,MAAME,OAAO,GAAGH,SAAS,CAACE,IAAI,CAC1BZ,IAAI,CAACa,OAAO,CAACR,IAAI,CAACG,YAAY,CAAC,CAACM,WAAW,CAAC,CAChD,CAAC;EAED,IAAIH,QAAQ,IAAIE,OAAO,EAAE;IACrB,OAAOP,EAAE,CAAC,IAAI,EAAE,IAAI,CAAC;EACzB,CAAC,MAAM;IACHA,EAAE,CAAC,IAAIS,KAAK,CAAC,mDAAmD,CAAC,CAAC;EACtE;AACJ,CAAC;;AAED;AACA,MAAMC,MAAM,GAAGlB,MAAM,CAAC;EAClBG,OAAO,EAAEA,OAAO;EAChBQ,UAAU,EAAEA,UAAU;EACtBQ,MAAM,EAAE;IACJC,QAAQ,EAAE,IAAI,GAAG,IAAI,GAAG,CAAC;IACzBC,KAAK,EAAE;EACX;AACJ,CAAC,CAAC;AAEFC,MAAM,CAACC,OAAO,GAAG;EAAEvB,MAAM;EAAEkB;AAAO,CAAC","ignoreList":[]}},"mtime":1720162868044},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/commentRoute.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const express = require(\"express\");\nconst commentController = require(\"../../controllers/commentController\");\nconst validate = require(\"../../middlewares/validate\");\nconst router = express.Router();\nrouter.route(\"/api/comment\").post(validate(), commentController.create);\nrouter.route(\"/api/comment/:id\").delete(validate(), commentController.delete);\nmodule.exports = router;\n\n/**\n * @swagger\n * tags:\n *   name: Users\n *   description: User management and retrieval\n */\n\n/**\n * @swagger\n * /users:\n *   post:\n *     summary: Create a user\n *     description: Only admins can create other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - name\n *               - email\n *               - password\n *               - role\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *               role:\n *                  type: string\n *                  enum: [user, admin]\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *               role: user\n *     responses:\n *       \"201\":\n *         description: Created\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *\n *   get:\n *     summary: Get all users\n *     description: Only admins can retrieve all users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: query\n *         name: name\n *         schema:\n *           type: string\n *         description: User name\n *       - in: query\n *         name: role\n *         schema:\n *           type: string\n *         description: User role\n *       - in: query\n *         name: sortBy\n *         schema:\n *           type: string\n *         description: sort by query in the form of field:desc/asc (ex. name:asc)\n *       - in: query\n *         name: limit\n *         schema:\n *           type: integer\n *           minimum: 1\n *         default: 10\n *         description: Maximum number of users\n *       - in: query\n *         name: page\n *         schema:\n *           type: integer\n *           minimum: 1\n *           default: 1\n *         description: Page number\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 results:\n *                   type: array\n *                   items:\n *                     $ref: '#/components/schemas/User'\n *                 page:\n *                   type: integer\n *                   example: 1\n *                 limit:\n *                   type: integer\n *                   example: 10\n *                 totalPages:\n *                   type: integer\n *                   example: 1\n *                 totalResults:\n *                   type: integer\n *                   example: 1\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n */\n\n/**\n * @swagger\n * /users/{id}:\n *   get:\n *     summary: Get a user\n *     description: Logged in users can fetch only their own user information. Only admins can fetch other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   patch:\n *     summary: Update a user\n *     description: Logged in users can only update their own information. Only admins can update other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   delete:\n *     summary: Delete a user\n *     description: Logged in users can delete only themselves. Only admins can delete other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: No content\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n */\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNvbW1lbnRDb250cm9sbGVyIiwidmFsaWRhdGUiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJyb3V0ZSIsInBvc3QiLCJjcmVhdGUiLCJkZWxldGUiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdnVvbmdrbWEvaUNsb3VkIERyaXZlIChBcmNoaXZlKS9Eb2N1bWVudHMva2NuZC9zcmMvcm91dGVzL3YxLyIsInNvdXJjZXMiOlsiY29tbWVudFJvdXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKFwiZXhwcmVzc1wiKTtcbmNvbnN0IGNvbW1lbnRDb250cm9sbGVyID0gcmVxdWlyZShcIi4uLy4uL2NvbnRyb2xsZXJzL2NvbW1lbnRDb250cm9sbGVyXCIpO1xuY29uc3QgdmFsaWRhdGUgPSByZXF1aXJlKFwiLi4vLi4vbWlkZGxld2FyZXMvdmFsaWRhdGVcIik7XG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG5yb3V0ZXIucm91dGUoXCIvYXBpL2NvbW1lbnRcIikucG9zdCh2YWxpZGF0ZSgpLCBjb21tZW50Q29udHJvbGxlci5jcmVhdGUpO1xuXG5yb3V0ZXIucm91dGUoXCIvYXBpL2NvbW1lbnQvOmlkXCIpLmRlbGV0ZSh2YWxpZGF0ZSgpLCBjb21tZW50Q29udHJvbGxlci5kZWxldGUpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcblxuLyoqXG4gKiBAc3dhZ2dlclxuICogdGFnczpcbiAqICAgbmFtZTogVXNlcnNcbiAqICAgZGVzY3JpcHRpb246IFVzZXIgbWFuYWdlbWVudCBhbmQgcmV0cmlldmFsXG4gKi9cblxuLyoqXG4gKiBAc3dhZ2dlclxuICogL3VzZXJzOlxuICogICBwb3N0OlxuICogICAgIHN1bW1hcnk6IENyZWF0ZSBhIHVzZXJcbiAqICAgICBkZXNjcmlwdGlvbjogT25seSBhZG1pbnMgY2FuIGNyZWF0ZSBvdGhlciB1c2Vycy5cbiAqICAgICB0YWdzOiBbVXNlcnNdXG4gKiAgICAgc2VjdXJpdHk6XG4gKiAgICAgICAtIGJlYXJlckF1dGg6IFtdXG4gKiAgICAgcmVxdWVzdEJvZHk6XG4gKiAgICAgICByZXF1aXJlZDogdHJ1ZVxuICogICAgICAgY29udGVudDpcbiAqICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICB0eXBlOiBvYmplY3RcbiAqICAgICAgICAgICAgIHJlcXVpcmVkOlxuICogICAgICAgICAgICAgICAtIG5hbWVcbiAqICAgICAgICAgICAgICAgLSBlbWFpbFxuICogICAgICAgICAgICAgICAtIHBhc3N3b3JkXG4gKiAgICAgICAgICAgICAgIC0gcm9sZVxuICogICAgICAgICAgICAgcHJvcGVydGllczpcbiAqICAgICAgICAgICAgICAgbmFtZTpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgZW1haWw6XG4gKiAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgZm9ybWF0OiBlbWFpbFxuICogICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBtdXN0IGJlIHVuaXF1ZVxuICogICAgICAgICAgICAgICBwYXNzd29yZDpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICBmb3JtYXQ6IHBhc3N3b3JkXG4gKiAgICAgICAgICAgICAgICAgbWluTGVuZ3RoOiA4XG4gKiAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IEF0IGxlYXN0IG9uZSBudW1iZXIgYW5kIG9uZSBsZXR0ZXJcbiAqICAgICAgICAgICAgICAgcm9sZTpcbiAqICAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgIGVudW06IFt1c2VyLCBhZG1pbl1cbiAqICAgICAgICAgICAgIGV4YW1wbGU6XG4gKiAgICAgICAgICAgICAgIG5hbWU6IGZha2UgbmFtZVxuICogICAgICAgICAgICAgICBlbWFpbDogZmFrZUBleGFtcGxlLmNvbVxuICogICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQxXG4gKiAgICAgICAgICAgICAgIHJvbGU6IHVzZXJcbiAqICAgICByZXNwb25zZXM6XG4gKiAgICAgICBcIjIwMVwiOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogQ3JlYXRlZFxuICogICAgICAgICBjb250ZW50OlxuICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlcidcbiAqICAgICAgIFwiNDAwXCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL0R1cGxpY2F0ZUVtYWlsJ1xuICogICAgICAgXCI0MDFcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvVW5hdXRob3JpemVkJ1xuICogICAgICAgXCI0MDNcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvRm9yYmlkZGVuJ1xuICpcbiAqICAgZ2V0OlxuICogICAgIHN1bW1hcnk6IEdldCBhbGwgdXNlcnNcbiAqICAgICBkZXNjcmlwdGlvbjogT25seSBhZG1pbnMgY2FuIHJldHJpZXZlIGFsbCB1c2Vycy5cbiAqICAgICB0YWdzOiBbVXNlcnNdXG4gKiAgICAgc2VjdXJpdHk6XG4gKiAgICAgICAtIGJlYXJlckF1dGg6IFtdXG4gKiAgICAgcGFyYW1ldGVyczpcbiAqICAgICAgIC0gaW46IHF1ZXJ5XG4gKiAgICAgICAgIG5hbWU6IG5hbWVcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICBkZXNjcmlwdGlvbjogVXNlciBuYW1lXG4gKiAgICAgICAtIGluOiBxdWVyeVxuICogICAgICAgICBuYW1lOiByb2xlXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIgcm9sZVxuICogICAgICAgLSBpbjogcXVlcnlcbiAqICAgICAgICAgbmFtZTogc29ydEJ5XG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgZGVzY3JpcHRpb246IHNvcnQgYnkgcXVlcnkgaW4gdGhlIGZvcm0gb2YgZmllbGQ6ZGVzYy9hc2MgKGV4LiBuYW1lOmFzYylcbiAqICAgICAgIC0gaW46IHF1ZXJ5XG4gKiAgICAgICAgIG5hbWU6IGxpbWl0XG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBpbnRlZ2VyXG4gKiAgICAgICAgICAgbWluaW11bTogMVxuICogICAgICAgICBkZWZhdWx0OiAxMFxuICogICAgICAgICBkZXNjcmlwdGlvbjogTWF4aW11bSBudW1iZXIgb2YgdXNlcnNcbiAqICAgICAgIC0gaW46IHF1ZXJ5XG4gKiAgICAgICAgIG5hbWU6IHBhZ2VcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IGludGVnZXJcbiAqICAgICAgICAgICBtaW5pbXVtOiAxXG4gKiAgICAgICAgICAgZGVmYXVsdDogMVxuICogICAgICAgICBkZXNjcmlwdGlvbjogUGFnZSBudW1iZXJcbiAqICAgICByZXNwb25zZXM6XG4gKiAgICAgICBcIjIwMFwiOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogT0tcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICB0eXBlOiBvYmplY3RcbiAqICAgICAgICAgICAgICAgcHJvcGVydGllczpcbiAqICAgICAgICAgICAgICAgICByZXN1bHRzOlxuICogICAgICAgICAgICAgICAgICAgdHlwZTogYXJyYXlcbiAqICAgICAgICAgICAgICAgICAgIGl0ZW1zOlxuICogICAgICAgICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlcidcbiAqICAgICAgICAgICAgICAgICBwYWdlOlxuICogICAgICAgICAgICAgICAgICAgdHlwZTogaW50ZWdlclxuICogICAgICAgICAgICAgICAgICAgZXhhbXBsZTogMVxuICogICAgICAgICAgICAgICAgIGxpbWl0OlxuICogICAgICAgICAgICAgICAgICAgdHlwZTogaW50ZWdlclxuICogICAgICAgICAgICAgICAgICAgZXhhbXBsZTogMTBcbiAqICAgICAgICAgICAgICAgICB0b3RhbFBhZ2VzOlxuICogICAgICAgICAgICAgICAgICAgdHlwZTogaW50ZWdlclxuICogICAgICAgICAgICAgICAgICAgZXhhbXBsZTogMVxuICogICAgICAgICAgICAgICAgIHRvdGFsUmVzdWx0czpcbiAqICAgICAgICAgICAgICAgICAgIHR5cGU6IGludGVnZXJcbiAqICAgICAgICAgICAgICAgICAgIGV4YW1wbGU6IDFcbiAqICAgICAgIFwiNDAxXCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL1VuYXV0aG9yaXplZCdcbiAqICAgICAgIFwiNDAzXCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL0ZvcmJpZGRlbidcbiAqL1xuXG4vKipcbiAqIEBzd2FnZ2VyXG4gKiAvdXNlcnMve2lkfTpcbiAqICAgZ2V0OlxuICogICAgIHN1bW1hcnk6IEdldCBhIHVzZXJcbiAqICAgICBkZXNjcmlwdGlvbjogTG9nZ2VkIGluIHVzZXJzIGNhbiBmZXRjaCBvbmx5IHRoZWlyIG93biB1c2VyIGluZm9ybWF0aW9uLiBPbmx5IGFkbWlucyBjYW4gZmV0Y2ggb3RoZXIgdXNlcnMuXG4gKiAgICAgdGFnczogW1VzZXJzXVxuICogICAgIHNlY3VyaXR5OlxuICogICAgICAgLSBiZWFyZXJBdXRoOiBbXVxuICogICAgIHBhcmFtZXRlcnM6XG4gKiAgICAgICAtIGluOiBwYXRoXG4gKiAgICAgICAgIG5hbWU6IGlkXG4gKiAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIgaWRcbiAqICAgICByZXNwb25zZXM6XG4gKiAgICAgICBcIjIwMFwiOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogT0tcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL1VzZXInXG4gKiAgICAgICBcIjQwMVwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9VbmF1dGhvcml6ZWQnXG4gKiAgICAgICBcIjQwM1wiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Gb3JiaWRkZW4nXG4gKiAgICAgICBcIjQwNFwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Ob3RGb3VuZCdcbiAqXG4gKiAgIHBhdGNoOlxuICogICAgIHN1bW1hcnk6IFVwZGF0ZSBhIHVzZXJcbiAqICAgICBkZXNjcmlwdGlvbjogTG9nZ2VkIGluIHVzZXJzIGNhbiBvbmx5IHVwZGF0ZSB0aGVpciBvd24gaW5mb3JtYXRpb24uIE9ubHkgYWRtaW5zIGNhbiB1cGRhdGUgb3RoZXIgdXNlcnMuXG4gKiAgICAgdGFnczogW1VzZXJzXVxuICogICAgIHNlY3VyaXR5OlxuICogICAgICAgLSBiZWFyZXJBdXRoOiBbXVxuICogICAgIHBhcmFtZXRlcnM6XG4gKiAgICAgICAtIGluOiBwYXRoXG4gKiAgICAgICAgIG5hbWU6IGlkXG4gKiAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIgaWRcbiAqICAgICByZXF1ZXN0Qm9keTpcbiAqICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gKiAgICAgICBjb250ZW50OlxuICogICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgIHR5cGU6IG9iamVjdFxuICogICAgICAgICAgICAgcHJvcGVydGllczpcbiAqICAgICAgICAgICAgICAgbmFtZTpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgZW1haWw6XG4gKiAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgZm9ybWF0OiBlbWFpbFxuICogICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBtdXN0IGJlIHVuaXF1ZVxuICogICAgICAgICAgICAgICBwYXNzd29yZDpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICBmb3JtYXQ6IHBhc3N3b3JkXG4gKiAgICAgICAgICAgICAgICAgbWluTGVuZ3RoOiA4XG4gKiAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IEF0IGxlYXN0IG9uZSBudW1iZXIgYW5kIG9uZSBsZXR0ZXJcbiAqICAgICAgICAgICAgIGV4YW1wbGU6XG4gKiAgICAgICAgICAgICAgIG5hbWU6IGZha2UgbmFtZVxuICogICAgICAgICAgICAgICBlbWFpbDogZmFrZUBleGFtcGxlLmNvbVxuICogICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQxXG4gKiAgICAgcmVzcG9uc2VzOlxuICogICAgICAgXCIyMDBcIjpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IE9LXG4gKiAgICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9Vc2VyJ1xuICogICAgICAgXCI0MDBcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvRHVwbGljYXRlRW1haWwnXG4gKiAgICAgICBcIjQwMVwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9VbmF1dGhvcml6ZWQnXG4gKiAgICAgICBcIjQwM1wiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Gb3JiaWRkZW4nXG4gKiAgICAgICBcIjQwNFwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Ob3RGb3VuZCdcbiAqXG4gKiAgIGRlbGV0ZTpcbiAqICAgICBzdW1tYXJ5OiBEZWxldGUgYSB1c2VyXG4gKiAgICAgZGVzY3JpcHRpb246IExvZ2dlZCBpbiB1c2VycyBjYW4gZGVsZXRlIG9ubHkgdGhlbXNlbHZlcy4gT25seSBhZG1pbnMgY2FuIGRlbGV0ZSBvdGhlciB1c2Vycy5cbiAqICAgICB0YWdzOiBbVXNlcnNdXG4gKiAgICAgc2VjdXJpdHk6XG4gKiAgICAgICAtIGJlYXJlckF1dGg6IFtdXG4gKiAgICAgcGFyYW1ldGVyczpcbiAqICAgICAgIC0gaW46IHBhdGhcbiAqICAgICAgICAgbmFtZTogaWRcbiAqICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICBkZXNjcmlwdGlvbjogVXNlciBpZFxuICogICAgIHJlc3BvbnNlczpcbiAqICAgICAgIFwiMjAwXCI6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBObyBjb250ZW50XG4gKiAgICAgICBcIjQwMVwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9VbmF1dGhvcml6ZWQnXG4gKiAgICAgICBcIjQwM1wiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Gb3JiaWRkZW4nXG4gKiAgICAgICBcIjQwNFwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Ob3RGb3VuZCdcbiAqL1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUMsaUJBQWlCLEdBQUdELE9BQU8sQ0FBQyxxQ0FBcUMsQ0FBQztBQUN4RSxNQUFNRSxRQUFRLEdBQUdGLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQztBQUN0RCxNQUFNRyxNQUFNLEdBQUdKLE9BQU8sQ0FBQ0ssTUFBTSxDQUFDLENBQUM7QUFFL0JELE1BQU0sQ0FBQ0UsS0FBSyxDQUFDLGNBQWMsQ0FBQyxDQUFDQyxJQUFJLENBQUNKLFFBQVEsQ0FBQyxDQUFDLEVBQUVELGlCQUFpQixDQUFDTSxNQUFNLENBQUM7QUFFdkVKLE1BQU0sQ0FBQ0UsS0FBSyxDQUFDLGtCQUFrQixDQUFDLENBQUNHLE1BQU0sQ0FBQ04sUUFBUSxDQUFDLENBQUMsRUFBRUQsaUJBQWlCLENBQUNPLE1BQU0sQ0FBQztBQUU3RUMsTUFBTSxDQUFDQyxPQUFPLEdBQUdQLE1BQU07O0FBRXZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["express","require","commentController","validate","router","Router","route","post","create","delete","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/","sources":["commentRoute.js"],"sourcesContent":["const express = require(\"express\");\nconst commentController = require(\"../../controllers/commentController\");\nconst validate = require(\"../../middlewares/validate\");\nconst router = express.Router();\n\nrouter.route(\"/api/comment\").post(validate(), commentController.create);\n\nrouter.route(\"/api/comment/:id\").delete(validate(), commentController.delete);\n\nmodule.exports = router;\n\n/**\n * @swagger\n * tags:\n *   name: Users\n *   description: User management and retrieval\n */\n\n/**\n * @swagger\n * /users:\n *   post:\n *     summary: Create a user\n *     description: Only admins can create other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - name\n *               - email\n *               - password\n *               - role\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *               role:\n *                  type: string\n *                  enum: [user, admin]\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *               role: user\n *     responses:\n *       \"201\":\n *         description: Created\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *\n *   get:\n *     summary: Get all users\n *     description: Only admins can retrieve all users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: query\n *         name: name\n *         schema:\n *           type: string\n *         description: User name\n *       - in: query\n *         name: role\n *         schema:\n *           type: string\n *         description: User role\n *       - in: query\n *         name: sortBy\n *         schema:\n *           type: string\n *         description: sort by query in the form of field:desc/asc (ex. name:asc)\n *       - in: query\n *         name: limit\n *         schema:\n *           type: integer\n *           minimum: 1\n *         default: 10\n *         description: Maximum number of users\n *       - in: query\n *         name: page\n *         schema:\n *           type: integer\n *           minimum: 1\n *           default: 1\n *         description: Page number\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 results:\n *                   type: array\n *                   items:\n *                     $ref: '#/components/schemas/User'\n *                 page:\n *                   type: integer\n *                   example: 1\n *                 limit:\n *                   type: integer\n *                   example: 10\n *                 totalPages:\n *                   type: integer\n *                   example: 1\n *                 totalResults:\n *                   type: integer\n *                   example: 1\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n */\n\n/**\n * @swagger\n * /users/{id}:\n *   get:\n *     summary: Get a user\n *     description: Logged in users can fetch only their own user information. Only admins can fetch other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   patch:\n *     summary: Update a user\n *     description: Logged in users can only update their own information. Only admins can update other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   delete:\n *     summary: Delete a user\n *     description: Logged in users can delete only themselves. Only admins can delete other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: No content\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n */\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,iBAAiB,GAAGD,OAAO,CAAC,qCAAqC,CAAC;AACxE,MAAME,QAAQ,GAAGF,OAAO,CAAC,4BAA4B,CAAC;AACtD,MAAMG,MAAM,GAAGJ,OAAO,CAACK,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,KAAK,CAAC,cAAc,CAAC,CAACC,IAAI,CAACJ,QAAQ,CAAC,CAAC,EAAED,iBAAiB,CAACM,MAAM,CAAC;AAEvEJ,MAAM,CAACE,KAAK,CAAC,kBAAkB,CAAC,CAACG,MAAM,CAACN,QAAQ,CAAC,CAAC,EAAED,iBAAiB,CAACO,MAAM,CAAC;AAE7EC,MAAM,CAACC,OAAO,GAAGP,MAAM;;AAEvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]}},"mtime":1720516583016},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/controllers/commentController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const {\n  StatusCodes\n} = require(\"http-status-codes\");\nconst commentService = require(\"../services/commentService\");\n//import message factory\nconst MessageFactory = require(\"../utils/messageFactory\");\nconst RemoveValueNullObject = require(\"../utils/removeValueNullObject\");\nexports.create = async (req, res, next) => {\n  try {\n    const {\n      post_id,\n      content,\n      user_id,\n      parent_comment_id\n    } = req.body;\n    const data = await commentService.create(post_id, content, user_id, parent_comment_id);\n    if (data) {\n      res.status(StatusCodes.OK).json(MessageFactory.success(data, \"Created success!\"));\n    } else {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"Created error\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.delete = async (req, res, next) => {\n  try {\n    const id = req.params.id;\n    const data = await commentService.delete(id);\n    if (data) {\n      res.status(StatusCodes.OK).json(MessageFactory.success(data, \"Delete success!\"));\n    } else {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"Delete error\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTdGF0dXNDb2RlcyIsInJlcXVpcmUiLCJjb21tZW50U2VydmljZSIsIk1lc3NhZ2VGYWN0b3J5IiwiUmVtb3ZlVmFsdWVOdWxsT2JqZWN0IiwiZXhwb3J0cyIsImNyZWF0ZSIsInJlcSIsInJlcyIsIm5leHQiLCJwb3N0X2lkIiwiY29udGVudCIsInVzZXJfaWQiLCJwYXJlbnRfY29tbWVudF9pZCIsImJvZHkiLCJkYXRhIiwic3RhdHVzIiwiT0siLCJqc29uIiwic3VjY2VzcyIsIlVOQVVUSE9SSVpFRCIsImVycm9yIiwiZGVsZXRlIiwiaWQiLCJwYXJhbXMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbImNvbW1lbnRDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgU3RhdHVzQ29kZXMgfSA9IHJlcXVpcmUoXCJodHRwLXN0YXR1cy1jb2Rlc1wiKTtcbmNvbnN0IGNvbW1lbnRTZXJ2aWNlID0gcmVxdWlyZShcIi4uL3NlcnZpY2VzL2NvbW1lbnRTZXJ2aWNlXCIpO1xuLy9pbXBvcnQgbWVzc2FnZSBmYWN0b3J5XG5jb25zdCBNZXNzYWdlRmFjdG9yeSA9IHJlcXVpcmUoXCIuLi91dGlscy9tZXNzYWdlRmFjdG9yeVwiKTtcbmNvbnN0IFJlbW92ZVZhbHVlTnVsbE9iamVjdCA9IHJlcXVpcmUoXCIuLi91dGlscy9yZW1vdmVWYWx1ZU51bGxPYmplY3RcIik7XG5cbmV4cG9ydHMuY3JlYXRlID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBwb3N0X2lkLCBjb250ZW50LCB1c2VyX2lkLCBwYXJlbnRfY29tbWVudF9pZCB9ID0gcmVxLmJvZHk7XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGNvbW1lbnRTZXJ2aWNlLmNyZWF0ZShcbiAgICAgICAgICAgIHBvc3RfaWQsXG4gICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgdXNlcl9pZCxcbiAgICAgICAgICAgIHBhcmVudF9jb21tZW50X2lkXG4gICAgICAgICk7XG4gICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLk9LKS5qc29uKFxuICAgICAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LnN1Y2Nlc3MoZGF0YSwgXCJDcmVhdGVkIHN1Y2Nlc3MhXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5VTkFVVEhPUklaRUQpLmpzb24oXG4gICAgICAgICAgICAgICAgTWVzc2FnZUZhY3RvcnkuZXJyb3IoXCJDcmVhdGVkIGVycm9yXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbmV4dChlcnJvcik7XG4gICAgfVxufTtcblxuZXhwb3J0cy5kZWxldGUgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBpZCA9IHJlcS5wYXJhbXMuaWQ7XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGNvbW1lbnRTZXJ2aWNlLmRlbGV0ZShpZCk7XG4gICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLk9LKS5qc29uKFxuICAgICAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LnN1Y2Nlc3MoZGF0YSwgXCJEZWxldGUgc3VjY2VzcyFcIilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLlVOQVVUSE9SSVpFRCkuanNvbihcbiAgICAgICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5lcnJvcihcIkRlbGV0ZSBlcnJvclwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbn07XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUE7QUFBWSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztBQUNwRCxNQUFNQyxjQUFjLEdBQUdELE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQztBQUM1RDtBQUNBLE1BQU1FLGNBQWMsR0FBR0YsT0FBTyxDQUFDLHlCQUF5QixDQUFDO0FBQ3pELE1BQU1HLHFCQUFxQixHQUFHSCxPQUFPLENBQUMsZ0NBQWdDLENBQUM7QUFFdkVJLE9BQU8sQ0FBQ0MsTUFBTSxHQUFHLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDdkMsSUFBSTtJQUNBLE1BQU07TUFBRUMsT0FBTztNQUFFQyxPQUFPO01BQUVDLE9BQU87TUFBRUM7SUFBa0IsQ0FBQyxHQUFHTixHQUFHLENBQUNPLElBQUk7SUFFakUsTUFBTUMsSUFBSSxHQUFHLE1BQU1iLGNBQWMsQ0FBQ0ksTUFBTSxDQUNwQ0ksT0FBTyxFQUNQQyxPQUFPLEVBQ1BDLE9BQU8sRUFDUEMsaUJBQ0osQ0FBQztJQUNELElBQUlFLElBQUksRUFBRTtNQUNOUCxHQUFHLENBQUNRLE1BQU0sQ0FBQ2hCLFdBQVcsQ0FBQ2lCLEVBQUUsQ0FBQyxDQUFDQyxJQUFJLENBQzNCZixjQUFjLENBQUNnQixPQUFPLENBQUNKLElBQUksRUFBRSxrQkFBa0IsQ0FDbkQsQ0FBQztJQUNMLENBQUMsTUFBTTtNQUNIUCxHQUFHLENBQUNRLE1BQU0sQ0FBQ2hCLFdBQVcsQ0FBQ29CLFlBQVksQ0FBQyxDQUFDRixJQUFJLENBQ3JDZixjQUFjLENBQUNrQixLQUFLLENBQUMsZUFBZSxDQUN4QyxDQUFDO0lBQ0w7RUFDSixDQUFDLENBQUMsT0FBT0EsS0FBSyxFQUFFO0lBQ1paLElBQUksQ0FBQ1ksS0FBSyxDQUFDO0VBQ2Y7QUFDSixDQUFDO0FBRURoQixPQUFPLENBQUNpQixNQUFNLEdBQUcsT0FBT2YsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztFQUN2QyxJQUFJO0lBQ0EsTUFBTWMsRUFBRSxHQUFHaEIsR0FBRyxDQUFDaUIsTUFBTSxDQUFDRCxFQUFFO0lBRXhCLE1BQU1SLElBQUksR0FBRyxNQUFNYixjQUFjLENBQUNvQixNQUFNLENBQUNDLEVBQUUsQ0FBQztJQUM1QyxJQUFJUixJQUFJLEVBQUU7TUFDTlAsR0FBRyxDQUFDUSxNQUFNLENBQUNoQixXQUFXLENBQUNpQixFQUFFLENBQUMsQ0FBQ0MsSUFBSSxDQUMzQmYsY0FBYyxDQUFDZ0IsT0FBTyxDQUFDSixJQUFJLEVBQUUsaUJBQWlCLENBQ2xELENBQUM7SUFDTCxDQUFDLE1BQU07TUFDSFAsR0FBRyxDQUFDUSxNQUFNLENBQUNoQixXQUFXLENBQUNvQixZQUFZLENBQUMsQ0FBQ0YsSUFBSSxDQUNyQ2YsY0FBYyxDQUFDa0IsS0FBSyxDQUFDLGNBQWMsQ0FDdkMsQ0FBQztJQUNMO0VBQ0osQ0FBQyxDQUFDLE9BQU9BLEtBQUssRUFBRTtJQUNaWixJQUFJLENBQUNZLEtBQUssQ0FBQztFQUNmO0FBQ0osQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["StatusCodes","require","commentService","MessageFactory","RemoveValueNullObject","exports","create","req","res","next","post_id","content","user_id","parent_comment_id","body","data","status","OK","json","success","UNAUTHORIZED","error","delete","id","params"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/controllers/","sources":["commentController.js"],"sourcesContent":["const { StatusCodes } = require(\"http-status-codes\");\nconst commentService = require(\"../services/commentService\");\n//import message factory\nconst MessageFactory = require(\"../utils/messageFactory\");\nconst RemoveValueNullObject = require(\"../utils/removeValueNullObject\");\n\nexports.create = async (req, res, next) => {\n    try {\n        const { post_id, content, user_id, parent_comment_id } = req.body;\n\n        const data = await commentService.create(\n            post_id,\n            content,\n            user_id,\n            parent_comment_id\n        );\n        if (data) {\n            res.status(StatusCodes.OK).json(\n                MessageFactory.success(data, \"Created success!\")\n            );\n        } else {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.error(\"Created error\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\n\nexports.delete = async (req, res, next) => {\n    try {\n        const id = req.params.id;\n\n        const data = await commentService.delete(id);\n        if (data) {\n            res.status(StatusCodes.OK).json(\n                MessageFactory.success(data, \"Delete success!\")\n            );\n        } else {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.error(\"Delete error\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\n"],"mappings":"AAAA,MAAM;EAAEA;AAAY,CAAC,GAAGC,OAAO,CAAC,mBAAmB,CAAC;AACpD,MAAMC,cAAc,GAAGD,OAAO,CAAC,4BAA4B,CAAC;AAC5D;AACA,MAAME,cAAc,GAAGF,OAAO,CAAC,yBAAyB,CAAC;AACzD,MAAMG,qBAAqB,GAAGH,OAAO,CAAC,gCAAgC,CAAC;AAEvEI,OAAO,CAACC,MAAM,GAAG,OAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACvC,IAAI;IACA,MAAM;MAAEC,OAAO;MAAEC,OAAO;MAAEC,OAAO;MAAEC;IAAkB,CAAC,GAAGN,GAAG,CAACO,IAAI;IAEjE,MAAMC,IAAI,GAAG,MAAMb,cAAc,CAACI,MAAM,CACpCI,OAAO,EACPC,OAAO,EACPC,OAAO,EACPC,iBACJ,CAAC;IACD,IAAIE,IAAI,EAAE;MACNP,GAAG,CAACQ,MAAM,CAAChB,WAAW,CAACiB,EAAE,CAAC,CAACC,IAAI,CAC3Bf,cAAc,CAACgB,OAAO,CAACJ,IAAI,EAAE,kBAAkB,CACnD,CAAC;IACL,CAAC,MAAM;MACHP,GAAG,CAACQ,MAAM,CAAChB,WAAW,CAACoB,YAAY,CAAC,CAACF,IAAI,CACrCf,cAAc,CAACkB,KAAK,CAAC,eAAe,CACxC,CAAC;IACL;EACJ,CAAC,CAAC,OAAOA,KAAK,EAAE;IACZZ,IAAI,CAACY,KAAK,CAAC;EACf;AACJ,CAAC;AAEDhB,OAAO,CAACiB,MAAM,GAAG,OAAOf,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACvC,IAAI;IACA,MAAMc,EAAE,GAAGhB,GAAG,CAACiB,MAAM,CAACD,EAAE;IAExB,MAAMR,IAAI,GAAG,MAAMb,cAAc,CAACoB,MAAM,CAACC,EAAE,CAAC;IAC5C,IAAIR,IAAI,EAAE;MACNP,GAAG,CAACQ,MAAM,CAAChB,WAAW,CAACiB,EAAE,CAAC,CAACC,IAAI,CAC3Bf,cAAc,CAACgB,OAAO,CAACJ,IAAI,EAAE,iBAAiB,CAClD,CAAC;IACL,CAAC,MAAM;MACHP,GAAG,CAACQ,MAAM,CAAChB,WAAW,CAACoB,YAAY,CAAC,CAACF,IAAI,CACrCf,cAAc,CAACkB,KAAK,CAAC,cAAc,CACvC,CAAC;IACL;EACJ,CAAC,CAAC,OAAOA,KAAK,EAAE;IACZZ,IAAI,CAACY,KAAK,CAAC;EACf;AACJ,CAAC","ignoreList":[]}},"mtime":1721611799023},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/searchRoute.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const express = require(\"express\");\nconst searchController = require(\"../../controllers/searchController\");\nconst validate = require(\"../../middlewares/validate\");\nconst router = express.Router();\nrouter.route(\"/api/tool/filter\").get(validate(), searchController.toolFilter);\nrouter.route(\"/api/search/tool\").get(validate(), searchController.searchTool);\nrouter.route(\"/api/search/opExp\").get(validate(), searchController.searchOpExp);\nrouter.route(\"/api/search/case\").get(validate(), searchController.searchCase);\n\n//lesson sample\nrouter.route(\"/api/search/lessons\").get(validate(), searchController.searchLessons);\n//model\nrouter.route(\"/api/search/models\").get(validate(), searchController.searchModels);\nrouter.route(\"/api/search/models/:id\").get(validate(), searchController.searchModel);\nrouter.route(\"/api/model/filter\").get(validate(), searchController.modelFilter);\nrouter.route(\"/api/case/filter\").get(validate(), searchController.searchCaseFilter);\n\n//operations\nrouter.route(\"/api/search/operations\").get(validate(), searchController.searchOperations);\nrouter.route(\"/api/operations/filter\").get(validate(), searchController.searchOperationsFilter);\nrouter.route(\"/api/search/operations/:id\").get(validate(), searchController.searchOperation);\n\n//insertData\nrouter.route(\"/api/tool/insert-data\").get(validate(), searchController.insertData);\nrouter.route(\"/api/tool/format-data\").get(validate(), searchController.formatData);\nrouter.route(\"/api/tool/fake-user\").get(validate(), searchController.fakeUser);\nrouter.route(\"/api/tool/handle-survey\").get(validate(), searchController.handleSurvey);\nrouter.route(\"/api/tool/:id\").get(validate(), searchController.getTool);\nmodule.exports = router;\n\n/**\n * @swagger\n * tags:\n *   name: Users\n *   description: User management and retrieval\n */\n\n/**\n * @swagger\n * /users:\n *   post:\n *     summary: Create a user\n *     description: Only admins can create other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - name\n *               - email\n *               - password\n *               - role\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *               role:\n *                  type: string\n *                  enum: [user, admin]\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *               role: user\n *     responses:\n *       \"201\":\n *         description: Created\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *\n *   get:\n *     summary: Get all users\n *     description: Only admins can retrieve all users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: query\n *         name: name\n *         schema:\n *           type: string\n *         description: User name\n *       - in: query\n *         name: role\n *         schema:\n *           type: string\n *         description: User role\n *       - in: query\n *         name: sortBy\n *         schema:\n *           type: string\n *         description: sort by query in the form of field:desc/asc (ex. name:asc)\n *       - in: query\n *         name: limit\n *         schema:\n *           type: integer\n *           minimum: 1\n *         default: 10\n *         description: Maximum number of users\n *       - in: query\n *         name: page\n *         schema:\n *           type: integer\n *           minimum: 1\n *           default: 1\n *         description: Page number\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 results:\n *                   type: array\n *                   items:\n *                     $ref: '#/components/schemas/User'\n *                 page:\n *                   type: integer\n *                   example: 1\n *                 limit:\n *                   type: integer\n *                   example: 10\n *                 totalPages:\n *                   type: integer\n *                   example: 1\n *                 totalResults:\n *                   type: integer\n *                   example: 1\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n */\n\n/**\n * @swagger\n * /users/{id}:\n *   get:\n *     summary: Get a user\n *     description: Logged in users can fetch only their own user information. Only admins can fetch other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   patch:\n *     summary: Update a user\n *     description: Logged in users can only update their own information. Only admins can update other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   delete:\n *     summary: Delete a user\n *     description: Logged in users can delete only themselves. Only admins can delete other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: No content\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n */\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInNlYXJjaENvbnRyb2xsZXIiLCJ2YWxpZGF0ZSIsInJvdXRlciIsIlJvdXRlciIsInJvdXRlIiwiZ2V0IiwidG9vbEZpbHRlciIsInNlYXJjaFRvb2wiLCJzZWFyY2hPcEV4cCIsInNlYXJjaENhc2UiLCJzZWFyY2hMZXNzb25zIiwic2VhcmNoTW9kZWxzIiwic2VhcmNoTW9kZWwiLCJtb2RlbEZpbHRlciIsInNlYXJjaENhc2VGaWx0ZXIiLCJzZWFyY2hPcGVyYXRpb25zIiwic2VhcmNoT3BlcmF0aW9uc0ZpbHRlciIsInNlYXJjaE9wZXJhdGlvbiIsImluc2VydERhdGEiLCJmb3JtYXREYXRhIiwiZmFrZVVzZXIiLCJoYW5kbGVTdXJ2ZXkiLCJnZXRUb29sIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL3JvdXRlcy92MS8iLCJzb3VyY2VzIjpbInNlYXJjaFJvdXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKFwiZXhwcmVzc1wiKTtcbmNvbnN0IHNlYXJjaENvbnRyb2xsZXIgPSByZXF1aXJlKFwiLi4vLi4vY29udHJvbGxlcnMvc2VhcmNoQ29udHJvbGxlclwiKTtcbmNvbnN0IHZhbGlkYXRlID0gcmVxdWlyZShcIi4uLy4uL21pZGRsZXdhcmVzL3ZhbGlkYXRlXCIpO1xuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxucm91dGVyLnJvdXRlKFwiL2FwaS90b29sL2ZpbHRlclwiKS5nZXQodmFsaWRhdGUoKSwgc2VhcmNoQ29udHJvbGxlci50b29sRmlsdGVyKTtcbnJvdXRlci5yb3V0ZShcIi9hcGkvc2VhcmNoL3Rvb2xcIikuZ2V0KHZhbGlkYXRlKCksIHNlYXJjaENvbnRyb2xsZXIuc2VhcmNoVG9vbCk7XG5yb3V0ZXIucm91dGUoXCIvYXBpL3NlYXJjaC9vcEV4cFwiKS5nZXQodmFsaWRhdGUoKSwgc2VhcmNoQ29udHJvbGxlci5zZWFyY2hPcEV4cCk7XG5yb3V0ZXIucm91dGUoXCIvYXBpL3NlYXJjaC9jYXNlXCIpLmdldCh2YWxpZGF0ZSgpLCBzZWFyY2hDb250cm9sbGVyLnNlYXJjaENhc2UpO1xuXG4vL2xlc3NvbiBzYW1wbGVcbnJvdXRlclxuICAgIC5yb3V0ZShcIi9hcGkvc2VhcmNoL2xlc3NvbnNcIilcbiAgICAuZ2V0KHZhbGlkYXRlKCksIHNlYXJjaENvbnRyb2xsZXIuc2VhcmNoTGVzc29ucyk7XG4vL21vZGVsXG5yb3V0ZXJcbiAgICAucm91dGUoXCIvYXBpL3NlYXJjaC9tb2RlbHNcIilcbiAgICAuZ2V0KHZhbGlkYXRlKCksIHNlYXJjaENvbnRyb2xsZXIuc2VhcmNoTW9kZWxzKTtcbnJvdXRlclxuICAgIC5yb3V0ZShcIi9hcGkvc2VhcmNoL21vZGVscy86aWRcIilcbiAgICAuZ2V0KHZhbGlkYXRlKCksIHNlYXJjaENvbnRyb2xsZXIuc2VhcmNoTW9kZWwpO1xuXG5yb3V0ZXIucm91dGUoXCIvYXBpL21vZGVsL2ZpbHRlclwiKS5nZXQodmFsaWRhdGUoKSwgc2VhcmNoQ29udHJvbGxlci5tb2RlbEZpbHRlcik7XG5cbnJvdXRlclxuICAgIC5yb3V0ZShcIi9hcGkvY2FzZS9maWx0ZXJcIilcbiAgICAuZ2V0KHZhbGlkYXRlKCksIHNlYXJjaENvbnRyb2xsZXIuc2VhcmNoQ2FzZUZpbHRlcik7XG5cbi8vb3BlcmF0aW9uc1xucm91dGVyXG4gICAgLnJvdXRlKFwiL2FwaS9zZWFyY2gvb3BlcmF0aW9uc1wiKVxuICAgIC5nZXQodmFsaWRhdGUoKSwgc2VhcmNoQ29udHJvbGxlci5zZWFyY2hPcGVyYXRpb25zKTtcbnJvdXRlclxuICAgIC5yb3V0ZShcIi9hcGkvb3BlcmF0aW9ucy9maWx0ZXJcIilcbiAgICAuZ2V0KHZhbGlkYXRlKCksIHNlYXJjaENvbnRyb2xsZXIuc2VhcmNoT3BlcmF0aW9uc0ZpbHRlcik7XG5yb3V0ZXJcbiAgICAucm91dGUoXCIvYXBpL3NlYXJjaC9vcGVyYXRpb25zLzppZFwiKVxuICAgIC5nZXQodmFsaWRhdGUoKSwgc2VhcmNoQ29udHJvbGxlci5zZWFyY2hPcGVyYXRpb24pO1xuXG4vL2luc2VydERhdGFcbnJvdXRlclxuICAgIC5yb3V0ZShcIi9hcGkvdG9vbC9pbnNlcnQtZGF0YVwiKVxuICAgIC5nZXQodmFsaWRhdGUoKSwgc2VhcmNoQ29udHJvbGxlci5pbnNlcnREYXRhKTtcbnJvdXRlclxuICAgIC5yb3V0ZShcIi9hcGkvdG9vbC9mb3JtYXQtZGF0YVwiKVxuICAgIC5nZXQodmFsaWRhdGUoKSwgc2VhcmNoQ29udHJvbGxlci5mb3JtYXREYXRhKTtcbnJvdXRlci5yb3V0ZShcIi9hcGkvdG9vbC9mYWtlLXVzZXJcIikuZ2V0KHZhbGlkYXRlKCksIHNlYXJjaENvbnRyb2xsZXIuZmFrZVVzZXIpO1xuXG5yb3V0ZXJcbiAgICAucm91dGUoXCIvYXBpL3Rvb2wvaGFuZGxlLXN1cnZleVwiKVxuICAgIC5nZXQodmFsaWRhdGUoKSwgc2VhcmNoQ29udHJvbGxlci5oYW5kbGVTdXJ2ZXkpO1xuXG5yb3V0ZXIucm91dGUoXCIvYXBpL3Rvb2wvOmlkXCIpLmdldCh2YWxpZGF0ZSgpLCBzZWFyY2hDb250cm9sbGVyLmdldFRvb2wpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcblxuLyoqXG4gKiBAc3dhZ2dlclxuICogdGFnczpcbiAqICAgbmFtZTogVXNlcnNcbiAqICAgZGVzY3JpcHRpb246IFVzZXIgbWFuYWdlbWVudCBhbmQgcmV0cmlldmFsXG4gKi9cblxuLyoqXG4gKiBAc3dhZ2dlclxuICogL3VzZXJzOlxuICogICBwb3N0OlxuICogICAgIHN1bW1hcnk6IENyZWF0ZSBhIHVzZXJcbiAqICAgICBkZXNjcmlwdGlvbjogT25seSBhZG1pbnMgY2FuIGNyZWF0ZSBvdGhlciB1c2Vycy5cbiAqICAgICB0YWdzOiBbVXNlcnNdXG4gKiAgICAgc2VjdXJpdHk6XG4gKiAgICAgICAtIGJlYXJlckF1dGg6IFtdXG4gKiAgICAgcmVxdWVzdEJvZHk6XG4gKiAgICAgICByZXF1aXJlZDogdHJ1ZVxuICogICAgICAgY29udGVudDpcbiAqICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICB0eXBlOiBvYmplY3RcbiAqICAgICAgICAgICAgIHJlcXVpcmVkOlxuICogICAgICAgICAgICAgICAtIG5hbWVcbiAqICAgICAgICAgICAgICAgLSBlbWFpbFxuICogICAgICAgICAgICAgICAtIHBhc3N3b3JkXG4gKiAgICAgICAgICAgICAgIC0gcm9sZVxuICogICAgICAgICAgICAgcHJvcGVydGllczpcbiAqICAgICAgICAgICAgICAgbmFtZTpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgZW1haWw6XG4gKiAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgZm9ybWF0OiBlbWFpbFxuICogICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBtdXN0IGJlIHVuaXF1ZVxuICogICAgICAgICAgICAgICBwYXNzd29yZDpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICBmb3JtYXQ6IHBhc3N3b3JkXG4gKiAgICAgICAgICAgICAgICAgbWluTGVuZ3RoOiA4XG4gKiAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IEF0IGxlYXN0IG9uZSBudW1iZXIgYW5kIG9uZSBsZXR0ZXJcbiAqICAgICAgICAgICAgICAgcm9sZTpcbiAqICAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgIGVudW06IFt1c2VyLCBhZG1pbl1cbiAqICAgICAgICAgICAgIGV4YW1wbGU6XG4gKiAgICAgICAgICAgICAgIG5hbWU6IGZha2UgbmFtZVxuICogICAgICAgICAgICAgICBlbWFpbDogZmFrZUBleGFtcGxlLmNvbVxuICogICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQxXG4gKiAgICAgICAgICAgICAgIHJvbGU6IHVzZXJcbiAqICAgICByZXNwb25zZXM6XG4gKiAgICAgICBcIjIwMVwiOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogQ3JlYXRlZFxuICogICAgICAgICBjb250ZW50OlxuICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlcidcbiAqICAgICAgIFwiNDAwXCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL0R1cGxpY2F0ZUVtYWlsJ1xuICogICAgICAgXCI0MDFcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvVW5hdXRob3JpemVkJ1xuICogICAgICAgXCI0MDNcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvRm9yYmlkZGVuJ1xuICpcbiAqICAgZ2V0OlxuICogICAgIHN1bW1hcnk6IEdldCBhbGwgdXNlcnNcbiAqICAgICBkZXNjcmlwdGlvbjogT25seSBhZG1pbnMgY2FuIHJldHJpZXZlIGFsbCB1c2Vycy5cbiAqICAgICB0YWdzOiBbVXNlcnNdXG4gKiAgICAgc2VjdXJpdHk6XG4gKiAgICAgICAtIGJlYXJlckF1dGg6IFtdXG4gKiAgICAgcGFyYW1ldGVyczpcbiAqICAgICAgIC0gaW46IHF1ZXJ5XG4gKiAgICAgICAgIG5hbWU6IG5hbWVcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICBkZXNjcmlwdGlvbjogVXNlciBuYW1lXG4gKiAgICAgICAtIGluOiBxdWVyeVxuICogICAgICAgICBuYW1lOiByb2xlXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIgcm9sZVxuICogICAgICAgLSBpbjogcXVlcnlcbiAqICAgICAgICAgbmFtZTogc29ydEJ5XG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgZGVzY3JpcHRpb246IHNvcnQgYnkgcXVlcnkgaW4gdGhlIGZvcm0gb2YgZmllbGQ6ZGVzYy9hc2MgKGV4LiBuYW1lOmFzYylcbiAqICAgICAgIC0gaW46IHF1ZXJ5XG4gKiAgICAgICAgIG5hbWU6IGxpbWl0XG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBpbnRlZ2VyXG4gKiAgICAgICAgICAgbWluaW11bTogMVxuICogICAgICAgICBkZWZhdWx0OiAxMFxuICogICAgICAgICBkZXNjcmlwdGlvbjogTWF4aW11bSBudW1iZXIgb2YgdXNlcnNcbiAqICAgICAgIC0gaW46IHF1ZXJ5XG4gKiAgICAgICAgIG5hbWU6IHBhZ2VcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IGludGVnZXJcbiAqICAgICAgICAgICBtaW5pbXVtOiAxXG4gKiAgICAgICAgICAgZGVmYXVsdDogMVxuICogICAgICAgICBkZXNjcmlwdGlvbjogUGFnZSBudW1iZXJcbiAqICAgICByZXNwb25zZXM6XG4gKiAgICAgICBcIjIwMFwiOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogT0tcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICB0eXBlOiBvYmplY3RcbiAqICAgICAgICAgICAgICAgcHJvcGVydGllczpcbiAqICAgICAgICAgICAgICAgICByZXN1bHRzOlxuICogICAgICAgICAgICAgICAgICAgdHlwZTogYXJyYXlcbiAqICAgICAgICAgICAgICAgICAgIGl0ZW1zOlxuICogICAgICAgICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlcidcbiAqICAgICAgICAgICAgICAgICBwYWdlOlxuICogICAgICAgICAgICAgICAgICAgdHlwZTogaW50ZWdlclxuICogICAgICAgICAgICAgICAgICAgZXhhbXBsZTogMVxuICogICAgICAgICAgICAgICAgIGxpbWl0OlxuICogICAgICAgICAgICAgICAgICAgdHlwZTogaW50ZWdlclxuICogICAgICAgICAgICAgICAgICAgZXhhbXBsZTogMTBcbiAqICAgICAgICAgICAgICAgICB0b3RhbFBhZ2VzOlxuICogICAgICAgICAgICAgICAgICAgdHlwZTogaW50ZWdlclxuICogICAgICAgICAgICAgICAgICAgZXhhbXBsZTogMVxuICogICAgICAgICAgICAgICAgIHRvdGFsUmVzdWx0czpcbiAqICAgICAgICAgICAgICAgICAgIHR5cGU6IGludGVnZXJcbiAqICAgICAgICAgICAgICAgICAgIGV4YW1wbGU6IDFcbiAqICAgICAgIFwiNDAxXCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL1VuYXV0aG9yaXplZCdcbiAqICAgICAgIFwiNDAzXCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL0ZvcmJpZGRlbidcbiAqL1xuXG4vKipcbiAqIEBzd2FnZ2VyXG4gKiAvdXNlcnMve2lkfTpcbiAqICAgZ2V0OlxuICogICAgIHN1bW1hcnk6IEdldCBhIHVzZXJcbiAqICAgICBkZXNjcmlwdGlvbjogTG9nZ2VkIGluIHVzZXJzIGNhbiBmZXRjaCBvbmx5IHRoZWlyIG93biB1c2VyIGluZm9ybWF0aW9uLiBPbmx5IGFkbWlucyBjYW4gZmV0Y2ggb3RoZXIgdXNlcnMuXG4gKiAgICAgdGFnczogW1VzZXJzXVxuICogICAgIHNlY3VyaXR5OlxuICogICAgICAgLSBiZWFyZXJBdXRoOiBbXVxuICogICAgIHBhcmFtZXRlcnM6XG4gKiAgICAgICAtIGluOiBwYXRoXG4gKiAgICAgICAgIG5hbWU6IGlkXG4gKiAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIgaWRcbiAqICAgICByZXNwb25zZXM6XG4gKiAgICAgICBcIjIwMFwiOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogT0tcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL1VzZXInXG4gKiAgICAgICBcIjQwMVwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9VbmF1dGhvcml6ZWQnXG4gKiAgICAgICBcIjQwM1wiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Gb3JiaWRkZW4nXG4gKiAgICAgICBcIjQwNFwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Ob3RGb3VuZCdcbiAqXG4gKiAgIHBhdGNoOlxuICogICAgIHN1bW1hcnk6IFVwZGF0ZSBhIHVzZXJcbiAqICAgICBkZXNjcmlwdGlvbjogTG9nZ2VkIGluIHVzZXJzIGNhbiBvbmx5IHVwZGF0ZSB0aGVpciBvd24gaW5mb3JtYXRpb24uIE9ubHkgYWRtaW5zIGNhbiB1cGRhdGUgb3RoZXIgdXNlcnMuXG4gKiAgICAgdGFnczogW1VzZXJzXVxuICogICAgIHNlY3VyaXR5OlxuICogICAgICAgLSBiZWFyZXJBdXRoOiBbXVxuICogICAgIHBhcmFtZXRlcnM6XG4gKiAgICAgICAtIGluOiBwYXRoXG4gKiAgICAgICAgIG5hbWU6IGlkXG4gKiAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIgaWRcbiAqICAgICByZXF1ZXN0Qm9keTpcbiAqICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gKiAgICAgICBjb250ZW50OlxuICogICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgIHR5cGU6IG9iamVjdFxuICogICAgICAgICAgICAgcHJvcGVydGllczpcbiAqICAgICAgICAgICAgICAgbmFtZTpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgZW1haWw6XG4gKiAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgZm9ybWF0OiBlbWFpbFxuICogICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBtdXN0IGJlIHVuaXF1ZVxuICogICAgICAgICAgICAgICBwYXNzd29yZDpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICBmb3JtYXQ6IHBhc3N3b3JkXG4gKiAgICAgICAgICAgICAgICAgbWluTGVuZ3RoOiA4XG4gKiAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IEF0IGxlYXN0IG9uZSBudW1iZXIgYW5kIG9uZSBsZXR0ZXJcbiAqICAgICAgICAgICAgIGV4YW1wbGU6XG4gKiAgICAgICAgICAgICAgIG5hbWU6IGZha2UgbmFtZVxuICogICAgICAgICAgICAgICBlbWFpbDogZmFrZUBleGFtcGxlLmNvbVxuICogICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQxXG4gKiAgICAgcmVzcG9uc2VzOlxuICogICAgICAgXCIyMDBcIjpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IE9LXG4gKiAgICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9Vc2VyJ1xuICogICAgICAgXCI0MDBcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvRHVwbGljYXRlRW1haWwnXG4gKiAgICAgICBcIjQwMVwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9VbmF1dGhvcml6ZWQnXG4gKiAgICAgICBcIjQwM1wiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Gb3JiaWRkZW4nXG4gKiAgICAgICBcIjQwNFwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Ob3RGb3VuZCdcbiAqXG4gKiAgIGRlbGV0ZTpcbiAqICAgICBzdW1tYXJ5OiBEZWxldGUgYSB1c2VyXG4gKiAgICAgZGVzY3JpcHRpb246IExvZ2dlZCBpbiB1c2VycyBjYW4gZGVsZXRlIG9ubHkgdGhlbXNlbHZlcy4gT25seSBhZG1pbnMgY2FuIGRlbGV0ZSBvdGhlciB1c2Vycy5cbiAqICAgICB0YWdzOiBbVXNlcnNdXG4gKiAgICAgc2VjdXJpdHk6XG4gKiAgICAgICAtIGJlYXJlckF1dGg6IFtdXG4gKiAgICAgcGFyYW1ldGVyczpcbiAqICAgICAgIC0gaW46IHBhdGhcbiAqICAgICAgICAgbmFtZTogaWRcbiAqICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICBkZXNjcmlwdGlvbjogVXNlciBpZFxuICogICAgIHJlc3BvbnNlczpcbiAqICAgICAgIFwiMjAwXCI6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBObyBjb250ZW50XG4gKiAgICAgICBcIjQwMVwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9VbmF1dGhvcml6ZWQnXG4gKiAgICAgICBcIjQwM1wiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Gb3JiaWRkZW4nXG4gKiAgICAgICBcIjQwNFwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Ob3RGb3VuZCdcbiAqL1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUMsZ0JBQWdCLEdBQUdELE9BQU8sQ0FBQyxvQ0FBb0MsQ0FBQztBQUN0RSxNQUFNRSxRQUFRLEdBQUdGLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQztBQUN0RCxNQUFNRyxNQUFNLEdBQUdKLE9BQU8sQ0FBQ0ssTUFBTSxDQUFDLENBQUM7QUFFL0JELE1BQU0sQ0FBQ0UsS0FBSyxDQUFDLGtCQUFrQixDQUFDLENBQUNDLEdBQUcsQ0FBQ0osUUFBUSxDQUFDLENBQUMsRUFBRUQsZ0JBQWdCLENBQUNNLFVBQVUsQ0FBQztBQUM3RUosTUFBTSxDQUFDRSxLQUFLLENBQUMsa0JBQWtCLENBQUMsQ0FBQ0MsR0FBRyxDQUFDSixRQUFRLENBQUMsQ0FBQyxFQUFFRCxnQkFBZ0IsQ0FBQ08sVUFBVSxDQUFDO0FBQzdFTCxNQUFNLENBQUNFLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDQyxHQUFHLENBQUNKLFFBQVEsQ0FBQyxDQUFDLEVBQUVELGdCQUFnQixDQUFDUSxXQUFXLENBQUM7QUFDL0VOLE1BQU0sQ0FBQ0UsS0FBSyxDQUFDLGtCQUFrQixDQUFDLENBQUNDLEdBQUcsQ0FBQ0osUUFBUSxDQUFDLENBQUMsRUFBRUQsZ0JBQWdCLENBQUNTLFVBQVUsQ0FBQzs7QUFFN0U7QUFDQVAsTUFBTSxDQUNERSxLQUFLLENBQUMscUJBQXFCLENBQUMsQ0FDNUJDLEdBQUcsQ0FBQ0osUUFBUSxDQUFDLENBQUMsRUFBRUQsZ0JBQWdCLENBQUNVLGFBQWEsQ0FBQztBQUNwRDtBQUNBUixNQUFNLENBQ0RFLEtBQUssQ0FBQyxvQkFBb0IsQ0FBQyxDQUMzQkMsR0FBRyxDQUFDSixR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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["express","require","searchController","validate","router","Router","route","get","toolFilter","searchTool","searchOpExp","searchCase","searchLessons","searchModels","searchModel","modelFilter","searchCaseFilter","searchOperations","searchOperationsFilter","searchOperation","insertData","formatData","fakeUser","handleSurvey","getTool","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/","sources":["searchRoute.js"],"sourcesContent":["const express = require(\"express\");\nconst searchController = require(\"../../controllers/searchController\");\nconst validate = require(\"../../middlewares/validate\");\nconst router = express.Router();\n\nrouter.route(\"/api/tool/filter\").get(validate(), searchController.toolFilter);\nrouter.route(\"/api/search/tool\").get(validate(), searchController.searchTool);\nrouter.route(\"/api/search/opExp\").get(validate(), searchController.searchOpExp);\nrouter.route(\"/api/search/case\").get(validate(), searchController.searchCase);\n\n//lesson sample\nrouter\n    .route(\"/api/search/lessons\")\n    .get(validate(), searchController.searchLessons);\n//model\nrouter\n    .route(\"/api/search/models\")\n    .get(validate(), searchController.searchModels);\nrouter\n    .route(\"/api/search/models/:id\")\n    .get(validate(), searchController.searchModel);\n\nrouter.route(\"/api/model/filter\").get(validate(), searchController.modelFilter);\n\nrouter\n    .route(\"/api/case/filter\")\n    .get(validate(), searchController.searchCaseFilter);\n\n//operations\nrouter\n    .route(\"/api/search/operations\")\n    .get(validate(), searchController.searchOperations);\nrouter\n    .route(\"/api/operations/filter\")\n    .get(validate(), searchController.searchOperationsFilter);\nrouter\n    .route(\"/api/search/operations/:id\")\n    .get(validate(), searchController.searchOperation);\n\n//insertData\nrouter\n    .route(\"/api/tool/insert-data\")\n    .get(validate(), searchController.insertData);\nrouter\n    .route(\"/api/tool/format-data\")\n    .get(validate(), searchController.formatData);\nrouter.route(\"/api/tool/fake-user\").get(validate(), searchController.fakeUser);\n\nrouter\n    .route(\"/api/tool/handle-survey\")\n    .get(validate(), searchController.handleSurvey);\n\nrouter.route(\"/api/tool/:id\").get(validate(), searchController.getTool);\n\nmodule.exports = router;\n\n/**\n * @swagger\n * tags:\n *   name: Users\n *   description: User management and retrieval\n */\n\n/**\n * @swagger\n * /users:\n *   post:\n *     summary: Create a user\n *     description: Only admins can create other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - name\n *               - email\n *               - password\n *               - role\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *               role:\n *                  type: string\n *                  enum: [user, admin]\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *               role: user\n *     responses:\n *       \"201\":\n *         description: Created\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *\n *   get:\n *     summary: Get all users\n *     description: Only admins can retrieve all users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: query\n *         name: name\n *         schema:\n *           type: string\n *         description: User name\n *       - in: query\n *         name: role\n *         schema:\n *           type: string\n *         description: User role\n *       - in: query\n *         name: sortBy\n *         schema:\n *           type: string\n *         description: sort by query in the form of field:desc/asc (ex. name:asc)\n *       - in: query\n *         name: limit\n *         schema:\n *           type: integer\n *           minimum: 1\n *         default: 10\n *         description: Maximum number of users\n *       - in: query\n *         name: page\n *         schema:\n *           type: integer\n *           minimum: 1\n *           default: 1\n *         description: Page number\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 results:\n *                   type: array\n *                   items:\n *                     $ref: '#/components/schemas/User'\n *                 page:\n *                   type: integer\n *                   example: 1\n *                 limit:\n *                   type: integer\n *                   example: 10\n *                 totalPages:\n *                   type: integer\n *                   example: 1\n *                 totalResults:\n *                   type: integer\n *                   example: 1\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n */\n\n/**\n * @swagger\n * /users/{id}:\n *   get:\n *     summary: Get a user\n *     description: Logged in users can fetch only their own user information. Only admins can fetch other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   patch:\n *     summary: Update a user\n *     description: Logged in users can only update their own information. Only admins can update other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   delete:\n *     summary: Delete a user\n *     description: Logged in users can delete only themselves. Only admins can delete other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: No content\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n */\n"],"mappings":"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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]}},"mtime":1721288674384},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/controllers/searchController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const {\n  StatusCodes\n} = require(\"http-status-codes\");\nconst searchService = require(\"../services/searchService\");\n//import message factory\nconst MessageFactory = require(\"../utils/messageFactory\");\nconst RemoveValueNullObject = require(\"../utils/removeValueNullObject\");\nconst fs = require(\"fs\");\nconst path = require(\"path\");\nconst isNumber = require(\"../utils/isNumber\");\nconst util = require(\"util\");\nconst readFile = util.promisify(fs.readFile);\nconst cleanData = require(\"../utils/cleanData\");\nexports.searchLessons = async (req, res, next) => {\n  try {\n    const paged = parseInt(req.query.paged) || 1;\n    const limit = parseInt(req.query.limit) || 10;\n    const data = await searchService.searchLessons({\n      paged,\n      limit\n    });\n    if (data === null) {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.success({}, \"The data lesson empty.\"));\n    } else {\n      res.status(StatusCodes.OK).json(MessageFactory.success(data, \"Get all lesson success!\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.formatData = async (req, res, next) => {\n  try {\n    const filePath = path.join(__dirname, \"../../dataRow.json\");\n    let aData = [];\n    const data = await readFile(filePath, \"utf8\");\n    const jsonData = JSON.parse(data);\n    await Promise.all(jsonData.map(async item => {\n      aData.push({\n        id: item[0],\n        name: item[1],\n        class_topic: [item[2], item[3], item[4], item[5], item[6]],\n        chasi: item[7],\n        class_type: [item[8], item[9], item[10]],\n        class_subject: [item[11], item[12], item[13], item[14], item[15], item[16]],\n        class_grade: [item[17], item[18], item[19], item[20]],\n        artificial_intelligence_tools: [isNumber(parseInt(item[21])) ? parseInt(item[21]) : \"\", isNumber(parseInt(item[22])) ? parseInt(item[22]) : \"\", isNumber(parseInt(item[23])) ? parseInt(item[23]) : \"\", isNumber(parseInt(item[24])) ? parseInt(item[24]) : \"\", isNumber(parseInt(item[25])) ? parseInt(item[25]) : \"\", isNumber(parseInt(item[26])) ? parseInt(item[26]) : \"\", isNumber(parseInt(item[27])) ? parseInt(item[27]) : \"\"],\n        difficulty: item[28],\n        learning_objectives: item[29],\n        achievement_criteria: item[30],\n        pdf: item[31],\n        source: item[32]\n      });\n    }));\n    if (aData.length === 0) {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.success({}, \"The data lesson empty.\"));\n    } else {\n      res.status(StatusCodes.OK).json(MessageFactory.success(cleanData(aData), \"Get all lesson success!\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.insertData = async (req, res, next) => {\n  try {\n    const filePath = path.join(__dirname, \"../../data.json\");\n    let aData = [];\n    const data = await readFile(filePath, \"utf8\");\n    const jsonData = JSON.parse(data);\n    //\n\n    //searchService.handleInsertDataOperationCase(jsonData);\n\n    if (aData.length === 0) {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.success({}, \"The data lesson empty.\"));\n    } else {\n      res.status(StatusCodes.OK).json(MessageFactory.success(cleanData(aData), \"Get all lesson success!\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.fakeUser = async (req, res, next) => {\n  try {\n    const filePath = path.join(__dirname, \"../../survey.json\");\n    let aData = [];\n    const data = await readFile(filePath, \"utf8\");\n    const jsonData = JSON.parse(data);\n    //\n\n    await searchService.handleInsertSurvey(jsonData);\n    if (jsonData.length === 0) {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.success({}, \"The data lesson empty.\"));\n    } else {\n      res.status(StatusCodes.OK).json(MessageFactory.success(jsonData.length, \"Get all lesson success!\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.handleSurvey = async (req, res, next) => {\n  try {\n    let data = await searchService.handleSurvey();\n    if (data == null) {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.success({}, \"The data lesson empty.\"));\n    } else {\n      res.status(StatusCodes.OK).json(MessageFactory.success(data, \"Get all lesson success!\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.getTool = async (req, res, next) => {\n  try {\n    const id = req.params.id;\n    const data = await searchService.getTool(id);\n    if (data === null) {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.success({}, \"The data tool empty.\"));\n    } else {\n      res.status(StatusCodes.OK).json(MessageFactory.success(data, \"Get all tool success!\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.searchOpExp = async (req, res, next) => {\n  try {\n    const data = await searchService.searchOpExp();\n    if (data) {\n      res.status(StatusCodes.OK).json(data);\n    } else {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"Search error\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.modelFilter = async (req, res, next) => {\n  try {\n    const data = await searchService.modelFilter();\n    if (data) {\n      res.status(StatusCodes.OK).json(data);\n    } else {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"Search error\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.searchCaseFilter = async (req, res, next) => {\n  try {\n    const data = await searchService.searchCaseFilter();\n    if (data) {\n      res.status(StatusCodes.OK).json(data);\n    } else {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"Search error\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.searchCase = async (req, res, next) => {\n  try {\n    let user_id = req.query.user_id;\n    if (!user_id) {\n      throw new Error(\"The user id is required\");\n    }\n    const data = await searchService.searchCase(user_id);\n    if (data) {\n      res.status(StatusCodes.OK).json(data);\n    } else {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"Search error\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.searchModel = async (req, res, next) => {\n  try {\n    const id = req.params.id;\n    const data = await searchService.searchModel({\n      id\n    });\n    if (data === null) {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.success({}, \"The data model empty.\"));\n    } else {\n      res.status(StatusCodes.OK).json(MessageFactory.success(data, \"Get model success!\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.searchModels = async (req, res, next) => {\n  try {\n    let user_id = req.query.user_id;\n    if (!user_id) {\n      throw new Error(\"The user id is required\");\n    }\n    const data = await searchService.searchModels(user_id);\n    if (data === null) {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.success({}, \"The data model empty.\"));\n    } else {\n      res.status(StatusCodes.OK).json(MessageFactory.success(data, \"Get all model success!\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.toolFilter = async (req, res, next) => {\n  try {\n    const data = await searchService.toolFilter();\n    if (data) {\n      res.status(StatusCodes.OK).json(data);\n    } else {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"Search error\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.searchTool = async (req, res, next) => {\n  try {\n    let user_id = req.query.user_id;\n    if (!user_id) {\n      throw new Error(\"The user id is required\");\n    }\n    const data = await searchService.searchTool(user_id);\n    if (data) {\n      res.status(StatusCodes.OK).json(data);\n    } else {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"Search error\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\n//operations\nexports.searchOperations = async (req, res, next) => {\n  try {\n    let user_id = req.query.user_id;\n    if (!user_id) {\n      throw new Error(\"The user id is required\");\n    }\n    const data = await searchService.searchOperations(user_id);\n    if (data === null) {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.success({}, \"The data model empty.\"));\n    } else {\n      res.status(StatusCodes.OK).json(MessageFactory.success(data, \"Get all model success!\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.searchOperation = async (req, res, next) => {\n  try {\n    let id = req.params.id;\n    const data = await searchService.searchOperation(id);\n    if (data) {\n      res.status(StatusCodes.OK).json(MessageFactory.success(data, \"Get operation success!\"));\n    } else {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"Search error\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.searchOperationsFilter = async (req, res, next) => {\n  try {\n    const data = await searchService.searchToolOperations();\n    if (data) {\n      res.status(StatusCodes.OK).json(data);\n    } else {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"Search error\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTdGF0dXNDb2RlcyIsInJlcXVpcmUiLCJzZWFyY2hTZXJ2aWNlIiwiTWVzc2FnZUZhY3RvcnkiLCJSZW1vdmVWYWx1ZU51bGxPYmplY3QiLCJmcyIsInBhdGgiLCJpc051bWJlciIsInV0aWwiLCJyZWFkRmlsZSIsInByb21pc2lmeSIsImNsZWFuRGF0YSIsImV4cG9ydHMiLCJzZWFyY2hMZXNzb25zIiwicmVxIiwicmVzIiwibmV4dCIsInBhZ2VkIiwicGFyc2VJbnQiLCJxdWVyeSIsImxpbWl0IiwiZGF0YSIsInN0YXR1cyIsIlVOQVVUSE9SSVpFRCIsImpzb24iLCJzdWNjZXNzIiwiT0siLCJlcnJvciIsImZvcm1hdERhdGEiLCJmaWxlUGF0aCIsImpvaW4iLCJfX2Rpcm5hbWUiLCJhRGF0YSIsImpzb25EYXRhIiwiSlNPTiIsInBhcnNlIiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsIml0ZW0iLCJwdXNoIiwiaWQiLCJuYW1lIiwiY2xhc3NfdG9waWMiLCJjaGFzaSIsImNsYXNzX3R5cGUiLCJjbGFzc19zdWJqZWN0IiwiY2xhc3NfZ3JhZGUiLCJhcnRpZmljaWFsX2ludGVsbGlnZW5jZV90b29scyIsImRpZmZpY3VsdHkiLCJsZWFybmluZ19vYmplY3RpdmVzIiwiYWNoaWV2ZW1lbnRfY3JpdGVyaWEiLCJwZGYiLCJzb3VyY2UiLCJsZW5ndGgiLCJpbnNlcnREYXRhIiwiZmFrZVVzZXIiLCJoYW5kbGVJbnNlcnRTdXJ2ZXkiLCJoYW5kbGVTdXJ2ZXkiLCJnZXRUb29sIiwicGFyYW1zIiwic2VhcmNoT3BFeHAiLCJtb2RlbEZpbHRlciIsInNlYXJjaENhc2VGaWx0ZXIiLCJzZWFyY2hDYXNlIiwidXNlcl9pZCIsIkVycm9yIiwic2VhcmNoTW9kZWwiLCJzZWFyY2hNb2RlbHMiLCJ0b29sRmlsdGVyIiwic2VhcmNoVG9vbCIsInNlYXJjaE9wZXJhdGlvbnMiLCJzZWFyY2hPcGVyYXRpb24iLCJzZWFyY2hPcGVyYXRpb25zRmlsdGVyIiwic2VhcmNoVG9vbE9wZXJhdGlvbnMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbInNlYXJjaENvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBTdGF0dXNDb2RlcyB9ID0gcmVxdWlyZShcImh0dHAtc3RhdHVzLWNvZGVzXCIpO1xuY29uc3Qgc2VhcmNoU2VydmljZSA9IHJlcXVpcmUoXCIuLi9zZXJ2aWNlcy9zZWFyY2hTZXJ2aWNlXCIpO1xuLy9pbXBvcnQgbWVzc2FnZSBmYWN0b3J5XG5jb25zdCBNZXNzYWdlRmFjdG9yeSA9IHJlcXVpcmUoXCIuLi91dGlscy9tZXNzYWdlRmFjdG9yeVwiKTtcbmNvbnN0IFJlbW92ZVZhbHVlTnVsbE9iamVjdCA9IHJlcXVpcmUoXCIuLi91dGlscy9yZW1vdmVWYWx1ZU51bGxPYmplY3RcIik7XG5jb25zdCBmcyA9IHJlcXVpcmUoXCJmc1wiKTtcbmNvbnN0IHBhdGggPSByZXF1aXJlKFwicGF0aFwiKTtcbmNvbnN0IGlzTnVtYmVyID0gcmVxdWlyZShcIi4uL3V0aWxzL2lzTnVtYmVyXCIpO1xuY29uc3QgdXRpbCA9IHJlcXVpcmUoXCJ1dGlsXCIpO1xuY29uc3QgcmVhZEZpbGUgPSB1dGlsLnByb21pc2lmeShmcy5yZWFkRmlsZSk7XG5jb25zdCBjbGVhbkRhdGEgPSByZXF1aXJlKFwiLi4vdXRpbHMvY2xlYW5EYXRhXCIpO1xuXG5leHBvcnRzLnNlYXJjaExlc3NvbnMgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBwYWdlZCA9IHBhcnNlSW50KHJlcS5xdWVyeS5wYWdlZCkgfHwgMTtcbiAgICAgICAgY29uc3QgbGltaXQgPSBwYXJzZUludChyZXEucXVlcnkubGltaXQpIHx8IDEwO1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgc2VhcmNoU2VydmljZS5zZWFyY2hMZXNzb25zKHsgcGFnZWQsIGxpbWl0IH0pO1xuICAgICAgICBpZiAoZGF0YSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5VTkFVVEhPUklaRUQpLmpzb24oXG4gICAgICAgICAgICAgICAgTWVzc2FnZUZhY3Rvcnkuc3VjY2Vzcyh7fSwgXCJUaGUgZGF0YSBsZXNzb24gZW1wdHkuXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5PSykuanNvbihcbiAgICAgICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5zdWNjZXNzKGRhdGEsIFwiR2V0IGFsbCBsZXNzb24gc3VjY2VzcyFcIilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBuZXh0KGVycm9yKTtcbiAgICB9XG59O1xuZXhwb3J0cy5mb3JtYXREYXRhID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4oX19kaXJuYW1lLCBcIi4uLy4uL2RhdGFSb3cuanNvblwiKTtcbiAgICAgICAgbGV0IGFEYXRhID0gW107XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlYWRGaWxlKGZpbGVQYXRoLCBcInV0ZjhcIik7XG4gICAgICAgIGNvbnN0IGpzb25EYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcblxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgICAgIGpzb25EYXRhLm1hcChhc3luYyAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGFEYXRhLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBpZDogaXRlbVswXSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbVsxXSxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NfdG9waWM6IFtpdGVtWzJdLCBpdGVtWzNdLCBpdGVtWzRdLCBpdGVtWzVdLCBpdGVtWzZdXSxcbiAgICAgICAgICAgICAgICAgICAgY2hhc2k6IGl0ZW1bN10sXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzX3R5cGU6IFtpdGVtWzhdLCBpdGVtWzldLCBpdGVtWzEwXV0sXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzX3N1YmplY3Q6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1bMTFdLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVsxMl0sXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtWzEzXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1bMTRdLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVsxNV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtWzE2XSxcbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NfZ3JhZGU6IFtpdGVtWzE3XSwgaXRlbVsxOF0sIGl0ZW1bMTldLCBpdGVtWzIwXV0sXG4gICAgICAgICAgICAgICAgICAgIGFydGlmaWNpYWxfaW50ZWxsaWdlbmNlX3Rvb2xzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBpc051bWJlcihwYXJzZUludChpdGVtWzIxXSkpID8gcGFyc2VJbnQoaXRlbVsyMV0pIDogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTnVtYmVyKHBhcnNlSW50KGl0ZW1bMjJdKSkgPyBwYXJzZUludChpdGVtWzIyXSkgOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNOdW1iZXIocGFyc2VJbnQoaXRlbVsyM10pKSA/IHBhcnNlSW50KGl0ZW1bMjNdKSA6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc051bWJlcihwYXJzZUludChpdGVtWzI0XSkpID8gcGFyc2VJbnQoaXRlbVsyNF0pIDogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTnVtYmVyKHBhcnNlSW50KGl0ZW1bMjVdKSkgPyBwYXJzZUludChpdGVtWzI1XSkgOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNOdW1iZXIocGFyc2VJbnQoaXRlbVsyNl0pKSA/IHBhcnNlSW50KGl0ZW1bMjZdKSA6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc051bWJlcihwYXJzZUludChpdGVtWzI3XSkpID8gcGFyc2VJbnQoaXRlbVsyN10pIDogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eTogaXRlbVsyOF0sXG4gICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nX29iamVjdGl2ZXM6IGl0ZW1bMjldLFxuICAgICAgICAgICAgICAgICAgICBhY2hpZXZlbWVudF9jcml0ZXJpYTogaXRlbVszMF0sXG4gICAgICAgICAgICAgICAgICAgIHBkZjogaXRlbVszMV0sXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogaXRlbVszMl0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChhRGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoU3RhdHVzQ29kZXMuVU5BVVRIT1JJWkVEKS5qc29uKFxuICAgICAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LnN1Y2Nlc3Moe30sIFwiVGhlIGRhdGEgbGVzc29uIGVtcHR5LlwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoU3RhdHVzQ29kZXMuT0spLmpzb24oXG4gICAgICAgICAgICAgICAgTWVzc2FnZUZhY3Rvcnkuc3VjY2VzcyhcbiAgICAgICAgICAgICAgICAgICAgY2xlYW5EYXRhKGFEYXRhKSxcbiAgICAgICAgICAgICAgICAgICAgXCJHZXQgYWxsIGxlc3NvbiBzdWNjZXNzIVwiXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbn07XG5leHBvcnRzLmluc2VydERhdGEgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsIFwiLi4vLi4vZGF0YS5qc29uXCIpO1xuICAgICAgICBsZXQgYURhdGEgPSBbXTtcblxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVhZEZpbGUoZmlsZVBhdGgsIFwidXRmOFwiKTtcbiAgICAgICAgY29uc3QganNvbkRhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICAvL1xuXG4gICAgICAgIC8vc2VhcmNoU2VydmljZS5oYW5kbGVJbnNlcnREYXRhT3BlcmF0aW9uQ2FzZShqc29uRGF0YSk7XG5cbiAgICAgICAgaWYgKGFEYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5VTkFVVEhPUklaRUQpLmpzb24oXG4gICAgICAgICAgICAgICAgTWVzc2FnZUZhY3Rvcnkuc3VjY2Vzcyh7fSwgXCJUaGUgZGF0YSBsZXNzb24gZW1wdHkuXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5PSykuanNvbihcbiAgICAgICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5zdWNjZXNzKFxuICAgICAgICAgICAgICAgICAgICBjbGVhbkRhdGEoYURhdGEpLFxuICAgICAgICAgICAgICAgICAgICBcIkdldCBhbGwgbGVzc29uIHN1Y2Nlc3MhXCJcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbmV4dChlcnJvcik7XG4gICAgfVxufTtcbmV4cG9ydHMuZmFrZVVzZXIgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsIFwiLi4vLi4vc3VydmV5Lmpzb25cIik7XG4gICAgICAgIGxldCBhRGF0YSA9IFtdO1xuXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZWFkRmlsZShmaWxlUGF0aCwgXCJ1dGY4XCIpO1xuICAgICAgICBjb25zdCBqc29uRGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgIC8vXG5cbiAgICAgICAgYXdhaXQgc2VhcmNoU2VydmljZS5oYW5kbGVJbnNlcnRTdXJ2ZXkoanNvbkRhdGEpO1xuXG4gICAgICAgIGlmIChqc29uRGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoU3RhdHVzQ29kZXMuVU5BVVRIT1JJWkVEKS5qc29uKFxuICAgICAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LnN1Y2Nlc3Moe30sIFwiVGhlIGRhdGEgbGVzc29uIGVtcHR5LlwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoU3RhdHVzQ29kZXMuT0spLmpzb24oXG4gICAgICAgICAgICAgICAgTWVzc2FnZUZhY3Rvcnkuc3VjY2VzcyhcbiAgICAgICAgICAgICAgICAgICAganNvbkRhdGEubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICBcIkdldCBhbGwgbGVzc29uIHN1Y2Nlc3MhXCJcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbmV4dChlcnJvcik7XG4gICAgfVxufTtcbmV4cG9ydHMuaGFuZGxlU3VydmV5ID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgbGV0IGRhdGEgPSBhd2FpdCBzZWFyY2hTZXJ2aWNlLmhhbmRsZVN1cnZleSgpO1xuXG4gICAgICAgIGlmIChkYXRhID09IG51bGwpIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoU3RhdHVzQ29kZXMuVU5BVVRIT1JJWkVEKS5qc29uKFxuICAgICAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LnN1Y2Nlc3Moe30sIFwiVGhlIGRhdGEgbGVzc29uIGVtcHR5LlwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoU3RhdHVzQ29kZXMuT0spLmpzb24oXG4gICAgICAgICAgICAgICAgTWVzc2FnZUZhY3Rvcnkuc3VjY2VzcyhkYXRhLCBcIkdldCBhbGwgbGVzc29uIHN1Y2Nlc3MhXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbmV4dChlcnJvcik7XG4gICAgfVxufTtcbmV4cG9ydHMuZ2V0VG9vbCA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGlkID0gcmVxLnBhcmFtcy5pZDtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHNlYXJjaFNlcnZpY2UuZ2V0VG9vbChpZCk7XG4gICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLlVOQVVUSE9SSVpFRCkuanNvbihcbiAgICAgICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5zdWNjZXNzKHt9LCBcIlRoZSBkYXRhIHRvb2wgZW1wdHkuXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5PSykuanNvbihcbiAgICAgICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5zdWNjZXNzKGRhdGEsIFwiR2V0IGFsbCB0b29sIHN1Y2Nlc3MhXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbmV4dChlcnJvcik7XG4gICAgfVxufTtcblxuZXhwb3J0cy5zZWFyY2hPcEV4cCA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzZWFyY2hTZXJ2aWNlLnNlYXJjaE9wRXhwKCk7XG4gICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLk9LKS5qc29uKGRhdGEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5VTkFVVEhPUklaRUQpLmpzb24oXG4gICAgICAgICAgICAgICAgTWVzc2FnZUZhY3RvcnkuZXJyb3IoXCJTZWFyY2ggZXJyb3JcIilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBuZXh0KGVycm9yKTtcbiAgICB9XG59O1xuXG5leHBvcnRzLm1vZGVsRmlsdGVyID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHNlYXJjaFNlcnZpY2UubW9kZWxGaWx0ZXIoKTtcbiAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoU3RhdHVzQ29kZXMuT0spLmpzb24oZGF0YSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLlVOQVVUSE9SSVpFRCkuanNvbihcbiAgICAgICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5lcnJvcihcIlNlYXJjaCBlcnJvclwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbn07XG5leHBvcnRzLnNlYXJjaENhc2VGaWx0ZXIgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgc2VhcmNoU2VydmljZS5zZWFyY2hDYXNlRmlsdGVyKCk7XG4gICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLk9LKS5qc29uKGRhdGEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5VTkFVVEhPUklaRUQpLmpzb24oXG4gICAgICAgICAgICAgICAgTWVzc2FnZUZhY3RvcnkuZXJyb3IoXCJTZWFyY2ggZXJyb3JcIilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBuZXh0KGVycm9yKTtcbiAgICB9XG59O1xuXG5leHBvcnRzLnNlYXJjaENhc2UgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBsZXQgdXNlcl9pZCA9IHJlcS5xdWVyeS51c2VyX2lkO1xuICAgICAgICBpZiAoIXVzZXJfaWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSB1c2VyIGlkIGlzIHJlcXVpcmVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzZWFyY2hTZXJ2aWNlLnNlYXJjaENhc2UodXNlcl9pZCk7XG4gICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLk9LKS5qc29uKGRhdGEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5VTkFVVEhPUklaRUQpLmpzb24oXG4gICAgICAgICAgICAgICAgTWVzc2FnZUZhY3RvcnkuZXJyb3IoXCJTZWFyY2ggZXJyb3JcIilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBuZXh0KGVycm9yKTtcbiAgICB9XG59O1xuXG5leHBvcnRzLnNlYXJjaE1vZGVsID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaWQgPSByZXEucGFyYW1zLmlkO1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgc2VhcmNoU2VydmljZS5zZWFyY2hNb2RlbCh7IGlkIH0pO1xuICAgICAgICBpZiAoZGF0YSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5VTkFVVEhPUklaRUQpLmpzb24oXG4gICAgICAgICAgICAgICAgTWVzc2FnZUZhY3Rvcnkuc3VjY2Vzcyh7fSwgXCJUaGUgZGF0YSBtb2RlbCBlbXB0eS5cIilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLk9LKS5qc29uKFxuICAgICAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LnN1Y2Nlc3MoZGF0YSwgXCJHZXQgbW9kZWwgc3VjY2VzcyFcIilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBuZXh0KGVycm9yKTtcbiAgICB9XG59O1xuXG5leHBvcnRzLnNlYXJjaE1vZGVscyA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGxldCB1c2VyX2lkID0gcmVxLnF1ZXJ5LnVzZXJfaWQ7XG4gICAgICAgIGlmICghdXNlcl9pZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHVzZXIgaWQgaXMgcmVxdWlyZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHNlYXJjaFNlcnZpY2Uuc2VhcmNoTW9kZWxzKHVzZXJfaWQpO1xuICAgICAgICBpZiAoZGF0YSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5VTkFVVEhPUklaRUQpLmpzb24oXG4gICAgICAgICAgICAgICAgTWVzc2FnZUZhY3Rvcnkuc3VjY2Vzcyh7fSwgXCJUaGUgZGF0YSBtb2RlbCBlbXB0eS5cIilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLk9LKS5qc29uKFxuICAgICAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LnN1Y2Nlc3MoZGF0YSwgXCJHZXQgYWxsIG1vZGVsIHN1Y2Nlc3MhXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbmV4dChlcnJvcik7XG4gICAgfVxufTtcblxuZXhwb3J0cy50b29sRmlsdGVyID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHNlYXJjaFNlcnZpY2UudG9vbEZpbHRlcigpO1xuICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5PSykuanNvbihkYXRhKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoU3RhdHVzQ29kZXMuVU5BVVRIT1JJWkVEKS5qc29uKFxuICAgICAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LmVycm9yKFwiU2VhcmNoIGVycm9yXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbmV4dChlcnJvcik7XG4gICAgfVxufTtcbmV4cG9ydHMuc2VhcmNoVG9vbCA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGxldCB1c2VyX2lkID0gcmVxLnF1ZXJ5LnVzZXJfaWQ7XG4gICAgICAgIGlmICghdXNlcl9pZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHVzZXIgaWQgaXMgcmVxdWlyZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHNlYXJjaFNlcnZpY2Uuc2VhcmNoVG9vbCh1c2VyX2lkKTtcbiAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoU3RhdHVzQ29kZXMuT0spLmpzb24oZGF0YSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLlVOQVVUSE9SSVpFRCkuanNvbihcbiAgICAgICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5lcnJvcihcIlNlYXJjaCBlcnJvclwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbn07XG4vL29wZXJhdGlvbnNcbmV4cG9ydHMuc2VhcmNoT3BlcmF0aW9ucyA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGxldCB1c2VyX2lkID0gcmVxLnF1ZXJ5LnVzZXJfaWQ7XG4gICAgICAgIGlmICghdXNlcl9pZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHVzZXIgaWQgaXMgcmVxdWlyZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHNlYXJjaFNlcnZpY2Uuc2VhcmNoT3BlcmF0aW9ucyh1c2VyX2lkKTtcbiAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoU3RhdHVzQ29kZXMuVU5BVVRIT1JJWkVEKS5qc29uKFxuICAgICAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LnN1Y2Nlc3Moe30sIFwiVGhlIGRhdGEgbW9kZWwgZW1wdHkuXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5PSykuanNvbihcbiAgICAgICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5zdWNjZXNzKGRhdGEsIFwiR2V0IGFsbCBtb2RlbCBzdWNjZXNzIVwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbn07XG5cbmV4cG9ydHMuc2VhcmNoT3BlcmF0aW9uID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgbGV0IGlkID0gcmVxLnBhcmFtcy5pZDtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHNlYXJjaFNlcnZpY2Uuc2VhcmNoT3BlcmF0aW9uKGlkKTtcbiAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoU3RhdHVzQ29kZXMuT0spLmpzb24oXG4gICAgICAgICAgICAgICAgTWVzc2FnZUZhY3Rvcnkuc3VjY2VzcyhkYXRhLCBcIkdldCBvcGVyYXRpb24gc3VjY2VzcyFcIilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLlVOQVVUSE9SSVpFRCkuanNvbihcbiAgICAgICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5lcnJvcihcIlNlYXJjaCBlcnJvclwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbn07XG5leHBvcnRzLnNlYXJjaE9wZXJhdGlvbnNGaWx0ZXIgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgc2VhcmNoU2VydmljZS5zZWFyY2hUb29sT3BlcmF0aW9ucygpO1xuICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5PSykuanNvbihkYXRhKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoU3RhdHVzQ29kZXMuVU5BVVRIT1JJWkVEKS5qc29uKFxuICAgICAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LmVycm9yKFwiU2VhcmNoIGVycm9yXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbmV4dChlcnJvcik7XG4gICAgfVxufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTTtFQUFFQTtBQUFZLENBQUMsR0FBR0MsT0FBTyxDQUFDLG1CQUFtQixDQUFDO0FBQ3BELE1BQU1DLGFBQWEsR0FBR0QsT0FBTyxDQUFDLDJCQUEyQixDQUFDO0FBQzFEO0FBQ0EsTUFBTUUsY0FBYyxHQUFHRixPQUFPLENBQUMseUJBQXlCLENBQUM7QUFDekQsTUFBTUcscUJBQXFCLEdBQUdILE9BQU8sQ0FBQyxnQ0FBZ0MsQ0FBQztBQUN2RSxNQUFNSSxFQUFFLEdBQUdKLE9BQU8sQ0FBQyxJQUFJLENBQUM7QUFDeEIsTUFBTUssSUFBSSxHQUFHTCxPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzVCLE1BQU1NLFFBQVEsR0FBR04sT0FBTyxDQUFDLG1CQUFtQixDQUFDO0FBQzdDLE1BQU1PLElBQUksR0FBR1AsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUM1QixNQUFNUSxRQUFRLEdBQUdELElBQUksQ0FBQ0UsU0FBUyxDQUFDTCxFQUFFLENBQUNJLFFBQVEsQ0FBQztBQUM1QyxNQUFNRSxTQUFTLEdBQUdWLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQztBQUUvQ1csT0FBTyxDQUFDQyxhQUFhLEdBQUcsT0FBT0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztFQUM5QyxJQUFJO0lBQ0EsTUFBTUMsS0FBSyxHQUFHQyxRQUFRLENBQUNKLEdBQUcsQ0FBQ0ssS0FBSyxDQUFDRixLQUFLLENBQUMs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","map":{"version":3,"names":["StatusCodes","require","searchService","MessageFactory","RemoveValueNullObject","fs","path","isNumber","util","readFile","promisify","cleanData","exports","searchLessons","req","res","next","paged","parseInt","query","limit","data","status","UNAUTHORIZED","json","success","OK","error","formatData","filePath","join","__dirname","aData","jsonData","JSON","parse","Promise","all","map","item","push","id","name","class_topic","chasi","class_type","class_subject","class_grade","artificial_intelligence_tools","difficulty","learning_objectives","achievement_criteria","pdf","source","length","insertData","fakeUser","handleInsertSurvey","handleSurvey","getTool","params","searchOpExp","modelFilter","searchCaseFilter","searchCase","user_id","Error","searchModel","searchModels","toolFilter","searchTool","searchOperations","searchOperation","searchOperationsFilter","searchToolOperations"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/controllers/","sources":["searchController.js"],"sourcesContent":["const { StatusCodes } = require(\"http-status-codes\");\nconst searchService = require(\"../services/searchService\");\n//import message factory\nconst MessageFactory = require(\"../utils/messageFactory\");\nconst RemoveValueNullObject = require(\"../utils/removeValueNullObject\");\nconst fs = require(\"fs\");\nconst path = require(\"path\");\nconst isNumber = require(\"../utils/isNumber\");\nconst util = require(\"util\");\nconst readFile = util.promisify(fs.readFile);\nconst cleanData = require(\"../utils/cleanData\");\n\nexports.searchLessons = async (req, res, next) => {\n    try {\n        const paged = parseInt(req.query.paged) || 1;\n        const limit = parseInt(req.query.limit) || 10;\n        const data = await searchService.searchLessons({ paged, limit });\n        if (data === null) {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.success({}, \"The data lesson empty.\")\n            );\n        } else {\n            res.status(StatusCodes.OK).json(\n                MessageFactory.success(data, \"Get all lesson success!\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\nexports.formatData = async (req, res, next) => {\n    try {\n        const filePath = path.join(__dirname, \"../../dataRow.json\");\n        let aData = [];\n\n        const data = await readFile(filePath, \"utf8\");\n        const jsonData = JSON.parse(data);\n\n        await Promise.all(\n            jsonData.map(async (item) => {\n                aData.push({\n                    id: item[0],\n                    name: item[1],\n                    class_topic: [item[2], item[3], item[4], item[5], item[6]],\n                    chasi: item[7],\n                    class_type: [item[8], item[9], item[10]],\n                    class_subject: [\n                        item[11],\n                        item[12],\n                        item[13],\n                        item[14],\n                        item[15],\n                        item[16],\n                    ],\n                    class_grade: [item[17], item[18], item[19], item[20]],\n                    artificial_intelligence_tools: [\n                        isNumber(parseInt(item[21])) ? parseInt(item[21]) : \"\",\n                        isNumber(parseInt(item[22])) ? parseInt(item[22]) : \"\",\n                        isNumber(parseInt(item[23])) ? parseInt(item[23]) : \"\",\n                        isNumber(parseInt(item[24])) ? parseInt(item[24]) : \"\",\n                        isNumber(parseInt(item[25])) ? parseInt(item[25]) : \"\",\n                        isNumber(parseInt(item[26])) ? parseInt(item[26]) : \"\",\n                        isNumber(parseInt(item[27])) ? parseInt(item[27]) : \"\",\n                    ],\n                    difficulty: item[28],\n                    learning_objectives: item[29],\n                    achievement_criteria: item[30],\n                    pdf: item[31],\n                    source: item[32],\n                });\n            })\n        );\n\n        if (aData.length === 0) {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.success({}, \"The data lesson empty.\")\n            );\n        } else {\n            res.status(StatusCodes.OK).json(\n                MessageFactory.success(\n                    cleanData(aData),\n                    \"Get all lesson success!\"\n                )\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\nexports.insertData = async (req, res, next) => {\n    try {\n        const filePath = path.join(__dirname, \"../../data.json\");\n        let aData = [];\n\n        const data = await readFile(filePath, \"utf8\");\n        const jsonData = JSON.parse(data);\n        //\n\n        //searchService.handleInsertDataOperationCase(jsonData);\n\n        if (aData.length === 0) {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.success({}, \"The data lesson empty.\")\n            );\n        } else {\n            res.status(StatusCodes.OK).json(\n                MessageFactory.success(\n                    cleanData(aData),\n                    \"Get all lesson success!\"\n                )\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\nexports.fakeUser = async (req, res, next) => {\n    try {\n        const filePath = path.join(__dirname, \"../../survey.json\");\n        let aData = [];\n\n        const data = await readFile(filePath, \"utf8\");\n        const jsonData = JSON.parse(data);\n        //\n\n        await searchService.handleInsertSurvey(jsonData);\n\n        if (jsonData.length === 0) {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.success({}, \"The data lesson empty.\")\n            );\n        } else {\n            res.status(StatusCodes.OK).json(\n                MessageFactory.success(\n                    jsonData.length,\n                    \"Get all lesson success!\"\n                )\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\nexports.handleSurvey = async (req, res, next) => {\n    try {\n        let data = await searchService.handleSurvey();\n\n        if (data == null) {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.success({}, \"The data lesson empty.\")\n            );\n        } else {\n            res.status(StatusCodes.OK).json(\n                MessageFactory.success(data, \"Get all lesson success!\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\nexports.getTool = async (req, res, next) => {\n    try {\n        const id = req.params.id;\n        const data = await searchService.getTool(id);\n        if (data === null) {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.success({}, \"The data tool empty.\")\n            );\n        } else {\n            res.status(StatusCodes.OK).json(\n                MessageFactory.success(data, \"Get all tool success!\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\n\nexports.searchOpExp = async (req, res, next) => {\n    try {\n        const data = await searchService.searchOpExp();\n        if (data) {\n            res.status(StatusCodes.OK).json(data);\n        } else {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.error(\"Search error\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\n\nexports.modelFilter = async (req, res, next) => {\n    try {\n        const data = await searchService.modelFilter();\n        if (data) {\n            res.status(StatusCodes.OK).json(data);\n        } else {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.error(\"Search error\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\nexports.searchCaseFilter = async (req, res, next) => {\n    try {\n        const data = await searchService.searchCaseFilter();\n        if (data) {\n            res.status(StatusCodes.OK).json(data);\n        } else {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.error(\"Search error\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\n\nexports.searchCase = async (req, res, next) => {\n    try {\n        let user_id = req.query.user_id;\n        if (!user_id) {\n            throw new Error(\"The user id is required\");\n        }\n        const data = await searchService.searchCase(user_id);\n        if (data) {\n            res.status(StatusCodes.OK).json(data);\n        } else {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.error(\"Search error\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\n\nexports.searchModel = async (req, res, next) => {\n    try {\n        const id = req.params.id;\n        const data = await searchService.searchModel({ id });\n        if (data === null) {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.success({}, \"The data model empty.\")\n            );\n        } else {\n            res.status(StatusCodes.OK).json(\n                MessageFactory.success(data, \"Get model success!\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\n\nexports.searchModels = async (req, res, next) => {\n    try {\n        let user_id = req.query.user_id;\n        if (!user_id) {\n            throw new Error(\"The user id is required\");\n        }\n        const data = await searchService.searchModels(user_id);\n        if (data === null) {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.success({}, \"The data model empty.\")\n            );\n        } else {\n            res.status(StatusCodes.OK).json(\n                MessageFactory.success(data, \"Get all model success!\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\n\nexports.toolFilter = async (req, res, next) => {\n    try {\n        const data = await searchService.toolFilter();\n        if (data) {\n            res.status(StatusCodes.OK).json(data);\n        } else {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.error(\"Search error\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\nexports.searchTool = async (req, res, next) => {\n    try {\n        let user_id = req.query.user_id;\n        if (!user_id) {\n            throw new Error(\"The user id is required\");\n        }\n        const data = await searchService.searchTool(user_id);\n        if (data) {\n            res.status(StatusCodes.OK).json(data);\n        } else {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.error(\"Search error\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\n//operations\nexports.searchOperations = async (req, res, next) => {\n    try {\n        let user_id = req.query.user_id;\n        if (!user_id) {\n            throw new Error(\"The user id is required\");\n        }\n        const data = await searchService.searchOperations(user_id);\n        if (data === null) {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.success({}, \"The data model empty.\")\n            );\n        } else {\n            res.status(StatusCodes.OK).json(\n                MessageFactory.success(data, \"Get all model success!\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\n\nexports.searchOperation = async (req, res, next) => {\n    try {\n        let id = req.params.id;\n        const data = await searchService.searchOperation(id);\n        if (data) {\n            res.status(StatusCodes.OK).json(\n                MessageFactory.success(data, \"Get operation success!\")\n            );\n        } else {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.error(\"Search error\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\nexports.searchOperationsFilter = async (req, res, next) => {\n    try {\n        const data = await searchService.searchToolOperations();\n        if (data) {\n            res.status(StatusCodes.OK).json(data);\n        } else {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.error(\"Search error\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\n"],"mappings":"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","ignoreList":[]}},"mtime":1721361915453},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/searchService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const {\n  sequelize,\n  QueryTypes,\n  LessonSample,\n  ModelSearch,\n  AiedutechTool,\n  OperationCase,\n  OperationTool,\n  OperationGrade,\n  OperationType,\n  OperationSubject,\n  OperationTopic\n} = require(\"../models/searchModel\");\nconst Wishlist = require(\"../models/wishlistModel\");\nconst {\n  Topic,\n  Subject,\n  Grade,\n  Type\n} = require(\"../models/designModel\");\nconst User = require(\"../models/usedModel\");\nconst {\n  SurveyResult,\n  SurveyQuestion\n} = require(\"../models/surveyModel\");\nconst {\n  faker\n} = require(\"@faker-js/faker\");\nconst bcrypt = require(\"bcryptjs\");\nexports.searchLessons = async ({\n  paged,\n  limit\n}) => {\n  const offset = (paged - 1) * limit;\n  let query = {\n    include: \"classTopic\"\n  };\n  if (paged) {\n    query[\"offset\"] = offset;\n  }\n  if (limit) {\n    query[\"limit\"] = limit;\n  }\n  const {\n    count,\n    rows\n  } = await LessonSample.findAndCountAll(query);\n  const totalPages = Math.ceil(count / limit);\n  return {\n    items: rows,\n    totalItems: count,\n    itemCount: rows.length,\n    itemsPerPage: limit,\n    totalPages,\n    currentPage: paged\n  };\n};\nexports.searchOpExp = async () => {\n  return await sequelize.query(\"select `sno` as `sno`, `name_kr` as `name`, `name_en` as `nameEn`, `description` as `description`, `case_img` as `img`, `tool_aiedutech`.`name` as `toolTp`, `tech_id` as `tech`, group_concat(op_exp_tech_type.type_id) as 'techTp' from `op_exp` left join `op_exp_tech_type` on `op_exp_tech_type`.`exp_sno` = `op_exp`.`tech_id` left join `tool_aiedutech` on `tool_aiedutech`.`id` = `op_exp`.`tool_id` group by `sno`\", {\n    type: sequelize.QueryTypes.SELECT\n  });\n};\nexports.searchCaseFilter = async () => {\n  return await sequelize.query(\"select *, 'topic' as type from `class_topic` union select *, 'type' as type from `class_type` union select *, 'subject' as type from `class_subject` union select *, 'grade' as type from `class_grade`\", {\n    type: sequelize.QueryTypes.SELECT\n  });\n};\nexports.modelFilter = async () => {\n  return await sequelize.query(\"select *, 'type' as type from `class_type` union select *, 'subject' as type from `class_subject` union select *, 'grade' as type from `class_grade`\", {\n    type: sequelize.QueryTypes.SELECT\n  });\n};\nexports.searchCase = async user_id => {\n  let data = await sequelize.query(\"select `class_case`.`sno`, `class_case`.`topic`, `class_case`.`objective`, `class_case`.`time`, `class_case`.`topic_id` as `topicTp`, `class_case`.`difficulty`, `class_case`.`achievement`, `class_case`.`source`, `class_case`.`pdf_link` as `pdf`, group_concat(distinct class_case_type.type_id) as 'type', group_concat(distinct class_case_subject.subject_id) as 'subject', group_concat(distinct class_case_grade.grade_id) as 'grade', group_concat(distinct class_case_tool.tool_sno) as 'tool', group_concat(distinct aiedutech_tool.name_kr) as 'toolNm' from `class_case` left join `class_case_type` on `class_case_type`.`case_sno` = `class_case`.`sno` left join `class_case_subject` on `class_case_subject`.`case_sno` = `class_case`.`sno` left join `class_case_grade` on `class_case_grade`.`case_sno` = `class_case`.`sno` left join `class_case_tool` on `class_case_tool`.`case_sno` = `class_case`.`sno` left join `aiedutech_tool` on `class_case_tool`.`tool_sno` = `aiedutech_tool`.`sno` group by `class_case`.`sno`\", {\n    type: sequelize.QueryTypes.SELECT\n  });\n  let type = \"lesson\";\n  let wishlistTool = await Wishlist.findAll({\n    where: {\n      user_id,\n      type\n    },\n    attributes: [\"foreign_key_id\"]\n  });\n  let foreignKeyIds = wishlistTool.map(item => item.foreign_key_id);\n  const processedData = await Promise.all(data.map(async item => {\n    item[\"isWishlist\"] = foreignKeyIds.includes(item.sno);\n    return item;\n  }));\n  return processedData;\n};\nexports.searchModel = async id => {\n  let data = await ModelSearch.findOne({\n    include: [{\n      model: Type,\n      as: \"type\"\n    }, {\n      model: Subject,\n      as: \"subject\"\n    }],\n    where: [id]\n  });\n  if (data != null) {\n    let pdf = process.env.BASIC_URL + \"/image/model/\" + data.pdf_link;\n    data.pdf_link = pdf;\n  }\n  return data;\n};\nexports.getTool = async id => {\n  let data = await AiedutechTool.findOne({\n    where: {\n      sno: id\n    },\n    include: {\n      model: LessonSample,\n      as: \"lessons\"\n    }\n  });\n  return data;\n};\nexports.handleSurvey = async () => {\n  let data = await SurveyResult.findAll();\n  let userId = 443;\n  let userNext = 1687;\n\n  // for (let item of data) {\n  //     if (item.id < 1670) {\n  //         if (userId > 1650 && userId < 1686) {\n  //             item.user_id = userNext;\n  //             await item.save({ fields: [\"user_id\"] });\n  //             userNext++;\n  //         } else {\n  //             item.user_id = userId;\n  //             await item.save({ fields: [\"user_id\"] });\n  //             userId++;\n  //         }\n  //     }\n  // }\n\n  return data;\n};\nexports.searchModels = async user_id => {\n  let data = await ModelSearch.findAll({\n    include: [{\n      model: Type,\n      as: \"type\"\n    }, {\n      model: Subject,\n      as: \"subject\"\n    }]\n  });\n  let type = \"model\";\n  let wishlistTool = await Wishlist.findAll({\n    where: {\n      user_id,\n      type\n    },\n    attributes: [\"foreign_key_id\"]\n  });\n  let foreignKeyIds = wishlistTool.map(item => item.foreign_key_id);\n  data = data.map(result => result.get({\n    plain: true\n  }));\n  //convert pdf link\n  const processedData = await Promise.all(data.map(async item => {\n    // Update the pdf_link\n    let pdf = process.env.BASIC_URL + \"/image/model/\" + item.pdf_link;\n    item.pdf_link = pdf;\n\n    // Process grades\n    if (item.grade) {\n      let dataGrade = await Promise.all(item.grade.map(async name => {\n        return await Grade.findOne({\n          where: {\n            name\n          }\n        });\n      }));\n      item.grade = dataGrade;\n    }\n    item[\"isWishlist\"] = foreignKeyIds.includes(item.id);\n    return item;\n  }));\n  return processedData;\n};\nexports.toolFilter = async () => {\n  let data = await sequelize.query(\"select `tool_aiedutech_tech_type`.`tool_aiedutech_tech_id` as `techId`, `tool_aiedutech_tech_type`.`name` as `name`, `tool_aiedutech_tech`.`tool_aiedutech_id` as `aiedutechId`, `tool_aiedutech_tech_type`.`id` as `techTpId` from `tool_aiedutech_tech_type` inner join `tool_aiedutech_tech` on `tool_aiedutech_tech`.`id` = `tool_aiedutech_tech_type`.`tool_aiedutech_tech_id` union select `tool_aiedutech_tech`.`id` as `techId`, `tool_aiedutech_tech`.`name` as `name`, `tool_aiedutech_tech`.`tool_aiedutech_id` as `aiedutechId`, '' as techTpId from `tool_aiedutech_tech` order by `aiedutechId` asc, `techId` asc\", {\n    type: sequelize.QueryTypes.SELECT\n  });\n  return filterTool(data);\n};\nconst filterTool = data => {\n  let rst = [];\n  let child = [];\n  for (const row of data) {\n    if (row.techTpId === \"\") {\n      rst.push(row);\n    } else {\n      child.push(row);\n    }\n  }\n  for (const row of child) {\n    for (const parent of rst) {\n      if (row.techId === parent.techId) {\n        if (parent.child) {\n          parent.child.push(row);\n        } else {\n          parent.child = [row];\n        }\n      }\n    }\n  }\n  return [rst.filter(row => row.aiedutechId === 1), rst.filter(row => row.aiedutechId === 2)];\n};\nexports.searchTool = async user_id => {\n  let data = await sequelize.query(\"select `sno` as `sno`, `name_kr` as `name`, `name_en` as `nameEn`, `description` as `description`, `case_img` as `img`, `tool_aiedutech`.`name` as `toolTp`, `tech_id` as `tech`, group_concat(aiedutech_tool_tech_type.type_id) as 'techTp' from `aiedutech_tool` left join `aiedutech_tool_tech_type` on `aiedutech_tool_tech_type`.`tool_id` = `aiedutech_tool`.`sno` inner join `tool_aiedutech` on `tool_aiedutech`.`id` = `aiedutech_tool`.`tool_id` group by `sno`\", {\n    type: sequelize.QueryTypes.SELECT\n  });\n  let type = \"tool\";\n  let wishlistTool = await Wishlist.findAll({\n    where: {\n      user_id,\n      type\n    },\n    attributes: [\"foreign_key_id\"]\n  });\n  let foreignKeyIds = wishlistTool.map(item => item.foreign_key_id);\n  const processedData = await Promise.all(data.map(async item => {\n    item[\"isWishlist\"] = foreignKeyIds.includes(item.sno);\n    return item;\n  }));\n  return processedData;\n};\nexports.searchToolOperations = async () => {\n  let topics = await Topic.findAll();\n  let types = await Type.findAll();\n  let subjects = await Subject.findAll();\n  let grades = await Grade.findAll();\n  let tools = await AiedutechTool.findAll({\n    attributes: [\"sno\", \"name_kr\", \"name_en\", \"tech_id\"]\n  });\n  return {\n    topics,\n    types,\n    subjects,\n    grades,\n    tools\n  };\n};\n//Operations\nexports.searchOperations = async user_id => {\n  let data = await OperationCase.findAll({\n    include: [{\n      model: Topic,\n      as: \"topics\"\n    }, {\n      model: Type,\n      as: \"types\"\n    }, {\n      model: Subject,\n      as: \"subjects\"\n    }, {\n      model: Grade,\n      as: \"grades\"\n    }, {\n      model: AiedutechTool,\n      as: \"tools\"\n    }]\n  });\n  let type = \"operation\";\n  let wishlistTool = await Wishlist.findAll({\n    where: {\n      user_id,\n      type\n    },\n    attributes: [\"foreign_key_id\"]\n  });\n  let foreignKeyIds = wishlistTool.map(item => item.foreign_key_id);\n  data = data.map(result => result.get({\n    plain: true\n  }));\n  //convert pdf link\n  const processedData = await Promise.all(data.map(item => {\n    let pdf = process.env.BASIC_URL + \"/image/operation/\" + item.pdf_link;\n    item.pdf_link = pdf;\n    item[\"isWishlist\"] = foreignKeyIds.includes(item.id);\n    return item;\n  }));\n  return processedData;\n};\nexports.searchOperation = async id => {\n  let data = await OperationCase.findOne({\n    include: [{\n      model: Topic,\n      as: \"topics\"\n    }, {\n      model: Type,\n      as: \"types\"\n    }, {\n      model: Subject,\n      as: \"subjects\"\n    }, {\n      model: Grade,\n      as: \"grades\"\n    }, {\n      model: AiedutechTool,\n      as: \"tools\"\n    }],\n    where: {\n      id\n    }\n  });\n  //convert pdf link\n\n  let pdf = process.env.BASIC_URL + \"/image/operation/\" + data.pdf_link;\n  data.pdf_link = pdf;\n  return data;\n};\nexports.handleInsertDataOperationCase = async data => {\n  await Promise.all(data.map(async item => {\n    //insert operation_case\n    const Operation = await OperationCase.create({\n      id: null,\n      title: item.name,\n      chasi: item.chasi,\n      difficulty: item.difficulty,\n      learning_objectives: item.learning_objectives,\n      achievement_criteria: item.achievement_criteria,\n      source: item.source,\n      pdf_link: item.pdf,\n      source: item.source\n    });\n    let operation_id = Operation.id;\n    if (operation_id) {\n      //topic\n      item[\"class_topic\"].map(async topicName => {\n        const [topic, created] = await Topic.findOrCreate({\n          where: {\n            name: topicName\n          },\n          defaults: {\n            id: null,\n            name: topicName\n          }\n        });\n        let topic_id = topic.id;\n        if (topic_id) {\n          OperationTopic.create({\n            id: null,\n            topic_id,\n            operation_id\n          });\n        }\n      });\n    }\n    if (operation_id) {\n      //type\n      item[\"class_type\"].map(async typeName => {\n        const [type, created] = await Type.findOrCreate({\n          where: {\n            name: typeName\n          },\n          defaults: {\n            id: null,\n            name: typeName\n          }\n        });\n        let type_id = type.id;\n        if (type_id) {\n          OperationType.create({\n            id: null,\n            type_id,\n            operation_id\n          });\n        }\n      });\n    }\n    if (operation_id) {\n      //subject\n      item[\"class_subject\"].map(async subjectName => {\n        const [subject, created] = await Topic.findOrCreate({\n          where: {\n            name: subjectName\n          },\n          defaults: {\n            id: null,\n            name: subjectName\n          }\n        });\n        let subject_id = subject.id;\n        if (subject_id) {\n          OperationSubject.create({\n            id: null,\n            subject_id,\n            operation_id\n          });\n        }\n      });\n    }\n    if (operation_id) {\n      //grade\n      item[\"class_grade\"].map(async gradeName => {\n        const [grade, created] = await Grade.findOrCreate({\n          where: {\n            name: gradeName\n          },\n          defaults: {\n            id: null,\n            name: gradeName\n          }\n        });\n        let grade_id = grade.id;\n        if (grade_id) {\n          OperationGrade.create({\n            id: null,\n            grade_id,\n            operation_id\n          });\n        }\n      });\n    }\n    if (operation_id && item[\"artificial_intelligence_tools\"]) {\n      //tool\n      item[\"artificial_intelligence_tools\"].map(async id => {\n        const tool = await AiedutechTool.findOne({\n          where: {\n            sno: id\n          }\n        });\n        if (tool) {\n          OperationTool.create({\n            id: null,\n            tool_id: id,\n            operation_id: operation_id\n          });\n        }\n      });\n    }\n  }));\n};\nexports.handleInsertSurvey = async data => {\n  await Promise.all(data.map(async item => {\n    //fake user\n\n    let user = await User.create({\n      id: null,\n      name: faker.person.fullName(),\n      email: faker.internet.email(),\n      social: 0,\n      profile: faker.image.avatar(),\n      password: await bcrypt.hash(\"123\", 8)\n    });\n    if (user.id) {\n      let answered = handleFormatAnswered([item[9], item[10], item[11], item[12], item[13], item[14], item[15], item[16], item[17], item[18], item[19], item[20], item[21], item[22], item[23], item[24], item[25], item[26], item[27], item[28], item[29], item[30], item[31], item[32], item[33], item[34], item[35], item[36], item[37], item[38]]);\n      await SurveyResult.create({\n        id: null,\n        survey_id: 3,\n        answered: answered,\n        school_level: handleParamDataSurvey(\"school_level\", item[2]),\n        gender: handleParamDataSurvey(\"gender\", item[1]),\n        result: await handlePointAnswers(answered),\n        user_id: user.id,\n        experience: handleParamDataSurvey(\"gender\", item[1]),\n        region: handleParamDataSurvey(\"region\", item[6]),\n        number_turn: 1,\n        teacher_type: handleParamDataSurvey(\"teacher_type\", item[7]),\n        aiedap_training: handleParamDataSurvey(\"aiedap_training\", item[5]),\n        teacher_career: handleParamDataSurvey(\"teacher_career\", item[4]),\n        subject: handleParamDataSurvey(\"subject\", item[8]),\n        education_office: handleParamDataSurvey(\"education_office\", item[3]),\n        education_office_info: \"\",\n        training_selection: \"\"\n      });\n    }\n  }));\n};\nfunction handleParamDataSurvey(key, value) {\n  if (key == \"gender\") return value == 1 ? 1 : 0;\n  if (key == \"school_level\") {\n    switch (value) {\n      case 1:\n        return \"elementary_school\";\n      case 2:\n        return \"middle_school\";\n      case 3:\n        return \"high_school\";\n    }\n  }\n  if (key == \"education_office\") {\n    switch (value) {\n      case 1:\n        return \"gangwon\";\n      case 2:\n        return \"gyeonggi\";\n      case 3:\n        return \"gyeongnam\";\n      case 4:\n        return \"gyeongbuk\";\n      case 5:\n        return \"daegu\";\n      case 6:\n        return \"daejeon\";\n      case 7:\n        return \"busan\";\n      case 8:\n        return \"seoul\";\n      case 9:\n        return \"sejong\";\n      case 10:\n        return \"ulsan\";\n      case 11:\n        return \"jeonbuk\";\n      case 12:\n        return \"chungnam\";\n      case 13:\n        return \"chungbuk\";\n    }\n  }\n  if (key == \"teacher_career\") {\n    switch (value) {\n      case 1:\n        return \"0_1\";\n      case 2:\n        return \"1_6\";\n      case 3:\n        return \"6_11\";\n      case 4:\n        return \"11_21\";\n      case 5:\n        return \"21_31\";\n      case 6:\n        return \"31_100\";\n    }\n  }\n  if (key == \"aiedap_training\") {\n    switch (value) {\n      case 1:\n        return \"not_attended\";\n      case 2:\n        return \"attended\";\n    }\n  }\n  if (key == \"region\") {\n    switch (value) {\n      case 1:\n        return \"metropolitan_area\";\n      case 2:\n        return \"kyung_pook\";\n      case 3:\n        return \"kyung_nam\";\n      case 4:\n        return \"choong_chung\";\n      case 5:\n        return \"jun_nam\";\n    }\n  }\n  if (key == \"teacher_type\") {\n    switch (value) {\n      case 1:\n        return \"general_teacher\";\n      case 2:\n        return \"leader_teacher\";\n      case 3:\n        return \"master_teacher\";\n    }\n  }\n  if (key == \"subject\") {\n    switch (value) {\n      case 1:\n        return \"information\";\n      case 2:\n        return \"korean\";\n      case 3:\n        return \"math\";\n      case 4:\n        return \"english\";\n      case 5:\n        return \"society\";\n      case 6:\n        return \"science\";\n      case 7:\n        return \"career\";\n      case 8:\n        return \"art\";\n    }\n  }\n}\nfunction handleFormatAnswered(answer) {\n  return [{\n    answer_id: answer[0],\n    question_id: 35\n  }, {\n    answer_id: answer[1],\n    question_id: 48\n  }, {\n    answer_id: answer[2],\n    question_id: 46\n  }, {\n    answer_id: answer[3],\n    question_id: 36\n  }, {\n    answer_id: answer[4],\n    question_id: 45\n  }, {\n    answer_id: answer[5],\n    question_id: 53\n  }, {\n    answer_id: answer[6],\n    question_id: 52\n  }, {\n    answer_id: answer[7],\n    question_id: 44\n  }, {\n    answer_id: answer[8],\n    question_id: 59\n  }, {\n    answer_id: answer[9],\n    question_id: 38\n  }, {\n    answer_id: answer[10],\n    question_id: 55\n  }, {\n    answer_id: answer[11],\n    question_id: 54\n  }, {\n    answer_id: answer[12],\n    question_id: 50\n  }, {\n    answer_id: answer[13],\n    question_id: 47\n  }, {\n    answer_id: answer[14],\n    question_id: 49\n  }, {\n    answer_id: answer[15],\n    question_id: 1\n  }, {\n    answer_id: answer[16],\n    question_id: 57\n  }, {\n    answer_id: answer[17],\n    question_id: 51\n  }, {\n    answer_id: answer[18],\n    question_id: 61\n  }, {\n    answer_id: answer[19],\n    question_id: 58\n  }, {\n    answer_id: answer[20],\n    question_id: 62\n  }, {\n    answer_id: answer[21],\n    question_id: 60\n  }, {\n    answer_id: answer[22],\n    question_id: 56\n  }, {\n    answer_id: answer[23],\n    question_id: 40\n  }, {\n    answer_id: answer[24],\n    question_id: 39\n  }, {\n    answer_id: answer[25],\n    question_id: 43\n  }, {\n    answer_id: answer[26],\n    question_id: 42\n  }, {\n    answer_id: answer[27],\n    question_id: 34\n  }, {\n    answer_id: answer[28],\n    question_id: 42\n  }, {\n    answer_id: answer[29],\n    question_id: 41\n  }];\n}\nasync function handlePointAnswers(answers) {\n  //condition\n  let conditionPoint = 6;\n  let basic_utilization_avg = 0;\n  let basic_utilization_total = 0;\n  let basic_utilization_question_count = 0;\n  //\n  let basic_practice_avg = 0;\n  let basic_practice_total = 0;\n  let basic_practice_question_count = 0;\n  //\n  let edu_use_avg = 0;\n  let edu_use_total = 0;\n  let edu_use_question_count = 0;\n  //\n  let edu_teaching_avg = 0;\n  let edu_teaching_total = 0;\n  let edu_teaching_question_count = 0;\n  //\n  let edu_dev_avg = 0;\n  let edu_dev_total = 0;\n  let edu_dev_question_count = 0;\n  //\n  let edu_implementation_avg = 0;\n  let edu_implementation_total = 0;\n  let edu_implementation_question_count = 0;\n  //\n  let edu_evaluation_avg = 0;\n  let edu_evaluation_total = 0;\n  let edu_evaluation_question_count = 0;\n  //\n  let professional_dev_avg = 0;\n  let professional_dev_total = 0;\n  let professional_dev_question_count = 0;\n  //\n  let professional_social_avg = 0;\n  let professional_social_total = 0;\n  let professional_social_question_count = 0;\n  //\n  let zone_competency_avg = 0;\n  let zone_edu_avg = 0;\n  let zone_professional_avg = 0;\n  let zone_avg = 0;\n\n  //\n  let point_avg = 0;\n  let point_total = 0;\n  await Promise.all(answers.map(async answer => {\n    //find question\n    let question = await SurveyQuestion.findOne({\n      attributes: [\"zone_competency\"],\n      where: {\n        id: answer.question_id\n      }\n    });\n    if (question == null) {\n      throw new Error(\"The question not exist!\");\n    }\n    switch (question.zone_competency) {\n      case \"basic_utilization\":\n        basic_utilization_total += answer.answer_id;\n        basic_utilization_question_count++;\n        break;\n      case \"basic_practice\":\n        basic_practice_total += answer.answer_id;\n        basic_practice_question_count++;\n        break;\n      case \"edu_use\":\n        edu_use_total += answer.answer_id;\n        edu_use_question_count++;\n        break;\n      case \"edu_teaching\":\n        edu_teaching_total += answer.answer_id;\n        edu_teaching_question_count++;\n        break;\n      case \"edu_dev\":\n        edu_dev_total += answer.answer_id;\n        edu_dev_question_count++;\n        break;\n      case \"edu_implementation\":\n        edu_implementation_total += answer.answer_id;\n        edu_implementation_question_count++;\n        break;\n      case \"edu_evaluation\":\n        edu_evaluation_total += answer.answer_id;\n        edu_evaluation_question_count++;\n        break;\n      case \"professional_dev\":\n        professional_dev_total += answer.answer_id;\n        professional_dev_question_count++;\n        break;\n      case \"professional_social\":\n        professional_social_total += answer.answer_id;\n        professional_social_question_count++;\n        break;\n    }\n    point_total = point_total + answer.answer_id;\n  }));\n  basic_utilization_avg = roundToDecimalPlace(basic_utilization_total / basic_utilization_question_count, 1);\n  basic_practice_avg = roundToDecimalPlace(basic_practice_total / basic_practice_question_count, 1);\n  edu_use_avg = roundToDecimalPlace(edu_use_total / edu_use_question_count, 1);\n  edu_teaching_avg = roundToDecimalPlace(edu_teaching_total / edu_teaching_question_count, 1);\n  edu_dev_avg = roundToDecimalPlace(edu_dev_total / edu_dev_question_count, 1);\n  edu_implementation_avg = roundToDecimalPlace(edu_implementation_total / edu_implementation_question_count, 1);\n  edu_evaluation_avg = roundToDecimalPlace(edu_evaluation_total / edu_evaluation_question_count, 1);\n  professional_dev_avg = roundToDecimalPlace(professional_dev_total / professional_dev_question_count, 1);\n  professional_social_avg = roundToDecimalPlace(professional_social_total / professional_social_question_count, 1);\n  zone_basic_avg = roundToDecimalPlace((basic_practice_total + basic_utilization_total) / (basic_practice_question_count + basic_utilization_question_count), 1);\n  zone_edu_avg = roundToDecimalPlace((edu_dev_total + edu_teaching_total + edu_use_total + edu_implementation_total + edu_evaluation_total) / (edu_dev_question_count + edu_teaching_question_count + edu_use_question_count + edu_implementation_question_count + edu_evaluation_question_count), 1);\n  zone_professional_avg = roundToDecimalPlace((professional_dev_total + professional_social_total) / (professional_dev_question_count + professional_social_question_count), 1);\n  zone_avg = roundToDecimalPlace((zone_basic_avg + zone_edu_avg + zone_professional_avg) / 3, 1);\n  zone_competency_avg = roundToDecimalPlace((basic_utilization_avg + basic_practice_avg + edu_use_avg + edu_teaching_avg + edu_dev_avg + edu_implementation_avg + edu_evaluation_avg + professional_dev_avg + professional_social_avg) / 9, 1);\n  point_avg = roundToDecimalPlace(point_total / 30, 1);\n  return {\n    basic_utilization_avg,\n    basic_practice_avg,\n    edu_use_avg,\n    edu_teaching_avg,\n    edu_dev_avg,\n    edu_implementation_avg,\n    edu_evaluation_avg,\n    professional_dev_avg,\n    professional_social_avg,\n    zone_competency_avg,\n    zone_basic_avg,\n    zone_edu_avg,\n    zone_professional_avg,\n    zone_avg,\n    point_avg\n  };\n}\nfunction roundToDecimalPlace(number, decimalPlaces) {\n  const factor = Math.pow(10, decimalPlaces);\n  return Math.round(number * factor) / factor;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzZXF1ZWxpemUiLCJRdWVyeVR5cGVzIiwiTGVzc29uU2FtcGxlIiwiTW9kZWxTZWFyY2giLCJBaWVkdXRlY2hUb29sIiwiT3BlcmF0aW9uQ2FzZSIsIk9wZXJhdGlvblRvb2wiLCJPcGVyYXRpb25HcmFkZSIsIk9wZXJhdGlvblR5cGUiLCJPcGVyYXRpb25TdWJqZWN0IiwiT3BlcmF0aW9uVG9waWMiLCJyZXF1aXJlIiwiV2lzaGxpc3QiLCJUb3BpYyIsIlN1YmplY3QiLCJHcmFkZSIsIlR5cGUiLCJVc2VyIiwiU3VydmV5UmVzdWx0IiwiU3VydmV5UXVlc3Rpb24iLCJmYWtlciIsImJjcnlwdCIsImV4cG9ydHMiLCJzZWFyY2hMZXNzb25zIiwicGFnZWQiLCJsaW1pdCIsIm9mZnNldCIsInF1ZXJ5IiwiaW5jbHVkZSIsImNvdW50Iiwicm93cyIsImZpbmRBbmRDb3VudEFsbCIsInRvdGFsUGFnZXMiLCJNYXRoIiwiY2VpbCIsIml0ZW1zIiwidG90YWxJdGVtcyIsIml0ZW1Db3VudCIsImxlbmd0aCIsIml0ZW1zUGVyUGFnZSIsImN1cnJlbnRQYWdlIiwic2VhcmNoT3BFeHAiLCJ0eXBlIiwiU0VMRUNUIiwic2VhcmNoQ2FzZUZpbHRlciIsIm1vZGVsRmlsdGVyIiwic2VhcmNoQ2FzZSIsInVzZXJfaWQiLCJkYXRhIiwid2lzaGxpc3RUb29sIiwiZmluZEFsbCIsIndoZXJlIiwiYXR0cmlidXRlcyIsImZvcmVpZ25LZXlJZHMiLCJtYXAiLCJpdGVtIiwiZm9yZWlnbl9rZXlfaWQiLCJwcm9jZXNzZWREYXRhIiwiUHJvbWlzZSIsImFsbCIsImluY2x1ZGVzIiwic25vIiwic2VhcmNoTW9kZWwiLCJpZCIsImZpbmRPbmUiLCJtb2RlbCIsImFzIiwicGRmIiwicHJvY2VzcyIsImVudiIsIkJBU0lDX1VSTCIsInBkZl9saW5rIiwiZ2V0VG9vbCIsImhhbmRsZVN1cnZleSIsInVzZXJJZCIsInVzZXJOZXh0Iiwic2VhcmNoTW9kZWxzIiwicmVzdWx0IiwiZ2V0IiwicGxhaW4iLCJncmFkZSIsImRhdGFHcmFkZSIsIm5hbWUiLCJ0b29sRmlsdGVyIiwiZmlsdGVyVG9vbCIsInJzdCIsImNoaWxkIiwicm93IiwidGVjaFRwSWQiLCJwdXNoIiwicGFyZW50IiwidGVjaElkIiwiZmlsdGVyIiwiYWllZHV0ZWNoSWQiLCJzZWFyY2hUb29sIiwic2VhcmNoVG9vbE9wZXJhdGlvbnMiLCJ0b3BpY3MiLCJ0eXBlcyIsInN1YmplY3RzIiwiZ3JhZGVzIiwidG9vbHMiLCJzZWFyY2hPcGVyYXRpb25zIiwic2VhcmNoT3BlcmF0aW9uIiwiaGFuZGxlSW5zZXJ0RGF0YU9wZXJhdGlvbkNhc2UiLCJPcGVyYXRpb24iLCJjcmVhdGUiLCJ0aXRsZSIsImNoYXNpIiwiZGlmZmljdWx0eSIsImxlYXJuaW5nX29iamVjdGl2ZXMiLCJhY2hpZXZlbWVudF9jcml0ZXJpYSIsInNvdXJjZSIsIm9wZXJhdGlvbl9pZCIsInRvcGljTmFtZSIsInRvcGljIiwiY3JlYXRlZCIsImZpbmRPckNyZWF0ZSIsImRlZmF1bHRzIiwidG9waWNfaWQiLCJ0eXBlTmFtZSIsInR5cGVfaWQiLCJzdWJqZWN0TmFtZSIsInN1YmplY3QiLCJzdWJqZWN0X2lkIiwiZ3JhZGVOYW1lIiwiZ3JhZGVfaWQiLCJ0b29sIiwidG9vbF9pZCIsImhhbmRsZUluc2VydFN1cnZleSIsInVzZXIiLCJwZXJzb24iLCJmdWxsTmFtZSIsImVtYWlsIiwiaW50ZXJuZXQiLCJzb2NpYWwiLCJwcm9maWxlIiwiaW1hZ2UiLCJhdmF0YXIiLCJwYXNzd29yZCIsImhhc2giLCJhbnN3ZXJlZCIsImhhbmRsZUZvcm1hdEFuc3dlcmVkIiwic3VydmV5X2lkIiwic2Nob29sX2xldmVsIiwiaGFuZGxlUGFyYW1EYXRhU3VydmV5IiwiZ2VuZGVyIiwiaGFuZGxlUG9pbnRBbnN3ZXJzIiwiZXhwZXJpZW5jZSIsInJlZ2lvbiIsIm51bWJlcl90dXJuIiwidGVhY2hlcl90eXBlIiwiYWllZGFwX3RyYWluaW5nIiwidGVhY2hlcl9jYXJlZXIiLCJlZHVjYXRpb25fb2ZmaWNlIiwiZWR1Y2F0aW9uX29mZmljZV9pbmZvIiwidHJhaW5pbmdfc2VsZWN0aW9uIiwia2V5IiwidmFsdWUiLCJhbnN3ZXIiLCJhbnN3ZXJfaWQiLCJxdWVzdGlvbl9pZCIsImFuc3dlcnMiLCJjb25kaXRpb25Qb2ludCIsImJhc2ljX3V0aWxpemF0aW9uX2F2ZyIsImJhc2ljX3V0aWxpemF0aW9uX3RvdGFsIiwiYmFzaWNfdXRpbGl6YXRpb25fcXVlc3Rpb25fY291bnQiLCJiYXNpY19wcmFjdGljZV9hdmciLCJiYXNpY19wcmFjdGljZV90b3RhbCIsImJhc2ljX3ByYWN0aWNlX3F1ZXN0aW9uX2NvdW50IiwiZWR1X3VzZV9hdmciLCJlZHVfdXNlX3RvdGFsIiwiZWR1X3VzZV9xdWVzdGlvbl9jb3VudCIsImVkdV90ZWFjaGluZ19hdmciLCJlZHVfdGVhY2hpbmdfdG90YWwiLCJlZHVfdGVhY2hpbmdfcXVlc3Rpb25fY291bnQiLCJlZHVfZGV2X2F2ZyIsImVkdV9kZXZfdG90YWwiLCJlZHVfZGV2X3F1ZXN0aW9uX2NvdW50IiwiZWR1X2ltcGxlbWVudGF0aW9uX2F2ZyIsImVkdV9pbXBsZW1lbnRhdGlvbl90b3RhbCIsImVkdV9pbXBsZW1lbnRhdGlvbl9xdWVzdGlvbl9jb3VudCIsImVkdV9ldmFsdWF0aW9uX2F2ZyIsImVkdV9ldmFsdWF0aW9uX3RvdGFsIiwiZWR1X2V2YWx1YXRpb25fcXVlc3Rpb25fY291bnQiLCJwcm9mZXNzaW9uYWxfZGV2X2F2ZyIsInByb2Zlc3Npb25hbF9kZXZfdG90YWwiLCJwcm9mZXNzaW9uYWxfZGV2X3F1ZXN0aW9uX2NvdW50IiwicHJvZmVzc2lvbmFsX3NvY2lhbF9hdmciLCJwcm9mZXNzaW9uYWxfc29jaWFsX3RvdGFsIiwicHJvZmVzc2lvbmFsX3NvY2lhbF9xdWVzdGlvbl9jb3VudCIsInpvbmVfY29tcGV0ZW5jeV9hdmciLCJ6b25lX2VkdV9hdmciLCJ6b25lX3Byb2Zlc3Npb25hbF9hdmciLCJ6b25lX2F2ZyIsInBvaW50X2F2ZyIsInBvaW50X3RvdGFsIiwicXVlc3Rpb24iLCJFcnJvciIsInpvbmVfY29tcGV0ZW5jeSIsInJvdW5kVG9EZWNpbWFsUGxhY2UiLCJ6b25lX2Jhc2ljX2F2ZyIsIm51bWJlciIsImRlY2ltYWxQbGFjZXMiLCJmYWN0b3IiLCJwb3ciLCJyb3VuZCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL3NlcnZpY2VzLyIsInNvdXJjZXMiOlsic2VhcmNoU2VydmljZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7XG4gICAgc2VxdWVsaXplLFxuICAgIFF1ZXJ5VHlwZXMsXG4gICAgTGVzc29uU2FtcGxlLFxuICAgIE1vZGVsU2VhcmNoLFxuICAgIEFpZWR1dGVjaFRvb2wsXG4gICAgT3BlcmF0aW9uQ2FzZSxcbiAgICBPcGVyYXRpb25Ub29sLFxuICAgIE9wZXJhdGlvbkdyYWRlLFxuICAgIE9wZXJhdGlvblR5cGUsXG4gICAgT3BlcmF0aW9uU3ViamVjdCxcbiAgICBPcGVyYXRpb25Ub3BpYyxcbn0gPSByZXF1aXJlKFwiLi4vbW9kZWxzL3NlYXJjaE1vZGVsXCIpO1xuY29uc3QgV2lzaGxpc3QgPSByZXF1aXJlKFwiLi4vbW9kZWxzL3dpc2hsaXN0TW9kZWxcIik7XG5jb25zdCB7IFRvcGljLCBTdWJqZWN0LCBHcmFkZSwgVHlwZSB9ID0gcmVxdWlyZShcIi4uL21vZGVscy9kZXNpZ25Nb2RlbFwiKTtcbmNvbnN0IFVzZXIgPSByZXF1aXJlKFwiLi4vbW9kZWxzL3VzZWRNb2RlbFwiKTtcbmNvbnN0IHsgU3VydmV5UmVzdWx0LCBTdXJ2ZXlRdWVzdGlvbiB9ID0gcmVxdWlyZShcIi4uL21vZGVscy9zdXJ2ZXlNb2RlbFwiKTtcbmNvbnN0IHsgZmFrZXIgfSA9IHJlcXVpcmUoXCJAZmFrZXItanMvZmFrZXJcIik7XG5jb25zdCBiY3J5cHQgPSByZXF1aXJlKFwiYmNyeXB0anNcIik7XG5cbmV4cG9ydHMuc2VhcmNoTGVzc29ucyA9IGFzeW5jICh7IHBhZ2VkLCBsaW1pdCB9KSA9PiB7XG4gICAgY29uc3Qgb2Zmc2V0ID0gKHBhZ2VkIC0gMSkgKiBsaW1pdDtcbiAgICBsZXQgcXVlcnkgPSB7XG4gICAgICAgIGluY2x1ZGU6IFwiY2xhc3NUb3BpY1wiLFxuICAgIH07XG5cbiAgICBpZiAocGFnZWQpIHtcbiAgICAgICAgcXVlcnlbXCJvZmZzZXRcIl0gPSBvZmZzZXQ7XG4gICAgfVxuICAgIGlmIChsaW1pdCkge1xuICAgICAgICBxdWVyeVtcImxpbWl0XCJdID0gbGltaXQ7XG4gICAgfVxuXG4gICAgY29uc3QgeyBjb3VudCwgcm93cyB9ID0gYXdhaXQgTGVzc29uU2FtcGxlLmZpbmRBbmRDb3VudEFsbChxdWVyeSk7XG5cbiAgICBjb25zdCB0b3RhbFBhZ2VzID0gTWF0aC5jZWlsKGNvdW50IC8gbGltaXQpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaXRlbXM6IHJvd3MsXG4gICAgICAgIHRvdGFsSXRlbXM6IGNvdW50LFxuICAgICAgICBpdGVtQ291bnQ6IHJvd3MubGVuZ3RoLFxuICAgICAgICBpdGVtc1BlclBhZ2U6IGxpbWl0LFxuICAgICAgICB0b3RhbFBhZ2VzLFxuICAgICAgICBjdXJyZW50UGFnZTogcGFnZWQsXG4gICAgfTtcbn07XG5cbmV4cG9ydHMuc2VhcmNoT3BFeHAgPSBhc3luYyAoKSA9PiB7XG4gICAgcmV0dXJuIGF3YWl0IHNlcXVlbGl6ZS5xdWVyeShcbiAgICAgICAgXCJzZWxlY3QgYHNub2AgYXMgYHNub2AsIGBuYW1lX2tyYCBhcyBgbmFtZWAsIGBuYW1lX2VuYCBhcyBgbmFtZUVuYCwgYGRlc2NyaXB0aW9uYCBhcyBgZGVzY3JpcHRpb25gLCBgY2FzZV9pbWdgIGFzIGBpbWdgLCBgdG9vbF9haWVkdXRlY2hgLmBuYW1lYCBhcyBgdG9vbFRwYCwgYHRlY2hfaWRgIGFzIGB0ZWNoYCwgZ3JvdXBfY29uY2F0KG9wX2V4cF90ZWNoX3R5cGUudHlwZV9pZCkgYXMgJ3RlY2hUcCcgZnJvbSBgb3BfZXhwYCBsZWZ0IGpvaW4gYG9wX2V4cF90ZWNoX3R5cGVgIG9uIGBvcF9leHBfdGVjaF90eXBlYC5gZXhwX3Nub2AgPSBgb3BfZXhwYC5gdGVjaF9pZGAgbGVmdCBqb2luIGB0b29sX2FpZWR1dGVjaGAgb24gYHRvb2xfYWllZHV0ZWNoYC5gaWRgID0gYG9wX2V4cGAuYHRvb2xfaWRgIGdyb3VwIGJ5IGBzbm9gXCIsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6IHNlcXVlbGl6ZS5RdWVyeVR5cGVzLlNFTEVDVCxcbiAgICAgICAgfVxuICAgICk7XG59O1xuZXhwb3J0cy5zZWFyY2hDYXNlRmlsdGVyID0gYXN5bmMgKCkgPT4ge1xuICAgIHJldHVybiBhd2FpdCBzZXF1ZWxpemUucXVlcnkoXG4gICAgICAgIFwic2VsZWN0ICosICd0b3BpYycgYXMgdHlwZSBmcm9tIGBjbGFzc190b3BpY2AgdW5pb24gc2VsZWN0ICosICd0eXBlJyBhcyB0eXBlIGZyb20gYGNsYXNzX3R5cGVgIHVuaW9uIHNlbGVjdCAqLCAnc3ViamVjdCcgYXMgdHlwZSBmcm9tIGBjbGFzc19zdWJqZWN0YCB1bmlvbiBzZWxlY3QgKiwgJ2dyYWRlJyBhcyB0eXBlIGZyb20gYGNsYXNzX2dyYWRlYFwiLFxuICAgICAgICB7XG4gICAgICAgICAgICB0eXBlOiBzZXF1ZWxpemUuUXVlcnlUeXBlcy5TRUxFQ1QsXG4gICAgICAgIH1cbiAgICApO1xufTtcblxuZXhwb3J0cy5tb2RlbEZpbHRlciA9IGFzeW5jICgpID0+IHtcbiAgICByZXR1cm4gYXdhaXQgc2VxdWVsaXplLnF1ZXJ5KFxuICAgICAgICBcInNlbGVjdCAqLCAndHlwZScgYXMgdHlwZSBmcm9tIGBjbGFzc190eXBlYCB1bmlvbiBzZWxlY3QgKiwgJ3N1YmplY3QnIGFzIHR5cGUgZnJvbSBgY2xhc3Nfc3ViamVjdGAgdW5pb24gc2VsZWN0ICosICdncmFkZScgYXMgdHlwZSBmcm9tIGBjbGFzc19ncmFkZWBcIixcbiAgICAgICAge1xuICAgICAgICAgICAgdHlwZTogc2VxdWVsaXplLlF1ZXJ5VHlwZXMuU0VMRUNULFxuICAgICAgICB9XG4gICAgKTtcbn07XG5leHBvcnRzLnNlYXJjaENhc2UgPSBhc3luYyAodXNlcl9pZCkgPT4ge1xuICAgIGxldCBkYXRhID0gYXdhaXQgc2VxdWVsaXplLnF1ZXJ5KFxuICAgICAgICBcInNlbGVjdCBgY2xhc3NfY2FzZWAuYHNub2AsIGBjbGFzc19jYXNlYC5gdG9waWNgLCBgY2xhc3NfY2FzZWAuYG9iamVjdGl2ZWAsIGBjbGFzc19jYXNlYC5gdGltZWAsIGBjbGFzc19jYXNlYC5gdG9waWNfaWRgIGFzIGB0b3BpY1RwYCwgYGNsYXNzX2Nhc2VgLmBkaWZmaWN1bHR5YCwgYGNsYXNzX2Nhc2VgLmBhY2hpZXZlbWVudGAsIGBjbGFzc19jYXNlYC5gc291cmNlYCwgYGNsYXNzX2Nhc2VgLmBwZGZfbGlua2AgYXMgYHBkZmAsIGdyb3VwX2NvbmNhdChkaXN0aW5jdCBjbGFzc19jYXNlX3R5cGUudHlwZV9pZCkgYXMgJ3R5cGUnLCBncm91cF9jb25jYXQoZGlzdGluY3QgY2xhc3NfY2FzZV9zdWJqZWN0LnN1YmplY3RfaWQpIGFzICdzdWJqZWN0JywgZ3JvdXBfY29uY2F0KGRpc3RpbmN0IGNsYXNzX2Nhc2VfZ3JhZGUuZ3JhZGVfaWQpIGFzICdncmFkZScsIGdyb3VwX2NvbmNhdChkaXN0aW5jdCBjbGFzc19jYXNlX3Rvb2wudG9vbF9zbm8pIGFzICd0b29sJywgZ3JvdXBfY29uY2F0KGRpc3RpbmN0IGFpZWR1dGVjaF90b29sLm5hbWVfa3IpIGFzICd0b29sTm0nIGZyb20gYGNsYXNzX2Nhc2VgIGxlZnQgam9pbiBgY2xhc3NfY2FzZV90eXBlYCBvbiBgY2xhc3NfY2FzZV90eXBlYC5gY2FzZV9zbm9gID0gYGNsYXNzX2Nhc2VgLmBzbm9gIGxlZnQgam9pbiBgY2xhc3NfY2FzZV9zdWJqZWN0YCBvbiBgY2xhc3NfY2FzZV9zdWJqZWN0YC5gY2FzZV9zbm9gID0gYGNsYXNzX2Nhc2VgLmBzbm9gIGxlZnQgam9pbiBgY2xhc3NfY2FzZV9ncmFkZWAgb24gYGNsYXNzX2Nhc2VfZ3JhZGVgLmBjYXNlX3Nub2AgPSBgY2xhc3NfY2FzZWAuYHNub2AgbGVmdCBqb2luIGBjbGFzc19jYXNlX3Rvb2xgIG9uIGBjbGFzc19jYXNlX3Rvb2xgLmBjYXNlX3Nub2AgPSBgY2xhc3NfY2FzZWAuYHNub2AgbGVmdCBqb2luIGBhaWVkdXRlY2hfdG9vbGAgb24gYGNsYXNzX2Nhc2VfdG9vbGAuYHRvb2xfc25vYCA9IGBhaWVkdXRlY2hfdG9vbGAuYHNub2AgZ3JvdXAgYnkgYGNsYXNzX2Nhc2VgLmBzbm9gXCIsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6IHNlcXVlbGl6ZS5RdWVyeVR5cGVzLlNFTEVDVCxcbiAgICAgICAgfVxuICAgICk7XG4gICAgbGV0IHR5cGUgPSBcImxlc3NvblwiO1xuICAgIGxldCB3aXNobGlzdFRvb2wgPSBhd2FpdCBXaXNobGlzdC5maW5kQWxsKHtcbiAgICAgICAgd2hlcmU6IHsgdXNlcl9pZCwgdHlwZSB9LFxuICAgICAgICBhdHRyaWJ1dGVzOiBbXCJmb3JlaWduX2tleV9pZFwiXSxcbiAgICB9KTtcbiAgICBsZXQgZm9yZWlnbktleUlkcyA9IHdpc2hsaXN0VG9vbC5tYXAoKGl0ZW0pID0+IGl0ZW0uZm9yZWlnbl9rZXlfaWQpO1xuICAgIGNvbnN0IHByb2Nlc3NlZERhdGEgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgZGF0YS5tYXAoYXN5bmMgKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGl0ZW1bXCJpc1dpc2hsaXN0XCJdID0gZm9yZWlnbktleUlkcy5pbmNsdWRlcyhpdGVtLnNubyk7XG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgcmV0dXJuIHByb2Nlc3NlZERhdGE7XG59O1xuZXhwb3J0cy5zZWFyY2hNb2RlbCA9IGFzeW5jIChpZCkgPT4ge1xuICAgIGxldCBkYXRhID0gYXdhaXQgTW9kZWxTZWFyY2guZmluZE9uZSh7XG4gICAgICAgIGluY2x1ZGU6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBtb2RlbDogVHlwZSxcbiAgICAgICAgICAgICAgICBhczogXCJ0eXBlXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG1vZGVsOiBTdWJqZWN0LFxuICAgICAgICAgICAgICAgIGFzOiBcInN1YmplY3RcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHdoZXJlOiBbaWRdLFxuICAgIH0pO1xuICAgIGlmIChkYXRhICE9IG51bGwpIHtcbiAgICAgICAgbGV0IHBkZiA9IHByb2Nlc3MuZW52LkJBU0lDX1VSTCArIFwiL2ltYWdlL21vZGVsL1wiICsgZGF0YS5wZGZfbGluaztcbiAgICAgICAgZGF0YS5wZGZfbGluayA9IHBkZjtcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YTtcbn07XG5cbmV4cG9ydHMuZ2V0VG9vbCA9IGFzeW5jIChpZCkgPT4ge1xuICAgIGxldCBkYXRhID0gYXdhaXQgQWllZHV0ZWNoVG9vbC5maW5kT25lKHtcbiAgICAgICAgd2hlcmU6IHsgc25vOiBpZCB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICBtb2RlbDogTGVzc29uU2FtcGxlLFxuICAgICAgICAgICAgYXM6IFwibGVzc29uc1wiLFxuICAgICAgICB9LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGRhdGE7XG59O1xuZXhwb3J0cy5oYW5kbGVTdXJ2ZXkgPSBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGRhdGEgPSBhd2FpdCBTdXJ2ZXlSZXN1bHQuZmluZEFsbCgpO1xuICAgIGxldCB1c2VySWQgPSA0NDM7XG4gICAgbGV0IHVzZXJOZXh0ID0gMTY4NztcblxuICAgIC8vIGZvciAobGV0IGl0ZW0gb2YgZGF0YSkge1xuICAgIC8vICAgICBpZiAoaXRlbS5pZCA8IDE2NzApIHtcbiAgICAvLyAgICAgICAgIGlmICh1c2VySWQgPiAxNjUwICYmIHVzZXJJZCA8IDE2ODYpIHtcbiAgICAvLyAgICAgICAgICAgICBpdGVtLnVzZXJfaWQgPSB1c2VyTmV4dDtcbiAgICAvLyAgICAgICAgICAgICBhd2FpdCBpdGVtLnNhdmUoeyBmaWVsZHM6IFtcInVzZXJfaWRcIl0gfSk7XG4gICAgLy8gICAgICAgICAgICAgdXNlck5leHQrKztcbiAgICAvLyAgICAgICAgIH0gZWxzZSB7XG4gICAgLy8gICAgICAgICAgICAgaXRlbS51c2VyX2lkID0gdXNlcklkO1xuICAgIC8vICAgICAgICAgICAgIGF3YWl0IGl0ZW0uc2F2ZSh7IGZpZWxkczogW1widXNlcl9pZFwiXSB9KTtcbiAgICAvLyAgICAgICAgICAgICB1c2VySWQrKztcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgfVxuICAgIC8vIH1cblxuICAgIHJldHVybiBkYXRhO1xufTtcbmV4cG9ydHMuc2VhcmNoTW9kZWxzID0gYXN5bmMgKHVzZXJfaWQpID0+IHtcbiAgICBsZXQgZGF0YSA9IGF3YWl0IE1vZGVsU2VhcmNoLmZpbmRBbGwoe1xuICAgICAgICBpbmNsdWRlOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbW9kZWw6IFR5cGUsXG4gICAgICAgICAgICAgICAgYXM6IFwidHlwZVwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBtb2RlbDogU3ViamVjdCxcbiAgICAgICAgICAgICAgICBhczogXCJzdWJqZWN0XCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgIH0pO1xuICAgIGxldCB0eXBlID0gXCJtb2RlbFwiO1xuICAgIGxldCB3aXNobGlzdFRvb2wgPSBhd2FpdCBXaXNobGlzdC5maW5kQWxsKHtcbiAgICAgICAgd2hlcmU6IHsgdXNlcl9pZCwgdHlwZSB9LFxuICAgICAgICBhdHRyaWJ1dGVzOiBbXCJmb3JlaWduX2tleV9pZFwiXSxcbiAgICB9KTtcbiAgICBsZXQgZm9yZWlnbktleUlkcyA9IHdpc2hsaXN0VG9vbC5tYXAoKGl0ZW0pID0+IGl0ZW0uZm9yZWlnbl9rZXlfaWQpO1xuICAgIGRhdGEgPSBkYXRhLm1hcCgocmVzdWx0KSA9PiByZXN1bHQuZ2V0KHsgcGxhaW46IHRydWUgfSkpO1xuICAgIC8vY29udmVydCBwZGYgbGlua1xuICAgIGNvbnN0IHByb2Nlc3NlZERhdGEgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgZGF0YS5tYXAoYXN5bmMgKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgcGRmX2xpbmtcbiAgICAgICAgICAgIGxldCBwZGYgPSBwcm9jZXNzLmVudi5CQVNJQ19VUkwgKyBcIi9pbWFnZS9tb2RlbC9cIiArIGl0ZW0ucGRmX2xpbms7XG4gICAgICAgICAgICBpdGVtLnBkZl9saW5rID0gcGRmO1xuXG4gICAgICAgICAgICAvLyBQcm9jZXNzIGdyYWRlc1xuICAgICAgICAgICAgaWYgKGl0ZW0uZ3JhZGUpIHtcbiAgICAgICAgICAgICAgICBsZXQgZGF0YUdyYWRlID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uZ3JhZGUubWFwKGFzeW5jIChuYW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgR3JhZGUuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgbmFtZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBpdGVtLmdyYWRlID0gZGF0YUdyYWRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlbVtcImlzV2lzaGxpc3RcIl0gPSBmb3JlaWduS2V5SWRzLmluY2x1ZGVzKGl0ZW0uaWQpO1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIHJldHVybiBwcm9jZXNzZWREYXRhO1xufTtcbmV4cG9ydHMudG9vbEZpbHRlciA9IGFzeW5jICgpID0+IHtcbiAgICBsZXQgZGF0YSA9IGF3YWl0IHNlcXVlbGl6ZS5xdWVyeShcbiAgICAgICAgXCJzZWxlY3QgYHRvb2xfYWllZHV0ZWNoX3RlY2hfdHlwZWAuYHRvb2xfYWllZHV0ZWNoX3RlY2hfaWRgIGFzIGB0ZWNoSWRgLCBgdG9vbF9haWVkdXRlY2hfdGVjaF90eXBlYC5gbmFtZWAgYXMgYG5hbWVgLCBgdG9vbF9haWVkdXRlY2hfdGVjaGAuYHRvb2xfYWllZHV0ZWNoX2lkYCBhcyBgYWllZHV0ZWNoSWRgLCBgdG9vbF9haWVkdXRlY2hfdGVjaF90eXBlYC5gaWRgIGFzIGB0ZWNoVHBJZGAgZnJvbSBgdG9vbF9haWVkdXRlY2hfdGVjaF90eXBlYCBpbm5lciBqb2luIGB0b29sX2FpZWR1dGVjaF90ZWNoYCBvbiBgdG9vbF9haWVkdXRlY2hfdGVjaGAuYGlkYCA9IGB0b29sX2FpZWR1dGVjaF90ZWNoX3R5cGVgLmB0b29sX2FpZWR1dGVjaF90ZWNoX2lkYCB1bmlvbiBzZWxlY3QgYHRvb2xfYWllZHV0ZWNoX3RlY2hgLmBpZGAgYXMgYHRlY2hJZGAsIGB0b29sX2FpZWR1dGVjaF90ZWNoYC5gbmFtZWAgYXMgYG5hbWVgLCBgdG9vbF9haWVkdXRlY2hfdGVjaGAuYHRvb2xfYWllZHV0ZWNoX2lkYCBhcyBgYWllZHV0ZWNoSWRgLCAnJyBhcyB0ZWNoVHBJZCBmcm9tIGB0b29sX2FpZWR1dGVjaF90ZWNoYCBvcmRlciBieSBgYWllZHV0ZWNoSWRgIGFzYywgYHRlY2hJZGAgYXNjXCIsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6IHNlcXVlbGl6ZS5RdWVyeVR5cGVzLlNFTEVDVCxcbiAgICAgICAgfVxuICAgICk7XG4gICAgcmV0dXJuIGZpbHRlclRvb2woZGF0YSk7XG59O1xuY29uc3QgZmlsdGVyVG9vbCA9IChkYXRhKSA9PiB7XG4gICAgbGV0IHJzdCA9IFtdO1xuICAgIGxldCBjaGlsZCA9IFtdO1xuICAgIGZvciAoY29uc3Qgcm93IG9mIGRhdGEpIHtcbiAgICAgICAgaWYgKHJvdy50ZWNoVHBJZCA9PT0gXCJcIikge1xuICAgICAgICAgICAgcnN0LnB1c2gocm93KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoaWxkLnB1c2gocm93KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoY29uc3Qgcm93IG9mIGNoaWxkKSB7XG4gICAgICAgIGZvciAoY29uc3QgcGFyZW50IG9mIHJzdCkge1xuICAgICAgICAgICAgaWYgKHJvdy50ZWNoSWQgPT09IHBhcmVudC50ZWNoSWQpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50LmNoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5jaGlsZC5wdXNoKHJvdyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LmNoaWxkID0gW3Jvd107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbXG4gICAgICAgIHJzdC5maWx0ZXIoKHJvdykgPT4gcm93LmFpZWR1dGVjaElkID09PSAxKSxcbiAgICAgICAgcnN0LmZpbHRlcigocm93KSA9PiByb3cuYWllZHV0ZWNoSWQgPT09IDIpLFxuICAgIF07XG59O1xuXG5leHBvcnRzLnNlYXJjaFRvb2wgPSBhc3luYyAodXNlcl9pZCkgPT4ge1xuICAgIGxldCBkYXRhID0gYXdhaXQgc2VxdWVsaXplLnF1ZXJ5KFxuICAgICAgICBcInNlbGVjdCBgc25vYCBhcyBgc25vYCwgYG5hbWVfa3JgIGFzIGBuYW1lYCwgYG5hbWVfZW5gIGFzIGBuYW1lRW5gLCBgZGVzY3JpcHRpb25gIGFzIGBkZXNjcmlwdGlvbmAsIGBjYXNlX2ltZ2AgYXMgYGltZ2AsIGB0b29sX2FpZWR1dGVjaGAuYG5hbWVgIGFzIGB0b29sVHBgLCBgdGVjaF9pZGAgYXMgYHRlY2hgLCBncm91cF9jb25jYXQoYWllZHV0ZWNoX3Rvb2xfdGVjaF90eXBlLnR5cGVfaWQpIGFzICd0ZWNoVHAnIGZyb20gYGFpZWR1dGVjaF90b29sYCBsZWZ0IGpvaW4gYGFpZWR1dGVjaF90b29sX3RlY2hfdHlwZWAgb24gYGFpZWR1dGVjaF90b29sX3RlY2hfdHlwZWAuYHRvb2xfaWRgID0gYGFpZWR1dGVjaF90b29sYC5gc25vYCBpbm5lciBqb2luIGB0b29sX2FpZWR1dGVjaGAgb24gYHRvb2xfYWllZHV0ZWNoYC5gaWRgID0gYGFpZWR1dGVjaF90b29sYC5gdG9vbF9pZGAgZ3JvdXAgYnkgYHNub2BcIixcbiAgICAgICAge1xuICAgICAgICAgICAgdHlwZTogc2VxdWVsaXplLlF1ZXJ5VHlwZXMuU0VMRUNULFxuICAgICAgICB9XG4gICAgKTtcbiAgICBsZXQgdHlwZSA9IFwidG9vbFwiO1xuICAgIGxldCB3aXNobGlzdFRvb2wgPSBhd2FpdCBXaXNobGlzdC5maW5kQWxsKHtcbiAgICAgICAgd2hlcmU6IHsgdXNlcl9pZCwgdHlwZSB9LFxuICAgICAgICBhdHRyaWJ1dGVzOiBbXCJmb3JlaWduX2tleV9pZFwiXSxcbiAgICB9KTtcbiAgICBsZXQgZm9yZWlnbktleUlkcyA9IHdpc2hsaXN0VG9vbC5tYXAoKGl0ZW0pID0+IGl0ZW0uZm9yZWlnbl9rZXlfaWQpO1xuICAgIGNvbnN0IHByb2Nlc3NlZERhdGEgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgZGF0YS5tYXAoYXN5bmMgKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGl0ZW1bXCJpc1dpc2hsaXN0XCJdID0gZm9yZWlnbktleUlkcy5pbmNsdWRlcyhpdGVtLnNubyk7XG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgcmV0dXJuIHByb2Nlc3NlZERhdGE7XG59O1xuZXhwb3J0cy5zZWFyY2hUb29sT3BlcmF0aW9ucyA9IGFzeW5jICgpID0+IHtcbiAgICBsZXQgdG9waWNzID0gYXdhaXQgVG9waWMuZmluZEFsbCgpO1xuICAgIGxldCB0eXBlcyA9IGF3YWl0IFR5cGUuZmluZEFsbCgpO1xuICAgIGxldCBzdWJqZWN0cyA9IGF3YWl0IFN1YmplY3QuZmluZEFsbCgpO1xuICAgIGxldCBncmFkZXMgPSBhd2FpdCBHcmFkZS5maW5kQWxsKCk7XG4gICAgbGV0IHRvb2xzID0gYXdhaXQgQWllZHV0ZWNoVG9vbC5maW5kQWxsKHtcbiAgICAgICAgYXR0cmlidXRlczogW1wic25vXCIsIFwibmFtZV9rclwiLCBcIm5hbWVfZW5cIiwgXCJ0ZWNoX2lkXCJdLFxuICAgIH0pO1xuICAgIHJldHVybiB7IHRvcGljcywgdHlwZXMsIHN1YmplY3RzLCBncmFkZXMsIHRvb2xzIH07XG59O1xuLy9PcGVyYXRpb25zXG5leHBvcnRzLnNlYXJjaE9wZXJhdGlvbnMgPSBhc3luYyAodXNlcl9pZCkgPT4ge1xuICAgIGxldCBkYXRhID0gYXdhaXQgT3BlcmF0aW9uQ2FzZS5maW5kQWxsKHtcbiAgICAgICAgaW5jbHVkZTogW1xuICAgICAgICAgICAgeyBtb2RlbDogVG9waWMsIGFzOiBcInRvcGljc1wiIH0sXG4gICAgICAgICAgICB7IG1vZGVsOiBUeXBlLCBhczogXCJ0eXBlc1wiIH0sXG4gICAgICAgICAgICB7IG1vZGVsOiBTdWJqZWN0LCBhczogXCJzdWJqZWN0c1wiIH0sXG4gICAgICAgICAgICB7IG1vZGVsOiBHcmFkZSwgYXM6IFwiZ3JhZGVzXCIgfSxcbiAgICAgICAgICAgIHsgbW9kZWw6IEFpZWR1dGVjaFRvb2wsIGFzOiBcInRvb2xzXCIgfSxcbiAgICAgICAgXSxcbiAgICB9KTtcbiAgICBsZXQgdHlwZSA9IFwib3BlcmF0aW9uXCI7XG4gICAgbGV0IHdpc2hsaXN0VG9vbCA9IGF3YWl0IFdpc2hsaXN0LmZpbmRBbGwoe1xuICAgICAgICB3aGVyZTogeyB1c2VyX2lkLCB0eXBlIH0sXG4gICAgICAgIGF0dHJpYnV0ZXM6IFtcImZvcmVpZ25fa2V5X2lkXCJdLFxuICAgIH0pO1xuICAgIGxldCBmb3JlaWduS2V5SWRzID0gd2lzaGxpc3RUb29sLm1hcCgoaXRlbSkgPT4gaXRlbS5mb3JlaWduX2tleV9pZCk7XG4gICAgZGF0YSA9IGRhdGEubWFwKChyZXN1bHQpID0+IHJlc3VsdC5nZXQoeyBwbGFpbjogdHJ1ZSB9KSk7XG4gICAgLy9jb252ZXJ0IHBkZiBsaW5rXG4gICAgY29uc3QgcHJvY2Vzc2VkRGF0YSA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICBkYXRhLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgbGV0IHBkZiA9XG4gICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnYuQkFTSUNfVVJMICsgXCIvaW1hZ2Uvb3BlcmF0aW9uL1wiICsgaXRlbS5wZGZfbGluaztcbiAgICAgICAgICAgIGl0ZW0ucGRmX2xpbmsgPSBwZGY7XG4gICAgICAgICAgICBpdGVtW1wiaXNXaXNobGlzdFwiXSA9IGZvcmVpZ25LZXlJZHMuaW5jbHVkZXMoaXRlbS5pZCk7XG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfSlcbiAgICApO1xuICAgIHJldHVybiBwcm9jZXNzZWREYXRhO1xufTtcbmV4cG9ydHMuc2VhcmNoT3BlcmF0aW9uID0gYXN5bmMgKGlkKSA9PiB7XG4gICAgbGV0IGRhdGEgPSBhd2FpdCBPcGVyYXRpb25DYXNlLmZpbmRPbmUoe1xuICAgICAgICBpbmNsdWRlOiBbXG4gICAgICAgICAgICB7IG1vZGVsOiBUb3BpYywgYXM6IFwidG9waWNzXCIgfSxcbiAgICAgICAgICAgIHsgbW9kZWw6IFR5cGUsIGFzOiBcInR5cGVzXCIgfSxcbiAgICAgICAgICAgIHsgbW9kZWw6IFN1YmplY3QsIGFzOiBcInN1YmplY3RzXCIgfSxcbiAgICAgICAgICAgIHsgbW9kZWw6IEdyYWRlLCBhczogXCJncmFkZXNcIiB9LFxuICAgICAgICAgICAgeyBtb2RlbDogQWllZHV0ZWNoVG9vbCwgYXM6IFwidG9vbHNcIiB9LFxuICAgICAgICBdLFxuICAgICAgICB3aGVyZTogeyBpZCB9LFxuICAgIH0pO1xuICAgIC8vY29udmVydCBwZGYgbGlua1xuXG4gICAgbGV0IHBkZiA9IHByb2Nlc3MuZW52LkJBU0lDX1VSTCArIFwiL2ltYWdlL29wZXJhdGlvbi9cIiArIGRhdGEucGRmX2xpbms7XG4gICAgZGF0YS5wZGZfbGluayA9IHBkZjtcblxuICAgIHJldHVybiBkYXRhO1xufTtcblxuZXhwb3J0cy5oYW5kbGVJbnNlcnREYXRhT3BlcmF0aW9uQ2FzZSA9IGFzeW5jIChkYXRhKSA9PiB7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIGRhdGEubWFwKGFzeW5jIChpdGVtKSA9PiB7XG4gICAgICAgICAgICAvL2luc2VydCBvcGVyYXRpb25fY2FzZVxuICAgICAgICAgICAgY29uc3QgT3BlcmF0aW9uID0gYXdhaXQgT3BlcmF0aW9uQ2FzZS5jcmVhdGUoe1xuICAgICAgICAgICAgICAgIGlkOiBudWxsLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBpdGVtLm5hbWUsXG4gICAgICAgICAgICAgICAgY2hhc2k6IGl0ZW0uY2hhc2ksXG4gICAgICAgICAgICAgICAgZGlmZmljdWx0eTogaXRlbS5kaWZmaWN1bHR5LFxuICAgICAgICAgICAgICAgIGxlYXJuaW5nX29iamVjdGl2ZXM6IGl0ZW0ubGVhcm5pbmdfb2JqZWN0aXZlcyxcbiAgICAgICAgICAgICAgICBhY2hpZXZlbWVudF9jcml0ZXJpYTogaXRlbS5hY2hpZXZlbWVudF9jcml0ZXJpYSxcbiAgICAgICAgICAgICAgICBzb3VyY2U6IGl0ZW0uc291cmNlLFxuICAgICAgICAgICAgICAgIHBkZl9saW5rOiBpdGVtLnBkZixcbiAgICAgICAgICAgICAgICBzb3VyY2U6IGl0ZW0uc291cmNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsZXQgb3BlcmF0aW9uX2lkID0gT3BlcmF0aW9uLmlkO1xuICAgICAgICAgICAgaWYgKG9wZXJhdGlvbl9pZCkge1xuICAgICAgICAgICAgICAgIC8vdG9waWNcbiAgICAgICAgICAgICAgICBpdGVtW1wiY2xhc3NfdG9waWNcIl0ubWFwKGFzeW5jICh0b3BpY05hbWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgW3RvcGljLCBjcmVhdGVkXSA9IGF3YWl0IFRvcGljLmZpbmRPckNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBuYW1lOiB0b3BpY05hbWUgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdG9waWNOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0b3BpY19pZCA9IHRvcGljLmlkO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9waWNfaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIE9wZXJhdGlvblRvcGljLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9waWNfaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uX2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcGVyYXRpb25faWQpIHtcbiAgICAgICAgICAgICAgICAvL3R5cGVcbiAgICAgICAgICAgICAgICBpdGVtW1wiY2xhc3NfdHlwZVwiXS5tYXAoYXN5bmMgKHR5cGVOYW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IFt0eXBlLCBjcmVhdGVkXSA9IGF3YWl0IFR5cGUuZmluZE9yQ3JlYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IG5hbWU6IHR5cGVOYW1lIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHR5cGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0eXBlX2lkID0gdHlwZS5pZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVfaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIE9wZXJhdGlvblR5cGUuY3JlYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlX2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbl9pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3BlcmF0aW9uX2lkKSB7XG4gICAgICAgICAgICAgICAgLy9zdWJqZWN0XG4gICAgICAgICAgICAgICAgaXRlbVtcImNsYXNzX3N1YmplY3RcIl0ubWFwKGFzeW5jIChzdWJqZWN0TmFtZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBbc3ViamVjdCwgY3JlYXRlZF0gPSBhd2FpdCBUb3BpYy5maW5kT3JDcmVhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgbmFtZTogc3ViamVjdE5hbWUgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc3ViamVjdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN1YmplY3RfaWQgPSBzdWJqZWN0LmlkO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3ViamVjdF9pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgT3BlcmF0aW9uU3ViamVjdC5jcmVhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3RfaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uX2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcGVyYXRpb25faWQpIHtcbiAgICAgICAgICAgICAgICAvL2dyYWRlXG4gICAgICAgICAgICAgICAgaXRlbVtcImNsYXNzX2dyYWRlXCJdLm1hcChhc3luYyAoZ3JhZGVOYW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IFtncmFkZSwgY3JlYXRlZF0gPSBhd2FpdCBHcmFkZS5maW5kT3JDcmVhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgbmFtZTogZ3JhZGVOYW1lIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGdyYWRlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZ3JhZGVfaWQgPSBncmFkZS5pZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdyYWRlX2lkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBPcGVyYXRpb25HcmFkZS5jcmVhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyYWRlX2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbl9pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3BlcmF0aW9uX2lkICYmIGl0ZW1bXCJhcnRpZmljaWFsX2ludGVsbGlnZW5jZV90b29sc1wiXSkge1xuICAgICAgICAgICAgICAgIC8vdG9vbFxuICAgICAgICAgICAgICAgIGl0ZW1bXCJhcnRpZmljaWFsX2ludGVsbGlnZW5jZV90b29sc1wiXS5tYXAoYXN5bmMgKGlkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvb2wgPSBhd2FpdCBBaWVkdXRlY2hUb29sLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgc25vOiBpZCB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodG9vbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgT3BlcmF0aW9uVG9vbC5jcmVhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfaWQ6IGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbl9pZDogb3BlcmF0aW9uX2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICApO1xufTtcbmV4cG9ydHMuaGFuZGxlSW5zZXJ0U3VydmV5ID0gYXN5bmMgKGRhdGEpID0+IHtcbiAgICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgZGF0YS5tYXAoYXN5bmMgKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIC8vZmFrZSB1c2VyXG5cbiAgICAgICAgICAgIGxldCB1c2VyID0gYXdhaXQgVXNlci5jcmVhdGUoe1xuICAgICAgICAgICAgICAgIGlkOiBudWxsLFxuICAgICAgICAgICAgICAgIG5hbWU6IGZha2VyLnBlcnNvbi5mdWxsTmFtZSgpLFxuICAgICAgICAgICAgICAgIGVtYWlsOiBmYWtlci5pbnRlcm5ldC5lbWFpbCgpLFxuICAgICAgICAgICAgICAgIHNvY2lhbDogMCxcbiAgICAgICAgICAgICAgICBwcm9maWxlOiBmYWtlci5pbWFnZS5hdmF0YXIoKSxcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogYXdhaXQgYmNyeXB0Lmhhc2goXCIxMjNcIiwgOCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh1c2VyLmlkKSB7XG4gICAgICAgICAgICAgICAgbGV0IGFuc3dlcmVkID0gaGFuZGxlRm9ybWF0QW5zd2VyZWQoW1xuICAgICAgICAgICAgICAgICAgICBpdGVtWzldLFxuICAgICAgICAgICAgICAgICAgICBpdGVtWzEwXSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbVsxMV0sXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1bMTJdLFxuICAgICAgICAgICAgICAgICAgICBpdGVtWzEzXSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbVsxNF0sXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1bMTVdLFxuICAgICAgICAgICAgICAgICAgICBpdGVtWzE2XSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbVsxN10sXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1bMThdLFxuICAgICAgICAgICAgICAgICAgICBpdGVtWzE5XSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbVsyMF0sXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1bMjFdLFxuICAgICAgICAgICAgICAgICAgICBpdGVtWzIyXSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbVsyM10sXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1bMjRdLFxuICAgICAgICAgICAgICAgICAgICBpdGVtWzI1XSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbVsyNl0sXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1bMjddLFxuICAgICAgICAgICAgICAgICAgICBpdGVtWzI4XSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbVsyOV0sXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1bMzBdLFxuICAgICAgICAgICAgICAgICAgICBpdGVtWzMxXSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbVszMl0sXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1bMzNdLFxuICAgICAgICAgICAgICAgICAgICBpdGVtWzM0XSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbVszNV0sXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1bMzZdLFxuICAgICAgICAgICAgICAgICAgICBpdGVtWzM3XSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbVszOF0sXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgU3VydmV5UmVzdWx0LmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBzdXJ2ZXlfaWQ6IDMsXG4gICAgICAgICAgICAgICAgICAgIGFuc3dlcmVkOiBhbnN3ZXJlZCxcbiAgICAgICAgICAgICAgICAgICAgc2Nob29sX2xldmVsOiBoYW5kbGVQYXJhbURhdGFTdXJ2ZXkoXG4gICAgICAgICAgICAgICAgICAgICAgICBcInNjaG9vbF9sZXZlbFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVsyXVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBnZW5kZXI6IGhhbmRsZVBhcmFtRGF0YVN1cnZleShcImdlbmRlclwiLCBpdGVtWzFdKSxcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBhd2FpdCBoYW5kbGVQb2ludEFuc3dlcnMoYW5zd2VyZWQpLFxuICAgICAgICAgICAgICAgICAgICB1c2VyX2lkOiB1c2VyLmlkLFxuICAgICAgICAgICAgICAgICAgICBleHBlcmllbmNlOiBoYW5kbGVQYXJhbURhdGFTdXJ2ZXkoXCJnZW5kZXJcIiwgaXRlbVsxXSksXG4gICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogaGFuZGxlUGFyYW1EYXRhU3VydmV5KFwicmVnaW9uXCIsIGl0ZW1bNl0pLFxuICAgICAgICAgICAgICAgICAgICBudW1iZXJfdHVybjogMSxcbiAgICAgICAgICAgICAgICAgICAgdGVhY2hlcl90eXBlOiBoYW5kbGVQYXJhbURhdGFTdXJ2ZXkoXG4gICAgICAgICAgICAgICAgICAgICAgICBcInRlYWNoZXJfdHlwZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVs3XVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBhaWVkYXBfdHJhaW5pbmc6IGhhbmRsZVBhcmFtRGF0YVN1cnZleShcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYWllZGFwX3RyYWluaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtWzVdXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIHRlYWNoZXJfY2FyZWVyOiBoYW5kbGVQYXJhbURhdGFTdXJ2ZXkoXG4gICAgICAgICAgICAgICAgICAgICAgICBcInRlYWNoZXJfY2FyZWVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtWzRdXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIHN1YmplY3Q6IGhhbmRsZVBhcmFtRGF0YVN1cnZleShcInN1YmplY3RcIiwgaXRlbVs4XSksXG4gICAgICAgICAgICAgICAgICAgIGVkdWNhdGlvbl9vZmZpY2U6IGhhbmRsZVBhcmFtRGF0YVN1cnZleShcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZWR1Y2F0aW9uX29mZmljZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVszXVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBlZHVjYXRpb25fb2ZmaWNlX2luZm86IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIHRyYWluaW5nX3NlbGVjdGlvbjogXCJcIixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICApO1xufTtcbmZ1bmN0aW9uIGhhbmRsZVBhcmFtRGF0YVN1cnZleShrZXksIHZhbHVlKSB7XG4gICAgaWYgKGtleSA9PSBcImdlbmRlclwiKSByZXR1cm4gdmFsdWUgPT0gMSA/IDEgOiAwO1xuICAgIGlmIChrZXkgPT0gXCJzY2hvb2xfbGV2ZWxcIikge1xuICAgICAgICBzd2l0Y2ggKHZhbHVlKSB7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZWxlbWVudGFyeV9zY2hvb2xcIjtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJtaWRkbGVfc2Nob29sXCI7XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiaGlnaF9zY2hvb2xcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoa2V5ID09IFwiZWR1Y2F0aW9uX29mZmljZVwiKSB7XG4gICAgICAgIHN3aXRjaCAodmFsdWUpIHtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJnYW5nd29uXCI7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZ3llb25nZ2lcIjtcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJneWVvbmduYW1cIjtcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJneWVvbmdidWtcIjtcbiAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJkYWVndVwiO1xuICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgIHJldHVybiBcImRhZWplb25cIjtcbiAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJidXNhblwiO1xuICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgIHJldHVybiBcInNlb3VsXCI7XG4gICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwic2Vqb25nXCI7XG4gICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgIHJldHVybiBcInVsc2FuXCI7XG4gICAgICAgICAgICBjYXNlIDExOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImplb25idWtcIjtcbiAgICAgICAgICAgIGNhc2UgMTI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiY2h1bmduYW1cIjtcbiAgICAgICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiY2h1bmdidWtcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoa2V5ID09IFwidGVhY2hlcl9jYXJlZXJcIikge1xuICAgICAgICBzd2l0Y2ggKHZhbHVlKSB7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiMF8xXCI7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiMV82XCI7XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiNl8xMVwiO1xuICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgIHJldHVybiBcIjExXzIxXCI7XG4gICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiMjFfMzFcIjtcbiAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCIzMV8xMDBcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoa2V5ID09IFwiYWllZGFwX3RyYWluaW5nXCIpIHtcbiAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIm5vdF9hdHRlbmRlZFwiO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImF0dGVuZGVkXCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGtleSA9PSBcInJlZ2lvblwiKSB7XG4gICAgICAgIHN3aXRjaCAodmFsdWUpIHtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJtZXRyb3BvbGl0YW5fYXJlYVwiO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImt5dW5nX3Bvb2tcIjtcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJreXVuZ19uYW1cIjtcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJjaG9vbmdfY2h1bmdcIjtcbiAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJqdW5fbmFtXCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGtleSA9PSBcInRlYWNoZXJfdHlwZVwiKSB7XG4gICAgICAgIHN3aXRjaCAodmFsdWUpIHtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJnZW5lcmFsX3RlYWNoZXJcIjtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJsZWFkZXJfdGVhY2hlclwiO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIm1hc3Rlcl90ZWFjaGVyXCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGtleSA9PSBcInN1YmplY3RcIikge1xuICAgICAgICBzd2l0Y2ggKHZhbHVlKSB7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiaW5mb3JtYXRpb25cIjtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJrb3JlYW5cIjtcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJtYXRoXCI7XG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZW5nbGlzaFwiO1xuICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgIHJldHVybiBcInNvY2lldHlcIjtcbiAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJzY2llbmNlXCI7XG4gICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiY2FyZWVyXCI7XG4gICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYXJ0XCI7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBoYW5kbGVGb3JtYXRBbnN3ZXJlZChhbnN3ZXIpIHtcbiAgICByZXR1cm4gW1xuICAgICAgICB7IGFuc3dlcl9pZDogYW5zd2VyWzBdLCBxdWVzdGlvbl9pZDogMzUgfSxcbiAgICAgICAgeyBhbnN3ZXJfaWQ6IGFuc3dlclsxXSwgcXVlc3Rpb25faWQ6IDQ4IH0sXG4gICAgICAgIHsgYW5zd2VyX2lkOiBhbnN3ZXJbMl0sIHF1ZXN0aW9uX2lkOiA0NiB9LFxuICAgICAgICB7IGFuc3dlcl9pZDogYW5zd2VyWzNdLCBxdWVzdGlvbl9pZDogMzYgfSxcbiAgICAgICAgeyBhbnN3ZXJfaWQ6IGFuc3dlcls0XSwgcXVlc3Rpb25faWQ6IDQ1IH0sXG4gICAgICAgIHsgYW5zd2VyX2lkOiBhbnN3ZXJbNV0sIHF1ZXN0aW9uX2lkOiA1MyB9LFxuICAgICAgICB7IGFuc3dlcl9pZDogYW5zd2VyWzZdLCBxdWVzdGlvbl9pZDogNTIgfSxcbiAgICAgICAgeyBhbnN3ZXJfaWQ6IGFuc3dlcls3XSwgcXVlc3Rpb25faWQ6IDQ0IH0sXG4gICAgICAgIHsgYW5zd2VyX2lkOiBhbnN3ZXJbOF0sIHF1ZXN0aW9uX2lkOiA1OSB9LFxuICAgICAgICB7IGFuc3dlcl9pZDogYW5zd2VyWzldLCBxdWVzdGlvbl9pZDogMzggfSxcbiAgICAgICAgeyBhbnN3ZXJfaWQ6IGFuc3dlclsxMF0sIHF1ZXN0aW9uX2lkOiA1NSB9LFxuICAgICAgICB7IGFuc3dlcl9pZDogYW5zd2VyWzExXSwgcXVlc3Rpb25faWQ6IDU0IH0sXG4gICAgICAgIHsgYW5zd2VyX2lkOiBhbnN3ZXJbMTJdLCBxdWVzdGlvbl9pZDogNTAgfSxcbiAgICAgICAgeyBhbnN3ZXJfaWQ6IGFuc3dlclsxM10sIHF1ZXN0aW9uX2lkOiA0NyB9LFxuICAgICAgICB7IGFuc3dlcl9pZDogYW5zd2VyWzE0XSwgcXVlc3Rpb25faWQ6IDQ5IH0sXG4gICAgICAgIHsgYW5zd2VyX2lkOiBhbnN3ZXJbMTVdLCBxdWVzdGlvbl9pZDogMSB9LFxuICAgICAgICB7IGFuc3dlcl9pZDogYW5zd2VyWzE2XSwgcXVlc3Rpb25faWQ6IDU3IH0sXG4gICAgICAgIHsgYW5zd2VyX2lkOiBhbnN3ZXJbMTddLCBxdWVzdGlvbl9pZDogNTEgfSxcbiAgICAgICAgeyBhbnN3ZXJfaWQ6IGFuc3dlclsxOF0sIHF1ZXN0aW9uX2lkOiA2MSB9LFxuICAgICAgICB7IGFuc3dlcl9pZDogYW5zd2VyWzE5XSwgcXVlc3Rpb25faWQ6IDU4IH0sXG4gICAgICAgIHsgYW5zd2VyX2lkOiBhbnN3ZXJbMjBdLCBxdWVzdGlvbl9pZDogNjIgfSxcbiAgICAgICAgeyBhbnN3ZXJfaWQ6IGFuc3dlclsyMV0sIHF1ZXN0aW9uX2lkOiA2MCB9LFxuICAgICAgICB7IGFuc3dlcl9pZDogYW5zd2VyWzIyXSwgcXVlc3Rpb25faWQ6IDU2IH0sXG4gICAgICAgIHsgYW5zd2VyX2lkOiBhbnN3ZXJbMjNdLCBxdWVzdGlvbl9pZDogNDAgfSxcbiAgICAgICAgeyBhbnN3ZXJfaWQ6IGFuc3dlclsyNF0sIHF1ZXN0aW9uX2lkOiAzOSB9LFxuICAgICAgICB7IGFuc3dlcl9pZDogYW5zd2VyWzI1XSwgcXVlc3Rpb25faWQ6IDQzIH0sXG4gICAgICAgIHsgYW5zd2VyX2lkOiBhbnN3ZXJbMjZdLCBxdWVzdGlvbl9pZDogNDIgfSxcbiAgICAgICAgeyBhbnN3ZXJfaWQ6IGFuc3dlclsyN10sIHF1ZXN0aW9uX2lkOiAzNCB9LFxuICAgICAgICB7IGFuc3dlcl9pZDogYW5zd2VyWzI4XSwgcXVlc3Rpb25faWQ6IDQyIH0sXG4gICAgICAgIHsgYW5zd2VyX2lkOiBhbnN3ZXJbMjldLCBxdWVzdGlvbl9pZDogNDEgfSxcbiAgICBdO1xufVxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlUG9pbnRBbnN3ZXJzKGFuc3dlcnMpIHtcbiAgICAvL2NvbmRpdGlvblxuICAgIGxldCBjb25kaXRpb25Qb2ludCA9IDY7XG4gICAgbGV0IGJhc2ljX3V0aWxpemF0aW9uX2F2ZyA9IDA7XG4gICAgbGV0IGJhc2ljX3V0aWxpemF0aW9uX3RvdGFsID0gMDtcbiAgICBsZXQgYmFzaWNfdXRpbGl6YXRpb25fcXVlc3Rpb25fY291bnQgPSAwO1xuICAgIC8vXG4gICAgbGV0IGJhc2ljX3ByYWN0aWNlX2F2ZyA9IDA7XG4gICAgbGV0IGJhc2ljX3ByYWN0aWNlX3RvdGFsID0gMDtcbiAgICBsZXQgYmFzaWNfcHJhY3RpY2VfcXVlc3Rpb25fY291bnQgPSAwO1xuICAgIC8vXG4gICAgbGV0IGVkdV91c2VfYXZnID0gMDtcbiAgICBsZXQgZWR1X3VzZV90b3RhbCA9IDA7XG4gICAgbGV0IGVkdV91c2VfcXVlc3Rpb25fY291bnQgPSAwO1xuICAgIC8vXG4gICAgbGV0IGVkdV90ZWFjaGluZ19hdmcgPSAwO1xuICAgIGxldCBlZHVfdGVhY2hpbmdfdG90YWwgPSAwO1xuICAgIGxldCBlZHVfdGVhY2hpbmdfcXVlc3Rpb25fY291bnQgPSAwO1xuICAgIC8vXG4gICAgbGV0IGVkdV9kZXZfYXZnID0gMDtcbiAgICBsZXQgZWR1X2Rldl90b3RhbCA9IDA7XG4gICAgbGV0IGVkdV9kZXZfcXVlc3Rpb25fY291bnQgPSAwO1xuICAgIC8vXG4gICAgbGV0IGVkdV9pbXBsZW1lbnRhdGlvbl9hdmcgPSAwO1xuICAgIGxldCBlZHVfaW1wbGVtZW50YXRpb25fdG90YWwgPSAwO1xuICAgIGxldCBlZHVfaW1wbGVtZW50YXRpb25fcXVlc3Rpb25fY291bnQgPSAwO1xuICAgIC8vXG4gICAgbGV0IGVkdV9ldmFsdWF0aW9uX2F2ZyA9IDA7XG4gICAgbGV0IGVkdV9ldmFsdWF0aW9uX3RvdGFsID0gMDtcbiAgICBsZXQgZWR1X2V2YWx1YXRpb25fcXVlc3Rpb25fY291bnQgPSAwO1xuICAgIC8vXG4gICAgbGV0IHByb2Zlc3Npb25hbF9kZXZfYXZnID0gMDtcbiAgICBsZXQgcHJvZmVzc2lvbmFsX2Rldl90b3RhbCA9IDA7XG4gICAgbGV0IHByb2Zlc3Npb25hbF9kZXZfcXVlc3Rpb25fY291bnQgPSAwO1xuICAgIC8vXG4gICAgbGV0IHByb2Zlc3Npb25hbF9zb2NpYWxfYXZnID0gMDtcbiAgICBsZXQgcHJvZmVzc2lvbmFsX3NvY2lhbF90b3RhbCA9IDA7XG4gICAgbGV0IHByb2Zlc3Npb25hbF9zb2NpYWxfcXVlc3Rpb25fY291bnQgPSAwO1xuICAgIC8vXG4gICAgbGV0IHpvbmVfY29tcGV0ZW5jeV9hdmcgPSAwO1xuICAgIGxldCB6b25lX2VkdV9hdmcgPSAwO1xuICAgIGxldCB6b25lX3Byb2Zlc3Npb25hbF9hdmcgPSAwO1xuICAgIGxldCB6b25lX2F2ZyA9IDA7XG5cbiAgICAvL1xuICAgIGxldCBwb2ludF9hdmcgPSAwO1xuICAgIGxldCBwb2ludF90b3RhbCA9IDA7XG5cbiAgICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgYW5zd2Vycy5tYXAoYXN5bmMgKGFuc3dlcikgPT4ge1xuICAgICAgICAgICAgLy9maW5kIHF1ZXN0aW9uXG4gICAgICAgICAgICBsZXQgcXVlc3Rpb24gPSBhd2FpdCBTdXJ2ZXlRdWVzdGlvbi5maW5kT25lKHtcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBbXCJ6b25lX2NvbXBldGVuY3lcIl0sXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IGFuc3dlci5xdWVzdGlvbl9pZCB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocXVlc3Rpb24gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBxdWVzdGlvbiBub3QgZXhpc3QhXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzd2l0Y2ggKHF1ZXN0aW9uLnpvbmVfY29tcGV0ZW5jeSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJiYXNpY191dGlsaXphdGlvblwiOlxuICAgICAgICAgICAgICAgICAgICBiYXNpY191dGlsaXphdGlvbl90b3RhbCArPSBhbnN3ZXIuYW5zd2VyX2lkO1xuICAgICAgICAgICAgICAgICAgICBiYXNpY191dGlsaXphdGlvbl9xdWVzdGlvbl9jb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiYmFzaWNfcHJhY3RpY2VcIjpcbiAgICAgICAgICAgICAgICAgICAgYmFzaWNfcHJhY3RpY2VfdG90YWwgKz0gYW5zd2VyLmFuc3dlcl9pZDtcbiAgICAgICAgICAgICAgICAgICAgYmFzaWNfcHJhY3RpY2VfcXVlc3Rpb25fY291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImVkdV91c2VcIjpcbiAgICAgICAgICAgICAgICAgICAgZWR1X3VzZV90b3RhbCArPSBhbnN3ZXIuYW5zd2VyX2lkO1xuICAgICAgICAgICAgICAgICAgICBlZHVfdXNlX3F1ZXN0aW9uX2NvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJlZHVfdGVhY2hpbmdcIjpcbiAgICAgICAgICAgICAgICAgICAgZWR1X3RlYWNoaW5nX3RvdGFsICs9IGFuc3dlci5hbnN3ZXJfaWQ7XG4gICAgICAgICAgICAgICAgICAgIGVkdV90ZWFjaGluZ19xdWVzdGlvbl9jb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiZWR1X2RldlwiOlxuICAgICAgICAgICAgICAgICAgICBlZHVfZGV2X3RvdGFsICs9IGFuc3dlci5hbnN3ZXJfaWQ7XG4gICAgICAgICAgICAgICAgICAgIGVkdV9kZXZfcXVlc3Rpb25fY291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImVkdV9pbXBsZW1lbnRhdGlvblwiOlxuICAgICAgICAgICAgICAgICAgICBlZHVfaW1wbGVtZW50YXRpb25fdG90YWwgKz0gYW5zd2VyLmFuc3dlcl9pZDtcbiAgICAgICAgICAgICAgICAgICAgZWR1X2ltcGxlbWVudGF0aW9uX3F1ZXN0aW9uX2NvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJlZHVfZXZhbHVhdGlvblwiOlxuICAgICAgICAgICAgICAgICAgICBlZHVfZXZhbHVhdGlvbl90b3RhbCArPSBhbnN3ZXIuYW5zd2VyX2lkO1xuICAgICAgICAgICAgICAgICAgICBlZHVfZXZhbHVhdGlvbl9xdWVzdGlvbl9jb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwicHJvZmVzc2lvbmFsX2RldlwiOlxuICAgICAgICAgICAgICAgICAgICBwcm9mZXNzaW9uYWxfZGV2X3RvdGFsICs9IGFuc3dlci5hbnN3ZXJfaWQ7XG4gICAgICAgICAgICAgICAgICAgIHByb2Zlc3Npb25hbF9kZXZfcXVlc3Rpb25fY291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInByb2Zlc3Npb25hbF9zb2NpYWxcIjpcbiAgICAgICAgICAgICAgICAgICAgcHJvZmVzc2lvbmFsX3NvY2lhbF90b3RhbCArPSBhbnN3ZXIuYW5zd2VyX2lkO1xuICAgICAgICAgICAgICAgICAgICBwcm9mZXNzaW9uYWxfc29jaWFsX3F1ZXN0aW9uX2NvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcG9pbnRfdG90YWwgPSBwb2ludF90b3RhbCArIGFuc3dlci5hbnN3ZXJfaWQ7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIGJhc2ljX3V0aWxpemF0aW9uX2F2ZyA9IHJvdW5kVG9EZWNpbWFsUGxhY2UoXG4gICAgICAgIGJhc2ljX3V0aWxpemF0aW9uX3RvdGFsIC8gYmFzaWNfdXRpbGl6YXRpb25fcXVlc3Rpb25fY291bnQsXG4gICAgICAgIDFcbiAgICApO1xuICAgIGJhc2ljX3ByYWN0aWNlX2F2ZyA9IHJvdW5kVG9EZWNpbWFsUGxhY2UoXG4gICAgICAgIGJhc2ljX3ByYWN0aWNlX3RvdGFsIC8gYmFzaWNfcHJhY3RpY2VfcXVlc3Rpb25fY291bnQsXG4gICAgICAgIDFcbiAgICApO1xuICAgIGVkdV91c2VfYXZnID0gcm91bmRUb0RlY2ltYWxQbGFjZShcbiAgICAgICAgZWR1X3VzZV90b3RhbCAvIGVkdV91c2VfcXVlc3Rpb25fY291bnQsXG4gICAgICAgIDFcbiAgICApO1xuICAgIGVkdV90ZWFjaGluZ19hdmcgPSByb3VuZFRvRGVjaW1hbFBsYWNlKFxuICAgICAgICBlZHVfdGVhY2hpbmdfdG90YWwgLyBlZHVfdGVhY2hpbmdfcXVlc3Rpb25fY291bnQsXG4gICAgICAgIDFcbiAgICApO1xuICAgIGVkdV9kZXZfYXZnID0gcm91bmRUb0RlY2ltYWxQbGFjZShcbiAgICAgICAgZWR1X2Rldl90b3RhbCAvIGVkdV9kZXZfcXVlc3Rpb25fY291bnQsXG4gICAgICAgIDFcbiAgICApO1xuICAgIGVkdV9pbXBsZW1lbnRhdGlvbl9hdmcgPSByb3VuZFRvRGVjaW1hbFBsYWNlKFxuICAgICAgICBlZHVfaW1wbGVtZW50YXRpb25fdG90YWwgLyBlZHVfaW1wbGVtZW50YXRpb25fcXVlc3Rpb25fY291bnQsXG4gICAgICAgIDFcbiAgICApO1xuICAgIGVkdV9ldmFsdWF0aW9uX2F2ZyA9IHJvdW5kVG9EZWNpbWFsUGxhY2UoXG4gICAgICAgIGVkdV9ldmFsdWF0aW9uX3RvdGFsIC8gZWR1X2V2YWx1YXRpb25fcXVlc3Rpb25fY291bnQsXG4gICAgICAgIDFcbiAgICApO1xuICAgIHByb2Zlc3Npb25hbF9kZXZfYXZnID0gcm91bmRUb0RlY2ltYWxQbGFjZShcbiAgICAgICAgcHJvZmVzc2lvbmFsX2Rldl90b3RhbCAvIHByb2Zlc3Npb25hbF9kZXZfcXVlc3Rpb25fY291bnQsXG4gICAgICAgIDFcbiAgICApO1xuICAgIHByb2Zlc3Npb25hbF9zb2NpYWxfYXZnID0gcm91bmRUb0RlY2ltYWxQbGFjZShcbiAgICAgICAgcHJvZmVzc2lvbmFsX3NvY2lhbF90b3RhbCAvIHByb2Zlc3Npb25hbF9zb2NpYWxfcXVlc3Rpb25fY291bnQsXG4gICAgICAgIDFcbiAgICApO1xuICAgIHpvbmVfYmFzaWNfYXZnID0gcm91bmRUb0RlY2ltYWxQbGFjZShcbiAgICAgICAgKGJhc2ljX3ByYWN0aWNlX3RvdGFsICsgYmFzaWNfdXRpbGl6YXRpb25fdG90YWwpIC9cbiAgICAgICAgICAgIChiYXNpY19wcmFjdGljZV9xdWVzdGlvbl9jb3VudCArIGJhc2ljX3V0aWxpemF0aW9uX3F1ZXN0aW9uX2NvdW50KSxcbiAgICAgICAgMVxuICAgICk7XG4gICAgem9uZV9lZHVfYXZnID0gcm91bmRUb0RlY2ltYWxQbGFjZShcbiAgICAgICAgKGVkdV9kZXZfdG90YWwgK1xuICAgICAgICAgICAgZWR1X3RlYWNoaW5nX3RvdGFsICtcbiAgICAgICAgICAgIGVkdV91c2VfdG90YWwgK1xuICAgICAgICAgICAgZWR1X2ltcGxlbWVudGF0aW9uX3RvdGFsICtcbiAgICAgICAgICAgIGVkdV9ldmFsdWF0aW9uX3RvdGFsKSAvXG4gICAgICAgICAgICAoZWR1X2Rldl9xdWVzdGlvbl9jb3VudCArXG4gICAgICAgICAgICAgICAgZWR1X3RlYWNoaW5nX3F1ZXN0aW9uX2NvdW50ICtcbiAgICAgICAgICAgICAgICBlZHVfdXNlX3F1ZXN0aW9uX2NvdW50ICtcbiAgICAgICAgICAgICAgICBlZHVfaW1wbGVtZW50YXRpb25fcXVlc3Rpb25fY291bnQgK1xuICAgICAgICAgICAgICAgIGVkdV9ldmFsdWF0aW9uX3F1ZXN0aW9uX2NvdW50KSxcbiAgICAgICAgMVxuICAgICk7XG4gICAgem9uZV9wcm9mZXNzaW9uYWxfYXZnID0gcm91bmRUb0RlY2ltYWxQbGFjZShcbiAgICAgICAgKHByb2Zlc3Npb25hbF9kZXZfdG90YWwgKyBwcm9mZXNzaW9uYWxfc29jaWFsX3RvdGFsKSAvXG4gICAgICAgICAgICAocHJvZmVzc2lvbmFsX2Rldl9xdWVzdGlvbl9jb3VudCArXG4gICAgICAgICAgICAgICAgcHJvZmVzc2lvbmFsX3NvY2lhbF9xdWVzdGlvbl9jb3VudCksXG4gICAgICAgIDFcbiAgICApO1xuICAgIHpvbmVfYXZnID0gcm91bmRUb0RlY2ltYWxQbGFjZShcbiAgICAgICAgKHpvbmVfYmFzaWNfYXZnICsgem9uZV9lZHVfYXZnICsgem9uZV9wcm9mZXNzaW9uYWxfYXZnKSAvIDMsXG4gICAgICAgIDFcbiAgICApO1xuICAgIHpvbmVfY29tcGV0ZW5jeV9hdmcgPSByb3VuZFRvRGVjaW1hbFBsYWNlKFxuICAgICAgICAoYmFzaWNfdXRpbGl6YXRpb25fYXZnICtcbiAgICAgICAgICAgIGJhc2ljX3ByYWN0aWNlX2F2ZyArXG4gICAgICAgICAgICBlZHVfdXNlX2F2ZyArXG4gICAgICAgICAgICBlZHVfdGVhY2hpbmdfYXZnICtcbiAgICAgICAgICAgIGVkdV9kZXZfYXZnICtcbiAgICAgICAgICAgIGVkdV9pbXBsZW1lbnRhdGlvbl9hdmcgK1xuICAgICAgICAgICAgZWR1X2V2YWx1YXRpb25fYXZnICtcbiAgICAgICAgICAgIHByb2Zlc3Npb25hbF9kZXZfYXZnICtcbiAgICAgICAgICAgIHByb2Zlc3Npb25hbF9zb2NpYWxfYXZnKSAvXG4gICAgICAgICAgICA5LFxuICAgICAgICAxXG4gICAgKTtcbiAgICBwb2ludF9hdmcgPSByb3VuZFRvRGVjaW1hbFBsYWNlKHBvaW50X3RvdGFsIC8gMzAsIDEpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGJhc2ljX3V0aWxpemF0aW9uX2F2ZyxcbiAgICAgICAgYmFzaWNfcHJhY3RpY2VfYXZnLFxuICAgICAgICBlZHVfdXNlX2F2ZyxcbiAgICAgICAgZWR1X3RlYWNoaW5nX2F2ZyxcbiAgICAgICAgZWR1X2Rldl9hdmcsXG4gICAgICAgIGVkdV9pbXBsZW1lbnRhdGlvbl9hdmcsXG4gICAgICAgIGVkdV9ldmFsdWF0aW9uX2F2ZyxcbiAgICAgICAgcHJvZmVzc2lvbmFsX2Rldl9hdmcsXG4gICAgICAgIHByb2Zlc3Npb25hbF9zb2NpYWxfYXZnLFxuICAgICAgICB6b25lX2NvbXBldGVuY3lfYXZnLFxuICAgICAgICB6b25lX2Jhc2ljX2F2ZyxcbiAgICAgICAgem9uZV9lZHVfYXZnLFxuICAgICAgICB6b25lX3Byb2Zlc3Npb25hbF9hdmcsXG4gICAgICAgIHpvbmVfYXZnLFxuICAgICAgICBwb2ludF9hdmcsXG4gICAgfTtcbn1cbmZ1bmN0aW9uIHJvdW5kVG9EZWNpbWFsUGxhY2UobnVtYmVyLCBkZWNpbWFsUGxhY2VzKSB7XG4gICAgY29uc3QgZmFjdG9yID0gTWF0aC5wb3coMTAsIGRlY2ltYWxQbGFjZXMpO1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG51bWJlciAqIGZhY3RvcikgLyBmYWN0b3I7XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFDRkEsU0FBUztFQUNUQyxVQUFVO0VBQ1ZDLFlBQVk7RUFDWkMsV0FBVztFQUNYQyxhQUFhO0VBQ2JDLGFBQWE7RUFDYkMsYUFBYTtFQUNiQyxjQUFjO0VBQ2RDLGFBQWE7RUFDYkMsZ0JBQWdCO0VBQ2hCQztBQUNKLENBQUMsR0FBR0MsT0FBTyxDQUFDLHVCQUF1QixDQUFDO0FBQ3BDLE1BQU1DLFFBQVEsR0FBR0QsT0FBTyxDQUFDLHlCQUF5QixDQUFDO0FBQ25ELE1BQU07RUFBRUUsS0FBSztFQUFFQyxPQUFPO0VBQUVDLEtBQUs7RUFBRUM7QUFBSyxDQUFDLEdBQUdMLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQztBQUN4RSxNQUFNTSxJQUFJLEdBQUdOLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQztBQUMzQyxNQUFNO0VBQUVPLFlBQVk7RUFBRUM7QUFBZSxDQUFDLEdBQUdSLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQztBQUN6RSxNQUFNO0VBQUVTO0FBQU0sQ0FBQyxHQUFHVCxPQUFPLENBQUMsaUJBQWlCLENBQUM7QUFDNUMsTUFBTVUsTUFBTSxHQUFHVixPQUFPLENBQUMsVUFBVSxDQUFDO0FBRWxDVyxPQUFPLENBQUNDLGFBQWEsR0FBRyxPQUFPO0VBQUVDLEtBQUs7RUFBRUM7QUFBTSxDQUFDLEtBQUs7RUFDaEQsTUFBTUMsTUFBTSxHQUFHLENBQUNGLEtBQUssR0FBRyxDQUFDLElBQUlDLEtBQUs7RUFDbEMsSUFBSUUsS0FBSyxHQUFHO0lBQ1JDLE9BQU8sRUFBRTtFQUNiLENBQUM7RUFFRCxJQUFJSixLQUFLLEVBQUU7SUFDUEcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxHQUFHRCxNQUFNO0VBQzVCO0VBQ0EsSUFBSUQsS0FBSyxFQUFFO0lBQ1BFLEtBQUssQ0FBQyxP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QUMsRUFDekM7SUFBRUQsU0FBUyxFQUFFRCxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQUVFLFdBQVcsRUFBRTtFQUFHLENBQUMsRUFDekM7SUFBRUQsU0FBUyxFQUFFRCxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQUVFLFdBQVcsRUFBRTtFQUFHLENBQUMsRUFDekM7SUFBRUQsU0FBUyxFQUFFRCxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQUVFLFdBQVcsRUFBRTtFQUFHLENBQUMsRUFDekM7SUFBRUQsU0FBUyxFQUFFRCxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQUVFLFdBQVcsRUFBRTtFQUFHLENBQUMsRUFDekM7SUFBRUQsU0FBUyxFQUFFRCxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQUVFLFdBQVcsRUFBRTtFQUFHLENBQUMsRUFDekM7SUFBRUQsU0FBUyxFQUFFRCxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQUVFLFdBQVcsRUFBRTtFQUFHLENBQUMsRUFDekM7SUFBRUQsU0FBUyxFQUFFRCxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQUVFLFdBQVcsRUFBRTtFQUFHLENBQUMsRUFDekM7SUFBRUQsU0FBUyxFQUFFRCxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQUVFLFdBQVcsRUFBRTtFQUFHLENBQUMsRUFDekM7SUFBRUQsU0FBUyxFQUFFRCxNQUFNLENBQUMsRUFBRSxDQUFDO0lBQUVFLFdBQVcsRUFBRTtFQUFHLENBQUMsRUFDMUM7SUFBRUQsU0FBUyxFQUFFRCxNQUFNLENBQUMsRUFBRSxDQUFDO0lBQUVFLFdBQVcsRUFBRTtFQUFHLENBQUMsRUFDMUM7SUFBRUQsU0FBUyxFQUFFRCxNQUFNLENBQUMsRUFBRSxDQUFDO0lBQUVFLFdBQVcsRUFBRTtFQUFHLENBQUMsRUFDMUM7SUFBRUQsU0FBUyxFQUFFRCxNQUFNLENBQUMsRUFBRSxDQUFDO0lBQUVFLFdBQVcsRUFBRTtFQUFHLENBQUMsRUFDMUM7SUFBRUQsU0FBUyxFQUFFRCxNQUFNLENBQUMsRUFBRSxDQUFDO0lBQUVFLFdBQVcsRUFBRTtFQUFHLENBQUMsRUFDMUM7SUFBRUQsU0FBUyxFQUFFRCxNQUFNLENBQUMsRUFBRSxDQUFDO0lBQUVFLFdBQVcsRUFBRTtFQUFFLENBQUMsRUFDekM7SUFBRUQsU0FBUyxFQUFFRCxNQUFNLENBQUMsRUFBRSxDQUFDO0lBQUVFLFdBQVcsRUFBRTtFQUFHLENBQUMsRUFDMUM7SUFBRUQsU0FBUyxFQUFFRCxNQUFNLENBQUMsRUFBRSxDQUFDO0lBQUVFLFdBQVcsRUFBRTtFQUFHLENBQUMsRUFDMUM7SUFBRUQsU0FBUyxFQUFFRCxNQUFNLENBQUMsRUFBRSxDQUFDO0lBQUVFLFdBQVcsRUFBRTtFQUFHLENBQUMsRUFDMUM7SUFBRUQsU0FBUyxFQUFFRCxNQUFNLENBQUMsRUFBRSxDQUFDO0lBQUVFLFdBQVcsRUFBRTtFQUFHLENBQUMsRUFDMUM7SUFBRUQsU0FBUyxFQUFFRCxNQUFNLENBQUMsRUFBRSxDQUFDO0lBQUVFLFdBQVcsRUFBRTtFQUFHLENBQUMsRUFDMUM7SUFBRUQsU0FBUyxFQUFFRCxNQUFNLENBQUMsRUFBRSxDQUFDO0lBQUVFLFdBQVcsRUFBRTtFQUFHLENBQUMsRUFDMUM7SUFBRUQsU0FBUyxFQUFFRCxNQUFNLENBQUMsRUFBRSxDQUFDO0lBQUVFLFdBQVcsRUFBRTtFQUFHLENBQUMsRUFDMUM7SUFBRUQsU0FBUyxFQUFFRCxNQUFNLENBQUMsRUFBRSxDQUFDO0lBQUVFLFdBQVcsRUFBRTtFQUFHLENBQUMsRUFDMUM7SUFBRUQsU0FBUyxFQUFFRCxNQUFNLENBQUMsRUFBRSxDQUFDO0lBQUVFLFdBQVcsRUFBRTtFQUFHLENBQUMsRUFDMUM7SUFBRUQsU0FBUyxFQUFFRCxNQUFNLENBQUMsRUFBRSxDQUFDO0lBQUVFLFdBQVcsRUFBRTtFQUFHLENBQUMsRUFDMUM7SUFBRUQsU0FBUyxFQUFFRCxNQUFNLENBQUMsRUFBRSxDQUFDO0lBQUVFLFdBQVcsRUFBRTtFQUFHLENBQUMsRUFDMUM7SUFBRUQsU0FBUyxFQUFFRCxNQUFNLENBQUMsRUFBRSxDQUFDO0lBQUVFLFdBQVcsRUFBRTtFQUFHLENBQUMsRUFD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","map":{"version":3,"names":["sequelize","QueryTypes","LessonSample","ModelSearch","AiedutechTool","OperationCase","OperationTool","OperationGrade","OperationType","OperationSubject","OperationTopic","require","Wishlist","Topic","Subject","Grade","Type","User","SurveyResult","SurveyQuestion","faker","bcrypt","exports","searchLessons","paged","limit","offset","query","include","count","rows","findAndCountAll","totalPages","Math","ceil","items","totalItems","itemCount","length","itemsPerPage","currentPage","searchOpExp","type","SELECT","searchCaseFilter","modelFilter","searchCase","user_id","data","wishlistTool","findAll","where","attributes","foreignKeyIds","map","item","foreign_key_id","processedData","Promise","all","includes","sno","searchModel","id","findOne","model","as","pdf","process","env","BASIC_URL","pdf_link","getTool","handleSurvey","userId","userNext","searchModels","result","get","plain","grade","dataGrade","name","toolFilter","filterTool","rst","child","row","techTpId","push","parent","techId","filter","aiedutechId","searchTool","searchToolOperations","topics","types","subjects","grades","tools","searchOperations","searchOperation","handleInsertDataOperationCase","Operation","create","title","chasi","difficulty","learning_objectives","achievement_criteria","source","operation_id","topicName","topic","created","findOrCreate","defaults","topic_id","typeName","type_id","subjectName","subject","subject_id","gradeName","grade_id","tool","tool_id","handleInsertSurvey","user","person","fullName","email","internet","social","profile","image","avatar","password","hash","answered","handleFormatAnswered","survey_id","school_level","handleParamDataSurvey","gender","handlePointAnswers","experience","region","number_turn","teacher_type","aiedap_training","teacher_career","education_office","education_office_info","training_selection","key","value","answer","answer_id","question_id","answers","conditionPoint","basic_utilization_avg","basic_utilization_total","basic_utilization_question_count","basic_practice_avg","basic_practice_total","basic_practice_question_count","edu_use_avg","edu_use_total","edu_use_question_count","edu_teaching_avg","edu_teaching_total","edu_teaching_question_count","edu_dev_avg","edu_dev_total","edu_dev_question_count","edu_implementation_avg","edu_implementation_total","edu_implementation_question_count","edu_evaluation_avg","edu_evaluation_total","edu_evaluation_question_count","professional_dev_avg","professional_dev_total","professional_dev_question_count","professional_social_avg","professional_social_total","professional_social_question_count","zone_competency_avg","zone_edu_avg","zone_professional_avg","zone_avg","point_avg","point_total","question","Error","zone_competency","roundToDecimalPlace","zone_basic_avg","number","decimalPlaces","factor","pow","round"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/","sources":["searchService.js"],"sourcesContent":["const {\n    sequelize,\n    QueryTypes,\n    LessonSample,\n    ModelSearch,\n    AiedutechTool,\n    OperationCase,\n    OperationTool,\n    OperationGrade,\n    OperationType,\n    OperationSubject,\n    OperationTopic,\n} = require(\"../models/searchModel\");\nconst Wishlist = require(\"../models/wishlistModel\");\nconst { Topic, Subject, Grade, Type } = require(\"../models/designModel\");\nconst User = require(\"../models/usedModel\");\nconst { SurveyResult, SurveyQuestion } = require(\"../models/surveyModel\");\nconst { faker } = require(\"@faker-js/faker\");\nconst bcrypt = require(\"bcryptjs\");\n\nexports.searchLessons = async ({ paged, limit }) => {\n    const offset = (paged - 1) * limit;\n    let query = {\n        include: \"classTopic\",\n    };\n\n    if (paged) {\n        query[\"offset\"] = offset;\n    }\n    if (limit) {\n        query[\"limit\"] = limit;\n    }\n\n    const { count, rows } = await LessonSample.findAndCountAll(query);\n\n    const totalPages = Math.ceil(count / limit);\n\n    return {\n        items: rows,\n        totalItems: count,\n        itemCount: rows.length,\n        itemsPerPage: limit,\n        totalPages,\n        currentPage: paged,\n    };\n};\n\nexports.searchOpExp = async () => {\n    return await sequelize.query(\n        \"select `sno` as `sno`, `name_kr` as `name`, `name_en` as `nameEn`, `description` as `description`, `case_img` as `img`, `tool_aiedutech`.`name` as `toolTp`, `tech_id` as `tech`, group_concat(op_exp_tech_type.type_id) as 'techTp' from `op_exp` left join `op_exp_tech_type` on `op_exp_tech_type`.`exp_sno` = `op_exp`.`tech_id` left join `tool_aiedutech` on `tool_aiedutech`.`id` = `op_exp`.`tool_id` group by `sno`\",\n        {\n            type: sequelize.QueryTypes.SELECT,\n        }\n    );\n};\nexports.searchCaseFilter = async () => {\n    return await sequelize.query(\n        \"select *, 'topic' as type from `class_topic` union select *, 'type' as type from `class_type` union select *, 'subject' as type from `class_subject` union select *, 'grade' as type from `class_grade`\",\n        {\n            type: sequelize.QueryTypes.SELECT,\n        }\n    );\n};\n\nexports.modelFilter = async () => {\n    return await sequelize.query(\n        \"select *, 'type' as type from `class_type` union select *, 'subject' as type from `class_subject` union select *, 'grade' as type from `class_grade`\",\n        {\n            type: sequelize.QueryTypes.SELECT,\n        }\n    );\n};\nexports.searchCase = async (user_id) => {\n    let data = await sequelize.query(\n        \"select `class_case`.`sno`, `class_case`.`topic`, `class_case`.`objective`, `class_case`.`time`, `class_case`.`topic_id` as `topicTp`, `class_case`.`difficulty`, `class_case`.`achievement`, `class_case`.`source`, `class_case`.`pdf_link` as `pdf`, group_concat(distinct class_case_type.type_id) as 'type', group_concat(distinct class_case_subject.subject_id) as 'subject', group_concat(distinct class_case_grade.grade_id) as 'grade', group_concat(distinct class_case_tool.tool_sno) as 'tool', group_concat(distinct aiedutech_tool.name_kr) as 'toolNm' from `class_case` left join `class_case_type` on `class_case_type`.`case_sno` = `class_case`.`sno` left join `class_case_subject` on `class_case_subject`.`case_sno` = `class_case`.`sno` left join `class_case_grade` on `class_case_grade`.`case_sno` = `class_case`.`sno` left join `class_case_tool` on `class_case_tool`.`case_sno` = `class_case`.`sno` left join `aiedutech_tool` on `class_case_tool`.`tool_sno` = `aiedutech_tool`.`sno` group by `class_case`.`sno`\",\n        {\n            type: sequelize.QueryTypes.SELECT,\n        }\n    );\n    let type = \"lesson\";\n    let wishlistTool = await Wishlist.findAll({\n        where: { user_id, type },\n        attributes: [\"foreign_key_id\"],\n    });\n    let foreignKeyIds = wishlistTool.map((item) => item.foreign_key_id);\n    const processedData = await Promise.all(\n        data.map(async (item) => {\n            item[\"isWishlist\"] = foreignKeyIds.includes(item.sno);\n            return item;\n        })\n    );\n\n    return processedData;\n};\nexports.searchModel = async (id) => {\n    let data = await ModelSearch.findOne({\n        include: [\n            {\n                model: Type,\n                as: \"type\",\n            },\n            {\n                model: Subject,\n                as: \"subject\",\n            },\n        ],\n        where: [id],\n    });\n    if (data != null) {\n        let pdf = process.env.BASIC_URL + \"/image/model/\" + data.pdf_link;\n        data.pdf_link = pdf;\n    }\n\n    return data;\n};\n\nexports.getTool = async (id) => {\n    let data = await AiedutechTool.findOne({\n        where: { sno: id },\n        include: {\n            model: LessonSample,\n            as: \"lessons\",\n        },\n    });\n\n    return data;\n};\nexports.handleSurvey = async () => {\n    let data = await SurveyResult.findAll();\n    let userId = 443;\n    let userNext = 1687;\n\n    // for (let item of data) {\n    //     if (item.id < 1670) {\n    //         if (userId > 1650 && userId < 1686) {\n    //             item.user_id = userNext;\n    //             await item.save({ fields: [\"user_id\"] });\n    //             userNext++;\n    //         } else {\n    //             item.user_id = userId;\n    //             await item.save({ fields: [\"user_id\"] });\n    //             userId++;\n    //         }\n    //     }\n    // }\n\n    return data;\n};\nexports.searchModels = async (user_id) => {\n    let data = await ModelSearch.findAll({\n        include: [\n            {\n                model: Type,\n                as: \"type\",\n            },\n            {\n                model: Subject,\n                as: \"subject\",\n            },\n        ],\n    });\n    let type = \"model\";\n    let wishlistTool = await Wishlist.findAll({\n        where: { user_id, type },\n        attributes: [\"foreign_key_id\"],\n    });\n    let foreignKeyIds = wishlistTool.map((item) => item.foreign_key_id);\n    data = data.map((result) => result.get({ plain: true }));\n    //convert pdf link\n    const processedData = await Promise.all(\n        data.map(async (item) => {\n            // Update the pdf_link\n            let pdf = process.env.BASIC_URL + \"/image/model/\" + item.pdf_link;\n            item.pdf_link = pdf;\n\n            // Process grades\n            if (item.grade) {\n                let dataGrade = await Promise.all(\n                    item.grade.map(async (name) => {\n                        return await Grade.findOne({\n                            where: { name },\n                        });\n                    })\n                );\n                item.grade = dataGrade;\n            }\n            item[\"isWishlist\"] = foreignKeyIds.includes(item.id);\n            return item;\n        })\n    );\n\n    return processedData;\n};\nexports.toolFilter = async () => {\n    let data = await sequelize.query(\n        \"select `tool_aiedutech_tech_type`.`tool_aiedutech_tech_id` as `techId`, `tool_aiedutech_tech_type`.`name` as `name`, `tool_aiedutech_tech`.`tool_aiedutech_id` as `aiedutechId`, `tool_aiedutech_tech_type`.`id` as `techTpId` from `tool_aiedutech_tech_type` inner join `tool_aiedutech_tech` on `tool_aiedutech_tech`.`id` = `tool_aiedutech_tech_type`.`tool_aiedutech_tech_id` union select `tool_aiedutech_tech`.`id` as `techId`, `tool_aiedutech_tech`.`name` as `name`, `tool_aiedutech_tech`.`tool_aiedutech_id` as `aiedutechId`, '' as techTpId from `tool_aiedutech_tech` order by `aiedutechId` asc, `techId` asc\",\n        {\n            type: sequelize.QueryTypes.SELECT,\n        }\n    );\n    return filterTool(data);\n};\nconst filterTool = (data) => {\n    let rst = [];\n    let child = [];\n    for (const row of data) {\n        if (row.techTpId === \"\") {\n            rst.push(row);\n        } else {\n            child.push(row);\n        }\n    }\n\n    for (const row of child) {\n        for (const parent of rst) {\n            if (row.techId === parent.techId) {\n                if (parent.child) {\n                    parent.child.push(row);\n                } else {\n                    parent.child = [row];\n                }\n            }\n        }\n    }\n    return [\n        rst.filter((row) => row.aiedutechId === 1),\n        rst.filter((row) => row.aiedutechId === 2),\n    ];\n};\n\nexports.searchTool = async (user_id) => {\n    let data = await sequelize.query(\n        \"select `sno` as `sno`, `name_kr` as `name`, `name_en` as `nameEn`, `description` as `description`, `case_img` as `img`, `tool_aiedutech`.`name` as `toolTp`, `tech_id` as `tech`, group_concat(aiedutech_tool_tech_type.type_id) as 'techTp' from `aiedutech_tool` left join `aiedutech_tool_tech_type` on `aiedutech_tool_tech_type`.`tool_id` = `aiedutech_tool`.`sno` inner join `tool_aiedutech` on `tool_aiedutech`.`id` = `aiedutech_tool`.`tool_id` group by `sno`\",\n        {\n            type: sequelize.QueryTypes.SELECT,\n        }\n    );\n    let type = \"tool\";\n    let wishlistTool = await Wishlist.findAll({\n        where: { user_id, type },\n        attributes: [\"foreign_key_id\"],\n    });\n    let foreignKeyIds = wishlistTool.map((item) => item.foreign_key_id);\n    const processedData = await Promise.all(\n        data.map(async (item) => {\n            item[\"isWishlist\"] = foreignKeyIds.includes(item.sno);\n            return item;\n        })\n    );\n\n    return processedData;\n};\nexports.searchToolOperations = async () => {\n    let topics = await Topic.findAll();\n    let types = await Type.findAll();\n    let subjects = await Subject.findAll();\n    let grades = await Grade.findAll();\n    let tools = await AiedutechTool.findAll({\n        attributes: [\"sno\", \"name_kr\", \"name_en\", \"tech_id\"],\n    });\n    return { topics, types, subjects, grades, tools };\n};\n//Operations\nexports.searchOperations = async (user_id) => {\n    let data = await OperationCase.findAll({\n        include: [\n            { model: Topic, as: \"topics\" },\n            { model: Type, as: \"types\" },\n            { model: Subject, as: \"subjects\" },\n            { model: Grade, as: \"grades\" },\n            { model: AiedutechTool, as: \"tools\" },\n        ],\n    });\n    let type = \"operation\";\n    let wishlistTool = await Wishlist.findAll({\n        where: { user_id, type },\n        attributes: [\"foreign_key_id\"],\n    });\n    let foreignKeyIds = wishlistTool.map((item) => item.foreign_key_id);\n    data = data.map((result) => result.get({ plain: true }));\n    //convert pdf link\n    const processedData = await Promise.all(\n        data.map((item) => {\n            let pdf =\n                process.env.BASIC_URL + \"/image/operation/\" + item.pdf_link;\n            item.pdf_link = pdf;\n            item[\"isWishlist\"] = foreignKeyIds.includes(item.id);\n            return item;\n        })\n    );\n    return processedData;\n};\nexports.searchOperation = async (id) => {\n    let data = await OperationCase.findOne({\n        include: [\n            { model: Topic, as: \"topics\" },\n            { model: Type, as: \"types\" },\n            { model: Subject, as: \"subjects\" },\n            { model: Grade, as: \"grades\" },\n            { model: AiedutechTool, as: \"tools\" },\n        ],\n        where: { id },\n    });\n    //convert pdf link\n\n    let pdf = process.env.BASIC_URL + \"/image/operation/\" + data.pdf_link;\n    data.pdf_link = pdf;\n\n    return data;\n};\n\nexports.handleInsertDataOperationCase = async (data) => {\n    await Promise.all(\n        data.map(async (item) => {\n            //insert operation_case\n            const Operation = await OperationCase.create({\n                id: null,\n                title: item.name,\n                chasi: item.chasi,\n                difficulty: item.difficulty,\n                learning_objectives: item.learning_objectives,\n                achievement_criteria: item.achievement_criteria,\n                source: item.source,\n                pdf_link: item.pdf,\n                source: item.source,\n            });\n            let operation_id = Operation.id;\n            if (operation_id) {\n                //topic\n                item[\"class_topic\"].map(async (topicName) => {\n                    const [topic, created] = await Topic.findOrCreate({\n                        where: { name: topicName },\n                        defaults: {\n                            id: null,\n                            name: topicName,\n                        },\n                    });\n                    let topic_id = topic.id;\n                    if (topic_id) {\n                        OperationTopic.create({\n                            id: null,\n                            topic_id,\n                            operation_id,\n                        });\n                    }\n                });\n            }\n            if (operation_id) {\n                //type\n                item[\"class_type\"].map(async (typeName) => {\n                    const [type, created] = await Type.findOrCreate({\n                        where: { name: typeName },\n                        defaults: {\n                            id: null,\n                            name: typeName,\n                        },\n                    });\n                    let type_id = type.id;\n                    if (type_id) {\n                        OperationType.create({\n                            id: null,\n                            type_id,\n                            operation_id,\n                        });\n                    }\n                });\n            }\n            if (operation_id) {\n                //subject\n                item[\"class_subject\"].map(async (subjectName) => {\n                    const [subject, created] = await Topic.findOrCreate({\n                        where: { name: subjectName },\n                        defaults: {\n                            id: null,\n                            name: subjectName,\n                        },\n                    });\n                    let subject_id = subject.id;\n                    if (subject_id) {\n                        OperationSubject.create({\n                            id: null,\n                            subject_id,\n                            operation_id,\n                        });\n                    }\n                });\n            }\n            if (operation_id) {\n                //grade\n                item[\"class_grade\"].map(async (gradeName) => {\n                    const [grade, created] = await Grade.findOrCreate({\n                        where: { name: gradeName },\n                        defaults: {\n                            id: null,\n                            name: gradeName,\n                        },\n                    });\n                    let grade_id = grade.id;\n                    if (grade_id) {\n                        OperationGrade.create({\n                            id: null,\n                            grade_id,\n                            operation_id,\n                        });\n                    }\n                });\n            }\n            if (operation_id && item[\"artificial_intelligence_tools\"]) {\n                //tool\n                item[\"artificial_intelligence_tools\"].map(async (id) => {\n                    const tool = await AiedutechTool.findOne({\n                        where: { sno: id },\n                    });\n\n                    if (tool) {\n                        OperationTool.create({\n                            id: null,\n                            tool_id: id,\n                            operation_id: operation_id,\n                        });\n                    }\n                });\n            }\n        })\n    );\n};\nexports.handleInsertSurvey = async (data) => {\n    await Promise.all(\n        data.map(async (item) => {\n            //fake user\n\n            let user = await User.create({\n                id: null,\n                name: faker.person.fullName(),\n                email: faker.internet.email(),\n                social: 0,\n                profile: faker.image.avatar(),\n                password: await bcrypt.hash(\"123\", 8),\n            });\n            if (user.id) {\n                let answered = handleFormatAnswered([\n                    item[9],\n                    item[10],\n                    item[11],\n                    item[12],\n                    item[13],\n                    item[14],\n                    item[15],\n                    item[16],\n                    item[17],\n                    item[18],\n                    item[19],\n                    item[20],\n                    item[21],\n                    item[22],\n                    item[23],\n                    item[24],\n                    item[25],\n                    item[26],\n                    item[27],\n                    item[28],\n                    item[29],\n                    item[30],\n                    item[31],\n                    item[32],\n                    item[33],\n                    item[34],\n                    item[35],\n                    item[36],\n                    item[37],\n                    item[38],\n                ]);\n                await SurveyResult.create({\n                    id: null,\n                    survey_id: 3,\n                    answered: answered,\n                    school_level: handleParamDataSurvey(\n                        \"school_level\",\n                        item[2]\n                    ),\n                    gender: handleParamDataSurvey(\"gender\", item[1]),\n                    result: await handlePointAnswers(answered),\n                    user_id: user.id,\n                    experience: handleParamDataSurvey(\"gender\", item[1]),\n                    region: handleParamDataSurvey(\"region\", item[6]),\n                    number_turn: 1,\n                    teacher_type: handleParamDataSurvey(\n                        \"teacher_type\",\n                        item[7]\n                    ),\n                    aiedap_training: handleParamDataSurvey(\n                        \"aiedap_training\",\n                        item[5]\n                    ),\n                    teacher_career: handleParamDataSurvey(\n                        \"teacher_career\",\n                        item[4]\n                    ),\n                    subject: handleParamDataSurvey(\"subject\", item[8]),\n                    education_office: handleParamDataSurvey(\n                        \"education_office\",\n                        item[3]\n                    ),\n                    education_office_info: \"\",\n                    training_selection: \"\",\n                });\n            }\n        })\n    );\n};\nfunction handleParamDataSurvey(key, value) {\n    if (key == \"gender\") return value == 1 ? 1 : 0;\n    if (key == \"school_level\") {\n        switch (value) {\n            case 1:\n                return \"elementary_school\";\n            case 2:\n                return \"middle_school\";\n            case 3:\n                return \"high_school\";\n        }\n    }\n    if (key == \"education_office\") {\n        switch (value) {\n            case 1:\n                return \"gangwon\";\n            case 2:\n                return \"gyeonggi\";\n            case 3:\n                return \"gyeongnam\";\n            case 4:\n                return \"gyeongbuk\";\n            case 5:\n                return \"daegu\";\n            case 6:\n                return \"daejeon\";\n            case 7:\n                return \"busan\";\n            case 8:\n                return \"seoul\";\n            case 9:\n                return \"sejong\";\n            case 10:\n                return \"ulsan\";\n            case 11:\n                return \"jeonbuk\";\n            case 12:\n                return \"chungnam\";\n            case 13:\n                return \"chungbuk\";\n        }\n    }\n    if (key == \"teacher_career\") {\n        switch (value) {\n            case 1:\n                return \"0_1\";\n            case 2:\n                return \"1_6\";\n            case 3:\n                return \"6_11\";\n            case 4:\n                return \"11_21\";\n            case 5:\n                return \"21_31\";\n            case 6:\n                return \"31_100\";\n        }\n    }\n    if (key == \"aiedap_training\") {\n        switch (value) {\n            case 1:\n                return \"not_attended\";\n            case 2:\n                return \"attended\";\n        }\n    }\n    if (key == \"region\") {\n        switch (value) {\n            case 1:\n                return \"metropolitan_area\";\n            case 2:\n                return \"kyung_pook\";\n            case 3:\n                return \"kyung_nam\";\n            case 4:\n                return \"choong_chung\";\n            case 5:\n                return \"jun_nam\";\n        }\n    }\n    if (key == \"teacher_type\") {\n        switch (value) {\n            case 1:\n                return \"general_teacher\";\n            case 2:\n                return \"leader_teacher\";\n            case 3:\n                return \"master_teacher\";\n        }\n    }\n    if (key == \"subject\") {\n        switch (value) {\n            case 1:\n                return \"information\";\n            case 2:\n                return \"korean\";\n            case 3:\n                return \"math\";\n            case 4:\n                return \"english\";\n            case 5:\n                return \"society\";\n            case 6:\n                return \"science\";\n            case 7:\n                return \"career\";\n            case 8:\n                return \"art\";\n        }\n    }\n}\nfunction handleFormatAnswered(answer) {\n    return [\n        { answer_id: answer[0], question_id: 35 },\n        { answer_id: answer[1], question_id: 48 },\n        { answer_id: answer[2], question_id: 46 },\n        { answer_id: answer[3], question_id: 36 },\n        { answer_id: answer[4], question_id: 45 },\n        { answer_id: answer[5], question_id: 53 },\n        { answer_id: answer[6], question_id: 52 },\n        { answer_id: answer[7], question_id: 44 },\n        { answer_id: answer[8], question_id: 59 },\n        { answer_id: answer[9], question_id: 38 },\n        { answer_id: answer[10], question_id: 55 },\n        { answer_id: answer[11], question_id: 54 },\n        { answer_id: answer[12], question_id: 50 },\n        { answer_id: answer[13], question_id: 47 },\n        { answer_id: answer[14], question_id: 49 },\n        { answer_id: answer[15], question_id: 1 },\n        { answer_id: answer[16], question_id: 57 },\n        { answer_id: answer[17], question_id: 51 },\n        { answer_id: answer[18], question_id: 61 },\n        { answer_id: answer[19], question_id: 58 },\n        { answer_id: answer[20], question_id: 62 },\n        { answer_id: answer[21], question_id: 60 },\n        { answer_id: answer[22], question_id: 56 },\n        { answer_id: answer[23], question_id: 40 },\n        { answer_id: answer[24], question_id: 39 },\n        { answer_id: answer[25], question_id: 43 },\n        { answer_id: answer[26], question_id: 42 },\n        { answer_id: answer[27], question_id: 34 },\n        { answer_id: answer[28], question_id: 42 },\n        { answer_id: answer[29], question_id: 41 },\n    ];\n}\nasync function handlePointAnswers(answers) {\n    //condition\n    let conditionPoint = 6;\n    let basic_utilization_avg = 0;\n    let basic_utilization_total = 0;\n    let basic_utilization_question_count = 0;\n    //\n    let basic_practice_avg = 0;\n    let basic_practice_total = 0;\n    let basic_practice_question_count = 0;\n    //\n    let edu_use_avg = 0;\n    let edu_use_total = 0;\n    let edu_use_question_count = 0;\n    //\n    let edu_teaching_avg = 0;\n    let edu_teaching_total = 0;\n    let edu_teaching_question_count = 0;\n    //\n    let edu_dev_avg = 0;\n    let edu_dev_total = 0;\n    let edu_dev_question_count = 0;\n    //\n    let edu_implementation_avg = 0;\n    let edu_implementation_total = 0;\n    let edu_implementation_question_count = 0;\n    //\n    let edu_evaluation_avg = 0;\n    let edu_evaluation_total = 0;\n    let edu_evaluation_question_count = 0;\n    //\n    let professional_dev_avg = 0;\n    let professional_dev_total = 0;\n    let professional_dev_question_count = 0;\n    //\n    let professional_social_avg = 0;\n    let professional_social_total = 0;\n    let professional_social_question_count = 0;\n    //\n    let zone_competency_avg = 0;\n    let zone_edu_avg = 0;\n    let zone_professional_avg = 0;\n    let zone_avg = 0;\n\n    //\n    let point_avg = 0;\n    let point_total = 0;\n\n    await Promise.all(\n        answers.map(async (answer) => {\n            //find question\n            let question = await SurveyQuestion.findOne({\n                attributes: [\"zone_competency\"],\n                where: { id: answer.question_id },\n            });\n            if (question == null) {\n                throw new Error(\"The question not exist!\");\n            }\n\n            switch (question.zone_competency) {\n                case \"basic_utilization\":\n                    basic_utilization_total += answer.answer_id;\n                    basic_utilization_question_count++;\n                    break;\n                case \"basic_practice\":\n                    basic_practice_total += answer.answer_id;\n                    basic_practice_question_count++;\n                    break;\n                case \"edu_use\":\n                    edu_use_total += answer.answer_id;\n                    edu_use_question_count++;\n                    break;\n                case \"edu_teaching\":\n                    edu_teaching_total += answer.answer_id;\n                    edu_teaching_question_count++;\n                    break;\n                case \"edu_dev\":\n                    edu_dev_total += answer.answer_id;\n                    edu_dev_question_count++;\n                    break;\n                case \"edu_implementation\":\n                    edu_implementation_total += answer.answer_id;\n                    edu_implementation_question_count++;\n                    break;\n                case \"edu_evaluation\":\n                    edu_evaluation_total += answer.answer_id;\n                    edu_evaluation_question_count++;\n                    break;\n                case \"professional_dev\":\n                    professional_dev_total += answer.answer_id;\n                    professional_dev_question_count++;\n                    break;\n                case \"professional_social\":\n                    professional_social_total += answer.answer_id;\n                    professional_social_question_count++;\n                    break;\n            }\n            point_total = point_total + answer.answer_id;\n        })\n    );\n\n    basic_utilization_avg = roundToDecimalPlace(\n        basic_utilization_total / basic_utilization_question_count,\n        1\n    );\n    basic_practice_avg = roundToDecimalPlace(\n        basic_practice_total / basic_practice_question_count,\n        1\n    );\n    edu_use_avg = roundToDecimalPlace(\n        edu_use_total / edu_use_question_count,\n        1\n    );\n    edu_teaching_avg = roundToDecimalPlace(\n        edu_teaching_total / edu_teaching_question_count,\n        1\n    );\n    edu_dev_avg = roundToDecimalPlace(\n        edu_dev_total / edu_dev_question_count,\n        1\n    );\n    edu_implementation_avg = roundToDecimalPlace(\n        edu_implementation_total / edu_implementation_question_count,\n        1\n    );\n    edu_evaluation_avg = roundToDecimalPlace(\n        edu_evaluation_total / edu_evaluation_question_count,\n        1\n    );\n    professional_dev_avg = roundToDecimalPlace(\n        professional_dev_total / professional_dev_question_count,\n        1\n    );\n    professional_social_avg = roundToDecimalPlace(\n        professional_social_total / professional_social_question_count,\n        1\n    );\n    zone_basic_avg = roundToDecimalPlace(\n        (basic_practice_total + basic_utilization_total) /\n            (basic_practice_question_count + basic_utilization_question_count),\n        1\n    );\n    zone_edu_avg = roundToDecimalPlace(\n        (edu_dev_total +\n            edu_teaching_total +\n            edu_use_total +\n            edu_implementation_total +\n            edu_evaluation_total) /\n            (edu_dev_question_count +\n                edu_teaching_question_count +\n                edu_use_question_count +\n                edu_implementation_question_count +\n                edu_evaluation_question_count),\n        1\n    );\n    zone_professional_avg = roundToDecimalPlace(\n        (professional_dev_total + professional_social_total) /\n            (professional_dev_question_count +\n                professional_social_question_count),\n        1\n    );\n    zone_avg = roundToDecimalPlace(\n        (zone_basic_avg + zone_edu_avg + zone_professional_avg) / 3,\n        1\n    );\n    zone_competency_avg = roundToDecimalPlace(\n        (basic_utilization_avg +\n            basic_practice_avg +\n            edu_use_avg +\n            edu_teaching_avg +\n            edu_dev_avg +\n            edu_implementation_avg +\n            edu_evaluation_avg +\n            professional_dev_avg +\n            professional_social_avg) /\n            9,\n        1\n    );\n    point_avg = roundToDecimalPlace(point_total / 30, 1);\n    return {\n        basic_utilization_avg,\n        basic_practice_avg,\n        edu_use_avg,\n        edu_teaching_avg,\n        edu_dev_avg,\n        edu_implementation_avg,\n        edu_evaluation_avg,\n        professional_dev_avg,\n        professional_social_avg,\n        zone_competency_avg,\n        zone_basic_avg,\n        zone_edu_avg,\n        zone_professional_avg,\n        zone_avg,\n        point_avg,\n    };\n}\nfunction roundToDecimalPlace(number, decimalPlaces) {\n    const factor = Math.pow(10, decimalPlaces);\n    return Math.round(number * factor) / factor;\n}\n"],"mappings":"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","ignoreList":[]}},"mtime":1721361366267},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/surveyModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:development":{"value":{"code":"const {\n  DataTypes,\n  Sequelize,\n  Op\n} = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = require(\"../models/usedModel\");\nconst Survey = sequelize.define(\"Survey\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  title: DataTypes.TEXT,\n  description: DataTypes.TEXT,\n  type: {\n    type: DataTypes.ENUM(\"basic\", \"in_depth\"),\n    defaultValue: \"basic\"\n  },\n  author_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"user_info\"\n      },\n      // provide table name\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  created_at: DataTypes.DATE\n}, {\n  timestamps: false,\n  createdAt: \"created_at\",\n  tableName: \"survey\",\n  modelName: \"survey\"\n});\nconst SurveyQuestion = sequelize.define(\"SurveyQuestion\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  survey_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"survey\"\n      },\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  zone: {\n    type: DataTypes.ENUM(\"basic\", \"edu\", \"professional\"),\n    defaultValue: \"basic\"\n  },\n  zone_competency: DataTypes.TEXT,\n  title: DataTypes.TEXT,\n  description: DataTypes.TEXT,\n  answers: DataTypes.JSON,\n  order: DataTypes.INTEGER,\n  author_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"user_info\"\n      },\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  created_at: DataTypes.DATE\n}, {\n  timestamps: false,\n  createdAt: \"created_at\",\n  tableName: \"survey_question\",\n  modelName: \"surveyQuestion\"\n});\nconst SurveyResult = sequelize.define(\"SurveyResult\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  user_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"user_info\"\n      },\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  survey_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"survey\"\n      },\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  number_turn: DataTypes.INTEGER,\n  answered: DataTypes.JSON,\n  result: DataTypes.JSON,\n  school_level: DataTypes.TEXT,\n  experience: DataTypes.TEXT,\n  gender: DataTypes.INTEGER,\n  region: DataTypes.TEXT,\n  is_last_time: DataTypes.INTEGER,\n  aiedap_training: DataTypes.TEXT,\n  teacher_career: DataTypes.TEXT,\n  teacher_type: DataTypes.TEXT,\n  subject: DataTypes.TEXT,\n  education_office: DataTypes.TEXT,\n  education_office_info: DataTypes.TEXT,\n  training_selection: DataTypes.TEXT,\n  created_date: DataTypes.DATE\n}, {\n  timestamps: false,\n  createdAt: \"created_at\",\n  tableName: \"survey_result\",\n  modelName: \"SurveyResult\"\n});\nSurveyQuestion.belongsTo(Survey, {\n  foreignKey: \"survey_id\",\n  as: \"survey\"\n});\nSurveyResult.belongsTo(Survey, {\n  foreignKey: \"survey_id\",\n  as: \"survey\"\n});\nSurvey.belongsTo(User, {\n  foreignKey: \"author_id\",\n  as: \"user\"\n});\nSurveyResult.belongsTo(User, {\n  foreignKey: \"user_id\",\n  as: \"user\"\n});\nSurveyQuestion.belongsTo(User, {\n  foreignKey: \"author_id\",\n  as: \"user\"\n});\nmodule.exports = {\n  Survey,\n  SurveyQuestion,\n  SurveyResult,\n  sequelize,\n  Sequelize,\n  Op\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEYXRhVHlwZXMiLCJTZXF1ZWxpemUiLCJPcCIsInJlcXVpcmUiLCJzZXF1ZWxpemUiLCJVc2VyIiwiU3VydmV5IiwiZGVmaW5lIiwiaWQiLCJ0eXBlIiwiSU5URUdFUiIsImF1dG9JbmNyZW1lbnQiLCJwcmltYXJ5S2V5IiwiYWxsb3dOdWxsIiwidGl0bGUiLCJURVhUIiwiZGVzY3JpcHRpb24iLCJFTlVNIiwiZGVmYXVsdFZhbHVlIiwiYXV0aG9yX2lkIiwicmVmZXJlbmNlcyIsIm1vZGVsIiwidGFibGVOYW1lIiwia2V5Iiwib25VcGRhdGUiLCJvbkRlbGV0ZSIsImNyZWF0ZWRfYXQiLCJEQVRFIiwidGltZXN0YW1wcyIsImNyZWF0ZWRBdCIsIm1vZGVsTmFtZSIsIlN1cnZleVF1ZXN0aW9uIiwic3VydmV5X2lkIiwiem9uZSIsInpvbmVfY29tcGV0ZW5jeSIsImFuc3dlcnMiLCJKU09OIiwib3JkZXIiLCJTdXJ2ZXlSZXN1bHQiLCJ1c2VyX2lkIiwibnVtYmVyX3R1cm4iLCJhbnN3ZXJlZCIsInJlc3VsdCIsInNjaG9vbF9sZXZlbCIsImV4cGVyaWVuY2UiLCJnZW5kZXIiLCJyZWdpb24iLCJpc19sYXN0X3RpbWUiLCJhaWVkYXBfdHJhaW5pbmciLCJ0ZWFjaGVyX2NhcmVlciIsInRlYWNoZXJfdHlwZSIsInN1YmplY3QiLCJlZHVjYXRpb25fb2ZmaWNlIiwiZWR1Y2F0aW9uX29mZmljZV9pbmZvIiwidHJhaW5pbmdfc2VsZWN0aW9uIiwiY3JlYXRlZF9kYXRlIiwiYmVsb25nc1RvIiwiZm9yZWlnbktleSIsImFzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL21vZGVscy8iLCJzb3VyY2VzIjpbInN1cnZleU1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgRGF0YVR5cGVzLCBTZXF1ZWxpemUsIE9wIH0gPSByZXF1aXJlKFwic2VxdWVsaXplXCIpO1xuY29uc3Qgc2VxdWVsaXplID0gcmVxdWlyZShcIi4uL2NvbmZpZy9kYXRhYmFzZVwiKTtcbmNvbnN0IFVzZXIgPSByZXF1aXJlKFwiLi4vbW9kZWxzL3VzZWRNb2RlbFwiKTtcbmNvbnN0IFN1cnZleSA9IHNlcXVlbGl6ZS5kZWZpbmUoXG4gICAgXCJTdXJ2ZXlcIixcbiAgICB7XG4gICAgICAgIGlkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICB0aXRsZTogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgdHlwZToge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLkVOVU0oXCJiYXNpY1wiLCBcImluX2RlcHRoXCIpLFxuICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBcImJhc2ljXCIsXG4gICAgICAgIH0sXG4gICAgICAgIGF1dGhvcl9pZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICAgICAgbW9kZWw6IHsgdGFibGVOYW1lOiBcInVzZXJfaW5mb1wiIH0sIC8vIHByb3ZpZGUgdGFibGUgbmFtZVxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgICAgICBvblVwZGF0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgICAgICBvbkRlbGV0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgIH0sXG4gICAgICAgIGNyZWF0ZWRfYXQ6IERhdGFUeXBlcy5EQVRFLFxuICAgIH0sXG4gICAge1xuICAgICAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICAgICAgY3JlYXRlZEF0OiBcImNyZWF0ZWRfYXRcIixcbiAgICAgICAgdGFibGVOYW1lOiBcInN1cnZleVwiLFxuICAgICAgICBtb2RlbE5hbWU6IFwic3VydmV5XCIsXG4gICAgfVxuKTtcblxuY29uc3QgU3VydmV5UXVlc3Rpb24gPSBzZXF1ZWxpemUuZGVmaW5lKFxuICAgIFwiU3VydmV5UXVlc3Rpb25cIixcbiAgICB7XG4gICAgICAgIGlkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBzdXJ2ZXlfaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiB7IHRhYmxlTmFtZTogXCJzdXJ2ZXlcIiB9LFxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgICAgICBvblVwZGF0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgICAgICBvbkRlbGV0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgIH0sXG4gICAgICAgIHpvbmU6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5FTlVNKFwiYmFzaWNcIiwgXCJlZHVcIiwgXCJwcm9mZXNzaW9uYWxcIiksXG4gICAgICAgICAgICBkZWZhdWx0VmFsdWU6IFwiYmFzaWNcIixcbiAgICAgICAgfSxcbiAgICAgICAgem9uZV9jb21wZXRlbmN5OiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgdGl0bGU6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBkZXNjcmlwdGlvbjogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIGFuc3dlcnM6IERhdGFUeXBlcy5KU09OLFxuICAgICAgICBvcmRlcjogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIGF1dGhvcl9pZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICAgICAgbW9kZWw6IHsgdGFibGVOYW1lOiBcInVzZXJfaW5mb1wiIH0sXG4gICAgICAgICAgICAgICAga2V5OiBcImlkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgICAgIG9uVXBkYXRlOiBcImNhc2NhZGVcIixcbiAgICAgICAgICAgIG9uRGVsZXRlOiBcImNhc2NhZGVcIixcbiAgICAgICAgfSxcbiAgICAgICAgY3JlYXRlZF9hdDogRGF0YVR5cGVzLkRBVEUsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgICAgICBjcmVhdGVkQXQ6IFwiY3JlYXRlZF9hdFwiLFxuICAgICAgICB0YWJsZU5hbWU6IFwic3VydmV5X3F1ZXN0aW9uXCIsXG4gICAgICAgIG1vZGVsTmFtZTogXCJzdXJ2ZXlRdWVzdGlvblwiLFxuICAgIH1cbik7XG5cbmNvbnN0IFN1cnZleVJlc3VsdCA9IHNlcXVlbGl6ZS5kZWZpbmUoXG4gICAgXCJTdXJ2ZXlSZXN1bHRcIixcbiAgICB7XG4gICAgICAgIGlkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICB1c2VyX2lkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogeyB0YWJsZU5hbWU6IFwidXNlcl9pbmZvXCIgfSxcbiAgICAgICAgICAgICAgICBrZXk6IFwiaWRcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICAgICAgb25VcGRhdGU6IFwiY2FzY2FkZVwiLFxuICAgICAgICAgICAgb25EZWxldGU6IFwiY2FzY2FkZVwiLFxuICAgICAgICB9LFxuICAgICAgICBzdXJ2ZXlfaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiB7IHRhYmxlTmFtZTogXCJzdXJ2ZXlcIiB9LFxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgICAgICBvblVwZGF0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgICAgICBvbkRlbGV0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgIH0sXG4gICAgICAgIG51bWJlcl90dXJuOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgYW5zd2VyZWQ6IERhdGFUeXBlcy5KU09OLFxuICAgICAgICByZXN1bHQ6IERhdGFUeXBlcy5KU09OLFxuICAgICAgICBzY2hvb2xfbGV2ZWw6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBleHBlcmllbmNlOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgZ2VuZGVyOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgcmVnaW9uOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgaXNfbGFzdF90aW1lOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgYWllZGFwX3RyYWluaW5nOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgdGVhY2hlcl9jYXJlZXI6IERhdGFUeXBlcy5URVhULFxuICAgICAgICB0ZWFjaGVyX3R5cGU6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBzdWJqZWN0OiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgZWR1Y2F0aW9uX29mZmljZTogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIGVkdWNhdGlvbl9vZmZpY2VfaW5mbzogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIHRyYWluaW5nX3NlbGVjdGlvbjogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIGNyZWF0ZWRfZGF0ZTogRGF0YVR5cGVzLkRBVEUsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgICAgICBjcmVhdGVkQXQ6IFwiY3JlYXRlZF9hdFwiLFxuICAgICAgICB0YWJsZU5hbWU6IFwic3VydmV5X3Jlc3VsdFwiLFxuICAgICAgICBtb2RlbE5hbWU6IFwiU3VydmV5UmVzdWx0XCIsXG4gICAgfVxuKTtcblxuU3VydmV5UXVlc3Rpb24uYmVsb25nc1RvKFN1cnZleSwge1xuICAgIGZvcmVpZ25LZXk6IFwic3VydmV5X2lkXCIsXG4gICAgYXM6IFwic3VydmV5XCIsXG59KTtcblN1cnZleVJlc3VsdC5iZWxvbmdzVG8oU3VydmV5LCB7XG4gICAgZm9yZWlnbktleTogXCJzdXJ2ZXlfaWRcIixcbiAgICBhczogXCJzdXJ2ZXlcIixcbn0pO1xuU3VydmV5LmJlbG9uZ3NUbyhVc2VyLCB7XG4gICAgZm9yZWlnbktleTogXCJhdXRob3JfaWRcIixcbiAgICBhczogXCJ1c2VyXCIsXG59KTtcblN1cnZleVJlc3VsdC5iZWxvbmdzVG8oVXNlciwge1xuICAgIGZvcmVpZ25LZXk6IFwidXNlcl9pZFwiLFxuICAgIGFzOiBcInVzZXJcIixcbn0pO1xuXG5TdXJ2ZXlRdWVzdGlvbi5iZWxvbmdzVG8oVXNlciwge1xuICAgIGZvcmVpZ25LZXk6IFwiYXV0aG9yX2lkXCIsXG4gICAgYXM6IFwidXNlclwiLFxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIFN1cnZleSxcbiAgICBTdXJ2ZXlRdWVzdGlvbixcbiAgICBTdXJ2ZXlSZXN1bHQsXG4gICAgc2VxdWVsaXplLFxuICAgIFNlcXVlbGl6ZSxcbiAgICBPcCxcbn07XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUEsU0FBUztFQUFFQyxTQUFTO0VBQUVDO0FBQUcsQ0FBQyxHQUFHQyxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQ3pELE1BQU1DLFNBQVMsR0FBR0QsT0FBTyxDQUFDLG9CQUFvQixDQUFDO0FBQy9DLE1BQU1FLElBQUksR0FBR0YsT0FBTyxDQUFDLHFCQUFxQixDQUFDO0FBQzNDLE1BQU1HLE1BQU0sR0FBR0YsU0FBUyxDQUFDRyxNQUFNLENBQzNCLFFBQVEsRUFDUjtFQUNJQyxFQUFFLEVBQUU7SUFDQUMsSUFBSSxFQUFFVCxTQUFTLENBQUNVLE9BQU87SUFDdkJDLGFBQWEsRUFBRSxJQUFJO0lBQ25CQyxVQUFVLEVBQUUsSUFBSTtJQUNoQkMsU0FBUyxFQUFFO0VBQ2YsQ0FBQztFQUNEQyxLQUFLLEVBQUVkLFNBQVMsQ0FBQ2UsSUFBSTtFQUNyQkMsV0FBVyxFQUFFaEIsU0FBUyxDQUFDZSxJQUFJO0VBQzNCTixJQUFJLEVBQUU7SUFDRkEsSUFBSSxFQUFFVCxTQUFTLENBQUNpQixJQUFJLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQztJQUN6Q0MsWUFBWSxFQUFFO0VBQ2xCLENBQUM7RUFDREMsU0FBUyxFQUFFO0lBQ1BWLElBQUksRUFBRVQsU0FBUyxDQUFDVSxPQUFPO0lBQ3ZCVSxVQUFVLEVBQUU7TUFDUkMsS0FBSyxFQUFFO1FBQUVDLFNBQVMsRUFBRTtNQUFZLENBQUM7TUFBRTtNQUNuQ0MsR0FBRyxFQUFFO0lBQ1QsQ0FBQztJQUNEVixTQUFTLEVBQUUsS0FBSztJQUNoQlcsUUFBUSxFQUFFLFNBQVM7SUFDbkJDLFFBQVEsRUFBRTtFQUNkLENBQUM7RUFDREMsVUFBVSxFQUFFMUIsU0FBUyxDQUFDMkI7QUFDMUIsQ0FBQyxFQUNEO0VBQ0lDLFVB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","map":{"version":3,"names":["DataTypes","Sequelize","Op","require","sequelize","User","Survey","define","id","type","INTEGER","autoIncrement","primaryKey","allowNull","title","TEXT","description","ENUM","defaultValue","author_id","references","model","tableName","key","onUpdate","onDelete","created_at","DATE","timestamps","createdAt","modelName","SurveyQuestion","survey_id","zone","zone_competency","answers","JSON","order","SurveyResult","user_id","number_turn","answered","result","school_level","experience","gender","region","is_last_time","aiedap_training","teacher_career","teacher_type","subject","education_office","education_office_info","training_selection","created_date","belongsTo","foreignKey","as","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/","sources":["surveyModel.js"],"sourcesContent":["const { DataTypes, Sequelize, Op } = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = require(\"../models/usedModel\");\nconst Survey = sequelize.define(\n    \"Survey\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        title: DataTypes.TEXT,\n        description: DataTypes.TEXT,\n        type: {\n            type: DataTypes.ENUM(\"basic\", \"in_depth\"),\n            defaultValue: \"basic\",\n        },\n        author_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"user_info\" }, // provide table name\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        created_at: DataTypes.DATE,\n    },\n    {\n        timestamps: false,\n        createdAt: \"created_at\",\n        tableName: \"survey\",\n        modelName: \"survey\",\n    }\n);\n\nconst SurveyQuestion = sequelize.define(\n    \"SurveyQuestion\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        survey_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"survey\" },\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        zone: {\n            type: DataTypes.ENUM(\"basic\", \"edu\", \"professional\"),\n            defaultValue: \"basic\",\n        },\n        zone_competency: DataTypes.TEXT,\n        title: DataTypes.TEXT,\n        description: DataTypes.TEXT,\n        answers: DataTypes.JSON,\n        order: DataTypes.INTEGER,\n        author_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"user_info\" },\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        created_at: DataTypes.DATE,\n    },\n    {\n        timestamps: false,\n        createdAt: \"created_at\",\n        tableName: \"survey_question\",\n        modelName: \"surveyQuestion\",\n    }\n);\n\nconst SurveyResult = sequelize.define(\n    \"SurveyResult\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        user_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"user_info\" },\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        survey_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"survey\" },\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        number_turn: DataTypes.INTEGER,\n        answered: DataTypes.JSON,\n        result: DataTypes.JSON,\n        school_level: DataTypes.TEXT,\n        experience: DataTypes.TEXT,\n        gender: DataTypes.INTEGER,\n        region: DataTypes.TEXT,\n        is_last_time: DataTypes.INTEGER,\n        aiedap_training: DataTypes.TEXT,\n        teacher_career: DataTypes.TEXT,\n        teacher_type: DataTypes.TEXT,\n        subject: DataTypes.TEXT,\n        education_office: DataTypes.TEXT,\n        education_office_info: DataTypes.TEXT,\n        training_selection: DataTypes.TEXT,\n        created_date: DataTypes.DATE,\n    },\n    {\n        timestamps: false,\n        createdAt: \"created_at\",\n        tableName: \"survey_result\",\n        modelName: \"SurveyResult\",\n    }\n);\n\nSurveyQuestion.belongsTo(Survey, {\n    foreignKey: \"survey_id\",\n    as: \"survey\",\n});\nSurveyResult.belongsTo(Survey, {\n    foreignKey: \"survey_id\",\n    as: \"survey\",\n});\nSurvey.belongsTo(User, {\n    foreignKey: \"author_id\",\n    as: \"user\",\n});\nSurveyResult.belongsTo(User, {\n    foreignKey: \"user_id\",\n    as: \"user\",\n});\n\nSurveyQuestion.belongsTo(User, {\n    foreignKey: \"author_id\",\n    as: \"user\",\n});\n\nmodule.exports = {\n    Survey,\n    SurveyQuestion,\n    SurveyResult,\n    sequelize,\n    Sequelize,\n    Op,\n};\n"],"mappings":"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","ignoreList":[]}},"mtime":1720685880005},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/wishlistService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"product\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:product":{"value":{"code":"const Wishlist = require(\"../models/wishlistModel\");\nconst {\n  opExp,\n  AiedutechTool,\n  opExpTechType,\n  sequelize,\n  LessonSample,\n  ModelSearch,\n  OperationCase,\n  OperationTool,\n  OperationGrade,\n  OperationType,\n  OperationSubject,\n  OperationTopic\n} = require(\"../models/searchModel\");\nconst User = require(\"../models/usedModel\");\nexports.createOrDeleteWishlist = async (foreign_key_id, user_id, type) => {\n  let wishlist = await Wishlist.findOne({\n    where: {\n      foreign_key_id,\n      user_id,\n      type\n    }\n  });\n  if (wishlist == null) {\n    return await Wishlist.create({\n      id: null,\n      user_id,\n      foreign_key_id,\n      type\n    });\n  } else {\n    await wishlist.destroy();\n    return wishlist;\n  }\n};\nexports.getWishlists = async (paged, limit, user_id) => {\n  const offset = (paged - 1) * limit;\n  let query = {\n    include: [{\n      model: User,\n      as: \"user\"\n    }],\n    order: [[\"created_date\", \"DESC\"]]\n  };\n  if (paged) {\n    query[\"offset\"] = offset;\n  }\n  if (limit) {\n    query[\"limit\"] = limit;\n  }\n  if (user_id) {\n    query[\"where\"] = {\n      user_id\n    };\n  }\n  const {\n    count,\n    rows\n  } = await Wishlist.findAndCountAll(query);\n\n  //convert pdf link\n  const processedData = await Promise.all(rows.map(async item => {\n    // Process tool\n    if (item.type == \"tool\") {\n      item.dataValues.info = await AiedutechTool.findOne({\n        where: {\n          sno: item.foreign_key_id\n        },\n        attributes: [\"sno\", \"name_kr\", \"description\", \"case_img\"]\n      });\n    }\n    // Process lesson\n    if (item.type == \"lesson\") {\n      item.dataValues.info = await LessonSample.findOne({\n        where: {\n          sno: item.foreign_key_id\n        },\n        attributes: [\"sno\", \"topic\", \"objective\"]\n      });\n    }\n    // Process operation\n    if (item.type == \"operation\") {\n      item.dataValues.info = await OperationCase.findOne({\n        where: {\n          id: item.foreign_key_id\n        },\n        attributes: [\"id\", \"title\", \"learning_objectives\"]\n      });\n    }\n    // Process model\n    if (item.type == \"model\") {\n      item.dataValues.info = await ModelSearch.findOne({\n        where: {\n          id: item.foreign_key_id\n        },\n        attributes: [\"id\", \"name\", \"description\", \"image\"]\n      });\n    }\n    return item;\n  }));\n  const totalPages = Math.ceil(count / limit);\n  return {\n    items: processedData,\n    totalItems: count,\n    itemCount: processedData.length,\n    itemsPerPage: limit,\n    totalPages,\n    currentPage: paged\n  };\n};\nexports.getCommunityWishlists = async (paged, limit) => {\n  const offset = (paged - 1) * limit;\n  const {\n    count,\n    rows\n  } = await Wishlist.findAndCountAll({\n    attributes: [\"type\", \"foreign_key_id\", [sequelize.fn(\"COUNT\", sequelize.col(\"id\")), \"countWishlists\"]],\n    group: [\"type\", \"foreign_key_id\"],\n    order: [[sequelize.fn(\"MAX\", sequelize.col(\"created_date\")), \"DESC\"]],\n    offset: offset,\n    limit: limit\n  });\n\n  //convert pdf link\n  const processedData = await Promise.all(rows.map(async item => {\n    let info = null;\n    switch (item.type) {\n      case \"tool\":\n        info = await AiedutechTool.findOne({\n          where: {\n            sno: item.foreign_key_id\n          },\n          attributes: [\"sno\", \"name_kr\", \"description\", \"case_img\"]\n        });\n        break;\n      case \"lesson\":\n        info = await LessonSample.findOne({\n          where: {\n            sno: item.foreign_key_id\n          },\n          attributes: [\"sno\", \"topic\", \"objective\"]\n        });\n        break;\n      case \"operation\":\n        info = await OperationCase.findOne({\n          where: {\n            id: item.foreign_key_id\n          },\n          attributes: [\"id\", \"title\", \"learning_objectives\"]\n        });\n        break;\n      case \"model\":\n        info = await ModelSearch.findOne({\n          where: {\n            id: item.foreign_key_id\n          },\n          attributes: [\"id\", \"name\", \"description\", \"image\"]\n        });\n        break;\n    }\n    item.dataValues.info = info;\n    return item;\n  }));\n  const totalPages = Math.ceil(count.length / limit);\n  return {\n    items: processedData,\n    totalItems: count.length,\n    itemCount: processedData.length,\n    itemsPerPage: limit,\n    totalPages,\n    currentPage: paged\n  };\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJXaXNobGlzdCIsInJlcXVpcmUiLCJvcEV4cCIsIkFpZWR1dGVjaFRvb2wiLCJvcEV4cFRlY2hUeXBlIiwic2VxdWVsaXplIiwiTGVzc29uU2FtcGxlIiwiTW9kZWxTZWFyY2giLCJPcGVyYXRpb25DYXNlIiwiT3BlcmF0aW9uVG9vbCIsIk9wZXJhdGlvbkdyYWRlIiwiT3BlcmF0aW9uVHlwZSIsIk9wZXJhdGlvblN1YmplY3QiLCJPcGVyYXRpb25Ub3BpYyIsIlVzZXIiLCJleHBvcnRzIiwiY3JlYXRlT3JEZWxldGVXaXNobGlzdCIsImZvcmVpZ25fa2V5X2lkIiwidXNlcl9pZCIsInR5cGUiLCJ3aXNobGlzdCIsImZpbmRPbmUiLCJ3aGVyZSIsImNyZWF0ZSIsImlkIiwiZGVzdHJveSIsImdldFdpc2hsaXN0cyIsInBhZ2VkIiwibGltaXQiLCJvZmZzZXQiLCJxdWVyeSIsImluY2x1ZGUiLCJtb2RlbCIsImFzIiwib3JkZXIiLCJjb3VudCIsInJvd3MiLCJmaW5kQW5kQ291bnRBbGwiLCJwcm9jZXNzZWREYXRhIiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsIml0ZW0iLCJkYXRhVmFsdWVzIiwiaW5mbyIsInNubyIsImF0dHJpYnV0ZXMiLCJ0b3RhbFBhZ2VzIiwiTWF0aCIsImNlaWwiLCJpdGVtcyIsInRvdGFsSXRlbXMiLCJpdGVtQ291bnQiLCJsZW5ndGgiLCJpdGVtc1BlclBhZ2UiLCJjdXJyZW50UGFnZSIsImdldENvbW11bml0eVdpc2hsaXN0cyIsImZuIiwiY29sIiwiZ3JvdXAiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy9zZXJ2aWNlcy8iLCJzb3VyY2VzIjpbIndpc2hsaXN0U2VydmljZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBXaXNobGlzdCA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvd2lzaGxpc3RNb2RlbFwiKTtcbmNvbnN0IHtcbiAgICBvcEV4cCxcbiAgICBBaWVkdXRlY2hUb29sLFxuICAgIG9wRXhwVGVjaFR5cGUsXG4gICAgc2VxdWVsaXplLFxuICAgIExlc3NvblNhbXBsZSxcbiAgICBNb2RlbFNlYXJjaCxcbiAgICBPcGVyYXRpb25DYXNlLFxuICAgIE9wZXJhdGlvblRvb2wsXG4gICAgT3BlcmF0aW9uR3JhZGUsXG4gICAgT3BlcmF0aW9uVHlwZSxcbiAgICBPcGVyYXRpb25TdWJqZWN0LFxuICAgIE9wZXJhdGlvblRvcGljLFxufSA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvc2VhcmNoTW9kZWxcIik7XG5jb25zdCBVc2VyID0gcmVxdWlyZShcIi4uL21vZGVscy91c2VkTW9kZWxcIik7XG5cbmV4cG9ydHMuY3JlYXRlT3JEZWxldGVXaXNobGlzdCA9IGFzeW5jIChmb3JlaWduX2tleV9pZCwgdXNlcl9pZCwgdHlwZSkgPT4ge1xuICAgIGxldCB3aXNobGlzdCA9IGF3YWl0IFdpc2hsaXN0LmZpbmRPbmUoe1xuICAgICAgICB3aGVyZTogeyBmb3JlaWduX2tleV9pZCwgdXNlcl9pZCwgdHlwZSB9LFxuICAgIH0pO1xuICAgIGlmICh3aXNobGlzdCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBXaXNobGlzdC5jcmVhdGUoe1xuICAgICAgICAgICAgaWQ6IG51bGwsXG4gICAgICAgICAgICB1c2VyX2lkLFxuICAgICAgICAgICAgZm9yZWlnbl9rZXlfaWQsXG4gICAgICAgICAgICB0eXBlLFxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCB3aXNobGlzdC5kZXN0cm95KCk7XG4gICAgICAgIHJldHVybiB3aXNobGlzdDtcbiAgICB9XG59O1xuZXhwb3J0cy5nZXRXaXNobGlzdHMgPSBhc3luYyAocGFnZWQsIGxpbWl0LCB1c2VyX2lkKSA9PiB7XG4gICAgY29uc3Qgb2Zmc2V0ID0gKHBhZ2VkIC0gMSkgKiBsaW1pdDtcbiAgICBsZXQgcXVlcnkgPSB7XG4gICAgICAgIGluY2x1ZGU6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBtb2RlbDogVXNlcixcbiAgICAgICAgICAgICAgICBhczogXCJ1c2VyXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBvcmRlcjogW1tcImNyZWF0ZWRfZGF0ZVwiLCBcIkRFU0NcIl1dLFxuICAgIH07XG5cbiAgICBpZiAocGFnZWQpIHtcbiAgICAgICAgcXVlcnlbXCJvZmZzZXRcIl0gPSBvZmZzZXQ7XG4gICAgfVxuICAgIGlmIChsaW1pdCkge1xuICAgICAgICBxdWVyeVtcImxpbWl0XCJdID0gbGltaXQ7XG4gICAgfVxuICAgIGlmICh1c2VyX2lkKSB7XG4gICAgICAgIHF1ZXJ5W1wid2hlcmVcIl0gPSB7IHVzZXJfaWQgfTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGNvdW50LCByb3dzIH0gPSBhd2FpdCBXaXNobGlzdC5maW5kQW5kQ291bnRBbGwocXVlcnkpO1xuXG4gICAgLy9jb252ZXJ0IHBkZiBsaW5rXG4gICAgY29uc3QgcHJvY2Vzc2VkRGF0YSA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICByb3dzLm1hcChhc3luYyAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgLy8gUHJvY2VzcyB0b29sXG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09IFwidG9vbFwiKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5kYXRhVmFsdWVzLmluZm8gPSBhd2FpdCBBaWVkdXRlY2hUb29sLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBzbm86IGl0ZW0uZm9yZWlnbl9rZXlfaWQgfSxcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogW1wic25vXCIsIFwibmFtZV9rclwiLCBcImRlc2NyaXB0aW9uXCIsIFwiY2FzZV9pbWdcIl0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBQcm9jZXNzIGxlc3NvblxuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PSBcImxlc3NvblwiKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5kYXRhVmFsdWVzLmluZm8gPSBhd2FpdCBMZXNzb25TYW1wbGUuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IHNubzogaXRlbS5mb3JlaWduX2tleV9pZCB9LFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBbXCJzbm9cIiwgXCJ0b3BpY1wiLCBcIm9iamVjdGl2ZVwiXSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFByb2Nlc3Mgb3BlcmF0aW9uXG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09IFwib3BlcmF0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICBpdGVtLmRhdGFWYWx1ZXMuaW5mbyA9IGF3YWl0IE9wZXJhdGlvbkNhc2UuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBpdGVtLmZvcmVpZ25fa2V5X2lkIH0sXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFtcImlkXCIsIFwidGl0bGVcIiwgXCJsZWFybmluZ19vYmplY3RpdmVzXCJdLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUHJvY2VzcyBtb2RlbFxuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PSBcIm1vZGVsXCIpIHtcbiAgICAgICAgICAgICAgICBpdGVtLmRhdGFWYWx1ZXMuaW5mbyA9IGF3YWl0IE1vZGVsU2VhcmNoLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogaXRlbS5mb3JlaWduX2tleV9pZCB9LFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBbXCJpZFwiLCBcIm5hbWVcIiwgXCJkZXNjcmlwdGlvblwiLCBcImltYWdlXCJdLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgY29uc3QgdG90YWxQYWdlcyA9IE1hdGguY2VpbChjb3VudCAvIGxpbWl0KTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGl0ZW1zOiBwcm9jZXNzZWREYXRhLFxuICAgICAgICB0b3RhbEl0ZW1zOiBjb3VudCxcbiAgICAgICAgaXRlbUNvdW50OiBwcm9jZXNzZWREYXRhLmxlbmd0aCxcbiAgICAgICAgaXRlbXNQZXJQYWdlOiBsaW1pdCxcbiAgICAgICAgdG90YWxQYWdlcyxcbiAgICAgICAgY3VycmVudFBhZ2U6IHBhZ2VkLFxuICAgIH07XG59O1xuZXhwb3J0cy5nZXRDb21tdW5pdHlXaXNobGlzdHMgPSBhc3luYyAocGFnZWQsIGxpbWl0KSA9PiB7XG4gICAgY29uc3Qgb2Zmc2V0ID0gKHBhZ2VkIC0gMSkgKiBsaW1pdDtcbiAgICBjb25zdCB7IGNvdW50LCByb3dzIH0gPSBhd2FpdCBXaXNobGlzdC5maW5kQW5kQ291bnRBbGwoe1xuICAgICAgICBhdHRyaWJ1dGVzOiBbXG4gICAgICAgICAgICBcInR5cGVcIixcbiAgICAgICAgICAgIFwiZm9yZWlnbl9rZXlfaWRcIixcbiAgICAgICAgICAgIFtzZXF1ZWxpemUuZm4oXCJDT1VOVFwiLCBzZXF1ZWxpemUuY29sKFwiaWRcIikpLCBcImNvdW50V2lzaGxpc3RzXCJdLFxuICAgICAgICBdLFxuICAgICAgICBncm91cDogW1widHlwZVwiLCBcImZvcmVpZ25fa2V5X2lkXCJdLFxuICAgICAgICBvcmRlcjogW1tzZXF1ZWxpemUuZm4oXCJNQVhcIiwgc2VxdWVsaXplLmNvbChcImNyZWF0ZWRfZGF0ZVwiKSksIFwiREVTQ1wiXV0sXG4gICAgICAgIG9mZnNldDogb2Zmc2V0LFxuICAgICAgICBsaW1pdDogbGltaXQsXG4gICAgfSk7XG5cbiAgICAvL2NvbnZlcnQgcGRmIGxpbmtcbiAgICBjb25zdCBwcm9jZXNzZWREYXRhID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIHJvd3MubWFwKGFzeW5jIChpdGVtKSA9PiB7XG4gICAgICAgICAgICBsZXQgaW5mbyA9IG51bGw7XG4gICAgICAgICAgICBzd2l0Y2ggKGl0ZW0udHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJ0b29sXCI6XG4gICAgICAgICAgICAgICAgICAgIGluZm8gPSBhd2FpdCBBaWVkdXRlY2hUb29sLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgc25vOiBpdGVtLmZvcmVpZ25fa2V5X2lkIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzbm9cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVfa3JcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRlc2NyaXB0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjYXNlX2ltZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJsZXNzb25cIjpcbiAgICAgICAgICAgICAgICAgICAgaW5mbyA9IGF3YWl0IExlc3NvblNhbXBsZS5maW5kT25lKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IHNubzogaXRlbS5mb3JlaWduX2tleV9pZCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogW1wic25vXCIsIFwidG9waWNcIiwgXCJvYmplY3RpdmVcIl0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwib3BlcmF0aW9uXCI6XG4gICAgICAgICAgICAgICAgICAgIGluZm8gPSBhd2FpdCBPcGVyYXRpb25DYXNlLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IGl0ZW0uZm9yZWlnbl9rZXlfaWQgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFtcImlkXCIsIFwidGl0bGVcIiwgXCJsZWFybmluZ19vYmplY3RpdmVzXCJdLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIm1vZGVsXCI6XG4gICAgICAgICAgICAgICAgICAgIGluZm8gPSBhd2FpdCBNb2RlbFNlYXJjaC5maW5kT25lKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBpdGVtLmZvcmVpZ25fa2V5X2lkIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBbXCJpZFwiLCBcIm5hbWVcIiwgXCJkZXNjcmlwdGlvblwiLCBcImltYWdlXCJdLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpdGVtLmRhdGFWYWx1ZXMuaW5mbyA9IGluZm87XG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgY29uc3QgdG90YWxQYWdlcyA9IE1hdGguY2VpbChjb3VudC5sZW5ndGggLyBsaW1pdCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBpdGVtczogcHJvY2Vzc2VkRGF0YSxcbiAgICAgICAgdG90YWxJdGVtczogY291bnQubGVuZ3RoLFxuICAgICAgICBpdGVtQ291bnQ6IHByb2Nlc3NlZERhdGEubGVuZ3RoLFxuICAgICAgICBpdGVtc1BlclBhZ2U6IGxpbWl0LFxuICAgICAgICB0b3RhbFBhZ2VzLFxuICAgICAgICBjdXJyZW50UGFnZTogcGFnZWQsXG4gICAgfTtcbn07XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLHlCQUF5QixDQUFDO0FBQ25ELE1BQU07RUFDRkMsS0FBSztFQUNMQyxhQUFhO0VBQ2JDLGFBQWE7RUFDYkMsU0FBUztFQUNUQyxZQUFZO0VBQ1pDLFdBQVc7RUFDWEMsYUFBYTtFQUNiQyxhQUFhO0VBQ2JDLGNBQWM7RUFDZEMsYUFBYTtFQUNiQyxnQkFBZ0I7RUFDaEJDO0FBQ0osQ0FBQyxHQUFHWixPQUFPLENBQUMsdUJBQXVCLENBQUM7QUFDcEMsTUFBTWEsSUFBSSxHQUFHYixPQUFPLENBQUMscUJBQXFCLENBQUM7QUFFM0NjLE9BQU8sQ0FBQ0Msc0JBQXNCLEdBQUcsT0FBT0MsY0FBYyxFQUFFQyxPQUFPLEVBQUVDLElBQUksS0FBSztFQUN0RSxJQUFJQyxRQUFRLEdBQUcsTUFBTXBCLFFBQVEsQ0FBQ3FCLE9BQU8sQ0FBQztJQUNsQ0MsS0FBSyxFQUFFO01BQUVMLGNBQWM7TUFBRUMsT0FBTztNQUFFQztJQUFLO0VBQzNDLENBQUMsQ0FBQztFQUNGLElBQUlDLFFBQVEsSUFBSSxJQUFJLEVBQUU7SUFDbEIsT0FBTyxNQUFNcEIsUUFBUSxDQUFDdUIsTUFBTSxDQUFDO01BQ3pCQyxFQUFFLEVBQUUsSUFBSTtNQUNSTixPQUFPO01BQ1BELGNBQWM7TUFDZEU7SUFDSixDQUFDLENBQUM7RUFDTixDQUFDLE1BQU07SUFDSCxNQUFNQyxRQUFRLENBQUNLLE9BQU8sQ0FBQyxDQUFDO0lBQ3hCLE9BQU9MLFFBQVE7RUFDbkI7QUFDSixDQUFDO0FBQ0RMLE9BQU8sQ0FBQ1csWUFBWSxHQUFHLE9BQU9DLEtBQUssRUFBRUMsS0FBSyxFQUFFVixPQUFPLEtBQUs7RUFDcEQsTUFBTVcsTUFBTSxHQUFHLENBQUNGLEtBQUssR0FBRyxDQUFDLElBQUlDLEtBQUs7RUFDbEMsSUFBSUUsS0FBSyxHQUFHO0lBQ1JDLE9BQU8sRUFBRSxDQUNMO01BQ0lDLEtBQUssRUFBRWxCLElBQUk7TUFDWG1CLEVBQUUsRUFBRTtJQUNSLENBQUMsQ0FDSjtJQUNEQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLGNBQWMsRUFBRSxNQUFNLENBQUM7RUFDcEMsQ0FBQztFQUVELElBQUlQLEtBQUssRUFBRTtJQUNQRyxLQUFLLENBQUMsUUFBUSxDQUFDLEdBQUdELE1BQU07RUFDNUI7RUFDQSxJQUFJRCxLQUFLLEVBQUU7SUFDUEUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHRixLQUFLO0VBQzFCO0VBQ0EsSUFBSVYsT0FBTyxFQUFFO0lBQ1RZLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRztNQUFFWjtJQUFRLENBQUM7RUFDaEM7RUFFQSxNQUFNO0lBQUVpQixLQUFLO0lBQUVDO0VBQUssQ0FBQyxHQUFHLE1BQU1wQyxRQUFRLENBQUNxQyxlQUFlLENBQUNQLEtBQUssQ0FBQzs7RUFFN0Q7RUFDQSxNQUFNUSxhQUFhLEdBQUcsTUFBTUMsT0FBTyxDQUFDQyxHQUFHLENBQ25DSixJQUFJLENBQUNLLEdBQUcsQ0FBQyxNQUFPQyxJQUFJLElBQUs7SUFDckI7SUFDQSxJQUFJQSxJQUFJLENBQUN2QixJQUFJLElBQUksTUFBTSxFQUFFO01BQ3JCdUIsSUFBSSxDQUFDQyxVQUFVLENBQUNDLElBQUksR0FBRyxNQUFNekMsYUFBYSxDQUFDa0IsT0FBTyxDQUFDO1FBQy9DQyxLQUFLLEVBQUU7VUFBRXVCLEdBQUcsRUFBRUgsSUFBSSxDQUFDekI7UUFBZSxDQUFDO1FBQ25DNkIsVUFBVSxFQUFFLENBQUMsS0FBSyxFQUFFLFNBQVMsRUFBRSxhQUFhLEVBQUUsVUFBVTtNQUM1RCxDQUFDLENBQUM7SUFDTjtJQUNBO0lBQ0EsSUFBSUosSUFBSSxDQUFDdkIsSUFBSSxJQUFJLFFBQVEsRUFBRTtNQUN2QnVCLElBQUksQ0FBQ0MsVUFBVSxDQUFDQyxJQUFJLEdBQUcsTUFBTXRDLFlBQVksQ0FBQ2UsT0FBTyxDQUFDO1FBQzlDQyxLQUFLLEVBQUU7VUFBRXVCLEdBQUcsRUFBRUgsSUFBSSxDQUFDekI7UUFBZSxDQUFDO1FBQ25DNkIsVUFBVSxFQUFFLENBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRSxXQUFXO01BQzVDLENBQUMsQ0FBQztJQUNOO0lBQ0E7SUFDQSxJQUFJSixJQUFJLENBQUN2QixJQUFJLElBQUksV0FBVyxFQUFFO01BQzFCdUIsSUFBSSxDQUFDQyxVQUFVLENBQUNDLElBQUksR0FBRyxNQUFNcEMsYUFBYSxDQUFDYSxPQUFPLENBQUM7UUFDL0NDLEtBQUssRUFBRTtVQUFFRSxFQUFFLEVBQUVrQixJQUFJLENBQUN6QjtRQUFlLENBQUM7UUFDbEM2QixVQUFVLEVBQUUsQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLHFCQUFxQjtNQUNyRCxDQUFDLENBQUM7SUFDTjtJQUNBO0lBQ0EsSUFBSUosSUFBSSxDQUFDdkIsSUFBSSxJQUFJLE9BQU8sRUFBRTtNQUN0QnVCLElBQUksQ0FBQ0MsVUFBVSxDQUFDQyxJQUFJLEdBQUcsTUFBTXJDLFdBQVcsQ0FBQ2MsT0FBTyxDQUFDO1FBQzdDQyxLQUFLLEVBQUU7VUFBRUUsRUFBRSxFQUFFa0IsSUFBSSxDQUFDekI7UUFBZSxDQUFDO1FBQ2xDNkIsVUFBVSxFQUFFLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxhQUFhLEVBQUUsT0FBTztNQUNyRCxDQUFDLENBQUM7SUFDTjtJQUVBLE9BQU9KLElBQUk7RUFDZixDQUFDLENBQ0wsQ0FBQztFQUVELE1BQU1LLFVBQVUsR0FBR0MsSUFBSSxDQUFDQyxJQUFJLENBQUNkLEtBQUssR0FBR1AsS0FBSyxDQUFDO0VBRTNDLE9BQU87SUFDSHNCLEtBQUssRUFBRVosYUFBYTtJQUNwQmEsVUFBVSxFQUFFaEIsS0FBSztJQUNqQmlCLFNBQVMsRUFBRWQsYUFBYSxDQUFDZSxNQUFNO0lBQy9CQyxZQUFZLEVBQUUxQixLQUFLO0lBQ25CbUIsVUFBVTtJQUNWUSxXQUFXLEVBQUU1QjtFQUNqQixDQUFDO0FBQ0wsQ0FBQztBQUNEWixPQUFPLENBQUN5QyxxQkFBcUIsR0FBRyxPQUFPN0IsS0FBSyxFQUFFQyxLQUFLLEtBQUs7RUFDcEQsTUFBTUMsTUFBTSxHQUFHLENBQUNGLEtBQUssR0FBRyxDQUFDLElBQUlDLEtBQUs7RUFDbEMsTUFBTTtJQUFFTyxLQUFLO0lBQUVDO0VBQUssQ0FBQyxHQUFHLE1BQU1wQyxRQUFRLENBQUNxQyxlQUFlLENBQUM7SUFDbkRTLFVBQVUsRUFBRSxDQUNSLE1BQU0sRUFDTixnQkFBZ0IsRUFDaEIsQ0FBQ3pDLFNBQVMsQ0FBQ29ELEVBQUUsQ0FBQyxPQUFPLEVBQUVwRCxTQUFTLENBQUNxRCxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxnQkFBZ0IsQ0FBQyxDQUNqRTtJQUNEQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsZ0JBQWdCLENBQUM7SUFDakN6QixLQUFLLEVBQUUsQ0FBQyxDQUFDN0IsU0FBUyxDQUFDb0QsRUFBRSxDQUFDLEtBQUssRUFBRXBELFNBQVMsQ0FBQ3FELEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQ3JFN0IsTUFBTSxFQUFFQSxNQUFNO0lBQ2RELEtBQUssRUFBRUE7RUFDWCxDQUFDLENBQUM7O0VBRUY7RUFDQSxNQUFNVSxhQUFhLEdBQUcsTUFBTUMsT0FBTyxDQUFDQyxHQUFHLENBQ25DSixJQUFJLENBQUNLLEdBQUcsQ0FBQyxNQUFPQyxJQUFJLElBQUs7SUFDckIsSUFBSUUsSUFBSSxHQUFHLElBQUk7SUFDZixRQUFRRixJQUFJLENBQUN2QixJQUFJO01BQ2IsS0FBSyxNQUFNO1FBQ1B5QixJQUFJLEdBQUcsTUFBTXpDLGFBQWEsQ0FBQ2tCLE9BQU8sQ0FBQztVQUMvQkMsS0FBSyxFQUFFO1lBQUV1QixHQUFHLEVBQUVILElBQUksQ0FBQ3pCO1VBQWUsQ0FBQztVQUNuQzZCLFVBQVUsRUFBRSxDQUNSLEtBQUssRUFDTCxTQUFTLEVBQ1QsYUFBYSxFQUNiLFVBQVU7UUFFbEIsQ0FBQyxDQUFDO1FBQ0Y7TUFDSixLQUFLLFFBQVE7UUFDVEYsSUFBSSxHQUFHLE1BQU10QyxZQUFZLENBQUNlLE9BQU8sQ0FBQztVQUM5QkMsS0FBSyxFQUFFO1lBQUV1QixHQUFHLEVBQUVILElBQUksQ0FBQ3pCO1VBQWUsQ0FBQztVQUNuQzZCLFVBQVUsRUFBRSxDQUFDLEtBQUssRUFBRSxPQUFPLEVBQUUsV0FBVztRQUM1QyxDQUFDLENBQUM7UUFDRjtNQUNKLEtBQUssV0FBVztRQUNaRixJQUFJLEdBQUcsTUFBTXBDLGFBQWEsQ0FBQ2EsT0FBTyxDQUFDO1VBQy9CQyxLQUFLLEVBQUU7WUFBRUUsRUFBRSxFQUFFa0IsSUFBSSxDQUFDekI7VUFBZSxDQUFDO1VBQ2xDNkIsVUFBVSxFQUFFLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxxQkFBcUI7UUFDckQsQ0FBQyxDQUFDO1FBQ0Y7TUFDSixLQUFLLE9BQU87UUFDUkYsSUFBSSxHQUFHLE1BQU1yQyxXQUFXLENBQUNjLE9BQU8sQ0FBQztVQUM3QkMsS0FBSyxFQUFFO1lBQUVFLEVBQUUsRUFBRWtCLElBQUksQ0FBQ3pCO1VBQWUsQ0FBQztVQUNsQzZCLFVBQVUsRUFBRSxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsYUFBYSxFQUFFLE9BQU87UUFDckQsQ0FBQyxDQUFDO1FBQ0Y7SUFDUjtJQUNBSixJQUFJLENBQUNDLFVBQVUsQ0FBQ0MsSUFBSSxHQUFHQSxJQUFJO0lBQzNCLE9BQU9GLElBQUk7RUFDZixDQUFDLENBQ0wsQ0FBQztFQUVELE1BQU1LLFVBQVUsR0FBR0MsSUFBSSxDQUFDQyxJQUFJLENBQUNkLEtBQUssQ0FBQ2tCLE1BQU0sR0FBR3pCLEtBQUssQ0FBQztFQUVsRCxPQUFPO0lBQ0hzQixLQUFLLEVBQUVaLGFBQWE7SUFDcEJhLFVBQVUsRUFBRWhCLEtBQUssQ0FBQ2tCLE1BQU07SUFDeEJELFNBQVMsRUFBRWQsYUFBYSxDQUFDZSxNQUFNO0lBQy9CQyxZQUFZLEVBQUUxQixLQUFLO0lBQ25CbUIsVUFBVTtJQUNWUSxXQUFXLEVBQUU1QjtFQUNqQixDQUFDO0FBQ0wsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["Wishlist","require","opExp","AiedutechTool","opExpTechType","sequelize","LessonSample","ModelSearch","OperationCase","OperationTool","OperationGrade","OperationType","OperationSubject","OperationTopic","User","exports","createOrDeleteWishlist","foreign_key_id","user_id","type","wishlist","findOne","where","create","id","destroy","getWishlists","paged","limit","offset","query","include","model","as","order","count","rows","findAndCountAll","processedData","Promise","all","map","item","dataValues","info","sno","attributes","totalPages","Math","ceil","items","totalItems","itemCount","length","itemsPerPage","currentPage","getCommunityWishlists","fn","col","group"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/","sources":["wishlistService.js"],"sourcesContent":["const Wishlist = require(\"../models/wishlistModel\");\nconst {\n    opExp,\n    AiedutechTool,\n    opExpTechType,\n    sequelize,\n    LessonSample,\n    ModelSearch,\n    OperationCase,\n    OperationTool,\n    OperationGrade,\n    OperationType,\n    OperationSubject,\n    OperationTopic,\n} = require(\"../models/searchModel\");\nconst User = require(\"../models/usedModel\");\n\nexports.createOrDeleteWishlist = async (foreign_key_id, user_id, type) => {\n    let wishlist = await Wishlist.findOne({\n        where: { foreign_key_id, user_id, type },\n    });\n    if (wishlist == null) {\n        return await Wishlist.create({\n            id: null,\n            user_id,\n            foreign_key_id,\n            type,\n        });\n    } else {\n        await wishlist.destroy();\n        return wishlist;\n    }\n};\nexports.getWishlists = async (paged, limit, user_id) => {\n    const offset = (paged - 1) * limit;\n    let query = {\n        include: [\n            {\n                model: User,\n                as: \"user\",\n            },\n        ],\n        order: [[\"created_date\", \"DESC\"]],\n    };\n\n    if (paged) {\n        query[\"offset\"] = offset;\n    }\n    if (limit) {\n        query[\"limit\"] = limit;\n    }\n    if (user_id) {\n        query[\"where\"] = { user_id };\n    }\n\n    const { count, rows } = await Wishlist.findAndCountAll(query);\n\n    //convert pdf link\n    const processedData = await Promise.all(\n        rows.map(async (item) => {\n            // Process tool\n            if (item.type == \"tool\") {\n                item.dataValues.info = await AiedutechTool.findOne({\n                    where: { sno: item.foreign_key_id },\n                    attributes: [\"sno\", \"name_kr\", \"description\", \"case_img\"],\n                });\n            }\n            // Process lesson\n            if (item.type == \"lesson\") {\n                item.dataValues.info = await LessonSample.findOne({\n                    where: { sno: item.foreign_key_id },\n                    attributes: [\"sno\", \"topic\", \"objective\"],\n                });\n            }\n            // Process operation\n            if (item.type == \"operation\") {\n                item.dataValues.info = await OperationCase.findOne({\n                    where: { id: item.foreign_key_id },\n                    attributes: [\"id\", \"title\", \"learning_objectives\"],\n                });\n            }\n            // Process model\n            if (item.type == \"model\") {\n                item.dataValues.info = await ModelSearch.findOne({\n                    where: { id: item.foreign_key_id },\n                    attributes: [\"id\", \"name\", \"description\", \"image\"],\n                });\n            }\n\n            return item;\n        })\n    );\n\n    const totalPages = Math.ceil(count / limit);\n\n    return {\n        items: processedData,\n        totalItems: count,\n        itemCount: processedData.length,\n        itemsPerPage: limit,\n        totalPages,\n        currentPage: paged,\n    };\n};\nexports.getCommunityWishlists = async (paged, limit) => {\n    const offset = (paged - 1) * limit;\n    const { count, rows } = await Wishlist.findAndCountAll({\n        attributes: [\n            \"type\",\n            \"foreign_key_id\",\n            [sequelize.fn(\"COUNT\", sequelize.col(\"id\")), \"countWishlists\"],\n        ],\n        group: [\"type\", \"foreign_key_id\"],\n        order: [[sequelize.fn(\"MAX\", sequelize.col(\"created_date\")), \"DESC\"]],\n        offset: offset,\n        limit: limit,\n    });\n\n    //convert pdf link\n    const processedData = await Promise.all(\n        rows.map(async (item) => {\n            let info = null;\n            switch (item.type) {\n                case \"tool\":\n                    info = await AiedutechTool.findOne({\n                        where: { sno: item.foreign_key_id },\n                        attributes: [\n                            \"sno\",\n                            \"name_kr\",\n                            \"description\",\n                            \"case_img\",\n                        ],\n                    });\n                    break;\n                case \"lesson\":\n                    info = await LessonSample.findOne({\n                        where: { sno: item.foreign_key_id },\n                        attributes: [\"sno\", \"topic\", \"objective\"],\n                    });\n                    break;\n                case \"operation\":\n                    info = await OperationCase.findOne({\n                        where: { id: item.foreign_key_id },\n                        attributes: [\"id\", \"title\", \"learning_objectives\"],\n                    });\n                    break;\n                case \"model\":\n                    info = await ModelSearch.findOne({\n                        where: { id: item.foreign_key_id },\n                        attributes: [\"id\", \"name\", \"description\", \"image\"],\n                    });\n                    break;\n            }\n            item.dataValues.info = info;\n            return item;\n        })\n    );\n\n    const totalPages = Math.ceil(count.length / limit);\n\n    return {\n        items: processedData,\n        totalItems: count.length,\n        itemCount: processedData.length,\n        itemsPerPage: limit,\n        totalPages,\n        currentPage: paged,\n    };\n};\n"],"mappings":"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","ignoreList":[]}},"mtime":1721642086286},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/wishlistModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"product\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:product":{"value":{"code":"const {\n  DataTypes,\n  Sequelize,\n  Op\n} = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = require(\"../models/usedModel\");\nconst Wishlist = sequelize.define(\"Wishlist\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  user_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"user_info\"\n      },\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  foreign_key_id: DataTypes.INTEGER,\n  type: {\n    type: DataTypes.ENUM(\"tool\", \"lesson\", \"operation\", \"model\"),\n    defaultValue: \"tool\"\n  },\n  created_date: DataTypes.DATE\n}, {\n  timestamps: false,\n  createdAt: \"created_at\",\n  tableName: \"wishlist\",\n  modelName: \"SurveyResult\"\n});\nWishlist.belongsTo(User, {\n  foreignKey: \"user_id\",\n  as: \"user\"\n});\nmodule.exports = Wishlist;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEYXRhVHlwZXMiLCJTZXF1ZWxpemUiLCJPcCIsInJlcXVpcmUiLCJzZXF1ZWxpemUiLCJVc2VyIiwiV2lzaGxpc3QiLCJkZWZpbmUiLCJpZCIsInR5cGUiLCJJTlRFR0VSIiwiYXV0b0luY3JlbWVudCIsInByaW1hcnlLZXkiLCJhbGxvd051bGwiLCJ1c2VyX2lkIiwicmVmZXJlbmNlcyIsIm1vZGVsIiwidGFibGVOYW1lIiwia2V5Iiwib25VcGRhdGUiLCJvbkRlbGV0ZSIsImZvcmVpZ25fa2V5X2lkIiwiRU5VTSIsImRlZmF1bHRWYWx1ZSIsImNyZWF0ZWRfZGF0ZSIsIkRBVEUiLCJ0aW1lc3RhbXBzIiwiY3JlYXRlZEF0IiwibW9kZWxOYW1lIiwiYmVsb25nc1RvIiwiZm9yZWlnbktleSIsImFzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL21vZGVscy8iLCJzb3VyY2VzIjpbIndpc2hsaXN0TW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBEYXRhVHlwZXMsIFNlcXVlbGl6ZSwgT3AgfSA9IHJlcXVpcmUoXCJzZXF1ZWxpemVcIik7XG5jb25zdCBzZXF1ZWxpemUgPSByZXF1aXJlKFwiLi4vY29uZmlnL2RhdGFiYXNlXCIpO1xuY29uc3QgVXNlciA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvdXNlZE1vZGVsXCIpO1xuY29uc3QgV2lzaGxpc3QgPSBzZXF1ZWxpemUuZGVmaW5lKFxuICAgIFwiV2lzaGxpc3RcIixcbiAgICB7XG4gICAgICAgIGlkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICB1c2VyX2lkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogeyB0YWJsZU5hbWU6IFwidXNlcl9pbmZvXCIgfSxcbiAgICAgICAgICAgICAgICBrZXk6IFwiaWRcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICAgICAgb25VcGRhdGU6IFwiY2FzY2FkZVwiLFxuICAgICAgICAgICAgb25EZWxldGU6IFwiY2FzY2FkZVwiLFxuICAgICAgICB9LFxuICAgICAgICBmb3JlaWduX2tleV9pZDogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5FTlVNKFwidG9vbFwiLCBcImxlc3NvblwiLCBcIm9wZXJhdGlvblwiLCBcIm1vZGVsXCIpLFxuICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBcInRvb2xcIixcbiAgICAgICAgfSxcbiAgICAgICAgY3JlYXRlZF9kYXRlOiBEYXRhVHlwZXMuREFURSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdGltZXN0YW1wczogZmFsc2UsXG4gICAgICAgIGNyZWF0ZWRBdDogXCJjcmVhdGVkX2F0XCIsXG4gICAgICAgIHRhYmxlTmFtZTogXCJ3aXNobGlzdFwiLFxuICAgICAgICBtb2RlbE5hbWU6IFwiU3VydmV5UmVzdWx0XCIsXG4gICAgfVxuKTtcblxuV2lzaGxpc3QuYmVsb25nc1RvKFVzZXIsIHtcbiAgICBmb3JlaWduS2V5OiBcInVzZXJfaWRcIixcbiAgICBhczogXCJ1c2VyXCIsXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBXaXNobGlzdDtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTTtFQUFFQSxTQUFTO0VBQUVDLFNBQVM7RUFBRUM7QUFBRyxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDekQsTUFBTUMsU0FBUyxHQUFHRCxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDL0MsTUFBTUUsSUFBSSxHQUFHRixPQUFPLENBQUMscUJBQXFCLENBQUM7QUFDM0MsTUFBTUcsUUFBUSxHQUFHRixTQUFTLENBQUNHLE1BQU0sQ0FDN0IsVUFBVSxFQUNWO0VBQ0lDLEVBQUUsRUFBRTtJQUNBQyxJQUFJLEVBQUVULFNBQVMsQ0FBQ1UsT0FBTztJQUN2QkMsYUFBYSxFQUFFLElBQUk7SUFDbkJDLFVBQVUsRUFBRSxJQUFJO0lBQ2hCQyxTQUFTLEVBQUU7RUFDZixDQUFDO0VBQ0RDLE9BQU8sRUFBRTtJQUNMTCxJQUFJLEVBQUVULFNBQVMsQ0FBQ1UsT0FBTztJQUN2QkssVUFBVSxFQUFFO01BQ1JDLEtBQUssRUFBRTtRQUFFQyxTQUFTLEVBQUU7TUFBWSxDQUFDO01BQ2pDQyxHQUFHLEVBQUU7SUFDVCxDQUFDO0lBQ0RMLFNBQVMsRUFBRSxLQUFLO0lBQ2hCTSxRQUFRLEVBQUUsU0FBUztJQUNuQkMsUUFBUSxFQUFFO0VBQ2QsQ0FBQztFQUNEQyxjQUFjLEVBQUVyQixTQUFTLENBQUNVLE9BQU87RUFDakNELElBQUksRUFBRTtJQUNGQSxJQUFJLEVBQUVULFNBQVMsQ0FBQ3NCLElBQUksQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRSxPQUFPLENBQUM7SUFDNURDLFlBQVksRUFBRTtFQUNsQixDQUFDO0VBQ0RDLFlBQVksRUFBRXhCLFNBQVMsQ0FBQ3lCO0FBQzVCLENBQUMsRUFDRDtFQUNJQyxVQUFVLEVBQUUsS0FBSztFQUNqQkMsU0FBUyxFQUFFLFlBQVk7RUFDdkJWLFNBQVMsRUFBRSxVQUFVO0VBQ3JCVyxTQUFTLEVBQUU7QUFDZixDQUNKLENBQUM7QUFFRHRCLFFBQVEsQ0FBQ3VCLFNBQVMsQ0FBQ3hCLElBQUksRUFBRTtFQUNyQnlCLFVBQVUsRUFBRSxTQUFTO0VBQ3JCQyxFQUFFLEVBQUU7QUFDUixDQUFDLENBQUM7QUFFRkMsTUFBTSxDQUFDQyxPQUFPLEdBQUczQixRQUFRIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["DataTypes","Sequelize","Op","require","sequelize","User","Wishlist","define","id","type","INTEGER","autoIncrement","primaryKey","allowNull","user_id","references","model","tableName","key","onUpdate","onDelete","foreign_key_id","ENUM","defaultValue","created_date","DATE","timestamps","createdAt","modelName","belongsTo","foreignKey","as","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/","sources":["wishlistModel.js"],"sourcesContent":["const { DataTypes, Sequelize, Op } = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = require(\"../models/usedModel\");\nconst Wishlist = sequelize.define(\n    \"Wishlist\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        user_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"user_info\" },\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        foreign_key_id: DataTypes.INTEGER,\n        type: {\n            type: DataTypes.ENUM(\"tool\", \"lesson\", \"operation\", \"model\"),\n            defaultValue: \"tool\",\n        },\n        created_date: DataTypes.DATE,\n    },\n    {\n        timestamps: false,\n        createdAt: \"created_at\",\n        tableName: \"wishlist\",\n        modelName: \"SurveyResult\",\n    }\n);\n\nWishlist.belongsTo(User, {\n    foreignKey: \"user_id\",\n    as: \"user\",\n});\n\nmodule.exports = Wishlist;\n"],"mappings":"AAAA,MAAM;EAAEA,SAAS;EAAEC,SAAS;EAAEC;AAAG,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACzD,MAAMC,SAAS,GAAGD,OAAO,CAAC,oBAAoB,CAAC;AAC/C,MAAME,IAAI,GAAGF,OAAO,CAAC,qBAAqB,CAAC;AAC3C,MAAMG,QAAQ,GAAGF,SAAS,CAACG,MAAM,CAC7B,UAAU,EACV;EACIC,EAAE,EAAE;IACAC,IAAI,EAAET,SAAS,CAACU,OAAO;IACvBC,aAAa,EAAE,IAAI;IACnBC,UAAU,EAAE,IAAI;IAChBC,SAAS,EAAE;EACf,CAAC;EACDC,OAAO,EAAE;IACLL,IAAI,EAAET,SAAS,CAACU,OAAO;IACvBK,UAAU,EAAE;MACRC,KAAK,EAAE;QAAEC,SAAS,EAAE;MAAY,CAAC;MACjCC,GAAG,EAAE;IACT,CAAC;IACDL,SAAS,EAAE,KAAK;IAChBM,QAAQ,EAAE,SAAS;IACnBC,QAAQ,EAAE;EACd,CAAC;EACDC,cAAc,EAAErB,SAAS,CAACU,OAAO;EACjCD,IAAI,EAAE;IACFA,IAAI,EAAET,SAAS,CAACsB,IAAI,CAAC,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,OAAO,CAAC;IAC5DC,YAAY,EAAE;EAClB,CAAC;EACDC,YAAY,EAAExB,SAAS,CAACyB;AAC5B,CAAC,EACD;EACIC,UAAU,EAAE,KAAK;EACjBC,SAAS,EAAE,YAAY;EACvBV,SAAS,EAAE,UAAU;EACrBW,SAAS,EAAE;AACf,CACJ,CAAC;AAEDtB,QAAQ,CAACuB,SAAS,CAACxB,IAAI,EAAE;EACrByB,UAAU,EAAE,SAAS;EACrBC,EAAE,EAAE;AACR,CAAC,CAAC;AAEFC,MAAM,CAACC,OAAO,GAAG3B,QAAQ","ignoreList":[]}},"mtime":1721357486743},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/searchModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"product\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:product":{"value":{"code":"const {\n  DataTypes\n} = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst {\n  Topic,\n  Subject,\n  Grade,\n  Type\n} = require(\"../models/designModel\");\nconst opExp = sequelize.define(\"opExp\", {\n  sno: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  name_kr: DataTypes.TEXT,\n  tool_id: DataTypes.INTEGER,\n  tech_id: DataTypes.INTEGER,\n  core_func: DataTypes.TEXT,\n  name_en: DataTypes.TEXT,\n  description: DataTypes.TEXT,\n  service_link: DataTypes.TEXT,\n  case_link: DataTypes.TEXT,\n  case_img: DataTypes.TEXT\n}, {\n  timestamps: false,\n  tableName: \"op_exp\",\n  modelName: \"opExp\"\n});\nconst opExpTechType = sequelize.define(\"op_exp_tech_type\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  exp_sno: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"op_exp\"\n      },\n      // provide table name\n      key: \"sno\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  type_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"tool_aiedutech\"\n      },\n      // provide table name\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  }\n}, {\n  timestamps: false,\n  tableName: \"op_exp_tech_type\",\n  modelName: \"opExpTechType\"\n});\nconst ClassTopic = sequelize.define(\"ClassTopic\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  name: DataTypes.TEXT,\n  created_at: DataTypes.TIME\n}, {\n  timestamps: false,\n  tableName: \"class_topic\",\n  modelName: \"ClassTopic\"\n});\nconst AiedutechTool = sequelize.define(\"AiedutechTool\", {\n  sno: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  name_kr: DataTypes.TEXT,\n  name_en: DataTypes.TEXT,\n  tool_id: DataTypes.NUMBER,\n  tech_id: DataTypes.NUMBER,\n  core_func: DataTypes.TEXT,\n  description: DataTypes.TEXT,\n  service_link: DataTypes.TEXT,\n  case_link: DataTypes.TEXT,\n  case_img: DataTypes.TEXT\n}, {\n  timestamps: false,\n  tableName: \"aiedutech_tool\",\n  modelName: \"AiedutechTool\"\n});\nconst LessonSample = sequelize.define(\"LessonSample\", {\n  sno: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  topic: DataTypes.TEXT,\n  topic_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"class_topic\"\n      },\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  time: DataTypes.TEXT,\n  difficulty: DataTypes.TEXT,\n  objective: DataTypes.TEXT,\n  achievement: DataTypes.TEXT,\n  source: DataTypes.TEXT,\n  pdf_link: DataTypes.TEXT\n}, {\n  timestamps: false,\n  tableName: \"class_case\",\n  modelName: \"LessonSample\"\n});\nLessonSample.belongsTo(ClassTopic, {\n  foreignKey: \"topic_id\",\n  as: \"classTopic\"\n});\nconst ModelSearch = sequelize.define(\"ModelSearch\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  name: DataTypes.TEXT,\n  type_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"class_type\"\n      },\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  subject_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"class_subject\"\n      },\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  grade: DataTypes.JSON,\n  source: DataTypes.TEXT,\n  pdf_link: DataTypes.TEXT,\n  description: DataTypes.TEXT,\n  apa: DataTypes.TEXT,\n  image: DataTypes.TEXT\n}, {\n  timestamps: false,\n  tableName: \"model\",\n  modelName: \"ModelSearch\"\n});\nModelSearch.belongsTo(Type, {\n  foreignKey: \"type_id\",\n  as: \"type\"\n});\nModelSearch.belongsTo(Subject, {\n  foreignKey: \"subject_id\",\n  as: \"subject\"\n});\n//Many-to-Many Association LessonSample, tool\n\nconst ClassCaseTool = sequelize.define(\"ClassCaseTool\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  case_sno: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: LessonSample,\n      key: \"sno\"\n    }\n  },\n  tool_sno: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: AiedutechTool,\n      key: \"sno\"\n    }\n  }\n}, {\n  tableName: \"class_case_tool\",\n  timestamps: false\n});\nLessonSample.belongsToMany(AiedutechTool, {\n  through: ClassCaseTool,\n  as: \"tools\",\n  foreignKey: \"case_sno\",\n  otherKey: \"tool_sno\"\n});\nAiedutechTool.belongsToMany(LessonSample, {\n  through: ClassCaseTool,\n  as: \"lessons\",\n  foreignKey: \"tool_sno\",\n  otherKey: \"case_sno\"\n});\n//OperationCase table\nconst OperationCase = sequelize.define(\"OperationCase\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  title: DataTypes.TEXT,\n  chasi: DataTypes.NUMBER,\n  difficulty: DataTypes.TEXT,\n  learning_objectives: DataTypes.TEXT,\n  achievement_criteria: DataTypes.TEXT,\n  source: DataTypes.TEXT,\n  pdf_link: DataTypes.TEXT\n}, {\n  timestamps: false,\n  tableName: \"operation_case\",\n  modelName: \"OperationCase\"\n});\n//\nconst OperationTopic = sequelize.define(\"OperationTopic\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  topic_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: Topic,\n      key: \"id\"\n    }\n  },\n  operation_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: OperationCase,\n      key: \"id\"\n    }\n  }\n}, {\n  tableName: \"operation_topic\",\n  timestamps: false\n});\nOperationCase.belongsToMany(Topic, {\n  through: OperationTopic,\n  as: \"topics\",\n  foreignKey: \"operation_id\",\n  otherKey: \"topic_id\"\n});\nTopic.belongsToMany(OperationCase, {\n  through: OperationTopic,\n  as: \"relatedOperationTopic\",\n  foreignKey: \"topic_id\",\n  otherKey: \"operation_id\"\n});\n// //\nconst OperationType = sequelize.define(\"OperationType\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  type_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: Type,\n      key: \"id\"\n    }\n  },\n  operation_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: OperationCase,\n      key: \"id\"\n    }\n  }\n}, {\n  tableName: \"operation_type\",\n  timestamps: false\n});\nOperationCase.belongsToMany(Type, {\n  through: OperationType,\n  as: \"types\",\n  foreignKey: \"operation_id\",\n  otherKey: \"type_id\"\n});\nType.belongsToMany(OperationCase, {\n  through: OperationType,\n  as: \"relatedOperationTypes\",\n  foreignKey: \"type_id\",\n  otherKey: \"operation_id\"\n});\n// //\n\nconst OperationSubject = sequelize.define(\"OperationSubject\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  subject_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: Subject,\n      key: \"id\"\n    }\n  },\n  operation_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: OperationCase,\n      key: \"id\"\n    }\n  }\n}, {\n  tableName: \"operation_subject\",\n  timestamps: false\n});\nOperationCase.belongsToMany(Subject, {\n  through: OperationSubject,\n  as: \"subjects\",\n  foreignKey: \"operation_id\",\n  otherKey: \"subject_id\"\n});\nSubject.belongsToMany(OperationCase, {\n  through: OperationSubject,\n  as: \"relatedOperationSubject\",\n  foreignKey: \"subject_id\",\n  otherKey: \"operation_id\"\n});\n\n//\n\nconst OperationGrade = sequelize.define(\"OperationGrade\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  grade_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: Grade,\n      key: \"id\"\n    }\n  },\n  operation_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: OperationCase,\n      key: \"id\"\n    }\n  }\n}, {\n  tableName: \"operation_grade\",\n  timestamps: false\n});\nOperationCase.belongsToMany(Grade, {\n  through: OperationGrade,\n  as: \"grades\",\n  foreignKey: \"operation_id\",\n  otherKey: \"grade_id\"\n});\nGrade.belongsToMany(OperationCase, {\n  through: OperationGrade,\n  as: \"relatedOperationGrade\",\n  foreignKey: \"grade_id\",\n  otherKey: \"operation_id\"\n});\n\n// //\nconst OperationTool = sequelize.define(\"OperationTool\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  tool_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: AiedutechTool,\n      key: \"id\"\n    }\n  },\n  operation_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: OperationCase,\n      key: \"id\"\n    }\n  }\n}, {\n  tableName: \"operation_tool\",\n  timestamps: false\n});\nOperationCase.belongsToMany(AiedutechTool, {\n  through: OperationTool,\n  as: \"tools\",\n  foreignKey: \"operation_id\",\n  otherKey: \"tool_id\"\n});\nAiedutechTool.belongsToMany(OperationCase, {\n  through: OperationTool,\n  as: \"relatedOperationTools\",\n  foreignKey: \"tool_id\",\n  otherKey: \"operation_id\"\n});\nmodule.exports = {\n  opExp,\n  AiedutechTool,\n  opExpTechType,\n  sequelize,\n  LessonSample,\n  ModelSearch,\n  OperationCase,\n  OperationTool,\n  OperationGrade,\n  OperationType,\n  OperationSubject,\n  OperationTopic\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEYXRhVHlwZXMiLCJyZXF1aXJlIiwic2VxdWVsaXplIiwiVG9waWMiLCJTdWJqZWN0IiwiR3JhZGUiLCJUeXBlIiwib3BFeHAiLCJkZWZpbmUiLCJzbm8iLCJ0eXBlIiwiSU5URUdFUiIsImF1dG9JbmNyZW1lbnQiLCJwcmltYXJ5S2V5IiwiYWxsb3dOdWxsIiwibmFtZV9rciIsIlRFWFQiLCJ0b29sX2lkIiwidGVjaF9pZCIsImNvcmVfZnVuYyIsIm5hbWVfZW4iLCJkZXNjcmlwdGlvbiIsInNlcnZpY2VfbGluayIsImNhc2VfbGluayIsImNhc2VfaW1nIiwidGltZXN0YW1wcyIsInRhYmxlTmFtZSIsIm1vZGVsTmFtZSIsIm9wRXhwVGVjaFR5cGUiLCJpZCIsImV4cF9zbm8iLCJyZWZlcmVuY2VzIiwibW9kZWwiLCJrZXkiLCJvblVwZGF0ZSIsIm9uRGVsZXRlIiwidHlwZV9pZCIsIkNsYXNzVG9waWMiLCJuYW1lIiwiY3JlYXRlZF9hdCIsIlRJTUUiLCJBaWVkdXRlY2hUb29sIiwiTlVNQkVSIiwiTGVzc29uU2FtcGxlIiwidG9waWMiLCJ0b3BpY19pZCIsInRpbWUiLCJkaWZmaWN1bHR5Iiwib2JqZWN0aXZlIiwiYWNoaWV2ZW1lbnQiLCJzb3VyY2UiLCJwZGZfbGluayIsImJlbG9uZ3NUbyIsImZvcmVpZ25LZXkiLCJhcyIsIk1vZGVsU2VhcmNoIiwic3ViamVjdF9pZCIsImdyYWRlIiwiSlNPTiIsImFwYSIsImltYWdlIiwiQ2xhc3NDYXNlVG9vbCIsImNhc2Vfc25vIiwidG9vbF9zbm8iLCJiZWxvbmdzVG9NYW55IiwidGhyb3VnaCIsIm90aGVyS2V5IiwiT3BlcmF0aW9uQ2FzZSIsInRpdGxlIiwiY2hhc2kiLCJsZWFybmluZ19vYmplY3RpdmVzIiwiYWNoaWV2ZW1lbnRfY3JpdGVyaWEiLCJPcGVyYXRpb25Ub3BpYyIsIm9wZXJhdGlvbl9pZCIsIk9wZXJhdGlvblR5cGUiLCJPcGVyYXRpb25TdWJqZWN0IiwiT3BlcmF0aW9uR3JhZGUiLCJncmFkZV9pZCIsIk9wZXJhdGlvblRvb2wiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdnVvbmdrbWEvaUNsb3VkIERyaXZlIChBcmNoaXZlKS9Eb2N1bWVudHMva2NuZC9zcmMvbW9kZWxzLyIsInNvdXJjZXMiOlsic2VhcmNoTW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBEYXRhVHlwZXMgfSA9IHJlcXVpcmUoXCJzZXF1ZWxpemVcIik7XG5cbmNvbnN0IHNlcXVlbGl6ZSA9IHJlcXVpcmUoXCIuLi9jb25maWcvZGF0YWJhc2VcIik7XG5cbmNvbnN0IHsgVG9waWMsIFN1YmplY3QsIEdyYWRlLCBUeXBlIH0gPSByZXF1aXJlKFwiLi4vbW9kZWxzL2Rlc2lnbk1vZGVsXCIpO1xuY29uc3Qgb3BFeHAgPSBzZXF1ZWxpemUuZGVmaW5lKFxuICAgIFwib3BFeHBcIixcbiAgICB7XG4gICAgICAgIHNubzoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgbmFtZV9rcjogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIHRvb2xfaWQ6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICB0ZWNoX2lkOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgY29yZV9mdW5jOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgbmFtZV9lbjogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgc2VydmljZV9saW5rOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgY2FzZV9saW5rOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgY2FzZV9pbWc6IERhdGFUeXBlcy5URVhULFxuICAgIH0sXG4gICAge1xuICAgICAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICAgICAgdGFibGVOYW1lOiBcIm9wX2V4cFwiLFxuICAgICAgICBtb2RlbE5hbWU6IFwib3BFeHBcIixcbiAgICB9XG4pO1xuXG5jb25zdCBvcEV4cFRlY2hUeXBlID0gc2VxdWVsaXplLmRlZmluZShcbiAgICBcIm9wX2V4cF90ZWNoX3R5cGVcIixcbiAgICB7XG4gICAgICAgIGlkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBleHBfc25vOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogeyB0YWJsZU5hbWU6IFwib3BfZXhwXCIgfSwgLy8gcHJvdmlkZSB0YWJsZSBuYW1lXG4gICAgICAgICAgICAgICAga2V5OiBcInNub1wiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgICAgICBvblVwZGF0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgICAgICBvbkRlbGV0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGVfaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiB7IHRhYmxlTmFtZTogXCJ0b29sX2FpZWR1dGVjaFwiIH0sIC8vIHByb3ZpZGUgdGFibGUgbmFtZVxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgICAgICBvblVwZGF0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgICAgICBvbkRlbGV0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgICAgICB0YWJsZU5hbWU6IFwib3BfZXhwX3RlY2hfdHlwZVwiLFxuICAgICAgICBtb2RlbE5hbWU6IFwib3BFeHBUZWNoVHlwZVwiLFxuICAgIH1cbik7XG5cbmNvbnN0IENsYXNzVG9waWMgPSBzZXF1ZWxpemUuZGVmaW5lKFxuICAgIFwiQ2xhc3NUb3BpY1wiLFxuICAgIHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIG5hbWU6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBjcmVhdGVkX2F0OiBEYXRhVHlwZXMuVElNRSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdGltZXN0YW1wczogZmFsc2UsXG4gICAgICAgIHRhYmxlTmFtZTogXCJjbGFzc190b3BpY1wiLFxuICAgICAgICBtb2RlbE5hbWU6IFwiQ2xhc3NUb3BpY1wiLFxuICAgIH1cbik7XG5cbmNvbnN0IEFpZWR1dGVjaFRvb2wgPSBzZXF1ZWxpemUuZGVmaW5lKFxuICAgIFwiQWllZHV0ZWNoVG9vbFwiLFxuICAgIHtcbiAgICAgICAgc25vOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBuYW1lX2tyOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgbmFtZV9lbjogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIHRvb2xfaWQ6IERhdGFUeXBlcy5OVU1CRVIsXG4gICAgICAgIHRlY2hfaWQ6IERhdGFUeXBlcy5OVU1CRVIsXG4gICAgICAgIGNvcmVfZnVuYzogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgc2VydmljZV9saW5rOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgY2FzZV9saW5rOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgY2FzZV9pbWc6IERhdGFUeXBlcy5URVhULFxuICAgIH0sXG4gICAge1xuICAgICAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICAgICAgdGFibGVOYW1lOiBcImFpZWR1dGVjaF90b29sXCIsXG4gICAgICAgIG1vZGVsTmFtZTogXCJBaWVkdXRlY2hUb29sXCIsXG4gICAgfVxuKTtcblxuY29uc3QgTGVzc29uU2FtcGxlID0gc2VxdWVsaXplLmRlZmluZShcbiAgICBcIkxlc3NvblNhbXBsZVwiLFxuICAgIHtcbiAgICAgICAgc25vOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICB0b3BpYzogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIHRvcGljX2lkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogeyB0YWJsZU5hbWU6IFwiY2xhc3NfdG9waWNcIiB9LFxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgICAgICBvblVwZGF0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgICAgICBvbkRlbGV0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgIH0sXG4gICAgICAgIHRpbWU6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBkaWZmaWN1bHR5OiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgb2JqZWN0aXZlOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgYWNoaWV2ZW1lbnQ6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBzb3VyY2U6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBwZGZfbGluazogRGF0YVR5cGVzLlRFWFQsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgICAgICB0YWJsZU5hbWU6IFwiY2xhc3NfY2FzZVwiLFxuICAgICAgICBtb2RlbE5hbWU6IFwiTGVzc29uU2FtcGxlXCIsXG4gICAgfVxuKTtcbkxlc3NvblNhbXBsZS5iZWxvbmdzVG8oQ2xhc3NUb3BpYywge1xuICAgIGZvcmVpZ25LZXk6IFwidG9waWNfaWRcIixcbiAgICBhczogXCJjbGFzc1RvcGljXCIsXG59KTtcblxuY29uc3QgTW9kZWxTZWFyY2ggPSBzZXF1ZWxpemUuZGVmaW5lKFxuICAgIFwiTW9kZWxTZWFyY2hcIixcbiAgICB7XG4gICAgICAgIGlkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBuYW1lOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgdHlwZV9pZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICAgICAgbW9kZWw6IHsgdGFibGVOYW1lOiBcImNsYXNzX3R5cGVcIiB9LFxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgICAgICBvblVwZGF0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgICAgICBvbkRlbGV0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgIH0sXG4gICAgICAgIHN1YmplY3RfaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiB7IHRhYmxlTmFtZTogXCJjbGFzc19zdWJqZWN0XCIgfSxcbiAgICAgICAgICAgICAgICBrZXk6IFwiaWRcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICAgICAgb25VcGRhdGU6IFwiY2FzY2FkZVwiLFxuICAgICAgICAgICAgb25EZWxldGU6IFwiY2FzY2FkZVwiLFxuICAgICAgICB9LFxuICAgICAgICBncmFkZTogRGF0YVR5cGVzLkpTT04sXG4gICAgICAgIHNvdXJjZTogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIHBkZl9saW5rOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgZGVzY3JpcHRpb246IERhdGFUeXBlcy5URVhULFxuICAgICAgICBhcGE6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBpbWFnZTogRGF0YVR5cGVzLlRFWFQsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgICAgICB0YWJsZU5hbWU6IFwibW9kZWxcIixcbiAgICAgICAgbW9kZWxOYW1lOiBcIk1vZGVsU2VhcmNoXCIsXG4gICAgfVxuKTtcbk1vZGVsU2VhcmNoLmJlbG9uZ3NUbyhUeXBlLCB7XG4gICAgZm9yZWlnbktleTogXCJ0eXBlX2lkXCIsXG4gICAgYXM6IFwidHlwZVwiLFxufSk7XG5Nb2RlbFNlYXJjaC5iZWxvbmdzVG8oU3ViamVjdCwge1xuICAgIGZvcmVpZ25LZXk6IFwic3ViamVjdF9pZFwiLFxuICAgIGFzOiBcInN1YmplY3RcIixcbn0pO1xuLy9NYW55LXRvLU1hbnkgQXNzb2NpYXRpb24gTGVzc29uU2FtcGxlLCB0b29sXG5cbmNvbnN0IENsYXNzQ2FzZVRvb2wgPSBzZXF1ZWxpemUuZGVmaW5lKFxuICAgIFwiQ2xhc3NDYXNlVG9vbFwiLFxuICAgIHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIGNhc2Vfc25vOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogTGVzc29uU2FtcGxlLFxuICAgICAgICAgICAgICAgIGtleTogXCJzbm9cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHRvb2xfc25vOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogQWllZHV0ZWNoVG9vbCxcbiAgICAgICAgICAgICAgICBrZXk6IFwic25vXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgICB0YWJsZU5hbWU6IFwiY2xhc3NfY2FzZV90b29sXCIsXG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgIH1cbik7XG5cbkxlc3NvblNhbXBsZS5iZWxvbmdzVG9NYW55KEFpZWR1dGVjaFRvb2wsIHtcbiAgICB0aHJvdWdoOiBDbGFzc0Nhc2VUb29sLFxuICAgIGFzOiBcInRvb2xzXCIsXG4gICAgZm9yZWlnbktleTogXCJjYXNlX3Nub1wiLFxuICAgIG90aGVyS2V5OiBcInRvb2xfc25vXCIsXG59KTtcbkFpZWR1dGVjaFRvb2wuYmVsb25nc1RvTWFueShMZXNzb25TYW1wbGUsIHtcbiAgICB0aHJvdWdoOiBDbGFzc0Nhc2VUb29sLFxuICAgIGFzOiBcImxlc3NvbnNcIixcbiAgICBmb3JlaWduS2V5OiBcInRvb2xfc25vXCIsXG4gICAgb3RoZXJLZXk6IFwiY2FzZV9zbm9cIixcbn0pO1xuLy9PcGVyYXRpb25DYXNlIHRhYmxlXG5jb25zdCBPcGVyYXRpb25DYXNlID0gc2VxdWVsaXplLmRlZmluZShcbiAgICBcIk9wZXJhdGlvbkNhc2VcIixcbiAgICB7XG4gICAgICAgIGlkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICB0aXRsZTogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIGNoYXNpOiBEYXRhVHlwZXMuTlVNQkVSLFxuICAgICAgICBkaWZmaWN1bHR5OiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgbGVhcm5pbmdfb2JqZWN0aXZlczogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIGFjaGlldmVtZW50X2NyaXRlcmlhOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgc291cmNlOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgcGRmX2xpbms6IERhdGFUeXBlcy5URVhULFxuICAgIH0sXG4gICAge1xuICAgICAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICAgICAgdGFibGVOYW1lOiBcIm9wZXJhdGlvbl9jYXNlXCIsXG4gICAgICAgIG1vZGVsTmFtZTogXCJPcGVyYXRpb25DYXNlXCIsXG4gICAgfVxuKTtcbi8vXG5jb25zdCBPcGVyYXRpb25Ub3BpYyA9IHNlcXVlbGl6ZS5kZWZpbmUoXG4gICAgXCJPcGVyYXRpb25Ub3BpY1wiLFxuICAgIHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIHRvcGljX2lkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogVG9waWMsXG4gICAgICAgICAgICAgICAga2V5OiBcImlkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBvcGVyYXRpb25faWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiBPcGVyYXRpb25DYXNlLFxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdGFibGVOYW1lOiBcIm9wZXJhdGlvbl90b3BpY1wiLFxuICAgICAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICB9XG4pO1xuXG5PcGVyYXRpb25DYXNlLmJlbG9uZ3NUb01hbnkoVG9waWMsIHtcbiAgICB0aHJvdWdoOiBPcGVyYXRpb25Ub3BpYyxcbiAgICBhczogXCJ0b3BpY3NcIixcbiAgICBmb3JlaWduS2V5OiBcIm9wZXJhdGlvbl9pZFwiLFxuICAgIG90aGVyS2V5OiBcInRvcGljX2lkXCIsXG59KTtcblRvcGljLmJlbG9uZ3NUb01hbnkoT3BlcmF0aW9uQ2FzZSwge1xuICAgIHRocm91Z2g6IE9wZXJhdGlvblRvcGljLFxuICAgIGFzOiBcInJlbGF0ZWRPcGVyYXRpb25Ub3BpY1wiLFxuICAgIGZvcmVpZ25LZXk6IFwidG9waWNfaWRcIixcbiAgICBvdGhlcktleTogXCJvcGVyYXRpb25faWRcIixcbn0pO1xuLy8gLy9cbmNvbnN0IE9wZXJhdGlvblR5cGUgPSBzZXF1ZWxpemUuZGVmaW5lKFxuICAgIFwiT3BlcmF0aW9uVHlwZVwiLFxuICAgIHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGVfaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiBUeXBlLFxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgb3BlcmF0aW9uX2lkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogT3BlcmF0aW9uQ2FzZSxcbiAgICAgICAgICAgICAgICBrZXk6IFwiaWRcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRhYmxlTmFtZTogXCJvcGVyYXRpb25fdHlwZVwiLFxuICAgICAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICB9XG4pO1xuT3BlcmF0aW9uQ2FzZS5iZWxvbmdzVG9NYW55KFR5cGUsIHtcbiAgICB0aHJvdWdoOiBPcGVyYXRpb25UeXBlLFxuICAgIGFzOiBcInR5cGVzXCIsXG4gICAgZm9yZWlnbktleTogXCJvcGVyYXRpb25faWRcIixcbiAgICBvdGhlcktleTogXCJ0eXBlX2lkXCIsXG59KTtcblR5cGUuYmVsb25nc1RvTWFueShPcGVyYXRpb25DYXNlLCB7XG4gICAgdGhyb3VnaDogT3BlcmF0aW9uVHlwZSxcbiAgICBhczogXCJyZWxhdGVkT3BlcmF0aW9uVHlwZXNcIixcbiAgICBmb3JlaWduS2V5OiBcInR5cGVfaWRcIixcbiAgICBvdGhlcktleTogXCJvcGVyYXRpb25faWRcIixcbn0pO1xuLy8gLy9cblxuY29uc3QgT3BlcmF0aW9uU3ViamVjdCA9IHNlcXVlbGl6ZS5kZWZpbmUoXG4gICAgXCJPcGVyYXRpb25TdWJqZWN0XCIsXG4gICAge1xuICAgICAgICBpZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgc3ViamVjdF9pZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICAgICAgbW9kZWw6IFN1YmplY3QsXG4gICAgICAgICAgICAgICAga2V5OiBcImlkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBvcGVyYXRpb25faWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiBPcGVyYXRpb25DYXNlLFxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdGFibGVOYW1lOiBcIm9wZXJhdGlvbl9zdWJqZWN0XCIsXG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgIH1cbik7XG5cbk9wZXJhdGlvbkNhc2UuYmVsb25nc1RvTWFueShTdWJqZWN0LCB7XG4gICAgdGhyb3VnaDogT3BlcmF0aW9uU3ViamVjdCxcbiAgICBhczogXCJzdWJqZWN0c1wiLFxuICAgIGZvcmVpZ25LZXk6IFwib3BlcmF0aW9uX2lkXCIsXG4gICAgb3RoZXJLZXk6IFwic3ViamVjdF9pZFwiLFxufSk7XG5TdWJqZWN0LmJlbG9uZ3NUb01hbnkoT3BlcmF0aW9uQ2FzZSwge1xuICAgIHRocm91Z2g6IE9wZXJhdGlvblN1YmplY3QsXG4gICAgYXM6IFwicmVsYXRlZE9wZXJhdGlvblN1YmplY3RcIixcbiAgICBmb3JlaWduS2V5OiBcInN1YmplY3RfaWRcIixcbiAgICBvdGhlcktleTogXCJvcGVyYXRpb25faWRcIixcbn0pO1xuXG4vL1xuXG5jb25zdCBPcGVyYXRpb25HcmFkZSA9IHNlcXVlbGl6ZS5kZWZpbmUoXG4gICAgXCJPcGVyYXRpb25HcmFkZVwiLFxuICAgIHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIGdyYWRlX2lkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogR3JhZGUsXG4gICAgICAgICAgICAgICAga2V5OiBcImlkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBvcGVyYXRpb25faWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiBPcGVyYXRpb25DYXNlLFxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdGFibGVOYW1lOiBcIm9wZXJhdGlvbl9ncmFkZVwiLFxuICAgICAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICB9XG4pO1xuXG5PcGVyYXRpb25DYXNlLmJlbG9uZ3NUb01hbnkoR3JhZGUsIHtcbiAgICB0aHJvdWdoOiBPcGVyYXRpb25HcmFkZSxcbiAgICBhczogXCJncmFkZXNcIixcbiAgICBmb3JlaWduS2V5OiBcIm9wZXJhdGlvbl9pZFwiLFxuICAgIG90aGVyS2V5OiBcImdyYWRlX2lkXCIsXG59KTtcbkdyYWRlLmJlbG9uZ3NUb01hbnkoT3BlcmF0aW9uQ2FzZSwge1xuICAgIHRocm91Z2g6IE9wZXJhdGlvbkdyYWRlLFxuICAgIGFzOiBcInJlbGF0ZWRPcGVyYXRpb25HcmFkZVwiLFxuICAgIGZvcmVpZ25LZXk6IFwiZ3JhZGVfaWRcIixcbiAgICBvdGhlcktleTogXCJvcGVyYXRpb25faWRcIixcbn0pO1xuXG4vLyAvL1xuY29uc3QgT3BlcmF0aW9uVG9vbCA9IHNlcXVlbGl6ZS5kZWZpbmUoXG4gICAgXCJPcGVyYXRpb25Ub29sXCIsXG4gICAge1xuICAgICAgICBpZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgdG9vbF9pZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICAgICAgbW9kZWw6IEFpZWR1dGVjaFRvb2wsXG4gICAgICAgICAgICAgICAga2V5OiBcImlkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBvcGVyYXRpb25faWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiBPcGVyYXRpb25DYXNlLFxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdGFibGVOYW1lOiBcIm9wZXJhdGlvbl90b29sXCIsXG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgIH1cbik7XG5cbk9wZXJhdGlvbkNhc2UuYmVsb25nc1RvTWFueShBaWVkdXRlY2hUb29sLCB7XG4gICAgdGhyb3VnaDogT3BlcmF0aW9uVG9vbCxcbiAgICBhczogXCJ0b29sc1wiLFxuICAgIGZvcmVpZ25LZXk6IFwib3BlcmF0aW9uX2lkXCIsXG4gICAgb3RoZXJLZXk6IFwidG9vbF9pZFwiLFxufSk7XG5BaWVkdXRlY2hUb29sLmJlbG9uZ3NUb01hbnkoT3BlcmF0aW9uQ2FzZSwge1xuICAgIHRocm91Z2g6IE9wZXJhdGlvblRvb2wsXG4gICAgYXM6IFwicmVsYXRlZE9wZXJhdGlvblRvb2xzXCIsXG4gICAgZm9yZWlnbktleTogXCJ0b29sX2lkXCIsXG4gICAgb3RoZXJLZXk6IFwib3BlcmF0aW9uX2lkXCIsXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgb3BFeHAsXG4gICAgQWllZHV0ZWNoVG9vbCxcbiAgICBvcEV4cFRlY2hUeXBlLFxuICAgIHNlcXVlbGl6ZSxcbiAgICBMZXNzb25TYW1wbGUsXG4gICAgTW9kZWxTZWFyY2gsXG4gICAgT3BlcmF0aW9uQ2FzZSxcbiAgICBPcGVyYXRpb25Ub29sLFxuICAgIE9wZXJhdGlvbkdyYWRlLFxuICAgIE9wZXJhdGlvblR5cGUsXG4gICAgT3BlcmF0aW9uU3ViamVjdCxcbiAgICBPcGVyYXRpb25Ub3BpYyxcbn07XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUE7QUFBVSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFFMUMsTUFBTUMsU0FBUyxHQUFHRCxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFFL0MsTUFBTTtFQUFFRSxLQUFLO0VBQUVDLE9BQU87RUFBRUMsS0FBSztFQUFFQztBQUFLLENBQUMsR0FBR0wsT0FBTyxDQUFDLHVCQUF1QixDQUFDO0FBQ3hFLE1BQU1NLEtBQUssR0FBR0wsU0FBUyxDQUFDTSxNQUFNLENBQzFCLE9BQU8sRUFDUDtFQUNJQyxHQUFHLEVBQUU7SUFDREMsSUFBSSxFQUFFVixTQUFTLENBQUNXLE9BQU87SUFDdkJDLGFBQWEsRUFBRSxJQUFJO0lBQ25CQyxVQUFVLEVBQUUsSUFBSTtJQUNoQkMsU0FBUyxFQUFFO0VBQ2YsQ0FBQztFQUNEQyxPQUFPLEVBQUVmLFNBQVMsQ0FBQ2dCLElBQUk7RUFDdkJDLE9BQU8sRUFBRWpCLFNBQVMsQ0FBQ1csT0FBTztFQUMxQk8sT0FBTyxFQUFFbEIsU0FBUyxDQUFDVyxPQUFPO0VBQzFCUSxTQUFTLEVBQUVuQixTQUFTLENBQUNnQixJQUFJO0VBQ3pCSSxPQUFPLEVBQUVwQixTQUFTLENBQUNnQixJQUFJO0VBQ3ZCSyxXQUFXLEVBQUVyQixTQUFTLENBQUNnQixJQUFJO0VBQzNCTSxZQUFZLEVBQUV0QixTQUFTLENBQUNnQixJQUFJO0VBQzVCTyxTQUFTLEVBQUV2QixTQUFTLENBQUNnQixJQUFJO0VBQ3pCUSxRQUFRLEVBQUV4QixTQUFTLENBQUNnQjtBQUN4QixDQUFDLEVBQ0Q7RUFDSVMsVUFBVSxFQUFFLEtBQUs7RUFDakJDLFNBQVMsRUFBRSxRQUFRO0VBQ25CQyxTQUFTLEVBQUU7QUFDZixDQUNKLENBQUM7QUFFRCxNQUFNQyxhQUFhLEdBQUcxQixTQUFTLENBQUNNLE1BQU0sQ0FD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","map":{"version":3,"names":["DataTypes","require","sequelize","Topic","Subject","Grade","Type","opExp","define","sno","type","INTEGER","autoIncrement","primaryKey","allowNull","name_kr","TEXT","tool_id","tech_id","core_func","name_en","description","service_link","case_link","case_img","timestamps","tableName","modelName","opExpTechType","id","exp_sno","references","model","key","onUpdate","onDelete","type_id","ClassTopic","name","created_at","TIME","AiedutechTool","NUMBER","LessonSample","topic","topic_id","time","difficulty","objective","achievement","source","pdf_link","belongsTo","foreignKey","as","ModelSearch","subject_id","grade","JSON","apa","image","ClassCaseTool","case_sno","tool_sno","belongsToMany","through","otherKey","OperationCase","title","chasi","learning_objectives","achievement_criteria","OperationTopic","operation_id","OperationType","OperationSubject","OperationGrade","grade_id","OperationTool","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/","sources":["searchModel.js"],"sourcesContent":["const { DataTypes } = require(\"sequelize\");\n\nconst sequelize = require(\"../config/database\");\n\nconst { Topic, Subject, Grade, Type } = require(\"../models/designModel\");\nconst opExp = sequelize.define(\n    \"opExp\",\n    {\n        sno: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        name_kr: DataTypes.TEXT,\n        tool_id: DataTypes.INTEGER,\n        tech_id: DataTypes.INTEGER,\n        core_func: DataTypes.TEXT,\n        name_en: DataTypes.TEXT,\n        description: DataTypes.TEXT,\n        service_link: DataTypes.TEXT,\n        case_link: DataTypes.TEXT,\n        case_img: DataTypes.TEXT,\n    },\n    {\n        timestamps: false,\n        tableName: \"op_exp\",\n        modelName: \"opExp\",\n    }\n);\n\nconst opExpTechType = sequelize.define(\n    \"op_exp_tech_type\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        exp_sno: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"op_exp\" }, // provide table name\n                key: \"sno\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        type_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"tool_aiedutech\" }, // provide table name\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n    },\n    {\n        timestamps: false,\n        tableName: \"op_exp_tech_type\",\n        modelName: \"opExpTechType\",\n    }\n);\n\nconst ClassTopic = sequelize.define(\n    \"ClassTopic\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        name: DataTypes.TEXT,\n        created_at: DataTypes.TIME,\n    },\n    {\n        timestamps: false,\n        tableName: \"class_topic\",\n        modelName: \"ClassTopic\",\n    }\n);\n\nconst AiedutechTool = sequelize.define(\n    \"AiedutechTool\",\n    {\n        sno: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        name_kr: DataTypes.TEXT,\n        name_en: DataTypes.TEXT,\n        tool_id: DataTypes.NUMBER,\n        tech_id: DataTypes.NUMBER,\n        core_func: DataTypes.TEXT,\n        description: DataTypes.TEXT,\n        service_link: DataTypes.TEXT,\n        case_link: DataTypes.TEXT,\n        case_img: DataTypes.TEXT,\n    },\n    {\n        timestamps: false,\n        tableName: \"aiedutech_tool\",\n        modelName: \"AiedutechTool\",\n    }\n);\n\nconst LessonSample = sequelize.define(\n    \"LessonSample\",\n    {\n        sno: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        topic: DataTypes.TEXT,\n        topic_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"class_topic\" },\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        time: DataTypes.TEXT,\n        difficulty: DataTypes.TEXT,\n        objective: DataTypes.TEXT,\n        achievement: DataTypes.TEXT,\n        source: DataTypes.TEXT,\n        pdf_link: DataTypes.TEXT,\n    },\n    {\n        timestamps: false,\n        tableName: \"class_case\",\n        modelName: \"LessonSample\",\n    }\n);\nLessonSample.belongsTo(ClassTopic, {\n    foreignKey: \"topic_id\",\n    as: \"classTopic\",\n});\n\nconst ModelSearch = sequelize.define(\n    \"ModelSearch\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        name: DataTypes.TEXT,\n        type_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"class_type\" },\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        subject_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"class_subject\" },\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        grade: DataTypes.JSON,\n        source: DataTypes.TEXT,\n        pdf_link: DataTypes.TEXT,\n        description: DataTypes.TEXT,\n        apa: DataTypes.TEXT,\n        image: DataTypes.TEXT,\n    },\n    {\n        timestamps: false,\n        tableName: \"model\",\n        modelName: \"ModelSearch\",\n    }\n);\nModelSearch.belongsTo(Type, {\n    foreignKey: \"type_id\",\n    as: \"type\",\n});\nModelSearch.belongsTo(Subject, {\n    foreignKey: \"subject_id\",\n    as: \"subject\",\n});\n//Many-to-Many Association LessonSample, tool\n\nconst ClassCaseTool = sequelize.define(\n    \"ClassCaseTool\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        case_sno: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: LessonSample,\n                key: \"sno\",\n            },\n        },\n        tool_sno: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: AiedutechTool,\n                key: \"sno\",\n            },\n        },\n    },\n    {\n        tableName: \"class_case_tool\",\n        timestamps: false,\n    }\n);\n\nLessonSample.belongsToMany(AiedutechTool, {\n    through: ClassCaseTool,\n    as: \"tools\",\n    foreignKey: \"case_sno\",\n    otherKey: \"tool_sno\",\n});\nAiedutechTool.belongsToMany(LessonSample, {\n    through: ClassCaseTool,\n    as: \"lessons\",\n    foreignKey: \"tool_sno\",\n    otherKey: \"case_sno\",\n});\n//OperationCase table\nconst OperationCase = sequelize.define(\n    \"OperationCase\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        title: DataTypes.TEXT,\n        chasi: DataTypes.NUMBER,\n        difficulty: DataTypes.TEXT,\n        learning_objectives: DataTypes.TEXT,\n        achievement_criteria: DataTypes.TEXT,\n        source: DataTypes.TEXT,\n        pdf_link: DataTypes.TEXT,\n    },\n    {\n        timestamps: false,\n        tableName: \"operation_case\",\n        modelName: \"OperationCase\",\n    }\n);\n//\nconst OperationTopic = sequelize.define(\n    \"OperationTopic\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        topic_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: Topic,\n                key: \"id\",\n            },\n        },\n        operation_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: OperationCase,\n                key: \"id\",\n            },\n        },\n    },\n    {\n        tableName: \"operation_topic\",\n        timestamps: false,\n    }\n);\n\nOperationCase.belongsToMany(Topic, {\n    through: OperationTopic,\n    as: \"topics\",\n    foreignKey: \"operation_id\",\n    otherKey: \"topic_id\",\n});\nTopic.belongsToMany(OperationCase, {\n    through: OperationTopic,\n    as: \"relatedOperationTopic\",\n    foreignKey: \"topic_id\",\n    otherKey: \"operation_id\",\n});\n// //\nconst OperationType = sequelize.define(\n    \"OperationType\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        type_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: Type,\n                key: \"id\",\n            },\n        },\n        operation_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: OperationCase,\n                key: \"id\",\n            },\n        },\n    },\n    {\n        tableName: \"operation_type\",\n        timestamps: false,\n    }\n);\nOperationCase.belongsToMany(Type, {\n    through: OperationType,\n    as: \"types\",\n    foreignKey: \"operation_id\",\n    otherKey: \"type_id\",\n});\nType.belongsToMany(OperationCase, {\n    through: OperationType,\n    as: \"relatedOperationTypes\",\n    foreignKey: \"type_id\",\n    otherKey: \"operation_id\",\n});\n// //\n\nconst OperationSubject = sequelize.define(\n    \"OperationSubject\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        subject_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: Subject,\n                key: \"id\",\n            },\n        },\n        operation_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: OperationCase,\n                key: \"id\",\n            },\n        },\n    },\n    {\n        tableName: \"operation_subject\",\n        timestamps: false,\n    }\n);\n\nOperationCase.belongsToMany(Subject, {\n    through: OperationSubject,\n    as: \"subjects\",\n    foreignKey: \"operation_id\",\n    otherKey: \"subject_id\",\n});\nSubject.belongsToMany(OperationCase, {\n    through: OperationSubject,\n    as: \"relatedOperationSubject\",\n    foreignKey: \"subject_id\",\n    otherKey: \"operation_id\",\n});\n\n//\n\nconst OperationGrade = sequelize.define(\n    \"OperationGrade\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        grade_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: Grade,\n                key: \"id\",\n            },\n        },\n        operation_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: OperationCase,\n                key: \"id\",\n            },\n        },\n    },\n    {\n        tableName: \"operation_grade\",\n        timestamps: false,\n    }\n);\n\nOperationCase.belongsToMany(Grade, {\n    through: OperationGrade,\n    as: \"grades\",\n    foreignKey: \"operation_id\",\n    otherKey: \"grade_id\",\n});\nGrade.belongsToMany(OperationCase, {\n    through: OperationGrade,\n    as: \"relatedOperationGrade\",\n    foreignKey: \"grade_id\",\n    otherKey: \"operation_id\",\n});\n\n// //\nconst OperationTool = sequelize.define(\n    \"OperationTool\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        tool_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: AiedutechTool,\n                key: \"id\",\n            },\n        },\n        operation_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: OperationCase,\n                key: \"id\",\n            },\n        },\n    },\n    {\n        tableName: \"operation_tool\",\n        timestamps: false,\n    }\n);\n\nOperationCase.belongsToMany(AiedutechTool, {\n    through: OperationTool,\n    as: \"tools\",\n    foreignKey: \"operation_id\",\n    otherKey: \"tool_id\",\n});\nAiedutechTool.belongsToMany(OperationCase, {\n    through: OperationTool,\n    as: \"relatedOperationTools\",\n    foreignKey: \"tool_id\",\n    otherKey: \"operation_id\",\n});\n\nmodule.exports = {\n    opExp,\n    AiedutechTool,\n    opExpTechType,\n    sequelize,\n    LessonSample,\n    ModelSearch,\n    OperationCase,\n    OperationTool,\n    OperationGrade,\n    OperationType,\n    OperationSubject,\n    OperationTopic,\n};\n"],"mappings":"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","ignoreList":[]}},"mtime":1721113078685},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/designModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"product\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:product":{"value":{"code":"const {\n  DataTypes\n} = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = require(\"../models/usedModel\");\nconst Design = sequelize.define(\"Design\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  user_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"user_info\"\n      },\n      // provide table name\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  topic_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"class_topic\"\n      },\n      // provide table name\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  subject_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"user_info\"\n      },\n      // provide table name\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  subject_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"user_info\"\n      },\n      // provide table name\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  time: DataTypes.INTEGER,\n  step1: DataTypes.TEXT,\n  step2: DataTypes.TEXT,\n  step3: DataTypes.TEXT,\n  step4: DataTypes.TEXT,\n  step5: DataTypes.TEXT,\n  difficulty: DataTypes.TEXT,\n  achievement: DataTypes.TEXT,\n  objective: DataTypes.TEXT,\n  topic_tp_nm: DataTypes.TEXT,\n  type_nm: DataTypes.TEXT,\n  subject_nm: DataTypes.TEXT,\n  grade_nm: DataTypes.TEXT,\n  tool_nm: DataTypes.TEXT,\n  date: DataTypes.DATE\n}, {\n  timestamps: true,\n  tableName: \"design\",\n  modelName: \"design\"\n});\nconst Topic = sequelize.define(\"Topic\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  name: DataTypes.STRING,\n  created_at: DataTypes.DATE\n}, {\n  timestamps: false,\n  tableName: \"class_topic\",\n  createdAt: \"created_at\",\n  modelName: \"Topic\"\n});\nconst Subject = sequelize.define(\"Subject\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  name: DataTypes.STRING,\n  created_at: DataTypes.DATE\n}, {\n  timestamps: false,\n  tableName: \"class_subject\",\n  createdAt: \"created_at\",\n  modelName: \"Subject\"\n});\nconst Grade = sequelize.define(\"Grade\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  name: DataTypes.STRING,\n  created_at: DataTypes.DATE\n}, {\n  timestamps: false,\n  tableName: \"class_grade\",\n  createdAt: \"created_at\",\n  modelName: \"Grade\"\n});\nconst Type = sequelize.define(\"Type\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  name: DataTypes.STRING,\n  created_at: DataTypes.DATE\n}, {\n  timestamps: false,\n  createdAt: \"created_at\",\n  tableName: \"class_type\",\n  modelName: \"Type\"\n});\nmodule.exports = {\n  Topic,\n  Subject,\n  Grade,\n  Type\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEYXRhVHlwZXMiLCJyZXF1aXJlIiwic2VxdWVsaXplIiwiVXNlciIsIkRlc2lnbiIsImRlZmluZSIsImlkIiwidHlwZSIsIklOVEVHRVIiLCJhdXRvSW5jcmVtZW50IiwicHJpbWFyeUtleSIsImFsbG93TnVsbCIsInVzZXJfaWQiLCJyZWZlcmVuY2VzIiwibW9kZWwiLCJ0YWJsZU5hbWUiLCJrZXkiLCJvblVwZGF0ZSIsIm9uRGVsZXRlIiwidG9waWNfaWQiLCJzdWJqZWN0X2lkIiwidGltZSIsInN0ZXAxIiwiVEVYVCIsInN0ZXAyIiwic3RlcDMiLCJzdGVwNCIsInN0ZXA1IiwiZGlmZmljdWx0eSIsImFjaGlldmVtZW50Iiwib2JqZWN0aXZlIiwidG9waWNfdHBfbm0iLCJ0eXBlX25tIiwic3ViamVjdF9ubSIsImdyYWRlX25tIiwidG9vbF9ubSIsImRhdGUiLCJEQVRFIiwidGltZXN0YW1wcyIsIm1vZGVsTmFtZSIsIlRvcGljIiwibmFtZSIsIlNUUklORyIsImNyZWF0ZWRfYXQiLCJjcmVhdGVkQXQiLCJTdWJqZWN0IiwiR3JhZGUiLCJUeXBlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL21vZGVscy8iLCJzb3VyY2VzIjpbImRlc2lnbk1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgRGF0YVR5cGVzIH0gPSByZXF1aXJlKFwic2VxdWVsaXplXCIpO1xuY29uc3Qgc2VxdWVsaXplID0gcmVxdWlyZShcIi4uL2NvbmZpZy9kYXRhYmFzZVwiKTtcbmNvbnN0IFVzZXIgPSByZXF1aXJlKFwiLi4vbW9kZWxzL3VzZWRNb2RlbFwiKTtcbmNvbnN0IERlc2lnbiA9IHNlcXVlbGl6ZS5kZWZpbmUoXG4gICAgXCJEZXNpZ25cIixcbiAgICB7XG4gICAgICAgIGlkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICB1c2VyX2lkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogeyB0YWJsZU5hbWU6IFwidXNlcl9pbmZvXCIgfSwgLy8gcHJvdmlkZSB0YWJsZSBuYW1lXG4gICAgICAgICAgICAgICAga2V5OiBcImlkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgICAgIG9uVXBkYXRlOiBcImNhc2NhZGVcIixcbiAgICAgICAgICAgIG9uRGVsZXRlOiBcImNhc2NhZGVcIixcbiAgICAgICAgfSxcbiAgICAgICAgdG9waWNfaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiB7IHRhYmxlTmFtZTogXCJjbGFzc190b3BpY1wiIH0sIC8vIHByb3ZpZGUgdGFibGUgbmFtZVxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgICAgICBvblVwZGF0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgICAgICBvbkRlbGV0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgIH0sXG4gICAgICAgIHN1YmplY3RfaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiB7IHRhYmxlTmFtZTogXCJ1c2VyX2luZm9cIiB9LCAvLyBwcm92aWRlIHRhYmxlIG5hbWVcbiAgICAgICAgICAgICAgICBrZXk6IFwiaWRcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICAgICAgb25VcGRhdGU6IFwiY2FzY2FkZVwiLFxuICAgICAgICAgICAgb25EZWxldGU6IFwiY2FzY2FkZVwiLFxuICAgICAgICB9LFxuICAgICAgICBzdWJqZWN0X2lkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogeyB0YWJsZU5hbWU6IFwidXNlcl9pbmZvXCIgfSwgLy8gcHJvdmlkZSB0YWJsZSBuYW1lXG4gICAgICAgICAgICAgICAga2V5OiBcImlkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgICAgIG9uVXBkYXRlOiBcImNhc2NhZGVcIixcbiAgICAgICAgICAgIG9uRGVsZXRlOiBcImNhc2NhZGVcIixcbiAgICAgICAgfSxcbiAgICAgICAgdGltZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIHN0ZXAxOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgc3RlcDI6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBzdGVwMzogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIHN0ZXA0OiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgc3RlcDU6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBkaWZmaWN1bHR5OiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgYWNoaWV2ZW1lbnQ6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBvYmplY3RpdmU6IERhdGFUeXBlcy5URVhULFxuICAgICAgICB0b3BpY190cF9ubTogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIHR5cGVfbm06IERhdGFUeXBlcy5URVhULFxuICAgICAgICBzdWJqZWN0X25tOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgZ3JhZGVfbm06IERhdGFUeXBlcy5URVhULFxuICAgICAgICB0b29sX25tOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgZGF0ZTogRGF0YVR5cGVzLkRBVEUsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IHRydWUsXG4gICAgICAgIHRhYmxlTmFtZTogXCJkZXNpZ25cIixcbiAgICAgICAgbW9kZWxOYW1lOiBcImRlc2lnblwiLFxuICAgIH1cbik7XG5cbmNvbnN0IFRvcGljID0gc2VxdWVsaXplLmRlZmluZShcbiAgICBcIlRvcGljXCIsXG4gICAge1xuICAgICAgICBpZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgbmFtZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgY3JlYXRlZF9hdDogRGF0YVR5cGVzLkRBVEUsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgICAgICB0YWJsZU5hbWU6IFwiY2xhc3NfdG9waWNcIixcbiAgICAgICAgY3JlYXRlZEF0OiBcImNyZWF0ZWRfYXRcIixcbiAgICAgICAgbW9kZWxOYW1lOiBcIlRvcGljXCIsXG4gICAgfVxuKTtcblxuY29uc3QgU3ViamVjdCA9IHNlcXVlbGl6ZS5kZWZpbmUoXG4gICAgXCJTdWJqZWN0XCIsXG4gICAge1xuICAgICAgICBpZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgbmFtZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgY3JlYXRlZF9hdDogRGF0YVR5cGVzLkRBVEUsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgICAgICB0YWJsZU5hbWU6IFwiY2xhc3Nfc3ViamVjdFwiLFxuICAgICAgICBjcmVhdGVkQXQ6IFwiY3JlYXRlZF9hdFwiLFxuICAgICAgICBtb2RlbE5hbWU6IFwiU3ViamVjdFwiLFxuICAgIH1cbik7XG5cbmNvbnN0IEdyYWRlID0gc2VxdWVsaXplLmRlZmluZShcbiAgICBcIkdyYWRlXCIsXG4gICAge1xuICAgICAgICBpZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgbmFtZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgY3JlYXRlZF9hdDogRGF0YVR5cGVzLkRBVEUsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgICAgICB0YWJsZU5hbWU6IFwiY2xhc3NfZ3JhZGVcIixcbiAgICAgICAgY3JlYXRlZEF0OiBcImNyZWF0ZWRfYXRcIixcbiAgICAgICAgbW9kZWxOYW1lOiBcIkdyYWRlXCIsXG4gICAgfVxuKTtcbmNvbnN0IFR5cGUgPSBzZXF1ZWxpemUuZGVmaW5lKFxuICAgIFwiVHlwZVwiLFxuICAgIHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIG5hbWU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGNyZWF0ZWRfYXQ6IERhdGFUeXBlcy5EQVRFLFxuICAgIH0sXG4gICAge1xuICAgICAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICAgICAgY3JlYXRlZEF0OiBcImNyZWF0ZWRfYXRcIixcbiAgICAgICAgdGFibGVOYW1lOiBcImNsYXNzX3R5cGVcIixcbiAgICAgICAgbW9kZWxOYW1lOiBcIlR5cGVcIixcbiAgICB9XG4pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHsgVG9waWMsIFN1YmplY3QsIEdyYWRlLCBUeXBlIH07XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUE7QUFBVSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDMUMsTUFBTUMsU0FBUyxHQUFHRCxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDL0MsTUFBTUUsSUFBSSxHQUFHRixPQUFPLENBQUMscUJBQXFCLENBQUM7QUFDM0MsTUFBTUcsTUFBTSxHQUFHRixTQUFTLENBQUNHLE1BQU0sQ0FDM0IsUUFBUSxFQUNSO0VBQ0lDLEVBQUUsRUFBRTtJQUNBQyxJQUFJLEVBQUVQLFNBQVMsQ0FBQ1EsT0FBTztJQUN2QkMsYUFBYSxFQUFFLElBQUk7SUFDbkJDLFVBQVUsRUFBRSxJQUFJO0lBQ2hCQyxTQUFTLEVBQUU7RUFDZixDQUFDO0VBQ0RDLE9BQU8sRUFBRTtJQUNMTCxJQUFJLEVBQUVQLFNBQVMsQ0FBQ1EsT0FBTztJQUN2QkssVUFBVSxFQUFFO01BQ1JDLEtBQUssRUFBRTtRQUFFQyxTQUFTLEVBQUU7TUFBWSxDQUFDO01BQUU7TUFDbkNDLEdBQUcsRUFBRTtJQUNULENBQUM7SUFDREwsU0FBUyxFQUFFLEtBQUs7SUFDaEJNLFFBQVEsRUFBRSxTQUFTO0lBQ25CQyxRQUFRLEVBQUU7RUFDZCxDQUFDO0VBQ0RDLFFBQVEsRUFBRTtJQUNOWixJQUFJLEVBQUVQLFNBQVMsQ0FBQ1EsT0FBTztJQUN2QkssVUFBVSxFQUFFO01BQ1JDLEtB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W119","map":{"version":3,"names":["DataTypes","require","sequelize","User","Design","define","id","type","INTEGER","autoIncrement","primaryKey","allowNull","user_id","references","model","tableName","key","onUpdate","onDelete","topic_id","subject_id","time","step1","TEXT","step2","step3","step4","step5","difficulty","achievement","objective","topic_tp_nm","type_nm","subject_nm","grade_nm","tool_nm","date","DATE","timestamps","modelName","Topic","name","STRING","created_at","createdAt","Subject","Grade","Type","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/","sources":["designModel.js"],"sourcesContent":["const { DataTypes } = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = require(\"../models/usedModel\");\nconst Design = sequelize.define(\n    \"Design\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        user_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"user_info\" }, // provide table name\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        topic_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"class_topic\" }, // provide table name\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        subject_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"user_info\" }, // provide table name\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        subject_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"user_info\" }, // provide table name\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        time: DataTypes.INTEGER,\n        step1: DataTypes.TEXT,\n        step2: DataTypes.TEXT,\n        step3: DataTypes.TEXT,\n        step4: DataTypes.TEXT,\n        step5: DataTypes.TEXT,\n        difficulty: DataTypes.TEXT,\n        achievement: DataTypes.TEXT,\n        objective: DataTypes.TEXT,\n        topic_tp_nm: DataTypes.TEXT,\n        type_nm: DataTypes.TEXT,\n        subject_nm: DataTypes.TEXT,\n        grade_nm: DataTypes.TEXT,\n        tool_nm: DataTypes.TEXT,\n        date: DataTypes.DATE,\n    },\n    {\n        timestamps: true,\n        tableName: \"design\",\n        modelName: \"design\",\n    }\n);\n\nconst Topic = sequelize.define(\n    \"Topic\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        name: DataTypes.STRING,\n        created_at: DataTypes.DATE,\n    },\n    {\n        timestamps: false,\n        tableName: \"class_topic\",\n        createdAt: \"created_at\",\n        modelName: \"Topic\",\n    }\n);\n\nconst Subject = sequelize.define(\n    \"Subject\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        name: DataTypes.STRING,\n        created_at: DataTypes.DATE,\n    },\n    {\n        timestamps: false,\n        tableName: \"class_subject\",\n        createdAt: \"created_at\",\n        modelName: \"Subject\",\n    }\n);\n\nconst Grade = sequelize.define(\n    \"Grade\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        name: DataTypes.STRING,\n        created_at: DataTypes.DATE,\n    },\n    {\n        timestamps: false,\n        tableName: \"class_grade\",\n        createdAt: \"created_at\",\n        modelName: \"Grade\",\n    }\n);\nconst Type = sequelize.define(\n    \"Type\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        name: DataTypes.STRING,\n        created_at: DataTypes.DATE,\n    },\n    {\n        timestamps: false,\n        createdAt: \"created_at\",\n        tableName: \"class_type\",\n        modelName: \"Type\",\n    }\n);\n\nmodule.exports = { Topic, Subject, Grade, Type };\n"],"mappings":"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","ignoreList":[]}},"mtime":1717901691249},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/messageFactory.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"product\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:product":{"value":{"code":"class MessageFactory {\n  static success(data = {}, message = \"Success\") {\n    return {\n      status: \"success\",\n      message: message,\n      data: data\n    };\n  }\n  static error(errorMessage = \"An error occurred\") {\n    return {\n      status: \"error\",\n      message: errorMessage\n    };\n  }\n  static validationError(errors = []) {\n    return {\n      status: \"error\",\n      message: \"Validation errors\",\n      errors: errors\n    };\n  }\n}\nmodule.exports = MessageFactory;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNZXNzYWdlRmFjdG9yeSIsInN1Y2Nlc3MiLCJkYXRhIiwibWVzc2FnZSIsInN0YXR1cyIsImVycm9yIiwiZXJyb3JNZXNzYWdlIiwidmFsaWRhdGlvbkVycm9yIiwiZXJyb3JzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL3V0aWxzLyIsInNvdXJjZXMiOlsibWVzc2FnZUZhY3RvcnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgTWVzc2FnZUZhY3Rvcnkge1xuICAgIHN0YXRpYyBzdWNjZXNzKGRhdGEgPSB7fSwgbWVzc2FnZSA9IFwiU3VjY2Vzc1wiKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc3RhdGljIGVycm9yKGVycm9yTWVzc2FnZSA9IFwiQW4gZXJyb3Igb2NjdXJyZWRcIikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc3RhdGljIHZhbGlkYXRpb25FcnJvcihlcnJvcnMgPSBbXSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIlZhbGlkYXRpb24gZXJyb3JzXCIsXG4gICAgICAgICAgICBlcnJvcnM6IGVycm9ycyxcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gTWVzc2FnZUZhY3Rvcnk7XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLGNBQWMsQ0FBQztFQUNqQixPQUFPQyxPQUFPQSxDQUFDQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLEVBQUVDLE9BQU8sR0FBRyxTQUFTLEVBQUU7SUFDM0MsT0FBTztNQUNIQyxNQUFNLEVBQUUsU0FBUztNQUNqQkQsT0FBTyxFQUFFQSxPQUFPO01BQ2hCRCxJQUFJLEVBQUVBO0lBQ1YsQ0FBQztFQUNMO0VBRUEsT0FBT0csS0FBS0EsQ0FBQ0MsWUFBWSxHQUFHLG1CQUFtQixFQUFFO0lBQzdDLE9BQU87TUFDSEYsTUFBTSxFQUFFLE9BQU87TUFDZkQsT0FBTyxFQUFFRztJQUNiLENBQUM7RUFDTDtFQUVBLE9BQU9DLGVBQWVBLENBQUNDLE1BQU0sR0FBRyxFQUFFLEVBQUU7SUFDaEMsT0FBTztNQUNISixNQUFNLEVBQUUsT0FBTztNQUNmRCxPQUFPLEVBQUUsbUJBQW1CO01BQzVCSyxNQUFNLEVBQUVBO0lBQ1osQ0FBQztFQUNMO0FBQ0o7QUFFQUMsTUFBTSxDQUFDQyxPQUFPLEdBQUdWLGNBQWMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["MessageFactory","success","data","message","status","error","errorMessage","validationError","errors","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/","sources":["messageFactory.js"],"sourcesContent":["class MessageFactory {\n    static success(data = {}, message = \"Success\") {\n        return {\n            status: \"success\",\n            message: message,\n            data: data,\n        };\n    }\n\n    static error(errorMessage = \"An error occurred\") {\n        return {\n            status: \"error\",\n            message: errorMessage,\n        };\n    }\n\n    static validationError(errors = []) {\n        return {\n            status: \"error\",\n            message: \"Validation errors\",\n            errors: errors,\n        };\n    }\n}\n\nmodule.exports = MessageFactory;\n"],"mappings":"AAAA,MAAMA,cAAc,CAAC;EACjB,OAAOC,OAAOA,CAACC,IAAI,GAAG,CAAC,CAAC,EAAEC,OAAO,GAAG,SAAS,EAAE;IAC3C,OAAO;MACHC,MAAM,EAAE,SAAS;MACjBD,OAAO,EAAEA,OAAO;MAChBD,IAAI,EAAEA;IACV,CAAC;EACL;EAEA,OAAOG,KAAKA,CAACC,YAAY,GAAG,mBAAmB,EAAE;IAC7C,OAAO;MACHF,MAAM,EAAE,OAAO;MACfD,OAAO,EAAEG;IACb,CAAC;EACL;EAEA,OAAOC,eAAeA,CAACC,MAAM,GAAG,EAAE,EAAE;IAChC,OAAO;MACHJ,MAAM,EAAE,OAAO;MACfD,OAAO,EAAE,mBAAmB;MAC5BK,MAAM,EAAEA;IACZ,CAAC;EACL;AACJ;AAEAC,MAAM,CAACC,OAAO,GAAGV,cAAc","ignoreList":[]}},"mtime":1716172796367},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/removeValueNullObject.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"product\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:product":{"value":{"code":"let removeEmpty = function (target) {\n  Object.keys(target).map(function (key) {\n    if (target[key] instanceof Object) {\n      if (!Object.keys(target[key]).length && typeof target[key].getMonth !== \"function\") {\n        delete target[key];\n      } else {\n        removeEmpty(target[key]);\n      }\n    } else if (target[key] === null) {\n      delete target[key];\n    }\n  });\n  return target;\n};\nmodule.exports = removeEmpty;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZW1vdmVFbXB0eSIsInRhcmdldCIsIk9iamVjdCIsImtleXMiLCJtYXAiLCJrZXkiLCJsZW5ndGgiLCJnZXRNb250aCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy91dGlscy8iLCJzb3VyY2VzIjpbInJlbW92ZVZhbHVlTnVsbE9iamVjdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgcmVtb3ZlRW1wdHkgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgT2JqZWN0LmtleXModGFyZ2V0KS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBpZiAodGFyZ2V0W2tleV0gaW5zdGFuY2VvZiBPYmplY3QpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhT2JqZWN0LmtleXModGFyZ2V0W2tleV0pLmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiB0YXJnZXRba2V5XS5nZXRNb250aCAhPT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGFyZ2V0W2tleV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlbW92ZUVtcHR5KHRhcmdldFtrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0YXJnZXRba2V5XSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgZGVsZXRlIHRhcmdldFtrZXldO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGFyZ2V0O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSByZW1vdmVFbXB0eTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBSUEsV0FBVyxHQUFHLFNBQUFBLENBQVVDLE1BQU0sRUFBRTtFQUNoQ0MsTUFBTSxDQUFDQyxJQUFJLENBQUNGLE1BQU0sQ0FBQyxDQUFDRyxHQUFHLENBQUMsVUFBVUMsR0FBRyxFQUFFO0lBQ25DLElBQUlKLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLFlBQVlILE1BQU0sRUFBRTtNQUMvQixJQUNJLENBQUNBLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDRixNQUFNLENBQUNJLEdBQUcsQ0FBQyxDQUFDLENBQUNDLE1BQU0sSUFDaEMsT0FBT0wsTUFBTSxDQUFDSSxHQUFHLENBQUMsQ0FBQ0UsUUFBUSxLQUFLLFVBQVUsRUFDNUM7UUFDRSxPQUFPTixNQUFNLENBQUNJLEdBQUcsQ0FBQztNQUN0QixDQUFDLE1BQU07UUFDSEwsV0FBVyxDQUFDQyxNQUFNLENBQUNJLEdBQUcsQ0FBQyxDQUFDO01BQzVCO0lBQ0osQ0FBQyxNQUFNLElBQUlKLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLEtBQUssSUFBSSxFQUFFO01BQzdCLE9BQU9KLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDO0lBQ3RCO0VBQ0osQ0FBQyxDQUFDO0VBRUYsT0FBT0osTUFBTTtBQUNqQixDQUFDO0FBRURPLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHVCxXQUFXIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["removeEmpty","target","Object","keys","map","key","length","getMonth","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/","sources":["removeValueNullObject.js"],"sourcesContent":["let removeEmpty = function (target) {\n    Object.keys(target).map(function (key) {\n        if (target[key] instanceof Object) {\n            if (\n                !Object.keys(target[key]).length &&\n                typeof target[key].getMonth !== \"function\"\n            ) {\n                delete target[key];\n            } else {\n                removeEmpty(target[key]);\n            }\n        } else if (target[key] === null) {\n            delete target[key];\n        }\n    });\n\n    return target;\n};\n\nmodule.exports = removeEmpty;\n"],"mappings":"AAAA,IAAIA,WAAW,GAAG,SAAAA,CAAUC,MAAM,EAAE;EAChCC,MAAM,CAACC,IAAI,CAACF,MAAM,CAAC,CAACG,GAAG,CAAC,UAAUC,GAAG,EAAE;IACnC,IAAIJ,MAAM,CAACI,GAAG,CAAC,YAAYH,MAAM,EAAE;MAC/B,IACI,CAACA,MAAM,CAACC,IAAI,CAACF,MAAM,CAACI,GAAG,CAAC,CAAC,CAACC,MAAM,IAChC,OAAOL,MAAM,CAACI,GAAG,CAAC,CAACE,QAAQ,KAAK,UAAU,EAC5C;QACE,OAAON,MAAM,CAACI,GAAG,CAAC;MACtB,CAAC,MAAM;QACHL,WAAW,CAACC,MAAM,CAACI,GAAG,CAAC,CAAC;MAC5B;IACJ,CAAC,MAAM,IAAIJ,MAAM,CAACI,GAAG,CAAC,KAAK,IAAI,EAAE;MAC7B,OAAOJ,MAAM,CAACI,GAAG,CAAC;IACtB;EACJ,CAAC,CAAC;EAEF,OAAOJ,MAAM;AACjB,CAAC;AAEDO,MAAM,CAACC,OAAO,GAAGT,WAAW","ignoreList":[]}},"mtime":1716199032075},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/enums/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/enums/wishlistTypeEnum.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"product\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:product":{"value":{"code":"const WishlistTypeEnum = {\n  TOOL: \"tool\",\n  LESSON: \"lesson\",\n  INTEGRATOR: \"Practitioner\",\n  OPERATION: \"operation\",\n  MODEL: \"model\"\n};\nmodule.exports = WishlistTypeEnum;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJXaXNobGlzdFR5cGVFbnVtIiwiVE9PTCIsIkxFU1NPTiIsIklOVEVHUkFUT1IiLCJPUEVSQVRJT04iLCJNT0RFTCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy91dGlscy9lbnVtcy8iLCJzb3VyY2VzIjpbIndpc2hsaXN0VHlwZUVudW0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgV2lzaGxpc3RUeXBlRW51bSA9IHtcbiAgICBUT09MOiBcInRvb2xcIixcbiAgICBMRVNTT046IFwibGVzc29uXCIsXG4gICAgSU5URUdSQVRPUjogXCJQcmFjdGl0aW9uZXJcIixcbiAgICBPUEVSQVRJT046IFwib3BlcmF0aW9uXCIsXG4gICAgTU9ERUw6IFwibW9kZWxcIixcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gV2lzaGxpc3RUeXBlRW51bTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsZ0JBQWdCLEdBQUc7RUFDckJDLElBQUksRUFBRSxNQUFNO0VBQ1pDLE1BQU0sRUFBRSxRQUFRO0VBQ2hCQyxVQUFVLEVBQUUsY0FBYztFQUMxQkMsU0FBUyxFQUFFLFdBQVc7RUFDdEJDLEtBQUssRUFBRTtBQUNYLENBQUM7QUFFREMsTUFBTSxDQUFDQyxPQUFPLEdBQUdQLGdCQUFnQiIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["WishlistTypeEnum","TOOL","LESSON","INTEGRATOR","OPERATION","MODEL","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/enums/","sources":["wishlistTypeEnum.js"],"sourcesContent":["const WishlistTypeEnum = {\n    TOOL: \"tool\",\n    LESSON: \"lesson\",\n    INTEGRATOR: \"Practitioner\",\n    OPERATION: \"operation\",\n    MODEL: \"model\",\n};\n\nmodule.exports = WishlistTypeEnum;\n"],"mappings":"AAAA,MAAMA,gBAAgB,GAAG;EACrBC,IAAI,EAAE,MAAM;EACZC,MAAM,EAAE,QAAQ;EAChBC,UAAU,EAAE,cAAc;EAC1BC,SAAS,EAAE,WAAW;EACtBC,KAAK,EAAE;AACX,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAGP,gBAAgB","ignoreList":[]}},"mtime":1721358079295},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/validations/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/validations/userValidation.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"product\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:product":{"value":{"code":"const Joi = require(\"joi\");\nconst login = {\n  body: Joi.object().keys({\n    email: Joi.string(),\n    password: Joi.string(),\n    social: Joi.number()\n  })\n};\nconst getUser = {\n  params: Joi.object().keys({\n    id: Joi.number()\n  })\n};\nconst create = {\n  body: Joi.object().keys({\n    email: Joi.string(),\n    name: Joi.string(),\n    profile: Joi.string(),\n    types: Joi.string(),\n    subjects: Joi.string(),\n    school: Joi.string(),\n    password: Joi.string(),\n    social: Joi.number()\n  })\n};\nmodule.exports = {\n  login,\n  getUser\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJKb2kiLCJyZXF1aXJlIiwibG9naW4iLCJib2R5Iiwib2JqZWN0Iiwia2V5cyIsImVtYWlsIiwic3RyaW5nIiwicGFzc3dvcmQiLCJzb2NpYWwiLCJudW1iZXIiLCJnZXRVc2VyIiwicGFyYW1zIiwiaWQiLCJjcmVhdGUiLCJuYW1lIiwicHJvZmlsZSIsInR5cGVzIiwic3ViamVjdHMiLCJzY2hvb2wiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdnVvbmdrbWEvaUNsb3VkIERyaXZlIChBcmNoaXZlKS9Eb2N1bWVudHMva2NuZC9zcmMvdmFsaWRhdGlvbnMvIiwic291cmNlcyI6WyJ1c2VyVmFsaWRhdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBKb2kgPSByZXF1aXJlKFwiam9pXCIpO1xuXG5jb25zdCBsb2dpbiA9IHtcbiAgICBib2R5OiBKb2kub2JqZWN0KCkua2V5cyh7XG4gICAgICAgIGVtYWlsOiBKb2kuc3RyaW5nKCksXG4gICAgICAgIHBhc3N3b3JkOiBKb2kuc3RyaW5nKCksXG4gICAgICAgIHNvY2lhbDogSm9pLm51bWJlcigpLFxuICAgIH0pLFxufTtcbmNvbnN0IGdldFVzZXIgPSB7XG4gICAgcGFyYW1zOiBKb2kub2JqZWN0KCkua2V5cyh7XG4gICAgICAgIGlkOiBKb2kubnVtYmVyKCksXG4gICAgfSksXG59O1xuY29uc3QgY3JlYXRlID0ge1xuICAgIGJvZHk6IEpvaS5vYmplY3QoKS5rZXlzKHtcbiAgICAgICAgZW1haWw6IEpvaS5zdHJpbmcoKSxcbiAgICAgICAgbmFtZTogSm9pLnN0cmluZygpLFxuICAgICAgICBwcm9maWxlOiBKb2kuc3RyaW5nKCksXG4gICAgICAgIHR5cGVzOiBKb2kuc3RyaW5nKCksXG4gICAgICAgIHN1YmplY3RzOiBKb2kuc3RyaW5nKCksXG4gICAgICAgIHNjaG9vbDogSm9pLnN0cmluZygpLFxuICAgICAgICBwYXNzd29yZDogSm9pLnN0cmluZygpLFxuICAgICAgICBzb2NpYWw6IEpvaS5udW1iZXIoKSxcbiAgICB9KSxcbn07XG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBsb2dpbixcbiAgICBnZXRVc2VyLFxufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsR0FBRyxHQUFHQyxPQUFPLENBQUMsS0FBSyxDQUFDO0FBRTFCLE1BQU1DLEtBQUssR0FBRztFQUNWQyxJQUFJLEVBQUVILEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO0lBQ3BCQyxLQUFLLEVBQUVOLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLENBQUM7SUFDbkJDLFFBQVEsRUFBRVIsR0FBRyxDQUFDTyxNQUFNLENBQUMsQ0FBQztJQUN0QkUsTUFBTSxFQUFFVCxHQUFHLENBQUNVLE1BQU0sQ0FBQztFQUN2QixDQUFDO0FBQ0wsQ0FBQztBQUNELE1BQU1DLE9BQU8sR0FBRztFQUNaQyxNQUFNLEVBQUVaLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO0lBQ3RCUSxFQUFFLEVBQUViLEdBQUcsQ0FBQ1UsTUFBTSxDQUFDO0VBQ25CLENBQUM7QUFDTCxDQUFDO0FBQ0QsTUFBTUksTUFBTSxHQUFHO0VBQ1hYLElBQUksRUFBRUgsR0FBRyxDQUFDSSxNQUFNLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUM7SUFDcEJDLEtBQUssRUFBRU4sR0FBRyxDQUFDTyxNQUFNLENBQUMsQ0FBQztJQUNuQlEsSUFBSSxFQUFFZixHQUFHLENBQUNPLE1BQU0sQ0FBQyxDQUFDO0lBQ2xCUyxPQUFPLEVBQUVoQixHQUFHLENBQUNPLE1BQU0sQ0FBQyxDQUFDO0lBQ3JCVSxLQUFLLEVBQUVqQixHQUFHLENBQUNPLE1BQU0sQ0FBQyxDQUFDO0lBQ25CVyxRQUFRLEVBQUVsQixHQUFHLENBQUNPLE1BQU0sQ0FBQyxDQUFDO0lBQ3RCWSxNQUFNLEVBQUVuQixHQUFHLENBQUNPLE1BQU0sQ0FBQyxDQUFDO0lBQ3BCQyxRQUFRLEVBQUVSLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLENBQUM7SUFDdEJFLE1BQU0sRUFBRVQsR0FBRyxDQUFDVSxNQUFNLENBQUM7RUFDdkIsQ0FBQztBQUNMLENBQUM7QUFDRFUsTUFBTSxDQUFDQyxPQUFPLEdBQUc7RUFDYm5CLEtBQUs7RUFDTFM7QUFDSixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["Joi","require","login","body","object","keys","email","string","password","social","number","getUser","params","id","create","name","profile","types","subjects","school","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/validations/","sources":["userValidation.js"],"sourcesContent":["const Joi = require(\"joi\");\n\nconst login = {\n    body: Joi.object().keys({\n        email: Joi.string(),\n        password: Joi.string(),\n        social: Joi.number(),\n    }),\n};\nconst getUser = {\n    params: Joi.object().keys({\n        id: Joi.number(),\n    }),\n};\nconst create = {\n    body: Joi.object().keys({\n        email: Joi.string(),\n        name: Joi.string(),\n        profile: Joi.string(),\n        types: Joi.string(),\n        subjects: Joi.string(),\n        school: Joi.string(),\n        password: Joi.string(),\n        social: Joi.number(),\n    }),\n};\nmodule.exports = {\n    login,\n    getUser,\n};\n"],"mappings":"AAAA,MAAMA,GAAG,GAAGC,OAAO,CAAC,KAAK,CAAC;AAE1B,MAAMC,KAAK,GAAG;EACVC,IAAI,EAAEH,GAAG,CAACI,MAAM,CAAC,CAAC,CAACC,IAAI,CAAC;IACpBC,KAAK,EAAEN,GAAG,CAACO,MAAM,CAAC,CAAC;IACnBC,QAAQ,EAAER,GAAG,CAACO,MAAM,CAAC,CAAC;IACtBE,MAAM,EAAET,GAAG,CAACU,MAAM,CAAC;EACvB,CAAC;AACL,CAAC;AACD,MAAMC,OAAO,GAAG;EACZC,MAAM,EAAEZ,GAAG,CAACI,MAAM,CAAC,CAAC,CAACC,IAAI,CAAC;IACtBQ,EAAE,EAAEb,GAAG,CAACU,MAAM,CAAC;EACnB,CAAC;AACL,CAAC;AACD,MAAMI,MAAM,GAAG;EACXX,IAAI,EAAEH,GAAG,CAACI,MAAM,CAAC,CAAC,CAACC,IAAI,CAAC;IACpBC,KAAK,EAAEN,GAAG,CAACO,MAAM,CAAC,CAAC;IACnBQ,IAAI,EAAEf,GAAG,CAACO,MAAM,CAAC,CAAC;IAClBS,OAAO,EAAEhB,GAAG,CAACO,MAAM,CAAC,CAAC;IACrBU,KAAK,EAAEjB,GAAG,CAACO,MAAM,CAAC,CAAC;IACnBW,QAAQ,EAAElB,GAAG,CAACO,MAAM,CAAC,CAAC;IACtBY,MAAM,EAAEnB,GAAG,CAACO,MAAM,CAAC,CAAC;IACpBC,QAAQ,EAAER,GAAG,CAACO,MAAM,CAAC,CAAC;IACtBE,MAAM,EAAET,GAAG,CAACU,MAAM,CAAC;EACvB,CAAC;AACL,CAAC;AACDU,MAAM,CAACC,OAAO,GAAG;EACbnB,KAAK;EACLS;AACJ,CAAC","ignoreList":[]}},"mtime":1716191006815},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/middlewares/validate.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"product\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:product":{"value":{"code":"const Joi = require(\"joi\");\nconst {\n  StatusCodes\n} = require(\"http-status-codes\");\nconst pick = require(\"../utils/pick\");\nconst ApiError = require(\"../utils/ApiError\");\nconst validate = schema => (req, res, next) => {\n  const validSchema = pick(schema, [\"params\", \"query\", \"body\"]);\n  const object = pick(req, Object.keys(validSchema));\n  const {\n    value,\n    error\n  } = Joi.compile(validSchema).prefs({\n    errors: {\n      label: \"key\"\n    },\n    abortEarly: false\n  }).validate(object);\n  if (error) {\n    const errorMessage = error.details.map(details => details.message).join(\", \");\n    return next(new ApiError(StatusCodes.BAD_REQUEST, errorMessage));\n  }\n  Object.assign(req, value);\n  return next();\n};\nmodule.exports = validate;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJKb2kiLCJyZXF1aXJlIiwiU3RhdHVzQ29kZXMiLCJwaWNrIiwiQXBpRXJyb3IiLCJ2YWxpZGF0ZSIsInNjaGVtYSIsInJlcSIsInJlcyIsIm5leHQiLCJ2YWxpZFNjaGVtYSIsIm9iamVjdCIsIk9iamVjdCIsImtleXMiLCJ2YWx1ZSIsImVycm9yIiwiY29tcGlsZSIsInByZWZzIiwiZXJyb3JzIiwibGFiZWwiLCJhYm9ydEVhcmx5IiwiZXJyb3JNZXNzYWdlIiwiZGV0YWlscyIsIm1hcCIsIm1lc3NhZ2UiLCJqb2luIiwiQkFEX1JFUVVFU1QiLCJhc3NpZ24iLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdnVvbmdrbWEvaUNsb3VkIERyaXZlIChBcmNoaXZlKS9Eb2N1bWVudHMva2NuZC9zcmMvbWlkZGxld2FyZXMvIiwic291cmNlcyI6WyJ2YWxpZGF0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBKb2kgPSByZXF1aXJlKFwiam9pXCIpO1xuY29uc3QgeyBTdGF0dXNDb2RlcyB9ID0gcmVxdWlyZShcImh0dHAtc3RhdHVzLWNvZGVzXCIpO1xuY29uc3QgcGljayA9IHJlcXVpcmUoXCIuLi91dGlscy9waWNrXCIpO1xuY29uc3QgQXBpRXJyb3IgPSByZXF1aXJlKFwiLi4vdXRpbHMvQXBpRXJyb3JcIik7XG5cbmNvbnN0IHZhbGlkYXRlID0gKHNjaGVtYSkgPT4gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgY29uc3QgdmFsaWRTY2hlbWEgPSBwaWNrKHNjaGVtYSwgW1wicGFyYW1zXCIsIFwicXVlcnlcIiwgXCJib2R5XCJdKTtcbiAgICBjb25zdCBvYmplY3QgPSBwaWNrKHJlcSwgT2JqZWN0LmtleXModmFsaWRTY2hlbWEpKTtcbiAgICBjb25zdCB7IHZhbHVlLCBlcnJvciB9ID0gSm9pLmNvbXBpbGUodmFsaWRTY2hlbWEpXG4gICAgICAgIC5wcmVmcyh7IGVycm9yczogeyBsYWJlbDogXCJrZXlcIiB9LCBhYm9ydEVhcmx5OiBmYWxzZSB9KVxuICAgICAgICAudmFsaWRhdGUob2JqZWN0KTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvci5kZXRhaWxzXG4gICAgICAgICAgICAubWFwKChkZXRhaWxzKSA9PiBkZXRhaWxzLm1lc3NhZ2UpXG4gICAgICAgICAgICAuam9pbihcIiwgXCIpO1xuICAgICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoU3RhdHVzQ29kZXMuQkFEX1JFUVVFU1QsIGVycm9yTWVzc2FnZSkpO1xuICAgIH1cbiAgICBPYmplY3QuYXNzaWduKHJlcSwgdmFsdWUpO1xuICAgIHJldHVybiBuZXh0KCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHZhbGlkYXRlO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxHQUFHLEdBQUdDLE9BQU8sQ0FBQyxLQUFLLENBQUM7QUFDMUIsTUFBTTtFQUFFQztBQUFZLENBQUMsR0FBR0QsT0FBTyxDQUFDLG1CQUFtQixDQUFDO0FBQ3BELE1BQU1FLElBQUksR0FBR0YsT0FBTyxDQUFDLGVBQWUsQ0FBQztBQUNyQyxNQUFNRyxRQUFRLEdBQUdILE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztBQUU3QyxNQUFNSSxRQUFRLEdBQUlDLE1BQU0sSUFBSyxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQzdDLE1BQU1DLFdBQVcsR0FBR1AsSUFBSSxDQUFDRyxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUUsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0VBQzdELE1BQU1LLE1BQU0sR0FBR1IsSUFBSSxDQUFDSSxHQUFHLEVBQUVLLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDSCxXQUFXLENBQUMsQ0FBQztFQUNsRCxNQUFNO0lBQUVJLEtBQUs7SUFBRUM7RUFBTSxDQUFDLEdBQUdmLEdBQUcsQ0FBQ2dCLE9BQU8sQ0FBQ04sV0FBVyxDQUFDLENBQzVDTyxLQUFLLENBQUM7SUFBRUMsTUFBTSxFQUFFO01BQUVDLEtBQUssRUFBRTtJQUFNLENBQUM7SUFBRUMsVUFBVSxFQUFFO0VBQU0sQ0FBQyxDQUFDLENBQ3REZixRQUFRLENBQUNNLE1BQU0sQ0FBQztFQUVyQixJQUFJSSxLQUFLLEVBQUU7SUFDUCxNQUFNTSxZQUFZLEdBQUdOLEtBQUssQ0FBQ08sT0FBTyxDQUM3QkMsR0FBRyxDQUFFRCxPQUFPLElBQUtBLE9BQU8sQ0FBQ0UsT0FBTyxDQUFDLENBQ2pDQyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ2YsT0FBT2hCLElBQUksQ0FBQyxJQUFJTCxRQUFRLENBQUNGLFdBQVcsQ0FBQ3dCLFdBQVcsRUFBRUwsWUFBWSxDQUFDLENBQUM7RUFDcEU7RUFDQVQsTUFBTSxDQUFDZSxNQUFNLENBQUNwQixHQUFHLEVBQUVPLEtBQUssQ0FBQztFQUN6QixPQUFPTCxJQUFJLENBQUMsQ0FBQztBQUNqQixDQUFDO0FBRURtQixNQUFNLENBQUNDLE9BQU8sR0FBR3hCLFFBQVEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["Joi","require","StatusCodes","pick","ApiError","validate","schema","req","res","next","validSchema","object","Object","keys","value","error","compile","prefs","errors","label","abortEarly","errorMessage","details","map","message","join","BAD_REQUEST","assign","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/middlewares/","sources":["validate.js"],"sourcesContent":["const Joi = require(\"joi\");\nconst { StatusCodes } = require(\"http-status-codes\");\nconst pick = require(\"../utils/pick\");\nconst ApiError = require(\"../utils/ApiError\");\n\nconst validate = (schema) => (req, res, next) => {\n    const validSchema = pick(schema, [\"params\", \"query\", \"body\"]);\n    const object = pick(req, Object.keys(validSchema));\n    const { value, error } = Joi.compile(validSchema)\n        .prefs({ errors: { label: \"key\" }, abortEarly: false })\n        .validate(object);\n\n    if (error) {\n        const errorMessage = error.details\n            .map((details) => details.message)\n            .join(\", \");\n        return next(new ApiError(StatusCodes.BAD_REQUEST, errorMessage));\n    }\n    Object.assign(req, value);\n    return next();\n};\n\nmodule.exports = validate;\n"],"mappings":"AAAA,MAAMA,GAAG,GAAGC,OAAO,CAAC,KAAK,CAAC;AAC1B,MAAM;EAAEC;AAAY,CAAC,GAAGD,OAAO,CAAC,mBAAmB,CAAC;AACpD,MAAME,IAAI,GAAGF,OAAO,CAAC,eAAe,CAAC;AACrC,MAAMG,QAAQ,GAAGH,OAAO,CAAC,mBAAmB,CAAC;AAE7C,MAAMI,QAAQ,GAAIC,MAAM,IAAK,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC7C,MAAMC,WAAW,GAAGP,IAAI,CAACG,MAAM,EAAE,CAAC,QAAQ,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;EAC7D,MAAMK,MAAM,GAAGR,IAAI,CAACI,GAAG,EAAEK,MAAM,CAACC,IAAI,CAACH,WAAW,CAAC,CAAC;EAClD,MAAM;IAAEI,KAAK;IAAEC;EAAM,CAAC,GAAGf,GAAG,CAACgB,OAAO,CAACN,WAAW,CAAC,CAC5CO,KAAK,CAAC;IAAEC,MAAM,EAAE;MAAEC,KAAK,EAAE;IAAM,CAAC;IAAEC,UAAU,EAAE;EAAM,CAAC,CAAC,CACtDf,QAAQ,CAACM,MAAM,CAAC;EAErB,IAAII,KAAK,EAAE;IACP,MAAMM,YAAY,GAAGN,KAAK,CAACO,OAAO,CAC7BC,GAAG,CAAED,OAAO,IAAKA,OAAO,CAACE,OAAO,CAAC,CACjCC,IAAI,CAAC,IAAI,CAAC;IACf,OAAOhB,IAAI,CAAC,IAAIL,QAAQ,CAACF,WAAW,CAACwB,WAAW,EAAEL,YAAY,CAAC,CAAC;EACpE;EACAT,MAAM,CAACe,MAAM,CAACpB,GAAG,EAAEO,KAAK,CAAC;EACzB,OAAOL,IAAI,CAAC,CAAC;AACjB,CAAC;AAEDmB,MAAM,CAACC,OAAO,GAAGxB,QAAQ","ignoreList":[]}},"mtime":1716024170400},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/pick.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"product\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:product":{"value":{"code":"/**\n * Create an object composed of the picked object properties\n * @param {Object} object\n * @param {string[]} keys\n * @returns {Object}\n */\nconst pick = (object, keys) => {\n  return keys.reduce((obj, key) => {\n    if (object && Object.prototype.hasOwnProperty.call(object, key)) {\n      // eslint-disable-next-line no-param-reassign\n      obj[key] = object[key];\n    }\n    return obj;\n  }, {});\n};\nmodule.exports = pick;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaWNrIiwib2JqZWN0Iiwia2V5cyIsInJlZHVjZSIsIm9iaiIsImtleSIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy91dGlscy8iLCJzb3VyY2VzIjpbInBpY2suanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGUgYW4gb2JqZWN0IGNvbXBvc2VkIG9mIHRoZSBwaWNrZWQgb2JqZWN0IHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAqIEBwYXJhbSB7c3RyaW5nW119IGtleXNcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKi9cbmNvbnN0IHBpY2sgPSAob2JqZWN0LCBrZXlzKSA9PiB7XG4gIHJldHVybiBrZXlzLnJlZHVjZSgob2JqLCBrZXkpID0+IHtcbiAgICBpZiAob2JqZWN0ICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgb2JqW2tleV0gPSBvYmplY3Rba2V5XTtcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfSwge30pO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBwaWNrO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQSxJQUFJLEdBQUdBLENBQUNDLE1BQU0sRUFBRUMsSUFBSSxLQUFLO0VBQzdCLE9BQU9BLElBQUksQ0FBQ0MsTUFBTSxDQUFDLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0lBQy9CLElBQUlKLE1BQU0sSUFBSUssTUFBTSxDQUFDQyxTQUFTLENBQUNDLGNBQWMsQ0FBQ0MsSUFBSSxDQUFDUixNQUFNLEVBQUVJLEdBQUcsQ0FBQyxFQUFFO01BQy9EO01BQ0FELEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLEdBQUdKLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDO0lBQ3hCO0lBQ0EsT0FBT0QsR0FBRztFQUNaLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNSLENBQUM7QUFFRE0sTUFBTSxDQUFDQyxPQUFPLEdBQUdYLElBQUkiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["pick","object","keys","reduce","obj","key","Object","prototype","hasOwnProperty","call","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/","sources":["pick.js"],"sourcesContent":["/**\n * Create an object composed of the picked object properties\n * @param {Object} object\n * @param {string[]} keys\n * @returns {Object}\n */\nconst pick = (object, keys) => {\n  return keys.reduce((obj, key) => {\n    if (object && Object.prototype.hasOwnProperty.call(object, key)) {\n      // eslint-disable-next-line no-param-reassign\n      obj[key] = object[key];\n    }\n    return obj;\n  }, {});\n};\n\nmodule.exports = pick;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMA,IAAI,GAAGA,CAACC,MAAM,EAAEC,IAAI,KAAK;EAC7B,OAAOA,IAAI,CAACC,MAAM,CAAC,CAACC,GAAG,EAAEC,GAAG,KAAK;IAC/B,IAAIJ,MAAM,IAAIK,MAAM,CAACC,SAAS,CAACC,cAAc,CAACC,IAAI,CAACR,MAAM,EAAEI,GAAG,CAAC,EAAE;MAC/D;MACAD,GAAG,CAACC,GAAG,CAAC,GAAGJ,MAAM,CAACI,GAAG,CAAC;IACxB;IACA,OAAOD,GAAG;EACZ,CAAC,EAAE,CAAC,CAAC,CAAC;AACR,CAAC;AAEDM,MAAM,CAACC,OAAO,GAAGX,IAAI","ignoreList":[]}},"mtime":1691835647000},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/ApiError.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"product\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:product":{"value":{"code":"class ApiError extends Error {\n  constructor(statusCode, message, isOperational = true, stack = '') {\n    super(message);\n    this.statusCode = statusCode;\n    this.isOperational = isOperational;\n    if (stack) {\n      this.stack = stack;\n    } else {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n}\nmodule.exports = ApiError;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBcGlFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJzdGF0dXNDb2RlIiwibWVzc2FnZSIsImlzT3BlcmF0aW9uYWwiLCJzdGFjayIsImNhcHR1cmVTdGFja1RyYWNlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL3V0aWxzLyIsInNvdXJjZXMiOlsiQXBpRXJyb3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQXBpRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKHN0YXR1c0NvZGUsIG1lc3NhZ2UsIGlzT3BlcmF0aW9uYWwgPSB0cnVlLCBzdGFjayA9ICcnKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcbiAgICB0aGlzLmlzT3BlcmF0aW9uYWwgPSBpc09wZXJhdGlvbmFsO1xuICAgIGlmIChzdGFjaykge1xuICAgICAgdGhpcy5zdGFjayA9IHN0YWNrO1xuICAgIH0gZWxzZSB7XG4gICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yKTtcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBBcGlFcnJvcjtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsUUFBUSxTQUFTQyxLQUFLLENBQUM7RUFDM0JDLFdBQVdBLENBQUNDLFVBQVUsRUFBRUMsT0FBTyxFQUFFQyxhQUFhLEdBQUcsSUFBSSxFQUFFQyxLQUFLLEdBQUcsRUFBRSxFQUFFO0lBQ2pFLEtBQUssQ0FBQ0YsT0FBTyxDQUFDO0lBQ2QsSUFBSSxDQUFDRCxVQUFVLEdBQUdBLFVBQVU7SUFDNUIsSUFBSSxDQUFDRSxhQUFhLEdBQUdBLGFBQWE7SUFDbEMsSUFBSUMsS0FBSyxFQUFFO01BQ1QsSUFBSSxDQUFDQSxLQUFLLEdBQUdBLEtBQUs7SUFDcEIsQ0FBQyxNQUFNO01BQ0xMLEtBQUssQ0FBQ00saUJBQWlCLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQ0wsV0FBVyxDQUFDO0lBQ2pEO0VBQ0Y7QUFDRjtBQUVBTSxNQUFNLENBQUNDLE9BQU8sR0FBR1QsUUFBUSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["ApiError","Error","constructor","statusCode","message","isOperational","stack","captureStackTrace","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/","sources":["ApiError.js"],"sourcesContent":["class ApiError extends Error {\n  constructor(statusCode, message, isOperational = true, stack = '') {\n    super(message);\n    this.statusCode = statusCode;\n    this.isOperational = isOperational;\n    if (stack) {\n      this.stack = stack;\n    } else {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n}\n\nmodule.exports = ApiError;\n"],"mappings":"AAAA,MAAMA,QAAQ,SAASC,KAAK,CAAC;EAC3BC,WAAWA,CAACC,UAAU,EAAEC,OAAO,EAAEC,aAAa,GAAG,IAAI,EAAEC,KAAK,GAAG,EAAE,EAAE;IACjE,KAAK,CAACF,OAAO,CAAC;IACd,IAAI,CAACD,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACE,aAAa,GAAGA,aAAa;IAClC,IAAIC,KAAK,EAAE;MACT,IAAI,CAACA,KAAK,GAAGA,KAAK;IACpB,CAAC,MAAM;MACLL,KAAK,CAACM,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAACL,WAAW,CAAC;IACjD;EACF;AACF;AAEAM,MAAM,CAACC,OAAO,GAAGT,QAAQ","ignoreList":[]}},"mtime":1691835647000},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/config/multer.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"product\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:product":{"value":{"code":"const multer = require(\"multer\");\nconst storage = multer.diskStorage({\n  destination: function (req, file, cb) {\n    cb(null, \"image/\");\n  },\n  filename: function (req, file, cb) {\n    const uniqueSuffix = Date.now() + \"-\" + Math.round(Math.random() * 1e9);\n    cb(null, file.fieldname + \"-\" + uniqueSuffix + \".\" + file.mimetype.split(\"/\")[1]);\n  }\n});\nupload = multer({\n  storage: storage,\n  limits: {\n    fileSize: 1024 * 1024 * 5\n  } // Giới hạn kích thước tệp là 5MB\n});\nmodule.exports = upload;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtdWx0ZXIiLCJyZXF1aXJlIiwic3RvcmFnZSIsImRpc2tTdG9yYWdlIiwiZGVzdGluYXRpb24iLCJyZXEiLCJmaWxlIiwiY2IiLCJmaWxlbmFtZSIsInVuaXF1ZVN1ZmZpeCIsIkRhdGUiLCJub3ciLCJNYXRoIiwicm91bmQiLCJyYW5kb20iLCJmaWVsZG5hbWUiLCJtaW1ldHlwZSIsInNwbGl0IiwidXBsb2FkIiwibGltaXRzIiwiZmlsZVNpemUiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdnVvbmdrbWEvaUNsb3VkIERyaXZlIChBcmNoaXZlKS9Eb2N1bWVudHMva2NuZC9zcmMvY29uZmlnLyIsInNvdXJjZXMiOlsibXVsdGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG11bHRlciA9IHJlcXVpcmUoXCJtdWx0ZXJcIik7XG5cbmNvbnN0IHN0b3JhZ2UgPSBtdWx0ZXIuZGlza1N0b3JhZ2Uoe1xuICAgIGRlc3RpbmF0aW9uOiBmdW5jdGlvbiAocmVxLCBmaWxlLCBjYikge1xuICAgICAgICBjYihudWxsLCBcImltYWdlL1wiKTtcbiAgICB9LFxuICAgIGZpbGVuYW1lOiBmdW5jdGlvbiAocmVxLCBmaWxlLCBjYikge1xuICAgICAgICBjb25zdCB1bmlxdWVTdWZmaXggPSBEYXRlLm5vdygpICsgXCItXCIgKyBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxZTkpO1xuICAgICAgICBjYihcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBmaWxlLmZpZWxkbmFtZSArXG4gICAgICAgICAgICAgICAgXCItXCIgK1xuICAgICAgICAgICAgICAgIHVuaXF1ZVN1ZmZpeCArXG4gICAgICAgICAgICAgICAgXCIuXCIgK1xuICAgICAgICAgICAgICAgIGZpbGUubWltZXR5cGUuc3BsaXQoXCIvXCIpWzFdXG4gICAgICAgICk7XG4gICAgfSxcbn0pO1xuXG51cGxvYWQgPSBtdWx0ZXIoe1xuICAgIHN0b3JhZ2U6IHN0b3JhZ2UsXG4gICAgbGltaXRzOiB7IGZpbGVTaXplOiAxMDI0ICogMTAyNCAqIDUgfSwgLy8gR2nhu5tpIGjhuqFuIGvDrWNoIHRoxrDhu5tjIHThu4dwIGzDoCA1TUJcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHVwbG9hZDtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsTUFBTSxHQUFHQyxPQUFPLENBQUMsUUFBUSxDQUFDO0FBRWhDLE1BQU1DLE9BQU8sR0FBR0YsTUFBTSxDQUFDRyxXQUFXLENBQUM7RUFDL0JDLFdBQVcsRUFBRSxTQUFBQSxDQUFVQyxHQUFHLEVBQUVDLElBQUksRUFBRUMsRUFBRSxFQUFFO0lBQ2xDQSxFQUFFLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQztFQUN0QixDQUFDO0VBQ0RDLFFBQVEsRUFBRSxTQUFBQSxDQUFVSCxHQUFHLEVBQUVDLElBQUksRUFBRUMsRUFBRSxFQUFFO0lBQy9CLE1BQU1FLFlBQVksR0FBR0MsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBR0MsSUFBSSxDQUFDQyxLQUFLLENBQUNELElBQUksQ0FBQ0UsTUFBTSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7SUFDdkVQLEVBQUUsQ0FDRSxJQUFJLEVBQ0pELElBQUksQ0FBQ1MsU0FBUyxHQUNWLEdBQUcsR0FDSE4sWUFBWSxHQUNaLEdBQUcsR0FDSEgsSUFBSSxDQUFDVSxRQUFRLENBQUNDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQ2xDLENBQUM7RUFDTDtBQUNKLENBQUMsQ0FBQztBQUVGQyxNQUFNLEdBQUdsQixNQUFNLENBQUM7RUFDWkUsT0FBTyxFQUFFQSxPQUFPO0VBQ2hCaUIsTUFBTSxFQUFFO0lBQUVDLFFBQVEsRUFBRSxJQUFJLEdBQUcsSUFBSSxHQUFHO0VBQUUsQ0FBQyxDQUFFO0FBQzNDLENBQUMsQ0FBQztBQUVGQyxNQUFNLENBQUNDLE9BQU8sR0FBR0osTUFBTSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["multer","require","storage","diskStorage","destination","req","file","cb","filename","uniqueSuffix","Date","now","Math","round","random","fieldname","mimetype","split","upload","limits","fileSize","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/config/","sources":["multer.js"],"sourcesContent":["const multer = require(\"multer\");\n\nconst storage = multer.diskStorage({\n    destination: function (req, file, cb) {\n        cb(null, \"image/\");\n    },\n    filename: function (req, file, cb) {\n        const uniqueSuffix = Date.now() + \"-\" + Math.round(Math.random() * 1e9);\n        cb(\n            null,\n            file.fieldname +\n                \"-\" +\n                uniqueSuffix +\n                \".\" +\n                file.mimetype.split(\"/\")[1]\n        );\n    },\n});\n\nupload = multer({\n    storage: storage,\n    limits: { fileSize: 1024 * 1024 * 5 }, // Giới hạn kích thước tệp là 5MB\n});\n\nmodule.exports = upload;\n"],"mappings":"AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAEhC,MAAMC,OAAO,GAAGF,MAAM,CAACG,WAAW,CAAC;EAC/BC,WAAW,EAAE,SAAAA,CAAUC,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAE;IAClCA,EAAE,CAAC,IAAI,EAAE,QAAQ,CAAC;EACtB,CAAC;EACDC,QAAQ,EAAE,SAAAA,CAAUH,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAE;IAC/B,MAAME,YAAY,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,GAAG,CAAC;IACvEP,EAAE,CACE,IAAI,EACJD,IAAI,CAACS,SAAS,GACV,GAAG,GACHN,YAAY,GACZ,GAAG,GACHH,IAAI,CAACU,QAAQ,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAClC,CAAC;EACL;AACJ,CAAC,CAAC;AAEFC,MAAM,GAAGlB,MAAM,CAAC;EACZE,OAAO,EAAEA,OAAO;EAChBiB,MAAM,EAAE;IAAEC,QAAQ,EAAE,IAAI,GAAG,IAAI,GAAG;EAAE,CAAC,CAAE;AAC3C,CAAC,CAAC;AAEFC,MAAM,CAACC,OAAO,GAAGJ,MAAM","ignoreList":[]}},"mtime":1719196491326},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/commentRoute.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"product\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:product":{"value":{"code":"const express = require(\"express\");\nconst commentController = require(\"../../controllers/commentController\");\nconst validate = require(\"../../middlewares/validate\");\nconst router = express.Router();\nrouter.route(\"/api/comment\").post(validate(), commentController.create);\nrouter.route(\"/api/comment/:id\").delete(validate(), commentController.delete);\nmodule.exports = router;\n\n/**\n * @swagger\n * tags:\n *   name: Users\n *   description: User management and retrieval\n */\n\n/**\n * @swagger\n * /users:\n *   post:\n *     summary: Create a user\n *     description: Only admins can create other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - name\n *               - email\n *               - password\n *               - role\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *               role:\n *                  type: string\n *                  enum: [user, admin]\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *               role: user\n *     responses:\n *       \"201\":\n *         description: Created\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *\n *   get:\n *     summary: Get all users\n *     description: Only admins can retrieve all users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: query\n *         name: name\n *         schema:\n *           type: string\n *         description: User name\n *       - in: query\n *         name: role\n *         schema:\n *           type: string\n *         description: User role\n *       - in: query\n *         name: sortBy\n *         schema:\n *           type: string\n *         description: sort by query in the form of field:desc/asc (ex. name:asc)\n *       - in: query\n *         name: limit\n *         schema:\n *           type: integer\n *           minimum: 1\n *         default: 10\n *         description: Maximum number of users\n *       - in: query\n *         name: page\n *         schema:\n *           type: integer\n *           minimum: 1\n *           default: 1\n *         description: Page number\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 results:\n *                   type: array\n *                   items:\n *                     $ref: '#/components/schemas/User'\n *                 page:\n *                   type: integer\n *                   example: 1\n *                 limit:\n *                   type: integer\n *                   example: 10\n *                 totalPages:\n *                   type: integer\n *                   example: 1\n *                 totalResults:\n *                   type: integer\n *                   example: 1\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n */\n\n/**\n * @swagger\n * /users/{id}:\n *   get:\n *     summary: Get a user\n *     description: Logged in users can fetch only their own user information. Only admins can fetch other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   patch:\n *     summary: Update a user\n *     description: Logged in users can only update their own information. Only admins can update other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   delete:\n *     summary: Delete a user\n *     description: Logged in users can delete only themselves. Only admins can delete other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: No content\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n */\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNvbW1lbnRDb250cm9sbGVyIiwidmFsaWRhdGUiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJyb3V0ZSIsInBvc3QiLCJjcmVhdGUiLCJkZWxldGUiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdnVvbmdrbWEvaUNsb3VkIERyaXZlIChBcmNoaXZlKS9Eb2N1bWVudHMva2NuZC9zcmMvcm91dGVzL3YxLyIsInNvdXJjZXMiOlsiY29tbWVudFJvdXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKFwiZXhwcmVzc1wiKTtcbmNvbnN0IGNvbW1lbnRDb250cm9sbGVyID0gcmVxdWlyZShcIi4uLy4uL2NvbnRyb2xsZXJzL2NvbW1lbnRDb250cm9sbGVyXCIpO1xuY29uc3QgdmFsaWRhdGUgPSByZXF1aXJlKFwiLi4vLi4vbWlkZGxld2FyZXMvdmFsaWRhdGVcIik7XG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG5yb3V0ZXIucm91dGUoXCIvYXBpL2NvbW1lbnRcIikucG9zdCh2YWxpZGF0ZSgpLCBjb21tZW50Q29udHJvbGxlci5jcmVhdGUpO1xuXG5yb3V0ZXIucm91dGUoXCIvYXBpL2NvbW1lbnQvOmlkXCIpLmRlbGV0ZSh2YWxpZGF0ZSgpLCBjb21tZW50Q29udHJvbGxlci5kZWxldGUpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcblxuLyoqXG4gKiBAc3dhZ2dlclxuICogdGFnczpcbiAqICAgbmFtZTogVXNlcnNcbiAqICAgZGVzY3JpcHRpb246IFVzZXIgbWFuYWdlbWVudCBhbmQgcmV0cmlldmFsXG4gKi9cblxuLyoqXG4gKiBAc3dhZ2dlclxuICogL3VzZXJzOlxuICogICBwb3N0OlxuICogICAgIHN1bW1hcnk6IENyZWF0ZSBhIHVzZXJcbiAqICAgICBkZXNjcmlwdGlvbjogT25seSBhZG1pbnMgY2FuIGNyZWF0ZSBvdGhlciB1c2Vycy5cbiAqICAgICB0YWdzOiBbVXNlcnNdXG4gKiAgICAgc2VjdXJpdHk6XG4gKiAgICAgICAtIGJlYXJlckF1dGg6IFtdXG4gKiAgICAgcmVxdWVzdEJvZHk6XG4gKiAgICAgICByZXF1aXJlZDogdHJ1ZVxuICogICAgICAgY29udGVudDpcbiAqICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICB0eXBlOiBvYmplY3RcbiAqICAgICAgICAgICAgIHJlcXVpcmVkOlxuICogICAgICAgICAgICAgICAtIG5hbWVcbiAqICAgICAgICAgICAgICAgLSBlbWFpbFxuICogICAgICAgICAgICAgICAtIHBhc3N3b3JkXG4gKiAgICAgICAgICAgICAgIC0gcm9sZVxuICogICAgICAgICAgICAgcHJvcGVydGllczpcbiAqICAgICAgICAgICAgICAgbmFtZTpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgZW1haWw6XG4gKiAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgZm9ybWF0OiBlbWFpbFxuICogICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBtdXN0IGJlIHVuaXF1ZVxuICogICAgICAgICAgICAgICBwYXNzd29yZDpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICBmb3JtYXQ6IHBhc3N3b3JkXG4gKiAgICAgICAgICAgICAgICAgbWluTGVuZ3RoOiA4XG4gKiAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IEF0IGxlYXN0IG9uZSBudW1iZXIgYW5kIG9uZSBsZXR0ZXJcbiAqICAgICAgICAgICAgICAgcm9sZTpcbiAqICAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgIGVudW06IFt1c2VyLCBhZG1pbl1cbiAqICAgICAgICAgICAgIGV4YW1wbGU6XG4gKiAgICAgICAgICAgICAgIG5hbWU6IGZha2UgbmFtZVxuICogICAgICAgICAgICAgICBlbWFpbDogZmFrZUBleGFtcGxlLmNvbVxuICogICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQxXG4gKiAgICAgICAgICAgICAgIHJvbGU6IHVzZXJcbiAqICAgICByZXNwb25zZXM6XG4gKiAgICAgICBcIjIwMVwiOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogQ3JlYXRlZFxuICogICAgICAgICBjb250ZW50OlxuICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlcidcbiAqICAgICAgIFwiNDAwXCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL0R1cGxpY2F0ZUVtYWlsJ1xuICogICAgICAgXCI0MDFcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvVW5hdXRob3JpemVkJ1xuICogICAgICAgXCI0MDNcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvRm9yYmlkZGVuJ1xuICpcbiAqICAgZ2V0OlxuICogICAgIHN1bW1hcnk6IEdldCBhbGwgdXNlcnNcbiAqICAgICBkZXNjcmlwdGlvbjogT25seSBhZG1pbnMgY2FuIHJldHJpZXZlIGFsbCB1c2Vycy5cbiAqICAgICB0YWdzOiBbVXNlcnNdXG4gKiAgICAgc2VjdXJpdHk6XG4gKiAgICAgICAtIGJlYXJlckF1dGg6IFtdXG4gKiAgICAgcGFyYW1ldGVyczpcbiAqICAgICAgIC0gaW46IHF1ZXJ5XG4gKiAgICAgICAgIG5hbWU6IG5hbWVcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICBkZXNjcmlwdGlvbjogVXNlciBuYW1lXG4gKiAgICAgICAtIGluOiBxdWVyeVxuICogICAgICAgICBuYW1lOiByb2xlXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIgcm9sZVxuICogICAgICAgLSBpbjogcXVlcnlcbiAqICAgICAgICAgbmFtZTogc29ydEJ5XG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgZGVzY3JpcHRpb246IHNvcnQgYnkgcXVlcnkgaW4gdGhlIGZvcm0gb2YgZmllbGQ6ZGVzYy9hc2MgKGV4LiBuYW1lOmFzYylcbiAqICAgICAgIC0gaW46IHF1ZXJ5XG4gKiAgICAgICAgIG5hbWU6IGxpbWl0XG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBpbnRlZ2VyXG4gKiAgICAgICAgICAgbWluaW11bTogMVxuICogICAgICAgICBkZWZhdWx0OiAxMFxuICogICAgICAgICBkZXNjcmlwdGlvbjogTWF4aW11bSBudW1iZXIgb2YgdXNlcnNcbiAqICAgICAgIC0gaW46IHF1ZXJ5XG4gKiAgICAgICAgIG5hbWU6IHBhZ2VcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IGludGVnZXJcbiAqICAgICAgICAgICBtaW5pbXVtOiAxXG4gKiAgICAgICAgICAgZGVmYXVsdDogMVxuICogICAgICAgICBkZXNjcmlwdGlvbjogUGFnZSBudW1iZXJcbiAqICAgICByZXNwb25zZXM6XG4gKiAgICAgICBcIjIwMFwiOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogT0tcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICB0eXBlOiBvYmplY3RcbiAqICAgICAgICAgICAgICAgcHJvcGVydGllczpcbiAqICAgICAgICAgICAgICAgICByZXN1bHRzOlxuICogICAgICAgICAgICAgICAgICAgdHlwZTogYXJyYXlcbiAqICAgICAgICAgICAgICAgICAgIGl0ZW1zOlxuICogICAgICAgICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlcidcbiAqICAgICAgICAgICAgICAgICBwYWdlOlxuICogICAgICAgICAgICAgICAgICAgdHlwZTogaW50ZWdlclxuICogICAgICAgICAgICAgICAgICAgZXhhbXBsZTogMVxuICogICAgICAgICAgICAgICAgIGxpbWl0OlxuICogICAgICAgICAgICAgICAgICAgdHlwZTogaW50ZWdlclxuICogICAgICAgICAgICAgICAgICAgZXhhbXBsZTogMTBcbiAqICAgICAgICAgICAgICAgICB0b3RhbFBhZ2VzOlxuICogICAgICAgICAgICAgICAgICAgdHlwZTogaW50ZWdlclxuICogICAgICAgICAgICAgICAgICAgZXhhbXBsZTogMVxuICogICAgICAgICAgICAgICAgIHRvdGFsUmVzdWx0czpcbiAqICAgICAgICAgICAgICAgICAgIHR5cGU6IGludGVnZXJcbiAqICAgICAgICAgICAgICAgICAgIGV4YW1wbGU6IDFcbiAqICAgICAgIFwiNDAxXCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL1VuYXV0aG9yaXplZCdcbiAqICAgICAgIFwiNDAzXCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL0ZvcmJpZGRlbidcbiAqL1xuXG4vKipcbiAqIEBzd2FnZ2VyXG4gKiAvdXNlcnMve2lkfTpcbiAqICAgZ2V0OlxuICogICAgIHN1bW1hcnk6IEdldCBhIHVzZXJcbiAqICAgICBkZXNjcmlwdGlvbjogTG9nZ2VkIGluIHVzZXJzIGNhbiBmZXRjaCBvbmx5IHRoZWlyIG93biB1c2VyIGluZm9ybWF0aW9uLiBPbmx5IGFkbWlucyBjYW4gZmV0Y2ggb3RoZXIgdXNlcnMuXG4gKiAgICAgdGFnczogW1VzZXJzXVxuICogICAgIHNlY3VyaXR5OlxuICogICAgICAgLSBiZWFyZXJBdXRoOiBbXVxuICogICAgIHBhcmFtZXRlcnM6XG4gKiAgICAgICAtIGluOiBwYXRoXG4gKiAgICAgICAgIG5hbWU6IGlkXG4gKiAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIgaWRcbiAqICAgICByZXNwb25zZXM6XG4gKiAgICAgICBcIjIwMFwiOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogT0tcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL1VzZXInXG4gKiAgICAgICBcIjQwMVwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9VbmF1dGhvcml6ZWQnXG4gKiAgICAgICBcIjQwM1wiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Gb3JiaWRkZW4nXG4gKiAgICAgICBcIjQwNFwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Ob3RGb3VuZCdcbiAqXG4gKiAgIHBhdGNoOlxuICogICAgIHN1bW1hcnk6IFVwZGF0ZSBhIHVzZXJcbiAqICAgICBkZXNjcmlwdGlvbjogTG9nZ2VkIGluIHVzZXJzIGNhbiBvbmx5IHVwZGF0ZSB0aGVpciBvd24gaW5mb3JtYXRpb24uIE9ubHkgYWRtaW5zIGNhbiB1cGRhdGUgb3RoZXIgdXNlcnMuXG4gKiAgICAgdGFnczogW1VzZXJzXVxuICogICAgIHNlY3VyaXR5OlxuICogICAgICAgLSBiZWFyZXJBdXRoOiBbXVxuICogICAgIHBhcmFtZXRlcnM6XG4gKiAgICAgICAtIGluOiBwYXRoXG4gKiAgICAgICAgIG5hbWU6IGlkXG4gKiAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIgaWRcbiAqICAgICByZXF1ZXN0Qm9keTpcbiAqICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gKiAgICAgICBjb250ZW50OlxuICogICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgIHR5cGU6IG9iamVjdFxuICogICAgICAgICAgICAgcHJvcGVydGllczpcbiAqICAgICAgICAgICAgICAgbmFtZTpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgZW1haWw6XG4gKiAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgZm9ybWF0OiBlbWFpbFxuICogICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBtdXN0IGJlIHVuaXF1ZVxuICogICAgICAgICAgICAgICBwYXNzd29yZDpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICBmb3JtYXQ6IHBhc3N3b3JkXG4gKiAgICAgICAgICAgICAgICAgbWluTGVuZ3RoOiA4XG4gKiAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IEF0IGxlYXN0IG9uZSBudW1iZXIgYW5kIG9uZSBsZXR0ZXJcbiAqICAgICAgICAgICAgIGV4YW1wbGU6XG4gKiAgICAgICAgICAgICAgIG5hbWU6IGZha2UgbmFtZVxuICogICAgICAgICAgICAgICBlbWFpbDogZmFrZUBleGFtcGxlLmNvbVxuICogICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQxXG4gKiAgICAgcmVzcG9uc2VzOlxuICogICAgICAgXCIyMDBcIjpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IE9LXG4gKiAgICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9Vc2VyJ1xuICogICAgICAgXCI0MDBcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvRHVwbGljYXRlRW1haWwnXG4gKiAgICAgICBcIjQwMVwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9VbmF1dGhvcml6ZWQnXG4gKiAgICAgICBcIjQwM1wiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Gb3JiaWRkZW4nXG4gKiAgICAgICBcIjQwNFwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Ob3RGb3VuZCdcbiAqXG4gKiAgIGRlbGV0ZTpcbiAqICAgICBzdW1tYXJ5OiBEZWxldGUgYSB1c2VyXG4gKiAgICAgZGVzY3JpcHRpb246IExvZ2dlZCBpbiB1c2VycyBjYW4gZGVsZXRlIG9ubHkgdGhlbXNlbHZlcy4gT25seSBhZG1pbnMgY2FuIGRlbGV0ZSBvdGhlciB1c2Vycy5cbiAqICAgICB0YWdzOiBbVXNlcnNdXG4gKiAgICAgc2VjdXJpdHk6XG4gKiAgICAgICAtIGJlYXJlckF1dGg6IFtdXG4gKiAgICAgcGFyYW1ldGVyczpcbiAqICAgICAgIC0gaW46IHBhdGhcbiAqICAgICAgICAgbmFtZTogaWRcbiAqICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICBkZXNjcmlwdGlvbjogVXNlciBpZFxuICogICAgIHJlc3BvbnNlczpcbiAqICAgICAgIFwiMjAwXCI6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBObyBjb250ZW50XG4gKiAgICAgICBcIjQwMVwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9VbmF1dGhvcml6ZWQnXG4gKiAgICAgICBcIjQwM1wiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Gb3JiaWRkZW4nXG4gKiAgICAgICBcIjQwNFwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Ob3RGb3VuZCdcbiAqL1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUMsaUJBQWlCLEdBQUdELE9BQU8sQ0FBQyxxQ0FBcUMsQ0FBQztBQUN4RSxNQUFNRSxRQUFRLEdBQUdGLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQztBQUN0RCxNQUFNRyxNQUFNLEdBQUdKLE9BQU8sQ0FBQ0ssTUFBTSxDQUFDLENBQUM7QUFFL0JELE1BQU0sQ0FBQ0UsS0FBSyxDQUFDLGNBQWMsQ0FBQyxDQUFDQyxJQUFJLENBQUNKLFFBQVEsQ0FBQyxDQUFDLEVBQUVELGlCQUFpQixDQUFDTSxNQUFNLENBQUM7QUFFdkVKLE1BQU0sQ0FBQ0UsS0FBSyxDQUFDLGtCQUFrQixDQUFDLENBQUNHLE1BQU0sQ0FBQ04sUUFBUSxDQUFDLENBQUMsRUFBRUQsaUJBQWlCLENBQUNPLE1BQU0sQ0FBQztBQUU3RUMsTUFBTSxDQUFDQyxPQUFPLEdBQUdQLE1BQU07O0FBRXZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["express","require","commentController","validate","router","Router","route","post","create","delete","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/","sources":["commentRoute.js"],"sourcesContent":["const express = require(\"express\");\nconst commentController = require(\"../../controllers/commentController\");\nconst validate = require(\"../../middlewares/validate\");\nconst router = express.Router();\n\nrouter.route(\"/api/comment\").post(validate(), commentController.create);\n\nrouter.route(\"/api/comment/:id\").delete(validate(), commentController.delete);\n\nmodule.exports = router;\n\n/**\n * @swagger\n * tags:\n *   name: Users\n *   description: User management and retrieval\n */\n\n/**\n * @swagger\n * /users:\n *   post:\n *     summary: Create a user\n *     description: Only admins can create other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - name\n *               - email\n *               - password\n *               - role\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *               role:\n *                  type: string\n *                  enum: [user, admin]\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *               role: user\n *     responses:\n *       \"201\":\n *         description: Created\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *\n *   get:\n *     summary: Get all users\n *     description: Only admins can retrieve all users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: query\n *         name: name\n *         schema:\n *           type: string\n *         description: User name\n *       - in: query\n *         name: role\n *         schema:\n *           type: string\n *         description: User role\n *       - in: query\n *         name: sortBy\n *         schema:\n *           type: string\n *         description: sort by query in the form of field:desc/asc (ex. name:asc)\n *       - in: query\n *         name: limit\n *         schema:\n *           type: integer\n *           minimum: 1\n *         default: 10\n *         description: Maximum number of users\n *       - in: query\n *         name: page\n *         schema:\n *           type: integer\n *           minimum: 1\n *           default: 1\n *         description: Page number\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 results:\n *                   type: array\n *                   items:\n *                     $ref: '#/components/schemas/User'\n *                 page:\n *                   type: integer\n *                   example: 1\n *                 limit:\n *                   type: integer\n *                   example: 10\n *                 totalPages:\n *                   type: integer\n *                   example: 1\n *                 totalResults:\n *                   type: integer\n *                   example: 1\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n */\n\n/**\n * @swagger\n * /users/{id}:\n *   get:\n *     summary: Get a user\n *     description: Logged in users can fetch only their own user information. Only admins can fetch other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   patch:\n *     summary: Update a user\n *     description: Logged in users can only update their own information. Only admins can update other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   delete:\n *     summary: Delete a user\n *     description: Logged in users can delete only themselves. Only admins can delete other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: No content\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n */\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,iBAAiB,GAAGD,OAAO,CAAC,qCAAqC,CAAC;AACxE,MAAME,QAAQ,GAAGF,OAAO,CAAC,4BAA4B,CAAC;AACtD,MAAMG,MAAM,GAAGJ,OAAO,CAACK,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,KAAK,CAAC,cAAc,CAAC,CAACC,IAAI,CAACJ,QAAQ,CAAC,CAAC,EAAED,iBAAiB,CAACM,MAAM,CAAC;AAEvEJ,MAAM,CAACE,KAAK,CAAC,kBAAkB,CAAC,CAACG,MAAM,CAACN,QAAQ,CAAC,CAAC,EAAED,iBAAiB,CAACO,MAAM,CAAC;AAE7EC,MAAM,CAACC,OAAO,GAAGP,MAAM;;AAEvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]}},"mtime":1720516583016},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/controllers/commentController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"product\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:product":{"value":{"code":"const {\n  StatusCodes\n} = require(\"http-status-codes\");\nconst commentService = require(\"../services/commentService\");\n//import message factory\nconst MessageFactory = require(\"../utils/messageFactory\");\nconst RemoveValueNullObject = require(\"../utils/removeValueNullObject\");\nexports.create = async (req, res, next) => {\n  try {\n    const {\n      post_id,\n      content,\n      user_id,\n      parent_comment_id\n    } = req.body;\n    const data = await commentService.create(post_id, content, user_id, parent_comment_id);\n    if (data) {\n      res.status(StatusCodes.OK).json(MessageFactory.success(data, \"Created success!\"));\n    } else {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"Created error\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.delete = async (req, res, next) => {\n  try {\n    const id = req.params.id;\n    const data = await commentService.delete(id);\n    if (data) {\n      res.status(StatusCodes.OK).json(MessageFactory.success(data, \"Delete success!\"));\n    } else {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"Delete error\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTdGF0dXNDb2RlcyIsInJlcXVpcmUiLCJjb21tZW50U2VydmljZSIsIk1lc3NhZ2VGYWN0b3J5IiwiUmVtb3ZlVmFsdWVOdWxsT2JqZWN0IiwiZXhwb3J0cyIsImNyZWF0ZSIsInJlcSIsInJlcyIsIm5leHQiLCJwb3N0X2lkIiwiY29udGVudCIsInVzZXJfaWQiLCJwYXJlbnRfY29tbWVudF9pZCIsImJvZHkiLCJkYXRhIiwic3RhdHVzIiwiT0siLCJqc29uIiwic3VjY2VzcyIsIlVOQVVUSE9SSVpFRCIsImVycm9yIiwiZGVsZXRlIiwiaWQiLCJwYXJhbXMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbImNvbW1lbnRDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgU3RhdHVzQ29kZXMgfSA9IHJlcXVpcmUoXCJodHRwLXN0YXR1cy1jb2Rlc1wiKTtcbmNvbnN0IGNvbW1lbnRTZXJ2aWNlID0gcmVxdWlyZShcIi4uL3NlcnZpY2VzL2NvbW1lbnRTZXJ2aWNlXCIpO1xuLy9pbXBvcnQgbWVzc2FnZSBmYWN0b3J5XG5jb25zdCBNZXNzYWdlRmFjdG9yeSA9IHJlcXVpcmUoXCIuLi91dGlscy9tZXNzYWdlRmFjdG9yeVwiKTtcbmNvbnN0IFJlbW92ZVZhbHVlTnVsbE9iamVjdCA9IHJlcXVpcmUoXCIuLi91dGlscy9yZW1vdmVWYWx1ZU51bGxPYmplY3RcIik7XG5cbmV4cG9ydHMuY3JlYXRlID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBwb3N0X2lkLCBjb250ZW50LCB1c2VyX2lkLCBwYXJlbnRfY29tbWVudF9pZCB9ID0gcmVxLmJvZHk7XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGNvbW1lbnRTZXJ2aWNlLmNyZWF0ZShcbiAgICAgICAgICAgIHBvc3RfaWQsXG4gICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgdXNlcl9pZCxcbiAgICAgICAgICAgIHBhcmVudF9jb21tZW50X2lkXG4gICAgICAgICk7XG4gICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLk9LKS5qc29uKFxuICAgICAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LnN1Y2Nlc3MoZGF0YSwgXCJDcmVhdGVkIHN1Y2Nlc3MhXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5VTkFVVEhPUklaRUQpLmpzb24oXG4gICAgICAgICAgICAgICAgTWVzc2FnZUZhY3RvcnkuZXJyb3IoXCJDcmVhdGVkIGVycm9yXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbmV4dChlcnJvcik7XG4gICAgfVxufTtcblxuZXhwb3J0cy5kZWxldGUgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBpZCA9IHJlcS5wYXJhbXMuaWQ7XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGNvbW1lbnRTZXJ2aWNlLmRlbGV0ZShpZCk7XG4gICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLk9LKS5qc29uKFxuICAgICAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LnN1Y2Nlc3MoZGF0YSwgXCJEZWxldGUgc3VjY2VzcyFcIilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLlVOQVVUSE9SSVpFRCkuanNvbihcbiAgICAgICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5lcnJvcihcIkRlbGV0ZSBlcnJvclwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbn07XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUE7QUFBWSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztBQUNwRCxNQUFNQyxjQUFjLEdBQUdELE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQztBQUM1RDtBQUNBLE1BQU1FLGNBQWMsR0FBR0YsT0FBTyxDQUFDLHlCQUF5QixDQUFDO0FBQ3pELE1BQU1HLHFCQUFxQixHQUFHSCxPQUFPLENBQUMsZ0NBQWdDLENBQUM7QUFFdkVJLE9BQU8sQ0FBQ0MsTUFBTSxHQUFHLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDdkMsSUFBSTtJQUNBLE1BQU07TUFBRUMsT0FBTztNQUFFQyxPQUFPO01BQUVDLE9BQU87TUFBRUM7SUFBa0IsQ0FBQyxHQUFHTixHQUFHLENBQUNPLElBQUk7SUFFakUsTUFBTUMsSUFBSSxHQUFHLE1BQU1iLGNBQWMsQ0FBQ0ksTUFBTSxDQUNwQ0ksT0FBTyxFQUNQQyxPQUFPLEVBQ1BDLE9BQU8sRUFDUEMsaUJBQ0osQ0FBQztJQUNELElBQUlFLElBQUksRUFBRTtNQUNOUCxHQUFHLENBQUNRLE1BQU0sQ0FBQ2hCLFdBQVcsQ0FBQ2lCLEVBQUUsQ0FBQyxDQUFDQyxJQUFJLENBQzNCZixjQUFjLENBQUNnQixPQUFPLENBQUNKLElBQUksRUFBRSxrQkFBa0IsQ0FDbkQsQ0FBQztJQUNMLENBQUMsTUFBTTtNQUNIUCxHQUFHLENBQUNRLE1BQU0sQ0FBQ2hCLFdBQVcsQ0FBQ29CLFlBQVksQ0FBQyxDQUFDRixJQUFJLENBQ3JDZixjQUFjLENBQUNrQixLQUFLLENBQUMsZUFBZSxDQUN4QyxDQUFDO0lBQ0w7RUFDSixDQUFDLENBQUMsT0FBT0EsS0FBSyxFQUFFO0lBQ1paLElBQUksQ0FBQ1ksS0FBSyxDQUFDO0VBQ2Y7QUFDSixDQUFDO0FBRURoQixPQUFPLENBQUNpQixNQUFNLEdBQUcsT0FBT2YsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztFQUN2QyxJQUFJO0lBQ0EsTUFBTWMsRUFBRSxHQUFHaEIsR0FBRyxDQUFDaUIsTUFBTSxDQUFDRCxFQUFFO0lBRXhCLE1BQU1SLElBQUksR0FBRyxNQUFNYixjQUFjLENBQUNvQixNQUFNLENBQUNDLEVBQUUsQ0FBQztJQUM1QyxJQUFJUixJQUFJLEVBQUU7TUFDTlAsR0FBRyxDQUFDUSxNQUFNLENBQUNoQixXQUFXLENBQUNpQixFQUFFLENBQUMsQ0FBQ0MsSUFBSSxDQUMzQmYsY0FBYyxDQUFDZ0IsT0FBTyxDQUFDSixJQUFJLEVBQUUsaUJBQWlCLENBQ2xELENBQUM7SUFDTCxDQUFDLE1BQU07TUFDSFAsR0FBRyxDQUFDUSxNQUFNLENBQUNoQixXQUFXLENBQUNvQixZQUFZLENBQUMsQ0FBQ0YsSUFBSSxDQUNyQ2YsY0FBYyxDQUFDa0IsS0FBSyxDQUFDLGNBQWMsQ0FDdkMsQ0FBQztJQUNMO0VBQ0osQ0FBQyxDQUFDLE9BQU9BLEtBQUssRUFBRTtJQUNaWixJQUFJLENBQUNZLEtBQUssQ0FBQztFQUNmO0FBQ0osQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["StatusCodes","require","commentService","MessageFactory","RemoveValueNullObject","exports","create","req","res","next","post_id","content","user_id","parent_comment_id","body","data","status","OK","json","success","UNAUTHORIZED","error","delete","id","params"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/controllers/","sources":["commentController.js"],"sourcesContent":["const { StatusCodes } = require(\"http-status-codes\");\nconst commentService = require(\"../services/commentService\");\n//import message factory\nconst MessageFactory = require(\"../utils/messageFactory\");\nconst RemoveValueNullObject = require(\"../utils/removeValueNullObject\");\n\nexports.create = async (req, res, next) => {\n    try {\n        const { post_id, content, user_id, parent_comment_id } = req.body;\n\n        const data = await commentService.create(\n            post_id,\n            content,\n            user_id,\n            parent_comment_id\n        );\n        if (data) {\n            res.status(StatusCodes.OK).json(\n                MessageFactory.success(data, \"Created success!\")\n            );\n        } else {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.error(\"Created error\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\n\nexports.delete = async (req, res, next) => {\n    try {\n        const id = req.params.id;\n\n        const data = await commentService.delete(id);\n        if (data) {\n            res.status(StatusCodes.OK).json(\n                MessageFactory.success(data, \"Delete success!\")\n            );\n        } else {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.error(\"Delete error\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\n"],"mappings":"AAAA,MAAM;EAAEA;AAAY,CAAC,GAAGC,OAAO,CAAC,mBAAmB,CAAC;AACpD,MAAMC,cAAc,GAAGD,OAAO,CAAC,4BAA4B,CAAC;AAC5D;AACA,MAAME,cAAc,GAAGF,OAAO,CAAC,yBAAyB,CAAC;AACzD,MAAMG,qBAAqB,GAAGH,OAAO,CAAC,gCAAgC,CAAC;AAEvEI,OAAO,CAACC,MAAM,GAAG,OAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACvC,IAAI;IACA,MAAM;MAAEC,OAAO;MAAEC,OAAO;MAAEC,OAAO;MAAEC;IAAkB,CAAC,GAAGN,GAAG,CAACO,IAAI;IAEjE,MAAMC,IAAI,GAAG,MAAMb,cAAc,CAACI,MAAM,CACpCI,OAAO,EACPC,OAAO,EACPC,OAAO,EACPC,iBACJ,CAAC;IACD,IAAIE,IAAI,EAAE;MACNP,GAAG,CAACQ,MAAM,CAAChB,WAAW,CAACiB,EAAE,CAAC,CAACC,IAAI,CAC3Bf,cAAc,CAACgB,OAAO,CAACJ,IAAI,EAAE,kBAAkB,CACnD,CAAC;IACL,CAAC,MAAM;MACHP,GAAG,CAACQ,MAAM,CAAChB,WAAW,CAACoB,YAAY,CAAC,CAACF,IAAI,CACrCf,cAAc,CAACkB,KAAK,CAAC,eAAe,CACxC,CAAC;IACL;EACJ,CAAC,CAAC,OAAOA,KAAK,EAAE;IACZZ,IAAI,CAACY,KAAK,CAAC;EACf;AACJ,CAAC;AAEDhB,OAAO,CAACiB,MAAM,GAAG,OAAOf,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACvC,IAAI;IACA,MAAMc,EAAE,GAAGhB,GAAG,CAACiB,MAAM,CAACD,EAAE;IAExB,MAAMR,IAAI,GAAG,MAAMb,cAAc,CAACoB,MAAM,CAACC,EAAE,CAAC;IAC5C,IAAIR,IAAI,EAAE;MACNP,GAAG,CAACQ,MAAM,CAAChB,WAAW,CAACiB,EAAE,CAAC,CAACC,IAAI,CAC3Bf,cAAc,CAACgB,OAAO,CAACJ,IAAI,EAAE,iBAAiB,CAClD,CAAC;IACL,CAAC,MAAM;MACHP,GAAG,CAACQ,MAAM,CAAChB,WAAW,CAACoB,YAAY,CAAC,CAACF,IAAI,CACrCf,cAAc,CAACkB,KAAK,CAAC,cAAc,CACvC,CAAC;IACL;EACJ,CAAC,CAAC,OAAOA,KAAK,EAAE;IACZZ,IAAI,CAACY,KAAK,CAAC;EACf;AACJ,CAAC","ignoreList":[]}},"mtime":1721611799023},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/commentService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"product\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:product":{"value":{"code":"const commentModel = require(\"../models/commentModel\");\nexports.create = async (post_id, content, user_id, parent_comment_id) => {\n  let data = await commentModel.create({\n    id: null,\n    post_id,\n    content,\n    user_id,\n    parent_comment_id\n  });\n  return data;\n};\nexports.delete = async id => {\n  return await commentModel.destroy({\n    where: {\n      id\n    }\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb21tZW50TW9kZWwiLCJyZXF1aXJlIiwiZXhwb3J0cyIsImNyZWF0ZSIsInBvc3RfaWQiLCJjb250ZW50IiwidXNlcl9pZCIsInBhcmVudF9jb21tZW50X2lkIiwiZGF0YSIsImlkIiwiZGVsZXRlIiwiZGVzdHJveSIsIndoZXJlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdnVvbmdrbWEvaUNsb3VkIERyaXZlIChBcmNoaXZlKS9Eb2N1bWVudHMva2NuZC9zcmMvc2VydmljZXMvIiwic291cmNlcyI6WyJjb21tZW50U2VydmljZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjb21tZW50TW9kZWwgPSByZXF1aXJlKFwiLi4vbW9kZWxzL2NvbW1lbnRNb2RlbFwiKTtcblxuZXhwb3J0cy5jcmVhdGUgPSBhc3luYyAocG9zdF9pZCwgY29udGVudCwgdXNlcl9pZCwgcGFyZW50X2NvbW1lbnRfaWQpID0+IHtcbiAgICBsZXQgZGF0YSA9IGF3YWl0IGNvbW1lbnRNb2RlbC5jcmVhdGUoe1xuICAgICAgICBpZDogbnVsbCxcbiAgICAgICAgcG9zdF9pZCxcbiAgICAgICAgY29udGVudCxcbiAgICAgICAgdXNlcl9pZCxcbiAgICAgICAgcGFyZW50X2NvbW1lbnRfaWQsXG4gICAgfSk7XG4gICAgcmV0dXJuIGRhdGE7XG59O1xuXG5leHBvcnRzLmRlbGV0ZSA9IGFzeW5jIChpZCkgPT4ge1xuICAgIHJldHVybiBhd2FpdCBjb21tZW50TW9kZWwuZGVzdHJveSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICBpZCxcbiAgICAgICAgfSxcbiAgICB9KTtcbn07XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFlBQVksR0FBR0MsT0FBTyxDQUFDLHdCQUF3QixDQUFDO0FBRXREQyxPQUFPLENBQUNDLE1BQU0sR0FBRyxPQUFPQyxPQUFPLEVBQUVDLE9BQU8sRUFBRUMsT0FBTyxFQUFFQyxpQkFBaUIsS0FBSztFQUNyRSxJQUFJQyxJQUFJLEdBQUcsTUFBTVIsWUFBWSxDQUFDRyxNQUFNLENBQUM7SUFDakNNLEVBQUUsRUFBRSxJQUFJO0lBQ1JMLE9BQU87SUFDUEMsT0FBTztJQUNQQyxPQUFPO0lBQ1BDO0VBQ0osQ0FBQyxDQUFDO0VBQ0YsT0FBT0MsSUFBSTtBQUNmLENBQUM7QUFFRE4sT0FBTyxDQUFDUSxNQUFNLEdBQUcsTUFBT0QsRUFBRSxJQUFLO0VBQzNCLE9BQU8sTUFBTVQsWUFBWSxDQUFDVyxPQUFPLENBQUM7SUFDOUJDLEtBQUssRUFBRTtNQUNISDtJQUNKO0VBQ0osQ0FBQyxDQUFDO0FBQ04sQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["commentModel","require","exports","create","post_id","content","user_id","parent_comment_id","data","id","delete","destroy","where"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/","sources":["commentService.js"],"sourcesContent":["const commentModel = require(\"../models/commentModel\");\n\nexports.create = async (post_id, content, user_id, parent_comment_id) => {\n    let data = await commentModel.create({\n        id: null,\n        post_id,\n        content,\n        user_id,\n        parent_comment_id,\n    });\n    return data;\n};\n\nexports.delete = async (id) => {\n    return await commentModel.destroy({\n        where: {\n            id,\n        },\n    });\n};\n"],"mappings":"AAAA,MAAMA,YAAY,GAAGC,OAAO,CAAC,wBAAwB,CAAC;AAEtDC,OAAO,CAACC,MAAM,GAAG,OAAOC,OAAO,EAAEC,OAAO,EAAEC,OAAO,EAAEC,iBAAiB,KAAK;EACrE,IAAIC,IAAI,GAAG,MAAMR,YAAY,CAACG,MAAM,CAAC;IACjCM,EAAE,EAAE,IAAI;IACRL,OAAO;IACPC,OAAO;IACPC,OAAO;IACPC;EACJ,CAAC,CAAC;EACF,OAAOC,IAAI;AACf,CAAC;AAEDN,OAAO,CAACQ,MAAM,GAAG,MAAOD,EAAE,IAAK;EAC3B,OAAO,MAAMT,YAAY,CAACW,OAAO,CAAC;IAC9BC,KAAK,EAAE;MACHH;IACJ;EACJ,CAAC,CAAC;AACN,CAAC","ignoreList":[]}},"mtime":1720145818917},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/commentModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"product\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:product":{"value":{"code":"const {\n  DataTypes\n} = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = require(\"../models/usedModel\");\nconst Comment = sequelize.define(\"Comment\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  post_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"post\"\n      },\n      key: \"sno\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  parent_comment_id: DataTypes.NUMBER,\n  content: DataTypes.TEXT,\n  user_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"user_info\"\n      },\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  }\n}, {\n  timestamps: true,\n  tableName: \"comment\",\n  modelName: \"comments\"\n});\nComment.belongsTo(User, {\n  foreignKey: \"user_id\",\n  as: \"user\"\n});\nmodule.exports = Comment;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEYXRhVHlwZXMiLCJyZXF1aXJlIiwic2VxdWVsaXplIiwiVXNlciIsIkNvbW1lbnQiLCJkZWZpbmUiLCJpZCIsInR5cGUiLCJJTlRFR0VSIiwiYXV0b0luY3JlbWVudCIsInByaW1hcnlLZXkiLCJhbGxvd051bGwiLCJwb3N0X2lkIiwicmVmZXJlbmNlcyIsIm1vZGVsIiwidGFibGVOYW1lIiwia2V5Iiwib25VcGRhdGUiLCJvbkRlbGV0ZSIsInBhcmVudF9jb21tZW50X2lkIiwiTlVNQkVSIiwiY29udGVudCIsIlRFWFQiLCJ1c2VyX2lkIiwidGltZXN0YW1wcyIsIm1vZGVsTmFtZSIsImJlbG9uZ3NUbyIsImZvcmVpZ25LZXkiLCJhcyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy9tb2RlbHMvIiwic291cmNlcyI6WyJjb21tZW50TW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBEYXRhVHlwZXMgfSA9IHJlcXVpcmUoXCJzZXF1ZWxpemVcIik7XG5jb25zdCBzZXF1ZWxpemUgPSByZXF1aXJlKFwiLi4vY29uZmlnL2RhdGFiYXNlXCIpO1xuY29uc3QgVXNlciA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvdXNlZE1vZGVsXCIpO1xuY29uc3QgQ29tbWVudCA9IHNlcXVlbGl6ZS5kZWZpbmUoXG4gICAgXCJDb21tZW50XCIsXG4gICAge1xuICAgICAgICBpZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgcG9zdF9pZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICAgICAgbW9kZWw6IHsgdGFibGVOYW1lOiBcInBvc3RcIiB9LFxuICAgICAgICAgICAgICAgIGtleTogXCJzbm9cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICAgICAgb25VcGRhdGU6IFwiY2FzY2FkZVwiLFxuICAgICAgICAgICAgb25EZWxldGU6IFwiY2FzY2FkZVwiLFxuICAgICAgICB9LFxuICAgICAgICBwYXJlbnRfY29tbWVudF9pZDogRGF0YVR5cGVzLk5VTUJFUixcbiAgICAgICAgY29udGVudDogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIHVzZXJfaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiB7IHRhYmxlTmFtZTogXCJ1c2VyX2luZm9cIiB9LFxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgICAgICBvblVwZGF0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgICAgICBvbkRlbGV0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IHRydWUsXG4gICAgICAgIHRhYmxlTmFtZTogXCJjb21tZW50XCIsXG4gICAgICAgIG1vZGVsTmFtZTogXCJjb21tZW50c1wiLFxuICAgIH1cbik7XG5Db21tZW50LmJlbG9uZ3NUbyhVc2VyLCB7XG4gICAgZm9yZWlnbktleTogXCJ1c2VyX2lkXCIsXG4gICAgYXM6IFwidXNlclwiLFxufSk7XG5tb2R1bGUuZXhwb3J0cyA9IENvbW1lbnQ7XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUE7QUFBVSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDMUMsTUFBTUMsU0FBUyxHQUFHRCxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDL0MsTUFBTUUsSUFBSSxHQUFHRixPQUFPLENBQUMscUJBQXFCLENBQUM7QUFDM0MsTUFBTUcsT0FBTyxHQUFHRixTQUFTLENBQUNHLE1BQU0sQ0FDNUIsU0FBUyxFQUNUO0VBQ0lDLEVBQUUsRUFBRTtJQUNBQyxJQUFJLEVBQUVQLFNBQVMsQ0FBQ1EsT0FBTztJQUN2QkMsYUFBYSxFQUFFLElBQUk7SUFDbkJDLFVBQVUsRUFBRSxJQUFJO0lBQ2hCQyxTQUFTLEVBQUU7RUFDZixDQUFDO0VBQ0RDLE9BQU8sRUFBRTtJQUNMTCxJQUFJLEVBQUVQLFNBQVMsQ0FBQ1EsT0FBTztJQUN2QkssVUFBVSxFQUFFO01BQ1JDLEtBQUssRUFBRTtRQUFFQyxTQUFTLEVBQUU7TUFBTyxDQUFDO01BQzVCQyxHQUFHLEVBQUU7SUFDVCxDQUFDO0lBQ0RMLFNBQVMsRUFBRSxLQUFLO0lBQ2hCTSxRQUFRLEVBQUUsU0FBUztJQUNuQkMsUUFBUSxFQUFFO0VBQ2QsQ0FBQztFQUNEQyxpQkFBaUIsRUFBRW5CLFNBQVMsQ0FBQ29CLE1BQU07RUFDbkNDLE9BQU8sRUFBRXJCLFNBQVMsQ0FBQ3NCLElBQUk7RUFDdkJDLE9BQU8sRUFBRTtJQUNMaEIsSUFBSSxFQUFFUCxTQUFTLENBQUNRLE9BQU87SUFDdkJLLFVBQVUsRUFBRTtNQUNSQyxLQUFLLEVBQUU7UUFBRUMsU0FBUyxFQUFFO01BQVksQ0FBQztNQUNqQ0MsR0FBRyxFQUFFO0lBQ1QsQ0FBQztJQUNETCxTQUFTLEVBQUUsS0FBSztJQUNoQk0sUUFBUSxFQUFFLFNBQVM7SUFDbkJDLFFBQVEsRUFBRTtFQUNkO0FBQ0osQ0FBQyxFQUNEO0VBQ0lNLFVBQVUsRUFBRSxJQUFJO0VBQ2hCVCxTQUFTLEVBQUUsU0FBUztFQUNwQlUsU0FBUyxFQUFFO0FBQ2YsQ0FDSixDQUFDO0FBQ0RyQixPQUFPLENBQUNzQixTQUFTLENBQUN2QixJQUFJLEVBQUU7RUFDcEJ3QixVQUFVLEVBQUUsU0FBUztFQUNyQkMsRUFBRSxFQUFFO0FBQ1IsQ0FBQyxDQUFDO0FBQ0ZDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHMUIsT0FBTyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["DataTypes","require","sequelize","User","Comment","define","id","type","INTEGER","autoIncrement","primaryKey","allowNull","post_id","references","model","tableName","key","onUpdate","onDelete","parent_comment_id","NUMBER","content","TEXT","user_id","timestamps","modelName","belongsTo","foreignKey","as","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/","sources":["commentModel.js"],"sourcesContent":["const { DataTypes } = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = require(\"../models/usedModel\");\nconst Comment = sequelize.define(\n    \"Comment\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        post_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"post\" },\n                key: \"sno\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        parent_comment_id: DataTypes.NUMBER,\n        content: DataTypes.TEXT,\n        user_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"user_info\" },\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n    },\n    {\n        timestamps: true,\n        tableName: \"comment\",\n        modelName: \"comments\",\n    }\n);\nComment.belongsTo(User, {\n    foreignKey: \"user_id\",\n    as: \"user\",\n});\nmodule.exports = Comment;\n"],"mappings":"AAAA,MAAM;EAAEA;AAAU,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAC1C,MAAMC,SAAS,GAAGD,OAAO,CAAC,oBAAoB,CAAC;AAC/C,MAAME,IAAI,GAAGF,OAAO,CAAC,qBAAqB,CAAC;AAC3C,MAAMG,OAAO,GAAGF,SAAS,CAACG,MAAM,CAC5B,SAAS,EACT;EACIC,EAAE,EAAE;IACAC,IAAI,EAAEP,SAAS,CAACQ,OAAO;IACvBC,aAAa,EAAE,IAAI;IACnBC,UAAU,EAAE,IAAI;IAChBC,SAAS,EAAE;EACf,CAAC;EACDC,OAAO,EAAE;IACLL,IAAI,EAAEP,SAAS,CAACQ,OAAO;IACvBK,UAAU,EAAE;MACRC,KAAK,EAAE;QAAEC,SAAS,EAAE;MAAO,CAAC;MAC5BC,GAAG,EAAE;IACT,CAAC;IACDL,SAAS,EAAE,KAAK;IAChBM,QAAQ,EAAE,SAAS;IACnBC,QAAQ,EAAE;EACd,CAAC;EACDC,iBAAiB,EAAEnB,SAAS,CAACoB,MAAM;EACnCC,OAAO,EAAErB,SAAS,CAACsB,IAAI;EACvBC,OAAO,EAAE;IACLhB,IAAI,EAAEP,SAAS,CAACQ,OAAO;IACvBK,UAAU,EAAE;MACRC,KAAK,EAAE;QAAEC,SAAS,EAAE;MAAY,CAAC;MACjCC,GAAG,EAAE;IACT,CAAC;IACDL,SAAS,EAAE,KAAK;IAChBM,QAAQ,EAAE,SAAS;IACnBC,QAAQ,EAAE;EACd;AACJ,CAAC,EACD;EACIM,UAAU,EAAE,IAAI;EAChBT,SAAS,EAAE,SAAS;EACpBU,SAAS,EAAE;AACf,CACJ,CAAC;AACDrB,OAAO,CAACsB,SAAS,CAACvB,IAAI,EAAE;EACpBwB,UAAU,EAAE,SAAS;EACrBC,EAAE,EAAE;AACR,CAAC,CAAC;AACFC,MAAM,CAACC,OAAO,GAAG1B,OAAO","ignoreList":[]}},"mtime":1720145666985},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/docs/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/docs/swaggerDef.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"product\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:product":{"value":{"code":"const {\n  version\n} = require(\"../../package.json\");\nconst dotenv = require(\"dotenv\").config();\nconst options = {\n  definition: {\n    openapi: \"3.1.0\",\n    info: {\n      title: \"AIT API documentation\",\n      version,\n      license: {\n        name: \"MIT\",\n        url: \"\"\n      }\n    },\n    servers: [{\n      url: \"http://localhost:3000\"\n    }]\n  },\n  apis: [\"./routes/v1/index.js\"]\n};\nmodule.exports = options;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ2ZXJzaW9uIiwicmVxdWlyZSIsImRvdGVudiIsImNvbmZpZyIsIm9wdGlvbnMiLCJkZWZpbml0aW9uIiwib3BlbmFwaSIsImluZm8iLCJ0aXRsZSIsImxpY2Vuc2UiLCJuYW1lIiwidXJsIiwic2VydmVycyIsImFwaXMiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdnVvbmdrbWEvaUNsb3VkIERyaXZlIChBcmNoaXZlKS9Eb2N1bWVudHMva2NuZC9zcmMvZG9jcy8iLCJzb3VyY2VzIjpbInN3YWdnZXJEZWYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyB2ZXJzaW9uIH0gPSByZXF1aXJlKFwiLi4vLi4vcGFja2FnZS5qc29uXCIpO1xuY29uc3QgZG90ZW52ID0gcmVxdWlyZShcImRvdGVudlwiKS5jb25maWcoKTtcblxuY29uc3Qgb3B0aW9ucyA9IHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIG9wZW5hcGk6IFwiMy4xLjBcIixcbiAgICAgICAgaW5mbzoge1xuICAgICAgICAgICAgdGl0bGU6IFwiQUlUIEFQSSBkb2N1bWVudGF0aW9uXCIsXG4gICAgICAgICAgICB2ZXJzaW9uLFxuICAgICAgICAgICAgbGljZW5zZToge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiTUlUXCIsXG4gICAgICAgICAgICAgICAgdXJsOiBcIlwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgc2VydmVyczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHVybDogXCJodHRwOi8vbG9jYWxob3N0OjMwMDBcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBhcGlzOiBbXCIuL3JvdXRlcy92MS9pbmRleC5qc1wiXSxcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gb3B0aW9ucztcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTTtFQUFFQTtBQUFRLENBQUMsR0FBR0MsT0FBTyxDQUFDLG9CQUFvQixDQUFDO0FBQ2pELE1BQU1DLE1BQU0sR0FBR0QsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDRSxNQUFNLENBQUMsQ0FBQztBQUV6QyxNQUFNQyxPQUFPLEdBQUc7RUFDWkMsVUFBVSxFQUFFO0lBQ1JDLE9BQU8sRUFBRSxPQUFPO0lBQ2hCQyxJQUFJLEVBQUU7TUFDRkMsS0FBSyxFQUFFLHVCQUF1QjtNQUM5QlIsT0FBTztNQUNQUyxPQUFPLEVBQUU7UUFDTEMsSUFBSSxFQUFFLEtBQUs7UUFDWEMsR0FBRyxFQUFFO01BQ1Q7SUFDSixDQUFDO0lBQ0RDLE9BQU8sRUFBRSxDQUNMO01BQ0lELEdBQUcsRUFBRTtJQUNULENBQUM7RUFFVCxDQUFDO0VBQ0RFLElBQUksRUFBRSxDQUFDLHNCQUFzQjtBQUNqQyxDQUFDO0FBRURDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHWCxPQUFPIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["version","require","dotenv","config","options","definition","openapi","info","title","license","name","url","servers","apis","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/docs/","sources":["swaggerDef.js"],"sourcesContent":["const { version } = require(\"../../package.json\");\nconst dotenv = require(\"dotenv\").config();\n\nconst options = {\n    definition: {\n        openapi: \"3.1.0\",\n        info: {\n            title: \"AIT API documentation\",\n            version,\n            license: {\n                name: \"MIT\",\n                url: \"\",\n            },\n        },\n        servers: [\n            {\n                url: \"http://localhost:3000\",\n            },\n        ],\n    },\n    apis: [\"./routes/v1/index.js\"],\n};\n\nmodule.exports = options;\n"],"mappings":"AAAA,MAAM;EAAEA;AAAQ,CAAC,GAAGC,OAAO,CAAC,oBAAoB,CAAC;AACjD,MAAMC,MAAM,GAAGD,OAAO,CAAC,QAAQ,CAAC,CAACE,MAAM,CAAC,CAAC;AAEzC,MAAMC,OAAO,GAAG;EACZC,UAAU,EAAE;IACRC,OAAO,EAAE,OAAO;IAChBC,IAAI,EAAE;MACFC,KAAK,EAAE,uBAAuB;MAC9BR,OAAO;MACPS,OAAO,EAAE;QACLC,IAAI,EAAE,KAAK;QACXC,GAAG,EAAE;MACT;IACJ,CAAC;IACDC,OAAO,EAAE,CACL;MACID,GAAG,EAAE;IACT,CAAC;EAET,CAAC;EACDE,IAAI,EAAE,CAAC,sBAAsB;AACjC,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAGX,OAAO","ignoreList":[]}},"mtime":1716176296248},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/wishlistService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const Wishlist = require(\"../models/wishlistModel\");\nconst {\n  opExp,\n  AiedutechTool,\n  opExpTechType,\n  sequelize,\n  LessonSample,\n  ModelSearch,\n  OperationCase,\n  OperationTool,\n  OperationGrade,\n  OperationType,\n  OperationSubject,\n  OperationTopic\n} = require(\"../models/searchModel\");\nconst User = require(\"../models/usedModel\");\nexports.createOrDeleteWishlist = async (foreign_key_id, user_id, type) => {\n  let wishlist = await Wishlist.findOne({\n    where: {\n      foreign_key_id,\n      user_id,\n      type\n    }\n  });\n  if (wishlist == null) {\n    return await Wishlist.create({\n      id: null,\n      user_id,\n      foreign_key_id,\n      type\n    });\n  } else {\n    await wishlist.destroy();\n    return wishlist;\n  }\n};\nexports.getWishlists = async (paged, limit, user_id) => {\n  const offset = (paged - 1) * limit;\n  let query = {\n    include: [{\n      model: User,\n      as: \"user\"\n    }],\n    order: [[\"created_date\", \"DESC\"]]\n  };\n  if (paged) {\n    query[\"offset\"] = offset;\n  }\n  if (limit) {\n    query[\"limit\"] = limit;\n  }\n  if (user_id) {\n    query[\"where\"] = {\n      user_id\n    };\n  }\n  const {\n    count,\n    rows\n  } = await Wishlist.findAndCountAll(query);\n\n  //convert pdf link\n  const processedData = await Promise.all(rows.map(async item => {\n    // Process tool\n    if (item.type == \"tool\") {\n      item.dataValues.info = await AiedutechTool.findOne({\n        where: {\n          sno: item.foreign_key_id\n        },\n        attributes: [\"sno\", \"name_kr\", \"description\", \"case_img\"]\n      });\n    }\n    // Process lesson\n    if (item.type == \"lesson\") {\n      item.dataValues.info = await LessonSample.findOne({\n        where: {\n          sno: item.foreign_key_id\n        },\n        attributes: [\"sno\", \"topic\", \"objective\"]\n      });\n    }\n    // Process operation\n    if (item.type == \"operation\") {\n      item.dataValues.info = await OperationCase.findOne({\n        where: {\n          id: item.foreign_key_id\n        },\n        attributes: [\"id\", \"title\", \"learning_objectives\"]\n      });\n    }\n    // Process model\n    if (item.type == \"model\") {\n      item.dataValues.info = await ModelSearch.findOne({\n        where: {\n          id: item.foreign_key_id\n        },\n        attributes: [\"id\", \"name\", \"description\", \"image\"]\n      });\n    }\n    return item;\n  }));\n  const totalPages = Math.ceil(count / limit);\n  return {\n    items: processedData,\n    totalItems: count,\n    itemCount: processedData.length,\n    itemsPerPage: limit,\n    totalPages,\n    currentPage: paged\n  };\n};\nexports.getCommunityWishlists = async (paged, limit) => {\n  const offset = (paged - 1) * limit;\n  const {\n    count,\n    rows\n  } = await Wishlist.findAndCountAll({\n    attributes: [\"type\", \"foreign_key_id\", [sequelize.fn(\"COUNT\", sequelize.col(\"id\")), \"countWishlists\"]],\n    group: [\"type\", \"foreign_key_id\"],\n    order: [[sequelize.fn(\"MAX\", sequelize.col(\"created_date\")), \"DESC\"]],\n    offset: offset,\n    limit: limit\n  });\n\n  //convert pdf link\n  const processedData = await Promise.all(rows.map(async item => {\n    let info = null;\n    switch (item.type) {\n      case \"tool\":\n        info = await AiedutechTool.findOne({\n          where: {\n            sno: item.foreign_key_id\n          },\n          attributes: [\"sno\", \"name_kr\", \"description\", \"case_img\"]\n        });\n        break;\n      case \"lesson\":\n        info = await LessonSample.findOne({\n          where: {\n            sno: item.foreign_key_id\n          },\n          attributes: [\"sno\", \"topic\", \"objective\"]\n        });\n        break;\n      case \"operation\":\n        info = await OperationCase.findOne({\n          where: {\n            id: item.foreign_key_id\n          },\n          attributes: [\"id\", \"title\", \"learning_objectives\"]\n        });\n        break;\n      case \"model\":\n        info = await ModelSearch.findOne({\n          where: {\n            id: item.foreign_key_id\n          },\n          attributes: [\"id\", \"name\", \"description\", \"image\"]\n        });\n        break;\n    }\n    item.dataValues.info = info;\n    return item;\n  }));\n  const totalPages = Math.ceil(count.length / limit);\n  return {\n    items: processedData,\n    totalItems: count.length,\n    itemCount: processedData.length,\n    itemsPerPage: limit,\n    totalPages,\n    currentPage: paged\n  };\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJXaXNobGlzdCIsInJlcXVpcmUiLCJvcEV4cCIsIkFpZWR1dGVjaFRvb2wiLCJvcEV4cFRlY2hUeXBlIiwic2VxdWVsaXplIiwiTGVzc29uU2FtcGxlIiwiTW9kZWxTZWFyY2giLCJPcGVyYXRpb25DYXNlIiwiT3BlcmF0aW9uVG9vbCIsIk9wZXJhdGlvbkdyYWRlIiwiT3BlcmF0aW9uVHlwZSIsIk9wZXJhdGlvblN1YmplY3QiLCJPcGVyYXRpb25Ub3BpYyIsIlVzZXIiLCJleHBvcnRzIiwiY3JlYXRlT3JEZWxldGVXaXNobGlzdCIsImZvcmVpZ25fa2V5X2lkIiwidXNlcl9pZCIsInR5cGUiLCJ3aXNobGlzdCIsImZpbmRPbmUiLCJ3aGVyZSIsImNyZWF0ZSIsImlkIiwiZGVzdHJveSIsImdldFdpc2hsaXN0cyIsInBhZ2VkIiwibGltaXQiLCJvZmZzZXQiLCJxdWVyeSIsImluY2x1ZGUiLCJtb2RlbCIsImFzIiwib3JkZXIiLCJjb3VudCIsInJvd3MiLCJmaW5kQW5kQ291bnRBbGwiLCJwcm9jZXNzZWREYXRhIiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsIml0ZW0iLCJkYXRhVmFsdWVzIiwiaW5mbyIsInNubyIsImF0dHJpYnV0ZXMiLCJ0b3RhbFBhZ2VzIiwiTWF0aCIsImNlaWwiLCJpdGVtcyIsInRvdGFsSXRlbXMiLCJpdGVtQ291bnQiLCJsZW5ndGgiLCJpdGVtc1BlclBhZ2UiLCJjdXJyZW50UGFnZSIsImdldENvbW11bml0eVdpc2hsaXN0cyIsImZuIiwiY29sIiwiZ3JvdXAiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy9zZXJ2aWNlcy8iLCJzb3VyY2VzIjpbIndpc2hsaXN0U2VydmljZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBXaXNobGlzdCA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvd2lzaGxpc3RNb2RlbFwiKTtcbmNvbnN0IHtcbiAgICBvcEV4cCxcbiAgICBBaWVkdXRlY2hUb29sLFxuICAgIG9wRXhwVGVjaFR5cGUsXG4gICAgc2VxdWVsaXplLFxuICAgIExlc3NvblNhbXBsZSxcbiAgICBNb2RlbFNlYXJjaCxcbiAgICBPcGVyYXRpb25DYXNlLFxuICAgIE9wZXJhdGlvblRvb2wsXG4gICAgT3BlcmF0aW9uR3JhZGUsXG4gICAgT3BlcmF0aW9uVHlwZSxcbiAgICBPcGVyYXRpb25TdWJqZWN0LFxuICAgIE9wZXJhdGlvblRvcGljLFxufSA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvc2VhcmNoTW9kZWxcIik7XG5jb25zdCBVc2VyID0gcmVxdWlyZShcIi4uL21vZGVscy91c2VkTW9kZWxcIik7XG5cbmV4cG9ydHMuY3JlYXRlT3JEZWxldGVXaXNobGlzdCA9IGFzeW5jIChmb3JlaWduX2tleV9pZCwgdXNlcl9pZCwgdHlwZSkgPT4ge1xuICAgIGxldCB3aXNobGlzdCA9IGF3YWl0IFdpc2hsaXN0LmZpbmRPbmUoe1xuICAgICAgICB3aGVyZTogeyBmb3JlaWduX2tleV9pZCwgdXNlcl9pZCwgdHlwZSB9LFxuICAgIH0pO1xuICAgIGlmICh3aXNobGlzdCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBXaXNobGlzdC5jcmVhdGUoe1xuICAgICAgICAgICAgaWQ6IG51bGwsXG4gICAgICAgICAgICB1c2VyX2lkLFxuICAgICAgICAgICAgZm9yZWlnbl9rZXlfaWQsXG4gICAgICAgICAgICB0eXBlLFxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCB3aXNobGlzdC5kZXN0cm95KCk7XG4gICAgICAgIHJldHVybiB3aXNobGlzdDtcbiAgICB9XG59O1xuZXhwb3J0cy5nZXRXaXNobGlzdHMgPSBhc3luYyAocGFnZWQsIGxpbWl0LCB1c2VyX2lkKSA9PiB7XG4gICAgY29uc3Qgb2Zmc2V0ID0gKHBhZ2VkIC0gMSkgKiBsaW1pdDtcbiAgICBsZXQgcXVlcnkgPSB7XG4gICAgICAgIGluY2x1ZGU6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBtb2RlbDogVXNlcixcbiAgICAgICAgICAgICAgICBhczogXCJ1c2VyXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBvcmRlcjogW1tcImNyZWF0ZWRfZGF0ZVwiLCBcIkRFU0NcIl1dLFxuICAgIH07XG5cbiAgICBpZiAocGFnZWQpIHtcbiAgICAgICAgcXVlcnlbXCJvZmZzZXRcIl0gPSBvZmZzZXQ7XG4gICAgfVxuICAgIGlmIChsaW1pdCkge1xuICAgICAgICBxdWVyeVtcImxpbWl0XCJdID0gbGltaXQ7XG4gICAgfVxuICAgIGlmICh1c2VyX2lkKSB7XG4gICAgICAgIHF1ZXJ5W1wid2hlcmVcIl0gPSB7IHVzZXJfaWQgfTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGNvdW50LCByb3dzIH0gPSBhd2FpdCBXaXNobGlzdC5maW5kQW5kQ291bnRBbGwocXVlcnkpO1xuXG4gICAgLy9jb252ZXJ0IHBkZiBsaW5rXG4gICAgY29uc3QgcHJvY2Vzc2VkRGF0YSA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICByb3dzLm1hcChhc3luYyAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgLy8gUHJvY2VzcyB0b29sXG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09IFwidG9vbFwiKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5kYXRhVmFsdWVzLmluZm8gPSBhd2FpdCBBaWVkdXRlY2hUb29sLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBzbm86IGl0ZW0uZm9yZWlnbl9rZXlfaWQgfSxcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogW1wic25vXCIsIFwibmFtZV9rclwiLCBcImRlc2NyaXB0aW9uXCIsIFwiY2FzZV9pbWdcIl0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBQcm9jZXNzIGxlc3NvblxuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PSBcImxlc3NvblwiKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5kYXRhVmFsdWVzLmluZm8gPSBhd2FpdCBMZXNzb25TYW1wbGUuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IHNubzogaXRlbS5mb3JlaWduX2tleV9pZCB9LFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBbXCJzbm9cIiwgXCJ0b3BpY1wiLCBcIm9iamVjdGl2ZVwiXSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFByb2Nlc3Mgb3BlcmF0aW9uXG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09IFwib3BlcmF0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICBpdGVtLmRhdGFWYWx1ZXMuaW5mbyA9IGF3YWl0IE9wZXJhdGlvbkNhc2UuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBpdGVtLmZvcmVpZ25fa2V5X2lkIH0sXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFtcImlkXCIsIFwidGl0bGVcIiwgXCJsZWFybmluZ19vYmplY3RpdmVzXCJdLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUHJvY2VzcyBtb2RlbFxuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PSBcIm1vZGVsXCIpIHtcbiAgICAgICAgICAgICAgICBpdGVtLmRhdGFWYWx1ZXMuaW5mbyA9IGF3YWl0IE1vZGVsU2VhcmNoLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogaXRlbS5mb3JlaWduX2tleV9pZCB9LFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBbXCJpZFwiLCBcIm5hbWVcIiwgXCJkZXNjcmlwdGlvblwiLCBcImltYWdlXCJdLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgY29uc3QgdG90YWxQYWdlcyA9IE1hdGguY2VpbChjb3VudCAvIGxpbWl0KTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGl0ZW1zOiBwcm9jZXNzZWREYXRhLFxuICAgICAgICB0b3RhbEl0ZW1zOiBjb3VudCxcbiAgICAgICAgaXRlbUNvdW50OiBwcm9jZXNzZWREYXRhLmxlbmd0aCxcbiAgICAgICAgaXRlbXNQZXJQYWdlOiBsaW1pdCxcbiAgICAgICAgdG90YWxQYWdlcyxcbiAgICAgICAgY3VycmVudFBhZ2U6IHBhZ2VkLFxuICAgIH07XG59O1xuZXhwb3J0cy5nZXRDb21tdW5pdHlXaXNobGlzdHMgPSBhc3luYyAocGFnZWQsIGxpbWl0KSA9PiB7XG4gICAgY29uc3Qgb2Zmc2V0ID0gKHBhZ2VkIC0gMSkgKiBsaW1pdDtcbiAgICBjb25zdCB7IGNvdW50LCByb3dzIH0gPSBhd2FpdCBXaXNobGlzdC5maW5kQW5kQ291bnRBbGwoe1xuICAgICAgICBhdHRyaWJ1dGVzOiBbXG4gICAgICAgICAgICBcInR5cGVcIixcbiAgICAgICAgICAgIFwiZm9yZWlnbl9rZXlfaWRcIixcbiAgICAgICAgICAgIFtzZXF1ZWxpemUuZm4oXCJDT1VOVFwiLCBzZXF1ZWxpemUuY29sKFwiaWRcIikpLCBcImNvdW50V2lzaGxpc3RzXCJdLFxuICAgICAgICBdLFxuICAgICAgICBncm91cDogW1widHlwZVwiLCBcImZvcmVpZ25fa2V5X2lkXCJdLFxuICAgICAgICBvcmRlcjogW1tzZXF1ZWxpemUuZm4oXCJNQVhcIiwgc2VxdWVsaXplLmNvbChcImNyZWF0ZWRfZGF0ZVwiKSksIFwiREVTQ1wiXV0sXG4gICAgICAgIG9mZnNldDogb2Zmc2V0LFxuICAgICAgICBsaW1pdDogbGltaXQsXG4gICAgfSk7XG5cbiAgICAvL2NvbnZlcnQgcGRmIGxpbmtcbiAgICBjb25zdCBwcm9jZXNzZWREYXRhID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIHJvd3MubWFwKGFzeW5jIChpdGVtKSA9PiB7XG4gICAgICAgICAgICBsZXQgaW5mbyA9IG51bGw7XG4gICAgICAgICAgICBzd2l0Y2ggKGl0ZW0udHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJ0b29sXCI6XG4gICAgICAgICAgICAgICAgICAgIGluZm8gPSBhd2FpdCBBaWVkdXRlY2hUb29sLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgc25vOiBpdGVtLmZvcmVpZ25fa2V5X2lkIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzbm9cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVfa3JcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRlc2NyaXB0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjYXNlX2ltZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJsZXNzb25cIjpcbiAgICAgICAgICAgICAgICAgICAgaW5mbyA9IGF3YWl0IExlc3NvblNhbXBsZS5maW5kT25lKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IHNubzogaXRlbS5mb3JlaWduX2tleV9pZCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogW1wic25vXCIsIFwidG9waWNcIiwgXCJvYmplY3RpdmVcIl0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwib3BlcmF0aW9uXCI6XG4gICAgICAgICAgICAgICAgICAgIGluZm8gPSBhd2FpdCBPcGVyYXRpb25DYXNlLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IGl0ZW0uZm9yZWlnbl9rZXlfaWQgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFtcImlkXCIsIFwidGl0bGVcIiwgXCJsZWFybmluZ19vYmplY3RpdmVzXCJdLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIm1vZGVsXCI6XG4gICAgICAgICAgICAgICAgICAgIGluZm8gPSBhd2FpdCBNb2RlbFNlYXJjaC5maW5kT25lKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBpdGVtLmZvcmVpZ25fa2V5X2lkIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBbXCJpZFwiLCBcIm5hbWVcIiwgXCJkZXNjcmlwdGlvblwiLCBcImltYWdlXCJdLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpdGVtLmRhdGFWYWx1ZXMuaW5mbyA9IGluZm87XG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgY29uc3QgdG90YWxQYWdlcyA9IE1hdGguY2VpbChjb3VudC5sZW5ndGggLyBsaW1pdCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBpdGVtczogcHJvY2Vzc2VkRGF0YSxcbiAgICAgICAgdG90YWxJdGVtczogY291bnQubGVuZ3RoLFxuICAgICAgICBpdGVtQ291bnQ6IHByb2Nlc3NlZERhdGEubGVuZ3RoLFxuICAgICAgICBpdGVtc1BlclBhZ2U6IGxpbWl0LFxuICAgICAgICB0b3RhbFBhZ2VzLFxuICAgICAgICBjdXJyZW50UGFnZTogcGFnZWQsXG4gICAgfTtcbn07XG4iXSwibWFwcGluZ3MiOiJBQUFB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","map":{"version":3,"names":["Wishlist","require","opExp","AiedutechTool","opExpTechType","sequelize","LessonSample","ModelSearch","OperationCase","OperationTool","OperationGrade","OperationType","OperationSubject","OperationTopic","User","exports","createOrDeleteWishlist","foreign_key_id","user_id","type","wishlist","findOne","where","create","id","destroy","getWishlists","paged","limit","offset","query","include","model","as","order","count","rows","findAndCountAll","processedData","Promise","all","map","item","dataValues","info","sno","attributes","totalPages","Math","ceil","items","totalItems","itemCount","length","itemsPerPage","currentPage","getCommunityWishlists","fn","col","group"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/","sources":["wishlistService.js"],"sourcesContent":["const Wishlist = require(\"../models/wishlistModel\");\nconst {\n    opExp,\n    AiedutechTool,\n    opExpTechType,\n    sequelize,\n    LessonSample,\n    ModelSearch,\n    OperationCase,\n    OperationTool,\n    OperationGrade,\n    OperationType,\n    OperationSubject,\n    OperationTopic,\n} = require(\"../models/searchModel\");\nconst User = require(\"../models/usedModel\");\n\nexports.createOrDeleteWishlist = async (foreign_key_id, user_id, type) => {\n    let wishlist = await Wishlist.findOne({\n        where: { foreign_key_id, user_id, type },\n    });\n    if (wishlist == null) {\n        return await Wishlist.create({\n            id: null,\n            user_id,\n            foreign_key_id,\n            type,\n        });\n    } else {\n        await wishlist.destroy();\n        return wishlist;\n    }\n};\nexports.getWishlists = async (paged, limit, user_id) => {\n    const offset = (paged - 1) * limit;\n    let query = {\n        include: [\n            {\n                model: User,\n                as: \"user\",\n            },\n        ],\n        order: [[\"created_date\", \"DESC\"]],\n    };\n\n    if (paged) {\n        query[\"offset\"] = offset;\n    }\n    if (limit) {\n        query[\"limit\"] = limit;\n    }\n    if (user_id) {\n        query[\"where\"] = { user_id };\n    }\n\n    const { count, rows } = await Wishlist.findAndCountAll(query);\n\n    //convert pdf link\n    const processedData = await Promise.all(\n        rows.map(async (item) => {\n            // Process tool\n            if (item.type == \"tool\") {\n                item.dataValues.info = await AiedutechTool.findOne({\n                    where: { sno: item.foreign_key_id },\n                    attributes: [\"sno\", \"name_kr\", \"description\", \"case_img\"],\n                });\n            }\n            // Process lesson\n            if (item.type == \"lesson\") {\n                item.dataValues.info = await LessonSample.findOne({\n                    where: { sno: item.foreign_key_id },\n                    attributes: [\"sno\", \"topic\", \"objective\"],\n                });\n            }\n            // Process operation\n            if (item.type == \"operation\") {\n                item.dataValues.info = await OperationCase.findOne({\n                    where: { id: item.foreign_key_id },\n                    attributes: [\"id\", \"title\", \"learning_objectives\"],\n                });\n            }\n            // Process model\n            if (item.type == \"model\") {\n                item.dataValues.info = await ModelSearch.findOne({\n                    where: { id: item.foreign_key_id },\n                    attributes: [\"id\", \"name\", \"description\", \"image\"],\n                });\n            }\n\n            return item;\n        })\n    );\n\n    const totalPages = Math.ceil(count / limit);\n\n    return {\n        items: processedData,\n        totalItems: count,\n        itemCount: processedData.length,\n        itemsPerPage: limit,\n        totalPages,\n        currentPage: paged,\n    };\n};\nexports.getCommunityWishlists = async (paged, limit) => {\n    const offset = (paged - 1) * limit;\n    const { count, rows } = await Wishlist.findAndCountAll({\n        attributes: [\n            \"type\",\n            \"foreign_key_id\",\n            [sequelize.fn(\"COUNT\", sequelize.col(\"id\")), \"countWishlists\"],\n        ],\n        group: [\"type\", \"foreign_key_id\"],\n        order: [[sequelize.fn(\"MAX\", sequelize.col(\"created_date\")), \"DESC\"]],\n        offset: offset,\n        limit: limit,\n    });\n\n    //convert pdf link\n    const processedData = await Promise.all(\n        rows.map(async (item) => {\n            let info = null;\n            switch (item.type) {\n                case \"tool\":\n                    info = await AiedutechTool.findOne({\n                        where: { sno: item.foreign_key_id },\n                        attributes: [\n                            \"sno\",\n                            \"name_kr\",\n                            \"description\",\n                            \"case_img\",\n                        ],\n                    });\n                    break;\n                case \"lesson\":\n                    info = await LessonSample.findOne({\n                        where: { sno: item.foreign_key_id },\n                        attributes: [\"sno\", \"topic\", \"objective\"],\n                    });\n                    break;\n                case \"operation\":\n                    info = await OperationCase.findOne({\n                        where: { id: item.foreign_key_id },\n                        attributes: [\"id\", \"title\", \"learning_objectives\"],\n                    });\n                    break;\n                case \"model\":\n                    info = await ModelSearch.findOne({\n                        where: { id: item.foreign_key_id },\n                        attributes: [\"id\", \"name\", \"description\", \"image\"],\n                    });\n                    break;\n            }\n            item.dataValues.info = info;\n            return item;\n        })\n    );\n\n    const totalPages = Math.ceil(count.length / limit);\n\n    return {\n        items: processedData,\n        totalItems: count.length,\n        itemCount: processedData.length,\n        itemsPerPage: limit,\n        totalPages,\n        currentPage: paged,\n    };\n};\n"],"mappings":"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","ignoreList":[]}},"mtime":1721642086286},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/wishlistModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const {\n  DataTypes,\n  Sequelize,\n  Op\n} = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = require(\"../models/usedModel\");\nconst Wishlist = sequelize.define(\"Wishlist\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  user_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"user_info\"\n      },\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  foreign_key_id: DataTypes.INTEGER,\n  type: {\n    type: DataTypes.ENUM(\"tool\", \"lesson\", \"operation\", \"model\"),\n    defaultValue: \"tool\"\n  },\n  created_date: DataTypes.DATE\n}, {\n  timestamps: false,\n  createdAt: \"created_at\",\n  tableName: \"wishlist\",\n  modelName: \"SurveyResult\"\n});\nWishlist.belongsTo(User, {\n  foreignKey: \"user_id\",\n  as: \"user\"\n});\nmodule.exports = Wishlist;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEYXRhVHlwZXMiLCJTZXF1ZWxpemUiLCJPcCIsInJlcXVpcmUiLCJzZXF1ZWxpemUiLCJVc2VyIiwiV2lzaGxpc3QiLCJkZWZpbmUiLCJpZCIsInR5cGUiLCJJTlRFR0VSIiwiYXV0b0luY3JlbWVudCIsInByaW1hcnlLZXkiLCJhbGxvd051bGwiLCJ1c2VyX2lkIiwicmVmZXJlbmNlcyIsIm1vZGVsIiwidGFibGVOYW1lIiwia2V5Iiwib25VcGRhdGUiLCJvbkRlbGV0ZSIsImZvcmVpZ25fa2V5X2lkIiwiRU5VTSIsImRlZmF1bHRWYWx1ZSIsImNyZWF0ZWRfZGF0ZSIsIkRBVEUiLCJ0aW1lc3RhbXBzIiwiY3JlYXRlZEF0IiwibW9kZWxOYW1lIiwiYmVsb25nc1RvIiwiZm9yZWlnbktleSIsImFzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL21vZGVscy8iLCJzb3VyY2VzIjpbIndpc2hsaXN0TW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBEYXRhVHlwZXMsIFNlcXVlbGl6ZSwgT3AgfSA9IHJlcXVpcmUoXCJzZXF1ZWxpemVcIik7XG5jb25zdCBzZXF1ZWxpemUgPSByZXF1aXJlKFwiLi4vY29uZmlnL2RhdGFiYXNlXCIpO1xuY29uc3QgVXNlciA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvdXNlZE1vZGVsXCIpO1xuY29uc3QgV2lzaGxpc3QgPSBzZXF1ZWxpemUuZGVmaW5lKFxuICAgIFwiV2lzaGxpc3RcIixcbiAgICB7XG4gICAgICAgIGlkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICB1c2VyX2lkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogeyB0YWJsZU5hbWU6IFwidXNlcl9pbmZvXCIgfSxcbiAgICAgICAgICAgICAgICBrZXk6IFwiaWRcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICAgICAgb25VcGRhdGU6IFwiY2FzY2FkZVwiLFxuICAgICAgICAgICAgb25EZWxldGU6IFwiY2FzY2FkZVwiLFxuICAgICAgICB9LFxuICAgICAgICBmb3JlaWduX2tleV9pZDogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5FTlVNKFwidG9vbFwiLCBcImxlc3NvblwiLCBcIm9wZXJhdGlvblwiLCBcIm1vZGVsXCIpLFxuICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBcInRvb2xcIixcbiAgICAgICAgfSxcbiAgICAgICAgY3JlYXRlZF9kYXRlOiBEYXRhVHlwZXMuREFURSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdGltZXN0YW1wczogZmFsc2UsXG4gICAgICAgIGNyZWF0ZWRBdDogXCJjcmVhdGVkX2F0XCIsXG4gICAgICAgIHRhYmxlTmFtZTogXCJ3aXNobGlzdFwiLFxuICAgICAgICBtb2RlbE5hbWU6IFwiU3VydmV5UmVzdWx0XCIsXG4gICAgfVxuKTtcblxuV2lzaGxpc3QuYmVsb25nc1RvKFVzZXIsIHtcbiAgICBmb3JlaWduS2V5OiBcInVzZXJfaWRcIixcbiAgICBhczogXCJ1c2VyXCIsXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBXaXNobGlzdDtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTTtFQUFFQSxTQUFTO0VBQUVDLFNBQVM7RUFBRUM7QUFBRyxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDekQsTUFBTUMsU0FBUyxHQUFHRCxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDL0MsTUFBTUUsSUFBSSxHQUFHRixPQUFPLENBQUMscUJBQXFCLENBQUM7QUFDM0MsTUFBTUcsUUFBUSxHQUFHRixTQUFTLENBQUNHLE1BQU0sQ0FDN0IsVUFBVSxFQUNWO0VBQ0lDLEVBQUUsRUFBRTtJQUNBQyxJQUFJLEVBQUVULFNBQVMsQ0FBQ1UsT0FBTztJQUN2QkMsYUFBYSxFQUFFLElBQUk7SUFDbkJDLFVBQVUsRUFBRSxJQUFJO0lBQ2hCQyxTQUFTLEVBQUU7RUFDZixDQUFDO0VBQ0RDLE9BQU8sRUFBRTtJQUNMTCxJQUFJLEVBQUVULFNBQVMsQ0FBQ1UsT0FBTztJQUN2QkssVUFBVSxFQUFFO01BQ1JDLEtBQUssRUFBRTtRQUFFQyxTQUFTLEVBQUU7TUFBWSxDQUFDO01BQ2pDQyxHQUFHLEVBQUU7SUFDVCxDQUFDO0lBQ0RMLFNBQVMsRUFBRSxLQUFLO0lBQ2hCTSxRQUFRLEVBQUUsU0FBUztJQUNuQkMsUUFBUSxFQUFFO0VBQ2QsQ0FBQztFQUNEQyxjQUFjLEVBQUVyQixTQUFTLENBQUNVLE9BQU87RUFDakNELElBQUksRUFBRTtJQUNGQSxJQUFJLEVBQUVULFNBQVMsQ0FBQ3NCLElBQUksQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRSxPQUFPLENBQUM7SUFDNURDLFlBQVksRUFBRTtFQUNsQixDQUFDO0VBQ0RDLFlBQVksRUFBRXhCLFNBQVMsQ0FBQ3lCO0FBQzVCLENBQUMsRUFDRDtFQUNJQyxVQUFVLEVBQUUsS0FBSztFQUNqQkMsU0FBUyxFQUFFLFlBQVk7RUFDdkJWLFNBQVMsRUFBRSxVQUFVO0VBQ3JCVyxTQUFTLEVBQUU7QUFDZixDQUNKLENBQUM7QUFFRHRCLFFBQVEsQ0FBQ3VCLFNBQVMsQ0FBQ3hCLElBQUksRUFBRTtFQUNyQnlCLFVBQVUsRUFBRSxTQUFTO0VBQ3JCQyxFQUFFLEVBQUU7QUFDUixDQUFDLENBQUM7QUFFRkMsTUFBTSxDQUFDQyxPQUFPLEdBQUczQixRQUFRIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["DataTypes","Sequelize","Op","require","sequelize","User","Wishlist","define","id","type","INTEGER","autoIncrement","primaryKey","allowNull","user_id","references","model","tableName","key","onUpdate","onDelete","foreign_key_id","ENUM","defaultValue","created_date","DATE","timestamps","createdAt","modelName","belongsTo","foreignKey","as","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/","sources":["wishlistModel.js"],"sourcesContent":["const { DataTypes, Sequelize, Op } = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = require(\"../models/usedModel\");\nconst Wishlist = sequelize.define(\n    \"Wishlist\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        user_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"user_info\" },\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        foreign_key_id: DataTypes.INTEGER,\n        type: {\n            type: DataTypes.ENUM(\"tool\", \"lesson\", \"operation\", \"model\"),\n            defaultValue: \"tool\",\n        },\n        created_date: DataTypes.DATE,\n    },\n    {\n        timestamps: false,\n        createdAt: \"created_at\",\n        tableName: \"wishlist\",\n        modelName: \"SurveyResult\",\n    }\n);\n\nWishlist.belongsTo(User, {\n    foreignKey: \"user_id\",\n    as: \"user\",\n});\n\nmodule.exports = Wishlist;\n"],"mappings":"AAAA,MAAM;EAAEA,SAAS;EAAEC,SAAS;EAAEC;AAAG,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACzD,MAAMC,SAAS,GAAGD,OAAO,CAAC,oBAAoB,CAAC;AAC/C,MAAME,IAAI,GAAGF,OAAO,CAAC,qBAAqB,CAAC;AAC3C,MAAMG,QAAQ,GAAGF,SAAS,CAACG,MAAM,CAC7B,UAAU,EACV;EACIC,EAAE,EAAE;IACAC,IAAI,EAAET,SAAS,CAACU,OAAO;IACvBC,aAAa,EAAE,IAAI;IACnBC,UAAU,EAAE,IAAI;IAChBC,SAAS,EAAE;EACf,CAAC;EACDC,OAAO,EAAE;IACLL,IAAI,EAAET,SAAS,CAACU,OAAO;IACvBK,UAAU,EAAE;MACRC,KAAK,EAAE;QAAEC,SAAS,EAAE;MAAY,CAAC;MACjCC,GAAG,EAAE;IACT,CAAC;IACDL,SAAS,EAAE,KAAK;IAChBM,QAAQ,EAAE,SAAS;IACnBC,QAAQ,EAAE;EACd,CAAC;EACDC,cAAc,EAAErB,SAAS,CAACU,OAAO;EACjCD,IAAI,EAAE;IACFA,IAAI,EAAET,SAAS,CAACsB,IAAI,CAAC,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,OAAO,CAAC;IAC5DC,YAAY,EAAE;EAClB,CAAC;EACDC,YAAY,EAAExB,SAAS,CAACyB;AAC5B,CAAC,EACD;EACIC,UAAU,EAAE,KAAK;EACjBC,SAAS,EAAE,YAAY;EACvBV,SAAS,EAAE,UAAU;EACrBW,SAAS,EAAE;AACf,CACJ,CAAC;AAEDtB,QAAQ,CAACuB,SAAS,CAACxB,IAAI,EAAE;EACrByB,UAAU,EAAE,SAAS;EACrBC,EAAE,EAAE;AACR,CAAC,CAAC;AAEFC,MAAM,CAACC,OAAO,GAAG3B,QAAQ","ignoreList":[]}},"mtime":1721357486743},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/searchModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const {\n  DataTypes\n} = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst {\n  Topic,\n  Subject,\n  Grade,\n  Type\n} = require(\"../models/designModel\");\nconst opExp = sequelize.define(\"opExp\", {\n  sno: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  name_kr: DataTypes.TEXT,\n  tool_id: DataTypes.INTEGER,\n  tech_id: DataTypes.INTEGER,\n  core_func: DataTypes.TEXT,\n  name_en: DataTypes.TEXT,\n  description: DataTypes.TEXT,\n  service_link: DataTypes.TEXT,\n  case_link: DataTypes.TEXT,\n  case_img: DataTypes.TEXT\n}, {\n  timestamps: false,\n  tableName: \"op_exp\",\n  modelName: \"opExp\"\n});\nconst opExpTechType = sequelize.define(\"op_exp_tech_type\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  exp_sno: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"op_exp\"\n      },\n      // provide table name\n      key: \"sno\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  type_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"tool_aiedutech\"\n      },\n      // provide table name\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  }\n}, {\n  timestamps: false,\n  tableName: \"op_exp_tech_type\",\n  modelName: \"opExpTechType\"\n});\nconst ClassTopic = sequelize.define(\"ClassTopic\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  name: DataTypes.TEXT,\n  created_at: DataTypes.TIME\n}, {\n  timestamps: false,\n  tableName: \"class_topic\",\n  modelName: \"ClassTopic\"\n});\nconst AiedutechTool = sequelize.define(\"AiedutechTool\", {\n  sno: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  name_kr: DataTypes.TEXT,\n  name_en: DataTypes.TEXT,\n  tool_id: DataTypes.NUMBER,\n  tech_id: DataTypes.NUMBER,\n  core_func: DataTypes.TEXT,\n  description: DataTypes.TEXT,\n  service_link: DataTypes.TEXT,\n  case_link: DataTypes.TEXT,\n  case_img: DataTypes.TEXT\n}, {\n  timestamps: false,\n  tableName: \"aiedutech_tool\",\n  modelName: \"AiedutechTool\"\n});\nconst LessonSample = sequelize.define(\"LessonSample\", {\n  sno: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  topic: DataTypes.TEXT,\n  topic_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"class_topic\"\n      },\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  time: DataTypes.TEXT,\n  difficulty: DataTypes.TEXT,\n  objective: DataTypes.TEXT,\n  achievement: DataTypes.TEXT,\n  source: DataTypes.TEXT,\n  pdf_link: DataTypes.TEXT\n}, {\n  timestamps: false,\n  tableName: \"class_case\",\n  modelName: \"LessonSample\"\n});\nLessonSample.belongsTo(ClassTopic, {\n  foreignKey: \"topic_id\",\n  as: \"classTopic\"\n});\nconst ModelSearch = sequelize.define(\"ModelSearch\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  name: DataTypes.TEXT,\n  type_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"class_type\"\n      },\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  subject_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"class_subject\"\n      },\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  grade: DataTypes.JSON,\n  source: DataTypes.TEXT,\n  pdf_link: DataTypes.TEXT,\n  description: DataTypes.TEXT,\n  apa: DataTypes.TEXT,\n  image: DataTypes.TEXT\n}, {\n  timestamps: false,\n  tableName: \"model\",\n  modelName: \"ModelSearch\"\n});\nModelSearch.belongsTo(Type, {\n  foreignKey: \"type_id\",\n  as: \"type\"\n});\nModelSearch.belongsTo(Subject, {\n  foreignKey: \"subject_id\",\n  as: \"subject\"\n});\n//Many-to-Many Association LessonSample, tool\n\nconst ClassCaseTool = sequelize.define(\"ClassCaseTool\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  case_sno: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: LessonSample,\n      key: \"sno\"\n    }\n  },\n  tool_sno: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: AiedutechTool,\n      key: \"sno\"\n    }\n  }\n}, {\n  tableName: \"class_case_tool\",\n  timestamps: false\n});\nLessonSample.belongsToMany(AiedutechTool, {\n  through: ClassCaseTool,\n  as: \"tools\",\n  foreignKey: \"case_sno\",\n  otherKey: \"tool_sno\"\n});\nAiedutechTool.belongsToMany(LessonSample, {\n  through: ClassCaseTool,\n  as: \"lessons\",\n  foreignKey: \"tool_sno\",\n  otherKey: \"case_sno\"\n});\n//OperationCase table\nconst OperationCase = sequelize.define(\"OperationCase\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  title: DataTypes.TEXT,\n  chasi: DataTypes.NUMBER,\n  difficulty: DataTypes.TEXT,\n  learning_objectives: DataTypes.TEXT,\n  achievement_criteria: DataTypes.TEXT,\n  source: DataTypes.TEXT,\n  pdf_link: DataTypes.TEXT\n}, {\n  timestamps: false,\n  tableName: \"operation_case\",\n  modelName: \"OperationCase\"\n});\n//\nconst OperationTopic = sequelize.define(\"OperationTopic\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  topic_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: Topic,\n      key: \"id\"\n    }\n  },\n  operation_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: OperationCase,\n      key: \"id\"\n    }\n  }\n}, {\n  tableName: \"operation_topic\",\n  timestamps: false\n});\nOperationCase.belongsToMany(Topic, {\n  through: OperationTopic,\n  as: \"topics\",\n  foreignKey: \"operation_id\",\n  otherKey: \"topic_id\"\n});\nTopic.belongsToMany(OperationCase, {\n  through: OperationTopic,\n  as: \"relatedOperationTopic\",\n  foreignKey: \"topic_id\",\n  otherKey: \"operation_id\"\n});\n// //\nconst OperationType = sequelize.define(\"OperationType\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  type_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: Type,\n      key: \"id\"\n    }\n  },\n  operation_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: OperationCase,\n      key: \"id\"\n    }\n  }\n}, {\n  tableName: \"operation_type\",\n  timestamps: false\n});\nOperationCase.belongsToMany(Type, {\n  through: OperationType,\n  as: \"types\",\n  foreignKey: \"operation_id\",\n  otherKey: \"type_id\"\n});\nType.belongsToMany(OperationCase, {\n  through: OperationType,\n  as: \"relatedOperationTypes\",\n  foreignKey: \"type_id\",\n  otherKey: \"operation_id\"\n});\n// //\n\nconst OperationSubject = sequelize.define(\"OperationSubject\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  subject_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: Subject,\n      key: \"id\"\n    }\n  },\n  operation_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: OperationCase,\n      key: \"id\"\n    }\n  }\n}, {\n  tableName: \"operation_subject\",\n  timestamps: false\n});\nOperationCase.belongsToMany(Subject, {\n  through: OperationSubject,\n  as: \"subjects\",\n  foreignKey: \"operation_id\",\n  otherKey: \"subject_id\"\n});\nSubject.belongsToMany(OperationCase, {\n  through: OperationSubject,\n  as: \"relatedOperationSubject\",\n  foreignKey: \"subject_id\",\n  otherKey: \"operation_id\"\n});\n\n//\n\nconst OperationGrade = sequelize.define(\"OperationGrade\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  grade_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: Grade,\n      key: \"id\"\n    }\n  },\n  operation_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: OperationCase,\n      key: \"id\"\n    }\n  }\n}, {\n  tableName: \"operation_grade\",\n  timestamps: false\n});\nOperationCase.belongsToMany(Grade, {\n  through: OperationGrade,\n  as: \"grades\",\n  foreignKey: \"operation_id\",\n  otherKey: \"grade_id\"\n});\nGrade.belongsToMany(OperationCase, {\n  through: OperationGrade,\n  as: \"relatedOperationGrade\",\n  foreignKey: \"grade_id\",\n  otherKey: \"operation_id\"\n});\n\n// //\nconst OperationTool = sequelize.define(\"OperationTool\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  tool_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: AiedutechTool,\n      key: \"id\"\n    }\n  },\n  operation_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: OperationCase,\n      key: \"id\"\n    }\n  }\n}, {\n  tableName: \"operation_tool\",\n  timestamps: false\n});\nOperationCase.belongsToMany(AiedutechTool, {\n  through: OperationTool,\n  as: \"tools\",\n  foreignKey: \"operation_id\",\n  otherKey: \"tool_id\"\n});\nAiedutechTool.belongsToMany(OperationCase, {\n  through: OperationTool,\n  as: \"relatedOperationTools\",\n  foreignKey: \"tool_id\",\n  otherKey: \"operation_id\"\n});\nmodule.exports = {\n  opExp,\n  AiedutechTool,\n  opExpTechType,\n  sequelize,\n  LessonSample,\n  ModelSearch,\n  OperationCase,\n  OperationTool,\n  OperationGrade,\n  OperationType,\n  OperationSubject,\n  OperationTopic\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEYXRhVHlwZXMiLCJyZXF1aXJlIiwic2VxdWVsaXplIiwiVG9waWMiLCJTdWJqZWN0IiwiR3JhZGUiLCJUeXBlIiwib3BFeHAiLCJkZWZpbmUiLCJzbm8iLCJ0eXBlIiwiSU5URUdFUiIsImF1dG9JbmNyZW1lbnQiLCJwcmltYXJ5S2V5IiwiYWxsb3dOdWxsIiwibmFtZV9rciIsIlRFWFQiLCJ0b29sX2lkIiwidGVjaF9pZCIsImNvcmVfZnVuYyIsIm5hbWVfZW4iLCJkZXNjcmlwdGlvbiIsInNlcnZpY2VfbGluayIsImNhc2VfbGluayIsImNhc2VfaW1nIiwidGltZXN0YW1wcyIsInRhYmxlTmFtZSIsIm1vZGVsTmFtZSIsIm9wRXhwVGVjaFR5cGUiLCJpZCIsImV4cF9zbm8iLCJyZWZlcmVuY2VzIiwibW9kZWwiLCJrZXkiLCJvblVwZGF0ZSIsIm9uRGVsZXRlIiwidHlwZV9pZCIsIkNsYXNzVG9waWMiLCJuYW1lIiwiY3JlYXRlZF9hdCIsIlRJTUUiLCJBaWVkdXRlY2hUb29sIiwiTlVNQkVSIiwiTGVzc29uU2FtcGxlIiwidG9waWMiLCJ0b3BpY19pZCIsInRpbWUiLCJkaWZmaWN1bHR5Iiwib2JqZWN0aXZlIiwiYWNoaWV2ZW1lbnQiLCJzb3VyY2UiLCJwZGZfbGluayIsImJlbG9uZ3NUbyIsImZvcmVpZ25LZXkiLCJhcyIsIk1vZGVsU2VhcmNoIiwic3ViamVjdF9pZCIsImdyYWRlIiwiSlNPTiIsImFwYSIsImltYWdlIiwiQ2xhc3NDYXNlVG9vbCIsImNhc2Vfc25vIiwidG9vbF9zbm8iLCJiZWxvbmdzVG9NYW55IiwidGhyb3VnaCIsIm90aGVyS2V5IiwiT3BlcmF0aW9uQ2FzZSIsInRpdGxlIiwiY2hhc2kiLCJsZWFybmluZ19vYmplY3RpdmVzIiwiYWNoaWV2ZW1lbnRfY3JpdGVyaWEiLCJPcGVyYXRpb25Ub3BpYyIsIm9wZXJhdGlvbl9pZCIsIk9wZXJhdGlvblR5cGUiLCJPcGVyYXRpb25TdWJqZWN0IiwiT3BlcmF0aW9uR3JhZGUiLCJncmFkZV9pZCIsIk9wZXJhdGlvblRvb2wiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdnVvbmdrbWEvaUNsb3VkIERyaXZlIChBcmNoaXZlKS9Eb2N1bWVudHMva2NuZC9zcmMvbW9kZWxzLyIsInNvdXJjZXMiOlsic2VhcmNoTW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBEYXRhVHlwZXMgfSA9IHJlcXVpcmUoXCJzZXF1ZWxpemVcIik7XG5cbmNvbnN0IHNlcXVlbGl6ZSA9IHJlcXVpcmUoXCIuLi9jb25maWcvZGF0YWJhc2VcIik7XG5cbmNvbnN0IHsgVG9waWMsIFN1YmplY3QsIEdyYWRlLCBUeXBlIH0gPSByZXF1aXJlKFwiLi4vbW9kZWxzL2Rlc2lnbk1vZGVsXCIpO1xuY29uc3Qgb3BFeHAgPSBzZXF1ZWxpemUuZGVmaW5lKFxuICAgIFwib3BFeHBcIixcbiAgICB7XG4gICAgICAgIHNubzoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgbmFtZV9rcjogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIHRvb2xfaWQ6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICB0ZWNoX2lkOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgY29yZV9mdW5jOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgbmFtZV9lbjogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgc2VydmljZV9saW5rOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgY2FzZV9saW5rOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgY2FzZV9pbWc6IERhdGFUeXBlcy5URVhULFxuICAgIH0sXG4gICAge1xuICAgICAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICAgICAgdGFibGVOYW1lOiBcIm9wX2V4cFwiLFxuICAgICAgICBtb2RlbE5hbWU6IFwib3BFeHBcIixcbiAgICB9XG4pO1xuXG5jb25zdCBvcEV4cFRlY2hUeXBlID0gc2VxdWVsaXplLmRlZmluZShcbiAgICBcIm9wX2V4cF90ZWNoX3R5cGVcIixcbiAgICB7XG4gICAgICAgIGlkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBleHBfc25vOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogeyB0YWJsZU5hbWU6IFwib3BfZXhwXCIgfSwgLy8gcHJvdmlkZSB0YWJsZSBuYW1lXG4gICAgICAgICAgICAgICAga2V5OiBcInNub1wiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgICAgICBvblVwZGF0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgICAgICBvbkRlbGV0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGVfaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiB7IHRhYmxlTmFtZTogXCJ0b29sX2FpZWR1dGVjaFwiIH0sIC8vIHByb3ZpZGUgdGFibGUgbmFtZVxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgICAgICBvblVwZGF0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgICAgICBvbkRlbGV0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgICAgICB0YWJsZU5hbWU6IFwib3BfZXhwX3RlY2hfdHlwZVwiLFxuICAgICAgICBtb2RlbE5hbWU6IFwib3BFeHBUZWNoVHlwZVwiLFxuICAgIH1cbik7XG5cbmNvbnN0IENsYXNzVG9waWMgPSBzZXF1ZWxpemUuZGVmaW5lKFxuICAgIFwiQ2xhc3NUb3BpY1wiLFxuICAgIHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIG5hbWU6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBjcmVhdGVkX2F0OiBEYXRhVHlwZXMuVElNRSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdGltZXN0YW1wczogZmFsc2UsXG4gICAgICAgIHRhYmxlTmFtZTogXCJjbGFzc190b3BpY1wiLFxuICAgICAgICBtb2RlbE5hbWU6IFwiQ2xhc3NUb3BpY1wiLFxuICAgIH1cbik7XG5cbmNvbnN0IEFpZWR1dGVjaFRvb2wgPSBzZXF1ZWxpemUuZGVmaW5lKFxuICAgIFwiQWllZHV0ZWNoVG9vbFwiLFxuICAgIHtcbiAgICAgICAgc25vOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBuYW1lX2tyOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgbmFtZV9lbjogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIHRvb2xfaWQ6IERhdGFUeXBlcy5OVU1CRVIsXG4gICAgICAgIHRlY2hfaWQ6IERhdGFUeXBlcy5OVU1CRVIsXG4gICAgICAgIGNvcmVfZnVuYzogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgc2VydmljZV9saW5rOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgY2FzZV9saW5rOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgY2FzZV9pbWc6IERhdGFUeXBlcy5URVhULFxuICAgIH0sXG4gICAge1xuICAgICAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICAgICAgdGFibGVOYW1lOiBcImFpZWR1dGVjaF90b29sXCIsXG4gICAgICAgIG1vZGVsTmFtZTogXCJBaWVkdXRlY2hUb29sXCIsXG4gICAgfVxuKTtcblxuY29uc3QgTGVzc29uU2FtcGxlID0gc2VxdWVsaXplLmRlZmluZShcbiAgICBcIkxlc3NvblNhbXBsZVwiLFxuICAgIHtcbiAgICAgICAgc25vOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICB0b3BpYzogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIHRvcGljX2lkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogeyB0YWJsZU5hbWU6IFwiY2xhc3NfdG9waWNcIiB9LFxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgICAgICBvblVwZGF0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgICAgICBvbkRlbGV0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgIH0sXG4gICAgICAgIHRpbWU6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBkaWZmaWN1bHR5OiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgb2JqZWN0aXZlOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgYWNoaWV2ZW1lbnQ6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBzb3VyY2U6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBwZGZfbGluazogRGF0YVR5cGVzLlRFWFQsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgICAgICB0YWJsZU5hbWU6IFwiY2xhc3NfY2FzZVwiLFxuICAgICAgICBtb2RlbE5hbWU6IFwiTGVzc29uU2FtcGxlXCIsXG4gICAgfVxuKTtcbkxlc3NvblNhbXBsZS5iZWxvbmdzVG8oQ2xhc3NUb3BpYywge1xuICAgIGZvcmVpZ25LZXk6IFwidG9waWNfaWRcIixcbiAgICBhczogXCJjbGFzc1RvcGljXCIsXG59KTtcblxuY29uc3QgTW9kZWxTZWFyY2ggPSBzZXF1ZWxpemUuZGVmaW5lKFxuICAgIFwiTW9kZWxTZWFyY2hcIixcbiAgICB7XG4gICAgICAgIGlkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBuYW1lOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgdHlwZV9pZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICAgICAgbW9kZWw6IHsgdGFibGVOYW1lOiBcImNsYXNzX3R5cGVcIiB9LFxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgICAgICBvblVwZGF0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgICAgICBvbkRlbGV0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgIH0sXG4gICAgICAgIHN1YmplY3RfaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiB7IHRhYmxlTmFtZTogXCJjbGFzc19zdWJqZWN0XCIgfSxcbiAgICAgICAgICAgICAgICBrZXk6IFwiaWRcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICAgICAgb25VcGRhdGU6IFwiY2FzY2FkZVwiLFxuICAgICAgICAgICAgb25EZWxldGU6IFwiY2FzY2FkZVwiLFxuICAgICAgICB9LFxuICAgICAgICBncmFkZTogRGF0YVR5cGVzLkpTT04sXG4gICAgICAgIHNvdXJjZTogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIHBkZl9saW5rOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgZGVzY3JpcHRpb246IERhdGFUeXBlcy5URVhULFxuICAgICAgICBhcGE6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBpbWFnZTogRGF0YVR5cGVzLlRFWFQsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgICAgICB0YWJsZU5hbWU6IFwibW9kZWxcIixcbiAgICAgICAgbW9kZWxOYW1lOiBcIk1vZGVsU2VhcmNoXCIsXG4gICAgfVxuKTtcbk1vZGVsU2VhcmNoLmJlbG9uZ3NUbyhUeXBlLCB7XG4gICAgZm9yZWlnbktleTogXCJ0eXBlX2lkXCIsXG4gICAgYXM6IFwidHlwZVwiLFxufSk7XG5Nb2RlbFNlYXJjaC5iZWxvbmdzVG8oU3ViamVjdCwge1xuICAgIGZvcmVpZ25LZXk6IFwic3ViamVjdF9pZFwiLFxuICAgIGFzOiBcInN1YmplY3RcIixcbn0pO1xuLy9NYW55LXRvLU1hbnkgQXNzb2NpYXRpb24gTGVzc29uU2FtcGxlLCB0b29sXG5cbmNvbnN0IENsYXNzQ2FzZVRvb2wgPSBzZXF1ZWxpemUuZGVmaW5lKFxuICAgIFwiQ2xhc3NDYXNlVG9vbFwiLFxuICAgIHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIGNhc2Vfc25vOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogTGVzc29uU2FtcGxlLFxuICAgICAgICAgICAgICAgIGtleTogXCJzbm9cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHRvb2xfc25vOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogQWllZHV0ZWNoVG9vbCxcbiAgICAgICAgICAgICAgICBrZXk6IFwic25vXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgICB0YWJsZU5hbWU6IFwiY2xhc3NfY2FzZV90b29sXCIsXG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgIH1cbik7XG5cbkxlc3NvblNhbXBsZS5iZWxvbmdzVG9NYW55KEFpZWR1dGVjaFRvb2wsIHtcbiAgICB0aHJvdWdoOiBDbGFzc0Nhc2VUb29sLFxuICAgIGFzOiBcInRvb2xzXCIsXG4gICAgZm9yZWlnbktleTogXCJjYXNlX3Nub1wiLFxuICAgIG90aGVyS2V5OiBcInRvb2xfc25vXCIsXG59KTtcbkFpZWR1dGVjaFRvb2wuYmVsb25nc1RvTWFueShMZXNzb25TYW1wbGUsIHtcbiAgICB0aHJvdWdoOiBDbGFzc0Nhc2VUb29sLFxuICAgIGFzOiBcImxlc3NvbnNcIixcbiAgICBmb3JlaWduS2V5OiBcInRvb2xfc25vXCIsXG4gICAgb3RoZXJLZXk6IFwiY2FzZV9zbm9cIixcbn0pO1xuLy9PcGVyYXRpb25DYXNlIHRhYmxlXG5jb25zdCBPcGVyYXRpb25DYXNlID0gc2VxdWVsaXplLmRlZmluZShcbiAgICBcIk9wZXJhdGlvbkNhc2VcIixcbiAgICB7XG4gICAgICAgIGlkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICB0aXRsZTogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIGNoYXNpOiBEYXRhVHlwZXMuTlVNQkVSLFxuICAgICAgICBkaWZmaWN1bHR5OiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgbGVhcm5pbmdfb2JqZWN0aXZlczogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIGFjaGlldmVtZW50X2NyaXRlcmlhOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgc291cmNlOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgcGRmX2xpbms6IERhdGFUeXBlcy5URVhULFxuICAgIH0sXG4gICAge1xuICAgICAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICAgICAgdGFibGVOYW1lOiBcIm9wZXJhdGlvbl9jYXNlXCIsXG4gICAgICAgIG1vZGVsTmFtZTogXCJPcGVyYXRpb25DYXNlXCIsXG4gICAgfVxuKTtcbi8vXG5jb25zdCBPcGVyYXRpb25Ub3BpYyA9IHNlcXVlbGl6ZS5kZWZpbmUoXG4gICAgXCJPcGVyYXRpb25Ub3BpY1wiLFxuICAgIHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIHRvcGljX2lkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogVG9waWMsXG4gICAgICAgICAgICAgICAga2V5OiBcImlkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBvcGVyYXRpb25faWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiBPcGVyYXRpb25DYXNlLFxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdGFibGVOYW1lOiBcIm9wZXJhdGlvbl90b3BpY1wiLFxuICAgICAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICB9XG4pO1xuXG5PcGVyYXRpb25DYXNlLmJlbG9uZ3NUb01hbnkoVG9waWMsIHtcbiAgICB0aHJvdWdoOiBPcGVyYXRpb25Ub3BpYyxcbiAgICBhczogXCJ0b3BpY3NcIixcbiAgICBmb3JlaWduS2V5OiBcIm9wZXJhdGlvbl9pZFwiLFxuICAgIG90aGVyS2V5OiBcInRvcGljX2lkXCIsXG59KTtcblRvcGljLmJlbG9uZ3NUb01hbnkoT3BlcmF0aW9uQ2FzZSwge1xuICAgIHRocm91Z2g6IE9wZXJhdGlvblRvcGljLFxuICAgIGFzOiBcInJlbGF0ZWRPcGVyYXRpb25Ub3BpY1wiLFxuICAgIGZvcmVpZ25LZXk6IFwidG9waWNfaWRcIixcbiAgICBvdGhlcktleTogXCJvcGVyYXRpb25faWRcIixcbn0pO1xuLy8gLy9cbmNvbnN0IE9wZXJhdGlvblR5cGUgPSBzZXF1ZWxpemUuZGVmaW5lKFxuICAgIFwiT3BlcmF0aW9uVHlwZVwiLFxuICAgIHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGVfaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiBUeXBlLFxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgb3BlcmF0aW9uX2lkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogT3BlcmF0aW9uQ2FzZSxcbiAgICAgICAgICAgICAgICBrZXk6IFwiaWRcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRhYmxlTmFtZTogXCJvcGVyYXRpb25fdHlwZVwiLFxuICAgICAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICB9XG4pO1xuT3BlcmF0aW9uQ2FzZS5iZWxvbmdzVG9NYW55KFR5cGUsIHtcbiAgICB0aHJvdWdoOiBPcGVyYXRpb25UeXBlLFxuICAgIGFzOiBcInR5cGVzXCIsXG4gICAgZm9yZWlnbktleTogXCJvcGVyYXRpb25faWRcIixcbiAgICBvdGhlcktleTogXCJ0eXBlX2lkXCIsXG59KTtcblR5cGUuYmVsb25nc1RvTWFueShPcGVyYXRpb25DYXNlLCB7XG4gICAgdGhyb3VnaDogT3BlcmF0aW9uVHlwZSxcbiAgICBhczogXCJyZWxhdGVkT3BlcmF0aW9uVHlwZXNcIixcbiAgICBmb3JlaWduS2V5OiBcInR5cGVfaWRcIixcbiAgICBvdGhlcktleTogXCJvcGVyYXRpb25faWRcIixcbn0pO1xuLy8gLy9cblxuY29uc3QgT3BlcmF0aW9uU3ViamVjdCA9IHNlcXVlbGl6ZS5kZWZpbmUoXG4gICAgXCJPcGVyYXRpb25TdWJqZWN0XCIsXG4gICAge1xuICAgICAgICBpZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgc3ViamVjdF9pZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICAgICAgbW9kZWw6IFN1YmplY3QsXG4gICAgICAgICAgICAgICAga2V5OiBcImlkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBvcGVyYXRpb25faWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiBPcGVyYXRpb25DYXNlLFxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdGFibGVOYW1lOiBcIm9wZXJhdGlvbl9zdWJqZWN0XCIsXG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgIH1cbik7XG5cbk9wZXJhdGlvbkNhc2UuYmVsb25nc1RvTWFueShTdWJqZWN0LCB7XG4gICAgdGhyb3VnaDogT3BlcmF0aW9uU3ViamVjdCxcbiAgICBhczogXCJzdWJqZWN0c1wiLFxuICAgIGZvcmVpZ25LZXk6IFwib3BlcmF0aW9uX2lkXCIsXG4gICAgb3RoZXJLZXk6IFwic3ViamVjdF9pZFwiLFxufSk7XG5TdWJqZWN0LmJlbG9uZ3NUb01hbnkoT3BlcmF0aW9uQ2FzZSwge1xuICAgIHRocm91Z2g6IE9wZXJhdGlvblN1YmplY3QsXG4gICAgYXM6IFwicmVsYXRlZE9wZXJhdGlvblN1YmplY3RcIixcbiAgICBmb3JlaWduS2V5OiBcInN1YmplY3RfaWRcIixcbiAgICBvdGhlcktleTogXCJvcGVyYXRpb25faWRcIixcbn0pO1xuXG4vL1xuXG5jb25zdCBPcGVyYXRpb25HcmFkZSA9IHNlcXVlbGl6ZS5kZWZpbmUoXG4gICAgXCJPcGVyYXRpb25HcmFkZVwiLFxuICAgIHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIGdyYWRlX2lkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogR3JhZGUsXG4gICAgICAgICAgICAgICAga2V5OiBcImlkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBvcGVyYXRpb25faWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiBPcGVyYXRpb25DYXNlLFxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdGFibGVOYW1lOiBcIm9wZXJhdGlvbl9ncmFkZVwiLFxuICAgICAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICB9XG4pO1xuXG5PcGVyYXRpb25DYXNlLmJlbG9uZ3NUb01hbnkoR3JhZGUsIHtcbiAgICB0aHJvdWdoOiBPcGVyYXRpb25HcmFkZSxcbiAgICBhczogXCJncmFkZXNcIixcbiAgICBmb3JlaWduS2V5OiBcIm9wZXJhdGlvbl9pZFwiLFxuICAgIG90aGVyS2V5OiBcImdyYWRlX2lkXCIsXG59KTtcbkdyYWRlLmJlbG9uZ3NUb01hbnkoT3BlcmF0aW9uQ2FzZSwge1xuICAgIHRocm91Z2g6IE9wZXJhdGlvbkdyYWRlLFxuICAgIGFzOiBcInJlbGF0ZWRPcGVyYXRpb25HcmFkZVwiLFxuICAgIGZvcmVpZ25LZXk6IFwiZ3JhZGVfaWRcIixcbiAgICBvdGhlcktleTogXCJvcGVyYXRpb25faWRcIixcbn0pO1xuXG4vLyAvL1xuY29uc3QgT3BlcmF0aW9uVG9vbCA9IHNlcXVlbGl6ZS5kZWZpbmUoXG4gICAgXCJPcGVyYXRpb25Ub29sXCIsXG4gICAge1xuICAgICAgICBpZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgdG9vbF9pZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICAgICAgbW9kZWw6IEFpZWR1dGVjaFRvb2wsXG4gICAgICAgICAgICAgICAga2V5OiBcImlkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBvcGVyYXRpb25faWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiBPcGVyYXRpb25DYXNlLFxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdGFibGVOYW1lOiBcIm9wZXJhdGlvbl90b29sXCIsXG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgIH1cbik7XG5cbk9wZXJhdGlvbkNhc2UuYmVsb25nc1RvTWFueShBaWVkdXRlY2hUb29sLCB7XG4gICAgdGhyb3VnaDogT3BlcmF0aW9uVG9vbCxcbiAgICBhczogXCJ0b29sc1wiLFxuICAgIGZvcmVpZ25LZXk6IFwib3BlcmF0aW9uX2lkXCIsXG4gICAgb3RoZXJLZXk6IFwidG9vbF9pZFwiLFxufSk7XG5BaWVkdXRlY2hUb29sLmJlbG9uZ3NUb01hbnkoT3BlcmF0aW9uQ2FzZSwge1xuICAgIHRocm91Z2g6IE9wZXJhdGlvblRvb2wsXG4gICAgYXM6IFwicmVsYXRlZE9wZXJhdGlvblRvb2xzXCIsXG4gICAgZm9yZWlnbktleTogXCJ0b29sX2lkXCIsXG4gICAgb3RoZXJLZXk6IFwib3BlcmF0aW9uX2lkXCIsXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgb3BFeHAsXG4gICAgQWllZHV0ZWNoVG9vbCxcbiAgICBvcEV4cFRlY2hUeXBlLFxuICAgIHNlcXVlbGl6ZSxcbiAgICBMZXNzb25TYW1wbGUsXG4gICAgTW9kZWxTZWFyY2gsXG4gICAgT3BlcmF0aW9uQ2FzZSxcbiAgICBPcGVyYXRpb25Ub29sLFxuICAgIE9wZXJhdGlvbkdyYWRlLFxuICAgIE9wZXJhdGlvblR5cGUsXG4gICAgT3BlcmF0aW9uU3ViamVjdCxcbiAgICBPcGVyYXRpb25Ub3BpYyxcbn07XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUE7QUFBVSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFFMUMsTUFBTUMsU0FBUyxHQUFHRCxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFFL0MsTUFBTTtFQUFFRSxLQUFLO0VBQUVDLE9BQU87RUFBRUMsS0FBSztFQUFFQztBQUFLLENBQUMsR0FBR0wsT0FBTyxDQUFDLHVCQUF1QixDQUFDO0FBQ3hFLE1BQU1NLEtBQUssR0FBR0wsU0FBUyxDQUFDTSxNQUFNLENBQzFCLE9BQU8sRUFDUDtFQUNJQyxHQUFHLEVBQUU7SUFDREMsSUFBSSxFQUFFVixTQUFTLENBQUNXLE9BQU87SUFDdkJDLGFBQWEsRUFBRSxJQUFJO0lBQ25CQyxVQUFVLEVBQUUsSUFBSTtJQUNoQkMsU0FBUyxFQUFFO0VBQ2YsQ0FBQztFQUNEQyxPQUFPLEVBQUVmLFNBQVMsQ0FBQ2dCLElBQUk7RUFDdkJDLE9BQU8sRUFBRWpCLFNBQVMsQ0FBQ1csT0FBTztFQUMxQk8sT0FBTyxFQUFFbEIsU0FBUyxDQUFDVyxPQUFPO0VBQzFCUSxTQUFTLEVBQUVuQixTQUFTLENBQUNnQixJQUFJO0VBQ3pCSSxPQUFPLEVBQUVwQixTQUFTLENBQUNnQixJQUFJO0VBQ3ZCSyxXQUFXLEVBQUVyQixTQUFTLENBQUNnQixJQUFJO0VBQzNCTSxZQUFZLEVBQUV0QixTQUFTLENBQUNnQixJQUFJO0VBQzVCTyxTQUFTLEVBQUV2QixTQUFTLENBQUNnQixJQUFJO0VBQ3pCUSxRQUFRLEVBQUV4QixTQUFTLENBQUNnQjtBQUN4QixDQUFDLEVBQ0Q7RUFDSVMsVUFBVSxFQUFFLEtBQUs7RUFDakJDLFNBQVMsRUFBRSxRQUFRO0VBQ25CQyxTQUFTLEVBQUU7QUFDZixDQUNKLENBQUM7QUFFRCxNQUFNQyxhQUFhLEdBQUcxQixTQUFTLENBQUNNLE1BQU0sQ0FD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","map":{"version":3,"names":["DataTypes","require","sequelize","Topic","Subject","Grade","Type","opExp","define","sno","type","INTEGER","autoIncrement","primaryKey","allowNull","name_kr","TEXT","tool_id","tech_id","core_func","name_en","description","service_link","case_link","case_img","timestamps","tableName","modelName","opExpTechType","id","exp_sno","references","model","key","onUpdate","onDelete","type_id","ClassTopic","name","created_at","TIME","AiedutechTool","NUMBER","LessonSample","topic","topic_id","time","difficulty","objective","achievement","source","pdf_link","belongsTo","foreignKey","as","ModelSearch","subject_id","grade","JSON","apa","image","ClassCaseTool","case_sno","tool_sno","belongsToMany","through","otherKey","OperationCase","title","chasi","learning_objectives","achievement_criteria","OperationTopic","operation_id","OperationType","OperationSubject","OperationGrade","grade_id","OperationTool","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/","sources":["searchModel.js"],"sourcesContent":["const { DataTypes } = require(\"sequelize\");\n\nconst sequelize = require(\"../config/database\");\n\nconst { Topic, Subject, Grade, Type } = require(\"../models/designModel\");\nconst opExp = sequelize.define(\n    \"opExp\",\n    {\n        sno: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        name_kr: DataTypes.TEXT,\n        tool_id: DataTypes.INTEGER,\n        tech_id: DataTypes.INTEGER,\n        core_func: DataTypes.TEXT,\n        name_en: DataTypes.TEXT,\n        description: DataTypes.TEXT,\n        service_link: DataTypes.TEXT,\n        case_link: DataTypes.TEXT,\n        case_img: DataTypes.TEXT,\n    },\n    {\n        timestamps: false,\n        tableName: \"op_exp\",\n        modelName: \"opExp\",\n    }\n);\n\nconst opExpTechType = sequelize.define(\n    \"op_exp_tech_type\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        exp_sno: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"op_exp\" }, // provide table name\n                key: \"sno\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        type_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"tool_aiedutech\" }, // provide table name\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n    },\n    {\n        timestamps: false,\n        tableName: \"op_exp_tech_type\",\n        modelName: \"opExpTechType\",\n    }\n);\n\nconst ClassTopic = sequelize.define(\n    \"ClassTopic\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        name: DataTypes.TEXT,\n        created_at: DataTypes.TIME,\n    },\n    {\n        timestamps: false,\n        tableName: \"class_topic\",\n        modelName: \"ClassTopic\",\n    }\n);\n\nconst AiedutechTool = sequelize.define(\n    \"AiedutechTool\",\n    {\n        sno: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        name_kr: DataTypes.TEXT,\n        name_en: DataTypes.TEXT,\n        tool_id: DataTypes.NUMBER,\n        tech_id: DataTypes.NUMBER,\n        core_func: DataTypes.TEXT,\n        description: DataTypes.TEXT,\n        service_link: DataTypes.TEXT,\n        case_link: DataTypes.TEXT,\n        case_img: DataTypes.TEXT,\n    },\n    {\n        timestamps: false,\n        tableName: \"aiedutech_tool\",\n        modelName: \"AiedutechTool\",\n    }\n);\n\nconst LessonSample = sequelize.define(\n    \"LessonSample\",\n    {\n        sno: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        topic: DataTypes.TEXT,\n        topic_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"class_topic\" },\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        time: DataTypes.TEXT,\n        difficulty: DataTypes.TEXT,\n        objective: DataTypes.TEXT,\n        achievement: DataTypes.TEXT,\n        source: DataTypes.TEXT,\n        pdf_link: DataTypes.TEXT,\n    },\n    {\n        timestamps: false,\n        tableName: \"class_case\",\n        modelName: \"LessonSample\",\n    }\n);\nLessonSample.belongsTo(ClassTopic, {\n    foreignKey: \"topic_id\",\n    as: \"classTopic\",\n});\n\nconst ModelSearch = sequelize.define(\n    \"ModelSearch\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        name: DataTypes.TEXT,\n        type_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"class_type\" },\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        subject_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"class_subject\" },\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        grade: DataTypes.JSON,\n        source: DataTypes.TEXT,\n        pdf_link: DataTypes.TEXT,\n        description: DataTypes.TEXT,\n        apa: DataTypes.TEXT,\n        image: DataTypes.TEXT,\n    },\n    {\n        timestamps: false,\n        tableName: \"model\",\n        modelName: \"ModelSearch\",\n    }\n);\nModelSearch.belongsTo(Type, {\n    foreignKey: \"type_id\",\n    as: \"type\",\n});\nModelSearch.belongsTo(Subject, {\n    foreignKey: \"subject_id\",\n    as: \"subject\",\n});\n//Many-to-Many Association LessonSample, tool\n\nconst ClassCaseTool = sequelize.define(\n    \"ClassCaseTool\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        case_sno: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: LessonSample,\n                key: \"sno\",\n            },\n        },\n        tool_sno: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: AiedutechTool,\n                key: \"sno\",\n            },\n        },\n    },\n    {\n        tableName: \"class_case_tool\",\n        timestamps: false,\n    }\n);\n\nLessonSample.belongsToMany(AiedutechTool, {\n    through: ClassCaseTool,\n    as: \"tools\",\n    foreignKey: \"case_sno\",\n    otherKey: \"tool_sno\",\n});\nAiedutechTool.belongsToMany(LessonSample, {\n    through: ClassCaseTool,\n    as: \"lessons\",\n    foreignKey: \"tool_sno\",\n    otherKey: \"case_sno\",\n});\n//OperationCase table\nconst OperationCase = sequelize.define(\n    \"OperationCase\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        title: DataTypes.TEXT,\n        chasi: DataTypes.NUMBER,\n        difficulty: DataTypes.TEXT,\n        learning_objectives: DataTypes.TEXT,\n        achievement_criteria: DataTypes.TEXT,\n        source: DataTypes.TEXT,\n        pdf_link: DataTypes.TEXT,\n    },\n    {\n        timestamps: false,\n        tableName: \"operation_case\",\n        modelName: \"OperationCase\",\n    }\n);\n//\nconst OperationTopic = sequelize.define(\n    \"OperationTopic\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        topic_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: Topic,\n                key: \"id\",\n            },\n        },\n        operation_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: OperationCase,\n                key: \"id\",\n            },\n        },\n    },\n    {\n        tableName: \"operation_topic\",\n        timestamps: false,\n    }\n);\n\nOperationCase.belongsToMany(Topic, {\n    through: OperationTopic,\n    as: \"topics\",\n    foreignKey: \"operation_id\",\n    otherKey: \"topic_id\",\n});\nTopic.belongsToMany(OperationCase, {\n    through: OperationTopic,\n    as: \"relatedOperationTopic\",\n    foreignKey: \"topic_id\",\n    otherKey: \"operation_id\",\n});\n// //\nconst OperationType = sequelize.define(\n    \"OperationType\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        type_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: Type,\n                key: \"id\",\n            },\n        },\n        operation_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: OperationCase,\n                key: \"id\",\n            },\n        },\n    },\n    {\n        tableName: \"operation_type\",\n        timestamps: false,\n    }\n);\nOperationCase.belongsToMany(Type, {\n    through: OperationType,\n    as: \"types\",\n    foreignKey: \"operation_id\",\n    otherKey: \"type_id\",\n});\nType.belongsToMany(OperationCase, {\n    through: OperationType,\n    as: \"relatedOperationTypes\",\n    foreignKey: \"type_id\",\n    otherKey: \"operation_id\",\n});\n// //\n\nconst OperationSubject = sequelize.define(\n    \"OperationSubject\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        subject_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: Subject,\n                key: \"id\",\n            },\n        },\n        operation_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: OperationCase,\n                key: \"id\",\n            },\n        },\n    },\n    {\n        tableName: \"operation_subject\",\n        timestamps: false,\n    }\n);\n\nOperationCase.belongsToMany(Subject, {\n    through: OperationSubject,\n    as: \"subjects\",\n    foreignKey: \"operation_id\",\n    otherKey: \"subject_id\",\n});\nSubject.belongsToMany(OperationCase, {\n    through: OperationSubject,\n    as: \"relatedOperationSubject\",\n    foreignKey: \"subject_id\",\n    otherKey: \"operation_id\",\n});\n\n//\n\nconst OperationGrade = sequelize.define(\n    \"OperationGrade\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        grade_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: Grade,\n                key: \"id\",\n            },\n        },\n        operation_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: OperationCase,\n                key: \"id\",\n            },\n        },\n    },\n    {\n        tableName: \"operation_grade\",\n        timestamps: false,\n    }\n);\n\nOperationCase.belongsToMany(Grade, {\n    through: OperationGrade,\n    as: \"grades\",\n    foreignKey: \"operation_id\",\n    otherKey: \"grade_id\",\n});\nGrade.belongsToMany(OperationCase, {\n    through: OperationGrade,\n    as: \"relatedOperationGrade\",\n    foreignKey: \"grade_id\",\n    otherKey: \"operation_id\",\n});\n\n// //\nconst OperationTool = sequelize.define(\n    \"OperationTool\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        tool_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: AiedutechTool,\n                key: \"id\",\n            },\n        },\n        operation_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: OperationCase,\n                key: \"id\",\n            },\n        },\n    },\n    {\n        tableName: \"operation_tool\",\n        timestamps: false,\n    }\n);\n\nOperationCase.belongsToMany(AiedutechTool, {\n    through: OperationTool,\n    as: \"tools\",\n    foreignKey: \"operation_id\",\n    otherKey: \"tool_id\",\n});\nAiedutechTool.belongsToMany(OperationCase, {\n    through: OperationTool,\n    as: \"relatedOperationTools\",\n    foreignKey: \"tool_id\",\n    otherKey: \"operation_id\",\n});\n\nmodule.exports = {\n    opExp,\n    AiedutechTool,\n    opExpTechType,\n    sequelize,\n    LessonSample,\n    ModelSearch,\n    OperationCase,\n    OperationTool,\n    OperationGrade,\n    OperationType,\n    OperationSubject,\n    OperationTopic,\n};\n"],"mappings":"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","ignoreList":[]}},"mtime":1721113078685},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/designModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const {\n  DataTypes\n} = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = require(\"../models/usedModel\");\nconst Design = sequelize.define(\"Design\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  user_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"user_info\"\n      },\n      // provide table name\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  topic_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"class_topic\"\n      },\n      // provide table name\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  subject_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"user_info\"\n      },\n      // provide table name\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  subject_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"user_info\"\n      },\n      // provide table name\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  time: DataTypes.INTEGER,\n  step1: DataTypes.TEXT,\n  step2: DataTypes.TEXT,\n  step3: DataTypes.TEXT,\n  step4: DataTypes.TEXT,\n  step5: DataTypes.TEXT,\n  difficulty: DataTypes.TEXT,\n  achievement: DataTypes.TEXT,\n  objective: DataTypes.TEXT,\n  topic_tp_nm: DataTypes.TEXT,\n  type_nm: DataTypes.TEXT,\n  subject_nm: DataTypes.TEXT,\n  grade_nm: DataTypes.TEXT,\n  tool_nm: DataTypes.TEXT,\n  date: DataTypes.DATE\n}, {\n  timestamps: true,\n  tableName: \"design\",\n  modelName: \"design\"\n});\nconst Topic = sequelize.define(\"Topic\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  name: DataTypes.STRING,\n  created_at: DataTypes.DATE\n}, {\n  timestamps: false,\n  tableName: \"class_topic\",\n  createdAt: \"created_at\",\n  modelName: \"Topic\"\n});\nconst Subject = sequelize.define(\"Subject\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  name: DataTypes.STRING,\n  created_at: DataTypes.DATE\n}, {\n  timestamps: false,\n  tableName: \"class_subject\",\n  createdAt: \"created_at\",\n  modelName: \"Subject\"\n});\nconst Grade = sequelize.define(\"Grade\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  name: DataTypes.STRING,\n  created_at: DataTypes.DATE\n}, {\n  timestamps: false,\n  tableName: \"class_grade\",\n  createdAt: \"created_at\",\n  modelName: \"Grade\"\n});\nconst Type = sequelize.define(\"Type\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  name: DataTypes.STRING,\n  created_at: DataTypes.DATE\n}, {\n  timestamps: false,\n  createdAt: \"created_at\",\n  tableName: \"class_type\",\n  modelName: \"Type\"\n});\nmodule.exports = {\n  Topic,\n  Subject,\n  Grade,\n  Type\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEYXRhVHlwZXMiLCJyZXF1aXJlIiwic2VxdWVsaXplIiwiVXNlciIsIkRlc2lnbiIsImRlZmluZSIsImlkIiwidHlwZSIsIklOVEVHRVIiLCJhdXRvSW5jcmVtZW50IiwicHJpbWFyeUtleSIsImFsbG93TnVsbCIsInVzZXJfaWQiLCJyZWZlcmVuY2VzIiwibW9kZWwiLCJ0YWJsZU5hbWUiLCJrZXkiLCJvblVwZGF0ZSIsIm9uRGVsZXRlIiwidG9waWNfaWQiLCJzdWJqZWN0X2lkIiwidGltZSIsInN0ZXAxIiwiVEVYVCIsInN0ZXAyIiwic3RlcDMiLCJzdGVwNCIsInN0ZXA1IiwiZGlmZmljdWx0eSIsImFjaGlldmVtZW50Iiwib2JqZWN0aXZlIiwidG9waWNfdHBfbm0iLCJ0eXBlX25tIiwic3ViamVjdF9ubSIsImdyYWRlX25tIiwidG9vbF9ubSIsImRhdGUiLCJEQVRFIiwidGltZXN0YW1wcyIsIm1vZGVsTmFtZSIsIlRvcGljIiwibmFtZSIsIlNUUklORyIsImNyZWF0ZWRfYXQiLCJjcmVhdGVkQXQiLCJTdWJqZWN0IiwiR3JhZGUiLCJUeXBlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL21vZGVscy8iLCJzb3VyY2VzIjpbImRlc2lnbk1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgRGF0YVR5cGVzIH0gPSByZXF1aXJlKFwic2VxdWVsaXplXCIpO1xuY29uc3Qgc2VxdWVsaXplID0gcmVxdWlyZShcIi4uL2NvbmZpZy9kYXRhYmFzZVwiKTtcbmNvbnN0IFVzZXIgPSByZXF1aXJlKFwiLi4vbW9kZWxzL3VzZWRNb2RlbFwiKTtcbmNvbnN0IERlc2lnbiA9IHNlcXVlbGl6ZS5kZWZpbmUoXG4gICAgXCJEZXNpZ25cIixcbiAgICB7XG4gICAgICAgIGlkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICB1c2VyX2lkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogeyB0YWJsZU5hbWU6IFwidXNlcl9pbmZvXCIgfSwgLy8gcHJvdmlkZSB0YWJsZSBuYW1lXG4gICAgICAgICAgICAgICAga2V5OiBcImlkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgICAgIG9uVXBkYXRlOiBcImNhc2NhZGVcIixcbiAgICAgICAgICAgIG9uRGVsZXRlOiBcImNhc2NhZGVcIixcbiAgICAgICAgfSxcbiAgICAgICAgdG9waWNfaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiB7IHRhYmxlTmFtZTogXCJjbGFzc190b3BpY1wiIH0sIC8vIHByb3ZpZGUgdGFibGUgbmFtZVxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgICAgICBvblVwZGF0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgICAgICBvbkRlbGV0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgIH0sXG4gICAgICAgIHN1YmplY3RfaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiB7IHRhYmxlTmFtZTogXCJ1c2VyX2luZm9cIiB9LCAvLyBwcm92aWRlIHRhYmxlIG5hbWVcbiAgICAgICAgICAgICAgICBrZXk6IFwiaWRcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgICAgICAgb25VcGRhdGU6IFwiY2FzY2FkZVwiLFxuICAgICAgICAgICAgb25EZWxldGU6IFwiY2FzY2FkZVwiLFxuICAgICAgICB9LFxuICAgICAgICBzdWJqZWN0X2lkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogeyB0YWJsZU5hbWU6IFwidXNlcl9pbmZvXCIgfSwgLy8gcHJvdmlkZSB0YWJsZSBuYW1lXG4gICAgICAgICAgICAgICAga2V5OiBcImlkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgICAgIG9uVXBkYXRlOiBcImNhc2NhZGVcIixcbiAgICAgICAgICAgIG9uRGVsZXRlOiBcImNhc2NhZGVcIixcbiAgICAgICAgfSxcbiAgICAgICAgdGltZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIHN0ZXAxOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgc3RlcDI6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBzdGVwMzogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIHN0ZXA0OiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgc3RlcDU6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBkaWZmaWN1bHR5OiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgYWNoaWV2ZW1lbnQ6IERhdGFUeXBlcy5URVhULFxuICAgICAgICBvYmplY3RpdmU6IERhdGFUeXBlcy5URVhULFxuICAgICAgICB0b3BpY190cF9ubTogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIHR5cGVfbm06IERhdGFUeXBlcy5URVhULFxuICAgICAgICBzdWJqZWN0X25tOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgZ3JhZGVfbm06IERhdGFUeXBlcy5URVhULFxuICAgICAgICB0b29sX25tOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgZGF0ZTogRGF0YVR5cGVzLkRBVEUsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IHRydWUsXG4gICAgICAgIHRhYmxlTmFtZTogXCJkZXNpZ25cIixcbiAgICAgICAgbW9kZWxOYW1lOiBcImRlc2lnblwiLFxuICAgIH1cbik7XG5cbmNvbnN0IFRvcGljID0gc2VxdWVsaXplLmRlZmluZShcbiAgICBcIlRvcGljXCIsXG4gICAge1xuICAgICAgICBpZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgbmFtZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgY3JlYXRlZF9hdDogRGF0YVR5cGVzLkRBVEUsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgICAgICB0YWJsZU5hbWU6IFwiY2xhc3NfdG9waWNcIixcbiAgICAgICAgY3JlYXRlZEF0OiBcImNyZWF0ZWRfYXRcIixcbiAgICAgICAgbW9kZWxOYW1lOiBcIlRvcGljXCIsXG4gICAgfVxuKTtcblxuY29uc3QgU3ViamVjdCA9IHNlcXVlbGl6ZS5kZWZpbmUoXG4gICAgXCJTdWJqZWN0XCIsXG4gICAge1xuICAgICAgICBpZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgbmFtZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgY3JlYXRlZF9hdDogRGF0YVR5cGVzLkRBVEUsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgICAgICB0YWJsZU5hbWU6IFwiY2xhc3Nfc3ViamVjdFwiLFxuICAgICAgICBjcmVhdGVkQXQ6IFwiY3JlYXRlZF9hdFwiLFxuICAgICAgICBtb2RlbE5hbWU6IFwiU3ViamVjdFwiLFxuICAgIH1cbik7XG5cbmNvbnN0IEdyYWRlID0gc2VxdWVsaXplLmRlZmluZShcbiAgICBcIkdyYWRlXCIsXG4gICAge1xuICAgICAgICBpZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgbmFtZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgY3JlYXRlZF9hdDogRGF0YVR5cGVzLkRBVEUsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgICAgICB0YWJsZU5hbWU6IFwiY2xhc3NfZ3JhZGVcIixcbiAgICAgICAgY3JlYXRlZEF0OiBcImNyZWF0ZWRfYXRcIixcbiAgICAgICAgbW9kZWxOYW1lOiBcIkdyYWRlXCIsXG4gICAgfVxuKTtcbmNvbnN0IFR5cGUgPSBzZXF1ZWxpemUuZGVmaW5lKFxuICAgIFwiVHlwZVwiLFxuICAgIHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgYXV0b0luY3JlbWVudDogdHJ1ZSxcbiAgICAgICAgICAgIHByaW1hcnlLZXk6IHRydWUsXG4gICAgICAgICAgICBhbGxvd051bGw6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIG5hbWU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICAgIGNyZWF0ZWRfYXQ6IERhdGFUeXBlcy5EQVRFLFxuICAgIH0sXG4gICAge1xuICAgICAgICB0aW1lc3RhbXBzOiBmYWxzZSxcbiAgICAgICAgY3JlYXRlZEF0OiBcImNyZWF0ZWRfYXRcIixcbiAgICAgICAgdGFibGVOYW1lOiBcImNsYXNzX3R5cGVcIixcbiAgICAgICAgbW9kZWxOYW1lOiBcIlR5cGVcIixcbiAgICB9XG4pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHsgVG9waWMsIFN1YmplY3QsIEdyYWRlLCBUeXBlIH07XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUE7QUFBVSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDMUMsTUFBTUMsU0FBUyxHQUFHRCxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDL0MsTUFBTUUsSUFBSSxHQUFHRixPQUFPLENBQUMscUJBQXFCLENBQUM7QUFDM0MsTUFBTUcsTUFBTSxHQUFHRixTQUFTLENBQUNHLE1BQU0sQ0FDM0IsUUFBUSxFQUNSO0VBQ0lDLEVBQUUsRUFBRTtJQUNBQyxJQUFJLEVBQUVQLFNBQVMsQ0FBQ1EsT0FBTztJQUN2QkMsYUFBYSxFQUFFLElBQUk7SUFDbkJDLFVBQVUsRUFBRSxJQUFJO0lBQ2hCQyxTQUFTLEVBQUU7RUFDZixDQUFDO0VBQ0RDLE9BQU8sRUFBRTtJQUNMTCxJQUFJLEVBQUVQLFNBQVMsQ0FBQ1EsT0FBTztJQUN2QkssVUFBVSxFQUFFO01BQ1JDLEtBQUssRUFBRTtRQUFFQyxTQUFTLEVBQUU7TUFBWSxDQUFDO01BQUU7TUFDbkNDLEdBQUcsRUFBRTtJQUNULENBQUM7SUFDREwsU0FBUyxFQUFFLEtBQUs7SUFDaEJNLFFBQVEsRUFBRSxTQUFTO0lBQ25CQyxRQUFRLEVBQUU7RUFDZCxDQUFDO0VBQ0RDLFFBQVEsRUFBRTtJQUNOWixJQUFJLEVBQUVQLFNBQVMsQ0FBQ1EsT0FBTztJQUN2QkssVUFBVSxFQUFFO01BQ1JDLEtB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W119","map":{"version":3,"names":["DataTypes","require","sequelize","User","Design","define","id","type","INTEGER","autoIncrement","primaryKey","allowNull","user_id","references","model","tableName","key","onUpdate","onDelete","topic_id","subject_id","time","step1","TEXT","step2","step3","step4","step5","difficulty","achievement","objective","topic_tp_nm","type_nm","subject_nm","grade_nm","tool_nm","date","DATE","timestamps","modelName","Topic","name","STRING","created_at","createdAt","Subject","Grade","Type","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/","sources":["designModel.js"],"sourcesContent":["const { DataTypes } = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = require(\"../models/usedModel\");\nconst Design = sequelize.define(\n    \"Design\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        user_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"user_info\" }, // provide table name\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        topic_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"class_topic\" }, // provide table name\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        subject_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"user_info\" }, // provide table name\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        subject_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"user_info\" }, // provide table name\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        time: DataTypes.INTEGER,\n        step1: DataTypes.TEXT,\n        step2: DataTypes.TEXT,\n        step3: DataTypes.TEXT,\n        step4: DataTypes.TEXT,\n        step5: DataTypes.TEXT,\n        difficulty: DataTypes.TEXT,\n        achievement: DataTypes.TEXT,\n        objective: DataTypes.TEXT,\n        topic_tp_nm: DataTypes.TEXT,\n        type_nm: DataTypes.TEXT,\n        subject_nm: DataTypes.TEXT,\n        grade_nm: DataTypes.TEXT,\n        tool_nm: DataTypes.TEXT,\n        date: DataTypes.DATE,\n    },\n    {\n        timestamps: true,\n        tableName: \"design\",\n        modelName: \"design\",\n    }\n);\n\nconst Topic = sequelize.define(\n    \"Topic\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        name: DataTypes.STRING,\n        created_at: DataTypes.DATE,\n    },\n    {\n        timestamps: false,\n        tableName: \"class_topic\",\n        createdAt: \"created_at\",\n        modelName: \"Topic\",\n    }\n);\n\nconst Subject = sequelize.define(\n    \"Subject\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        name: DataTypes.STRING,\n        created_at: DataTypes.DATE,\n    },\n    {\n        timestamps: false,\n        tableName: \"class_subject\",\n        createdAt: \"created_at\",\n        modelName: \"Subject\",\n    }\n);\n\nconst Grade = sequelize.define(\n    \"Grade\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        name: DataTypes.STRING,\n        created_at: DataTypes.DATE,\n    },\n    {\n        timestamps: false,\n        tableName: \"class_grade\",\n        createdAt: \"created_at\",\n        modelName: \"Grade\",\n    }\n);\nconst Type = sequelize.define(\n    \"Type\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        name: DataTypes.STRING,\n        created_at: DataTypes.DATE,\n    },\n    {\n        timestamps: false,\n        createdAt: \"created_at\",\n        tableName: \"class_type\",\n        modelName: \"Type\",\n    }\n);\n\nmodule.exports = { Topic, Subject, Grade, Type };\n"],"mappings":"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","ignoreList":[]}},"mtime":1717901691249},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/messageFactory.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"class MessageFactory {\n  static success(data = {}, message = \"Success\") {\n    return {\n      status: \"success\",\n      message: message,\n      data: data\n    };\n  }\n  static error(errorMessage = \"An error occurred\") {\n    return {\n      status: \"error\",\n      message: errorMessage\n    };\n  }\n  static validationError(errors = []) {\n    return {\n      status: \"error\",\n      message: \"Validation errors\",\n      errors: errors\n    };\n  }\n}\nmodule.exports = MessageFactory;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNZXNzYWdlRmFjdG9yeSIsInN1Y2Nlc3MiLCJkYXRhIiwibWVzc2FnZSIsInN0YXR1cyIsImVycm9yIiwiZXJyb3JNZXNzYWdlIiwidmFsaWRhdGlvbkVycm9yIiwiZXJyb3JzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL3V0aWxzLyIsInNvdXJjZXMiOlsibWVzc2FnZUZhY3RvcnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgTWVzc2FnZUZhY3Rvcnkge1xuICAgIHN0YXRpYyBzdWNjZXNzKGRhdGEgPSB7fSwgbWVzc2FnZSA9IFwiU3VjY2Vzc1wiKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc3RhdGljIGVycm9yKGVycm9yTWVzc2FnZSA9IFwiQW4gZXJyb3Igb2NjdXJyZWRcIikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc3RhdGljIHZhbGlkYXRpb25FcnJvcihlcnJvcnMgPSBbXSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIlZhbGlkYXRpb24gZXJyb3JzXCIsXG4gICAgICAgICAgICBlcnJvcnM6IGVycm9ycyxcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gTWVzc2FnZUZhY3Rvcnk7XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLGNBQWMsQ0FBQztFQUNqQixPQUFPQyxPQUFPQSxDQUFDQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLEVBQUVDLE9BQU8sR0FBRyxTQUFTLEVBQUU7SUFDM0MsT0FBTztNQUNIQyxNQUFNLEVBQUUsU0FBUztNQUNqQkQsT0FBTyxFQUFFQSxPQUFPO01BQ2hCRCxJQUFJLEVBQUVBO0lBQ1YsQ0FBQztFQUNMO0VBRUEsT0FBT0csS0FBS0EsQ0FBQ0MsWUFBWSxHQUFHLG1CQUFtQixFQUFFO0lBQzdDLE9BQU87TUFDSEYsTUFBTSxFQUFFLE9BQU87TUFDZkQsT0FBTyxFQUFFRztJQUNiLENBQUM7RUFDTDtFQUVBLE9BQU9DLGVBQWVBLENBQUNDLE1BQU0sR0FBRyxFQUFFLEVBQUU7SUFDaEMsT0FBTztNQUNISixNQUFNLEVBQUUsT0FBTztNQUNmRCxPQUFPLEVBQUUsbUJBQW1CO01BQzVCSyxNQUFNLEVBQUVBO0lBQ1osQ0FBQztFQUNMO0FBQ0o7QUFFQUMsTUFBTSxDQUFDQyxPQUFPLEdBQUdWLGNBQWMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["MessageFactory","success","data","message","status","error","errorMessage","validationError","errors","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/","sources":["messageFactory.js"],"sourcesContent":["class MessageFactory {\n    static success(data = {}, message = \"Success\") {\n        return {\n            status: \"success\",\n            message: message,\n            data: data,\n        };\n    }\n\n    static error(errorMessage = \"An error occurred\") {\n        return {\n            status: \"error\",\n            message: errorMessage,\n        };\n    }\n\n    static validationError(errors = []) {\n        return {\n            status: \"error\",\n            message: \"Validation errors\",\n            errors: errors,\n        };\n    }\n}\n\nmodule.exports = MessageFactory;\n"],"mappings":"AAAA,MAAMA,cAAc,CAAC;EACjB,OAAOC,OAAOA,CAACC,IAAI,GAAG,CAAC,CAAC,EAAEC,OAAO,GAAG,SAAS,EAAE;IAC3C,OAAO;MACHC,MAAM,EAAE,SAAS;MACjBD,OAAO,EAAEA,OAAO;MAChBD,IAAI,EAAEA;IACV,CAAC;EACL;EAEA,OAAOG,KAAKA,CAACC,YAAY,GAAG,mBAAmB,EAAE;IAC7C,OAAO;MACHF,MAAM,EAAE,OAAO;MACfD,OAAO,EAAEG;IACb,CAAC;EACL;EAEA,OAAOC,eAAeA,CAACC,MAAM,GAAG,EAAE,EAAE;IAChC,OAAO;MACHJ,MAAM,EAAE,OAAO;MACfD,OAAO,EAAE,mBAAmB;MAC5BK,MAAM,EAAEA;IACZ,CAAC;EACL;AACJ;AAEAC,MAAM,CAACC,OAAO,GAAGV,cAAc","ignoreList":[]}},"mtime":1716172796367},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/removeValueNullObject.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"let removeEmpty = function (target) {\n  Object.keys(target).map(function (key) {\n    if (target[key] instanceof Object) {\n      if (!Object.keys(target[key]).length && typeof target[key].getMonth !== \"function\") {\n        delete target[key];\n      } else {\n        removeEmpty(target[key]);\n      }\n    } else if (target[key] === null) {\n      delete target[key];\n    }\n  });\n  return target;\n};\nmodule.exports = removeEmpty;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZW1vdmVFbXB0eSIsInRhcmdldCIsIk9iamVjdCIsImtleXMiLCJtYXAiLCJrZXkiLCJsZW5ndGgiLCJnZXRNb250aCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy91dGlscy8iLCJzb3VyY2VzIjpbInJlbW92ZVZhbHVlTnVsbE9iamVjdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgcmVtb3ZlRW1wdHkgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgT2JqZWN0LmtleXModGFyZ2V0KS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBpZiAodGFyZ2V0W2tleV0gaW5zdGFuY2VvZiBPYmplY3QpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhT2JqZWN0LmtleXModGFyZ2V0W2tleV0pLmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiB0YXJnZXRba2V5XS5nZXRNb250aCAhPT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGFyZ2V0W2tleV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlbW92ZUVtcHR5KHRhcmdldFtrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0YXJnZXRba2V5XSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgZGVsZXRlIHRhcmdldFtrZXldO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGFyZ2V0O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSByZW1vdmVFbXB0eTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBSUEsV0FBVyxHQUFHLFNBQUFBLENBQVVDLE1BQU0sRUFBRTtFQUNoQ0MsTUFBTSxDQUFDQyxJQUFJLENBQUNGLE1BQU0sQ0FBQyxDQUFDRyxHQUFHLENBQUMsVUFBVUMsR0FBRyxFQUFFO0lBQ25DLElBQUlKLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLFlBQVlILE1BQU0sRUFBRTtNQUMvQixJQUNJLENBQUNBLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDRixNQUFNLENBQUNJLEdBQUcsQ0FBQyxDQUFDLENBQUNDLE1BQU0sSUFDaEMsT0FBT0wsTUFBTSxDQUFDSSxHQUFHLENBQUMsQ0FBQ0UsUUFBUSxLQUFLLFVBQVUsRUFDNUM7UUFDRSxPQUFPTixNQUFNLENBQUNJLEdBQUcsQ0FBQztNQUN0QixDQUFDLE1BQU07UUFDSEwsV0FBVyxDQUFDQyxNQUFNLENBQUNJLEdBQUcsQ0FBQyxDQUFDO01BQzVCO0lBQ0osQ0FBQyxNQUFNLElBQUlKLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLEtBQUssSUFBSSxFQUFFO01BQzdCLE9BQU9KLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDO0lBQ3RCO0VBQ0osQ0FBQyxDQUFDO0VBRUYsT0FBT0osTUFBTTtBQUNqQixDQUFDO0FBRURPLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHVCxXQUFXIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["removeEmpty","target","Object","keys","map","key","length","getMonth","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/","sources":["removeValueNullObject.js"],"sourcesContent":["let removeEmpty = function (target) {\n    Object.keys(target).map(function (key) {\n        if (target[key] instanceof Object) {\n            if (\n                !Object.keys(target[key]).length &&\n                typeof target[key].getMonth !== \"function\"\n            ) {\n                delete target[key];\n            } else {\n                removeEmpty(target[key]);\n            }\n        } else if (target[key] === null) {\n            delete target[key];\n        }\n    });\n\n    return target;\n};\n\nmodule.exports = removeEmpty;\n"],"mappings":"AAAA,IAAIA,WAAW,GAAG,SAAAA,CAAUC,MAAM,EAAE;EAChCC,MAAM,CAACC,IAAI,CAACF,MAAM,CAAC,CAACG,GAAG,CAAC,UAAUC,GAAG,EAAE;IACnC,IAAIJ,MAAM,CAACI,GAAG,CAAC,YAAYH,MAAM,EAAE;MAC/B,IACI,CAACA,MAAM,CAACC,IAAI,CAACF,MAAM,CAACI,GAAG,CAAC,CAAC,CAACC,MAAM,IAChC,OAAOL,MAAM,CAACI,GAAG,CAAC,CAACE,QAAQ,KAAK,UAAU,EAC5C;QACE,OAAON,MAAM,CAACI,GAAG,CAAC;MACtB,CAAC,MAAM;QACHL,WAAW,CAACC,MAAM,CAACI,GAAG,CAAC,CAAC;MAC5B;IACJ,CAAC,MAAM,IAAIJ,MAAM,CAACI,GAAG,CAAC,KAAK,IAAI,EAAE;MAC7B,OAAOJ,MAAM,CAACI,GAAG,CAAC;IACtB;EACJ,CAAC,CAAC;EAEF,OAAOJ,MAAM;AACjB,CAAC;AAEDO,MAAM,CAACC,OAAO,GAAGT,WAAW","ignoreList":[]}},"mtime":1716199032075},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/enums/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/enums/wishlistTypeEnum.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const WishlistTypeEnum = {\n  TOOL: \"tool\",\n  LESSON: \"lesson\",\n  INTEGRATOR: \"Practitioner\",\n  OPERATION: \"operation\",\n  MODEL: \"model\"\n};\nmodule.exports = WishlistTypeEnum;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJXaXNobGlzdFR5cGVFbnVtIiwiVE9PTCIsIkxFU1NPTiIsIklOVEVHUkFUT1IiLCJPUEVSQVRJT04iLCJNT0RFTCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy91dGlscy9lbnVtcy8iLCJzb3VyY2VzIjpbIndpc2hsaXN0VHlwZUVudW0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgV2lzaGxpc3RUeXBlRW51bSA9IHtcbiAgICBUT09MOiBcInRvb2xcIixcbiAgICBMRVNTT046IFwibGVzc29uXCIsXG4gICAgSU5URUdSQVRPUjogXCJQcmFjdGl0aW9uZXJcIixcbiAgICBPUEVSQVRJT046IFwib3BlcmF0aW9uXCIsXG4gICAgTU9ERUw6IFwibW9kZWxcIixcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gV2lzaGxpc3RUeXBlRW51bTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsZ0JBQWdCLEdBQUc7RUFDckJDLElBQUksRUFBRSxNQUFNO0VBQ1pDLE1BQU0sRUFBRSxRQUFRO0VBQ2hCQyxVQUFVLEVBQUUsY0FBYztFQUMxQkMsU0FBUyxFQUFFLFdBQVc7RUFDdEJDLEtBQUssRUFBRTtBQUNYLENBQUM7QUFFREMsTUFBTSxDQUFDQyxPQUFPLEdBQUdQLGdCQUFnQiIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["WishlistTypeEnum","TOOL","LESSON","INTEGRATOR","OPERATION","MODEL","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/enums/","sources":["wishlistTypeEnum.js"],"sourcesContent":["const WishlistTypeEnum = {\n    TOOL: \"tool\",\n    LESSON: \"lesson\",\n    INTEGRATOR: \"Practitioner\",\n    OPERATION: \"operation\",\n    MODEL: \"model\",\n};\n\nmodule.exports = WishlistTypeEnum;\n"],"mappings":"AAAA,MAAMA,gBAAgB,GAAG;EACrBC,IAAI,EAAE,MAAM;EACZC,MAAM,EAAE,QAAQ;EAChBC,UAAU,EAAE,cAAc;EAC1BC,SAAS,EAAE,WAAW;EACtBC,KAAK,EAAE;AACX,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAGP,gBAAgB","ignoreList":[]}},"mtime":1721358079295},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/validations/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/validations/userValidation.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const Joi = require(\"joi\");\nconst login = {\n  body: Joi.object().keys({\n    email: Joi.string(),\n    password: Joi.string(),\n    social: Joi.number()\n  })\n};\nconst getUser = {\n  params: Joi.object().keys({\n    id: Joi.number()\n  })\n};\nconst create = {\n  body: Joi.object().keys({\n    email: Joi.string(),\n    name: Joi.string(),\n    profile: Joi.string(),\n    types: Joi.string(),\n    subjects: Joi.string(),\n    school: Joi.string(),\n    password: Joi.string(),\n    social: Joi.number()\n  })\n};\nmodule.exports = {\n  login,\n  getUser\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJKb2kiLCJyZXF1aXJlIiwibG9naW4iLCJib2R5Iiwib2JqZWN0Iiwia2V5cyIsImVtYWlsIiwic3RyaW5nIiwicGFzc3dvcmQiLCJzb2NpYWwiLCJudW1iZXIiLCJnZXRVc2VyIiwicGFyYW1zIiwiaWQiLCJjcmVhdGUiLCJuYW1lIiwicHJvZmlsZSIsInR5cGVzIiwic3ViamVjdHMiLCJzY2hvb2wiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdnVvbmdrbWEvaUNsb3VkIERyaXZlIChBcmNoaXZlKS9Eb2N1bWVudHMva2NuZC9zcmMvdmFsaWRhdGlvbnMvIiwic291cmNlcyI6WyJ1c2VyVmFsaWRhdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBKb2kgPSByZXF1aXJlKFwiam9pXCIpO1xuXG5jb25zdCBsb2dpbiA9IHtcbiAgICBib2R5OiBKb2kub2JqZWN0KCkua2V5cyh7XG4gICAgICAgIGVtYWlsOiBKb2kuc3RyaW5nKCksXG4gICAgICAgIHBhc3N3b3JkOiBKb2kuc3RyaW5nKCksXG4gICAgICAgIHNvY2lhbDogSm9pLm51bWJlcigpLFxuICAgIH0pLFxufTtcbmNvbnN0IGdldFVzZXIgPSB7XG4gICAgcGFyYW1zOiBKb2kub2JqZWN0KCkua2V5cyh7XG4gICAgICAgIGlkOiBKb2kubnVtYmVyKCksXG4gICAgfSksXG59O1xuY29uc3QgY3JlYXRlID0ge1xuICAgIGJvZHk6IEpvaS5vYmplY3QoKS5rZXlzKHtcbiAgICAgICAgZW1haWw6IEpvaS5zdHJpbmcoKSxcbiAgICAgICAgbmFtZTogSm9pLnN0cmluZygpLFxuICAgICAgICBwcm9maWxlOiBKb2kuc3RyaW5nKCksXG4gICAgICAgIHR5cGVzOiBKb2kuc3RyaW5nKCksXG4gICAgICAgIHN1YmplY3RzOiBKb2kuc3RyaW5nKCksXG4gICAgICAgIHNjaG9vbDogSm9pLnN0cmluZygpLFxuICAgICAgICBwYXNzd29yZDogSm9pLnN0cmluZygpLFxuICAgICAgICBzb2NpYWw6IEpvaS5udW1iZXIoKSxcbiAgICB9KSxcbn07XG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBsb2dpbixcbiAgICBnZXRVc2VyLFxufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsR0FBRyxHQUFHQyxPQUFPLENBQUMsS0FBSyxDQUFDO0FBRTFCLE1BQU1DLEtBQUssR0FBRztFQUNWQyxJQUFJLEVBQUVILEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO0lBQ3BCQyxLQUFLLEVBQUVOLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLENBQUM7SUFDbkJDLFFBQVEsRUFBRVIsR0FBRyxDQUFDTyxNQUFNLENBQUMsQ0FBQztJQUN0QkUsTUFBTSxFQUFFVCxHQUFHLENBQUNVLE1BQU0sQ0FBQztFQUN2QixDQUFDO0FBQ0wsQ0FBQztBQUNELE1BQU1DLE9BQU8sR0FBRztFQUNaQyxNQUFNLEVBQUVaLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO0lBQ3RCUSxFQUFFLEVBQUViLEdBQUcsQ0FBQ1UsTUFBTSxDQUFDO0VBQ25CLENBQUM7QUFDTCxDQUFDO0FBQ0QsTUFBTUksTUFBTSxHQUFHO0VBQ1hYLElBQUksRUFBRUgsR0FBRyxDQUFDSSxNQUFNLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUM7SUFDcEJDLEtBQUssRUFBRU4sR0FBRyxDQUFDTyxNQUFNLENBQUMsQ0FBQztJQUNuQlEsSUFBSSxFQUFFZixHQUFHLENBQUNPLE1BQU0sQ0FBQyxDQUFDO0lBQ2xCUyxPQUFPLEVBQUVoQixHQUFHLENBQUNPLE1BQU0sQ0FBQyxDQUFDO0lBQ3JCVSxLQUFLLEVBQUVqQixHQUFHLENBQUNPLE1BQU0sQ0FBQyxDQUFDO0lBQ25CVyxRQUFRLEVBQUVsQixHQUFHLENBQUNPLE1BQU0sQ0FBQyxDQUFDO0lBQ3RCWSxNQUFNLEVBQUVuQixHQUFHLENBQUNPLE1BQU0sQ0FBQyxDQUFDO0lBQ3BCQyxRQUFRLEVBQUVSLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLENBQUM7SUFDdEJFLE1BQU0sRUFBRVQsR0FBRyxDQUFDVSxNQUFNLENBQUM7RUFDdkIsQ0FBQztBQUNMLENBQUM7QUFDRFUsTUFBTSxDQUFDQyxPQUFPLEdBQUc7RUFDYm5CLEtBQUs7RUFDTFM7QUFDSixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["Joi","require","login","body","object","keys","email","string","password","social","number","getUser","params","id","create","name","profile","types","subjects","school","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/validations/","sources":["userValidation.js"],"sourcesContent":["const Joi = require(\"joi\");\n\nconst login = {\n    body: Joi.object().keys({\n        email: Joi.string(),\n        password: Joi.string(),\n        social: Joi.number(),\n    }),\n};\nconst getUser = {\n    params: Joi.object().keys({\n        id: Joi.number(),\n    }),\n};\nconst create = {\n    body: Joi.object().keys({\n        email: Joi.string(),\n        name: Joi.string(),\n        profile: Joi.string(),\n        types: Joi.string(),\n        subjects: Joi.string(),\n        school: Joi.string(),\n        password: Joi.string(),\n        social: Joi.number(),\n    }),\n};\nmodule.exports = {\n    login,\n    getUser,\n};\n"],"mappings":"AAAA,MAAMA,GAAG,GAAGC,OAAO,CAAC,KAAK,CAAC;AAE1B,MAAMC,KAAK,GAAG;EACVC,IAAI,EAAEH,GAAG,CAACI,MAAM,CAAC,CAAC,CAACC,IAAI,CAAC;IACpBC,KAAK,EAAEN,GAAG,CAACO,MAAM,CAAC,CAAC;IACnBC,QAAQ,EAAER,GAAG,CAACO,MAAM,CAAC,CAAC;IACtBE,MAAM,EAAET,GAAG,CAACU,MAAM,CAAC;EACvB,CAAC;AACL,CAAC;AACD,MAAMC,OAAO,GAAG;EACZC,MAAM,EAAEZ,GAAG,CAACI,MAAM,CAAC,CAAC,CAACC,IAAI,CAAC;IACtBQ,EAAE,EAAEb,GAAG,CAACU,MAAM,CAAC;EACnB,CAAC;AACL,CAAC;AACD,MAAMI,MAAM,GAAG;EACXX,IAAI,EAAEH,GAAG,CAACI,MAAM,CAAC,CAAC,CAACC,IAAI,CAAC;IACpBC,KAAK,EAAEN,GAAG,CAACO,MAAM,CAAC,CAAC;IACnBQ,IAAI,EAAEf,GAAG,CAACO,MAAM,CAAC,CAAC;IAClBS,OAAO,EAAEhB,GAAG,CAACO,MAAM,CAAC,CAAC;IACrBU,KAAK,EAAEjB,GAAG,CAACO,MAAM,CAAC,CAAC;IACnBW,QAAQ,EAAElB,GAAG,CAACO,MAAM,CAAC,CAAC;IACtBY,MAAM,EAAEnB,GAAG,CAACO,MAAM,CAAC,CAAC;IACpBC,QAAQ,EAAER,GAAG,CAACO,MAAM,CAAC,CAAC;IACtBE,MAAM,EAAET,GAAG,CAACU,MAAM,CAAC;EACvB,CAAC;AACL,CAAC;AACDU,MAAM,CAACC,OAAO,GAAG;EACbnB,KAAK;EACLS;AACJ,CAAC","ignoreList":[]}},"mtime":1716191006815},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/middlewares/validate.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const Joi = require(\"joi\");\nconst {\n  StatusCodes\n} = require(\"http-status-codes\");\nconst pick = require(\"../utils/pick\");\nconst ApiError = require(\"../utils/ApiError\");\nconst validate = schema => (req, res, next) => {\n  const validSchema = pick(schema, [\"params\", \"query\", \"body\"]);\n  const object = pick(req, Object.keys(validSchema));\n  const {\n    value,\n    error\n  } = Joi.compile(validSchema).prefs({\n    errors: {\n      label: \"key\"\n    },\n    abortEarly: false\n  }).validate(object);\n  if (error) {\n    const errorMessage = error.details.map(details => details.message).join(\", \");\n    return next(new ApiError(StatusCodes.BAD_REQUEST, errorMessage));\n  }\n  Object.assign(req, value);\n  return next();\n};\nmodule.exports = validate;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJKb2kiLCJyZXF1aXJlIiwiU3RhdHVzQ29kZXMiLCJwaWNrIiwiQXBpRXJyb3IiLCJ2YWxpZGF0ZSIsInNjaGVtYSIsInJlcSIsInJlcyIsIm5leHQiLCJ2YWxpZFNjaGVtYSIsIm9iamVjdCIsIk9iamVjdCIsImtleXMiLCJ2YWx1ZSIsImVycm9yIiwiY29tcGlsZSIsInByZWZzIiwiZXJyb3JzIiwibGFiZWwiLCJhYm9ydEVhcmx5IiwiZXJyb3JNZXNzYWdlIiwiZGV0YWlscyIsIm1hcCIsIm1lc3NhZ2UiLCJqb2luIiwiQkFEX1JFUVVFU1QiLCJhc3NpZ24iLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdnVvbmdrbWEvaUNsb3VkIERyaXZlIChBcmNoaXZlKS9Eb2N1bWVudHMva2NuZC9zcmMvbWlkZGxld2FyZXMvIiwic291cmNlcyI6WyJ2YWxpZGF0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBKb2kgPSByZXF1aXJlKFwiam9pXCIpO1xuY29uc3QgeyBTdGF0dXNDb2RlcyB9ID0gcmVxdWlyZShcImh0dHAtc3RhdHVzLWNvZGVzXCIpO1xuY29uc3QgcGljayA9IHJlcXVpcmUoXCIuLi91dGlscy9waWNrXCIpO1xuY29uc3QgQXBpRXJyb3IgPSByZXF1aXJlKFwiLi4vdXRpbHMvQXBpRXJyb3JcIik7XG5cbmNvbnN0IHZhbGlkYXRlID0gKHNjaGVtYSkgPT4gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgY29uc3QgdmFsaWRTY2hlbWEgPSBwaWNrKHNjaGVtYSwgW1wicGFyYW1zXCIsIFwicXVlcnlcIiwgXCJib2R5XCJdKTtcbiAgICBjb25zdCBvYmplY3QgPSBwaWNrKHJlcSwgT2JqZWN0LmtleXModmFsaWRTY2hlbWEpKTtcbiAgICBjb25zdCB7IHZhbHVlLCBlcnJvciB9ID0gSm9pLmNvbXBpbGUodmFsaWRTY2hlbWEpXG4gICAgICAgIC5wcmVmcyh7IGVycm9yczogeyBsYWJlbDogXCJrZXlcIiB9LCBhYm9ydEVhcmx5OiBmYWxzZSB9KVxuICAgICAgICAudmFsaWRhdGUob2JqZWN0KTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvci5kZXRhaWxzXG4gICAgICAgICAgICAubWFwKChkZXRhaWxzKSA9PiBkZXRhaWxzLm1lc3NhZ2UpXG4gICAgICAgICAgICAuam9pbihcIiwgXCIpO1xuICAgICAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoU3RhdHVzQ29kZXMuQkFEX1JFUVVFU1QsIGVycm9yTWVzc2FnZSkpO1xuICAgIH1cbiAgICBPYmplY3QuYXNzaWduKHJlcSwgdmFsdWUpO1xuICAgIHJldHVybiBuZXh0KCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHZhbGlkYXRlO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxHQUFHLEdBQUdDLE9BQU8sQ0FBQyxLQUFLLENBQUM7QUFDMUIsTUFBTTtFQUFFQztBQUFZLENBQUMsR0FBR0QsT0FBTyxDQUFDLG1CQUFtQixDQUFDO0FBQ3BELE1BQU1FLElBQUksR0FBR0YsT0FBTyxDQUFDLGVBQWUsQ0FBQztBQUNyQyxNQUFNRyxRQUFRLEdBQUdILE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztBQUU3QyxNQUFNSSxRQUFRLEdBQUlDLE1BQU0sSUFBSyxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQzdDLE1BQU1DLFdBQVcsR0FBR1AsSUFBSSxDQUFDRyxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUUsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0VBQzdELE1BQU1LLE1BQU0sR0FBR1IsSUFBSSxDQUFDSSxHQUFHLEVBQUVLLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDSCxXQUFXLENBQUMsQ0FBQztFQUNsRCxNQUFNO0lBQUVJLEtBQUs7SUFBRUM7RUFBTSxDQUFDLEdBQUdmLEdBQUcsQ0FBQ2dCLE9BQU8sQ0FBQ04sV0FBVyxDQUFDLENBQzVDTyxLQUFLLENBQUM7SUFBRUMsTUFBTSxFQUFFO01BQUVDLEtBQUssRUFBRTtJQUFNLENBQUM7SUFBRUMsVUFBVSxFQUFFO0VBQU0sQ0FBQyxDQUFDLENBQ3REZixRQUFRLENBQUNNLE1BQU0sQ0FBQztFQUVyQixJQUFJSSxLQUFLLEVBQUU7SUFDUCxNQUFNTSxZQUFZLEdBQUdOLEtBQUssQ0FBQ08sT0FBTyxDQUM3QkMsR0FBRyxDQUFFRCxPQUFPLElBQUtBLE9BQU8sQ0FBQ0UsT0FBTyxDQUFDLENBQ2pDQyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ2YsT0FBT2hCLElBQUksQ0FBQyxJQUFJTCxRQUFRLENBQUNGLFdBQVcsQ0FBQ3dCLFdBQVcsRUFBRUwsWUFBWSxDQUFDLENBQUM7RUFDcEU7RUFDQVQsTUFBTSxDQUFDZSxNQUFNLENBQUNwQixHQUFHLEVBQUVPLEtBQUssQ0FBQztFQUN6QixPQUFPTCxJQUFJLENBQUMsQ0FBQztBQUNqQixDQUFDO0FBRURtQixNQUFNLENBQUNDLE9BQU8sR0FBR3hCLFFBQVEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["Joi","require","StatusCodes","pick","ApiError","validate","schema","req","res","next","validSchema","object","Object","keys","value","error","compile","prefs","errors","label","abortEarly","errorMessage","details","map","message","join","BAD_REQUEST","assign","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/middlewares/","sources":["validate.js"],"sourcesContent":["const Joi = require(\"joi\");\nconst { StatusCodes } = require(\"http-status-codes\");\nconst pick = require(\"../utils/pick\");\nconst ApiError = require(\"../utils/ApiError\");\n\nconst validate = (schema) => (req, res, next) => {\n    const validSchema = pick(schema, [\"params\", \"query\", \"body\"]);\n    const object = pick(req, Object.keys(validSchema));\n    const { value, error } = Joi.compile(validSchema)\n        .prefs({ errors: { label: \"key\" }, abortEarly: false })\n        .validate(object);\n\n    if (error) {\n        const errorMessage = error.details\n            .map((details) => details.message)\n            .join(\", \");\n        return next(new ApiError(StatusCodes.BAD_REQUEST, errorMessage));\n    }\n    Object.assign(req, value);\n    return next();\n};\n\nmodule.exports = validate;\n"],"mappings":"AAAA,MAAMA,GAAG,GAAGC,OAAO,CAAC,KAAK,CAAC;AAC1B,MAAM;EAAEC;AAAY,CAAC,GAAGD,OAAO,CAAC,mBAAmB,CAAC;AACpD,MAAME,IAAI,GAAGF,OAAO,CAAC,eAAe,CAAC;AACrC,MAAMG,QAAQ,GAAGH,OAAO,CAAC,mBAAmB,CAAC;AAE7C,MAAMI,QAAQ,GAAIC,MAAM,IAAK,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC7C,MAAMC,WAAW,GAAGP,IAAI,CAACG,MAAM,EAAE,CAAC,QAAQ,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;EAC7D,MAAMK,MAAM,GAAGR,IAAI,CAACI,GAAG,EAAEK,MAAM,CAACC,IAAI,CAACH,WAAW,CAAC,CAAC;EAClD,MAAM;IAAEI,KAAK;IAAEC;EAAM,CAAC,GAAGf,GAAG,CAACgB,OAAO,CAACN,WAAW,CAAC,CAC5CO,KAAK,CAAC;IAAEC,MAAM,EAAE;MAAEC,KAAK,EAAE;IAAM,CAAC;IAAEC,UAAU,EAAE;EAAM,CAAC,CAAC,CACtDf,QAAQ,CAACM,MAAM,CAAC;EAErB,IAAII,KAAK,EAAE;IACP,MAAMM,YAAY,GAAGN,KAAK,CAACO,OAAO,CAC7BC,GAAG,CAAED,OAAO,IAAKA,OAAO,CAACE,OAAO,CAAC,CACjCC,IAAI,CAAC,IAAI,CAAC;IACf,OAAOhB,IAAI,CAAC,IAAIL,QAAQ,CAACF,WAAW,CAACwB,WAAW,EAAEL,YAAY,CAAC,CAAC;EACpE;EACAT,MAAM,CAACe,MAAM,CAACpB,GAAG,EAAEO,KAAK,CAAC;EACzB,OAAOL,IAAI,CAAC,CAAC;AACjB,CAAC;AAEDmB,MAAM,CAACC,OAAO,GAAGxB,QAAQ","ignoreList":[]}},"mtime":1716024170400},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/pick.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"/**\n * Create an object composed of the picked object properties\n * @param {Object} object\n * @param {string[]} keys\n * @returns {Object}\n */\nconst pick = (object, keys) => {\n  return keys.reduce((obj, key) => {\n    if (object && Object.prototype.hasOwnProperty.call(object, key)) {\n      // eslint-disable-next-line no-param-reassign\n      obj[key] = object[key];\n    }\n    return obj;\n  }, {});\n};\nmodule.exports = pick;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaWNrIiwib2JqZWN0Iiwia2V5cyIsInJlZHVjZSIsIm9iaiIsImtleSIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy91dGlscy8iLCJzb3VyY2VzIjpbInBpY2suanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGUgYW4gb2JqZWN0IGNvbXBvc2VkIG9mIHRoZSBwaWNrZWQgb2JqZWN0IHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAqIEBwYXJhbSB7c3RyaW5nW119IGtleXNcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKi9cbmNvbnN0IHBpY2sgPSAob2JqZWN0LCBrZXlzKSA9PiB7XG4gIHJldHVybiBrZXlzLnJlZHVjZSgob2JqLCBrZXkpID0+IHtcbiAgICBpZiAob2JqZWN0ICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgb2JqW2tleV0gPSBvYmplY3Rba2V5XTtcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfSwge30pO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBwaWNrO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQSxJQUFJLEdBQUdBLENBQUNDLE1BQU0sRUFBRUMsSUFBSSxLQUFLO0VBQzdCLE9BQU9BLElBQUksQ0FBQ0MsTUFBTSxDQUFDLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0lBQy9CLElBQUlKLE1BQU0sSUFBSUssTUFBTSxDQUFDQyxTQUFTLENBQUNDLGNBQWMsQ0FBQ0MsSUFBSSxDQUFDUixNQUFNLEVBQUVJLEdBQUcsQ0FBQyxFQUFFO01BQy9EO01BQ0FELEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLEdBQUdKLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDO0lBQ3hCO0lBQ0EsT0FBT0QsR0FBRztFQUNaLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNSLENBQUM7QUFFRE0sTUFBTSxDQUFDQyxPQUFPLEdBQUdYLElBQUkiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["pick","object","keys","reduce","obj","key","Object","prototype","hasOwnProperty","call","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/","sources":["pick.js"],"sourcesContent":["/**\n * Create an object composed of the picked object properties\n * @param {Object} object\n * @param {string[]} keys\n * @returns {Object}\n */\nconst pick = (object, keys) => {\n  return keys.reduce((obj, key) => {\n    if (object && Object.prototype.hasOwnProperty.call(object, key)) {\n      // eslint-disable-next-line no-param-reassign\n      obj[key] = object[key];\n    }\n    return obj;\n  }, {});\n};\n\nmodule.exports = pick;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMA,IAAI,GAAGA,CAACC,MAAM,EAAEC,IAAI,KAAK;EAC7B,OAAOA,IAAI,CAACC,MAAM,CAAC,CAACC,GAAG,EAAEC,GAAG,KAAK;IAC/B,IAAIJ,MAAM,IAAIK,MAAM,CAACC,SAAS,CAACC,cAAc,CAACC,IAAI,CAACR,MAAM,EAAEI,GAAG,CAAC,EAAE;MAC/D;MACAD,GAAG,CAACC,GAAG,CAAC,GAAGJ,MAAM,CAACI,GAAG,CAAC;IACxB;IACA,OAAOD,GAAG;EACZ,CAAC,EAAE,CAAC,CAAC,CAAC;AACR,CAAC;AAEDM,MAAM,CAACC,OAAO,GAAGX,IAAI","ignoreList":[]}},"mtime":1691835647000},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/ApiError.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"class ApiError extends Error {\n  constructor(statusCode, message, isOperational = true, stack = '') {\n    super(message);\n    this.statusCode = statusCode;\n    this.isOperational = isOperational;\n    if (stack) {\n      this.stack = stack;\n    } else {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n}\nmodule.exports = ApiError;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBcGlFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJzdGF0dXNDb2RlIiwibWVzc2FnZSIsImlzT3BlcmF0aW9uYWwiLCJzdGFjayIsImNhcHR1cmVTdGFja1RyYWNlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL3V0aWxzLyIsInNvdXJjZXMiOlsiQXBpRXJyb3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQXBpRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKHN0YXR1c0NvZGUsIG1lc3NhZ2UsIGlzT3BlcmF0aW9uYWwgPSB0cnVlLCBzdGFjayA9ICcnKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcbiAgICB0aGlzLmlzT3BlcmF0aW9uYWwgPSBpc09wZXJhdGlvbmFsO1xuICAgIGlmIChzdGFjaykge1xuICAgICAgdGhpcy5zdGFjayA9IHN0YWNrO1xuICAgIH0gZWxzZSB7XG4gICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yKTtcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBBcGlFcnJvcjtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsUUFBUSxTQUFTQyxLQUFLLENBQUM7RUFDM0JDLFdBQVdBLENBQUNDLFVBQVUsRUFBRUMsT0FBTyxFQUFFQyxhQUFhLEdBQUcsSUFBSSxFQUFFQyxLQUFLLEdBQUcsRUFBRSxFQUFFO0lBQ2pFLEtBQUssQ0FBQ0YsT0FBTyxDQUFDO0lBQ2QsSUFBSSxDQUFDRCxVQUFVLEdBQUdBLFVBQVU7SUFDNUIsSUFBSSxDQUFDRSxhQUFhLEdBQUdBLGFBQWE7SUFDbEMsSUFBSUMsS0FBSyxFQUFFO01BQ1QsSUFBSSxDQUFDQSxLQUFLLEdBQUdBLEtBQUs7SUFDcEIsQ0FBQyxNQUFNO01BQ0xMLEtBQUssQ0FBQ00saUJBQWlCLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQ0wsV0FBVyxDQUFDO0lBQ2pEO0VBQ0Y7QUFDRjtBQUVBTSxNQUFNLENBQUNDLE9BQU8sR0FBR1QsUUFBUSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["ApiError","Error","constructor","statusCode","message","isOperational","stack","captureStackTrace","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/","sources":["ApiError.js"],"sourcesContent":["class ApiError extends Error {\n  constructor(statusCode, message, isOperational = true, stack = '') {\n    super(message);\n    this.statusCode = statusCode;\n    this.isOperational = isOperational;\n    if (stack) {\n      this.stack = stack;\n    } else {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n}\n\nmodule.exports = ApiError;\n"],"mappings":"AAAA,MAAMA,QAAQ,SAASC,KAAK,CAAC;EAC3BC,WAAWA,CAACC,UAAU,EAAEC,OAAO,EAAEC,aAAa,GAAG,IAAI,EAAEC,KAAK,GAAG,EAAE,EAAE;IACjE,KAAK,CAACF,OAAO,CAAC;IACd,IAAI,CAACD,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACE,aAAa,GAAGA,aAAa;IAClC,IAAIC,KAAK,EAAE;MACT,IAAI,CAACA,KAAK,GAAGA,KAAK;IACpB,CAAC,MAAM;MACLL,KAAK,CAACM,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAACL,WAAW,CAAC;IACjD;EACF;AACF;AAEAM,MAAM,CAACC,OAAO,GAAGT,QAAQ","ignoreList":[]}},"mtime":1691835647000},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/config/multer.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const multer = require(\"multer\");\nconst storage = multer.diskStorage({\n  destination: function (req, file, cb) {\n    cb(null, \"image/\");\n  },\n  filename: function (req, file, cb) {\n    const uniqueSuffix = Date.now() + \"-\" + Math.round(Math.random() * 1e9);\n    cb(null, file.fieldname + \"-\" + uniqueSuffix + \".\" + file.mimetype.split(\"/\")[1]);\n  }\n});\nconst fileFilter = (req, file, cb) => {\n  if (file.mimetype.startsWith(\"image/\")) {\n    cb(null, true);\n  } else {\n    cb(new Error(\"Only image files are allowed!\"), false);\n  }\n};\n\n// Set up the upload middleware\nconst upload = multer({\n  storage: storage,\n  limits: {\n    fileSize: 1024 * 1024 * 5\n  },\n  fileFilter: fileFilter\n});\nmodule.exports = upload;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtdWx0ZXIiLCJyZXF1aXJlIiwic3RvcmFnZSIsImRpc2tTdG9yYWdlIiwiZGVzdGluYXRpb24iLCJyZXEiLCJmaWxlIiwiY2IiLCJmaWxlbmFtZSIsInVuaXF1ZVN1ZmZpeCIsIkRhdGUiLCJub3ciLCJNYXRoIiwicm91bmQiLCJyYW5kb20iLCJmaWVsZG5hbWUiLCJtaW1ldHlwZSIsInNwbGl0IiwiZmlsZUZpbHRlciIsInN0YXJ0c1dpdGgiLCJFcnJvciIsInVwbG9hZCIsImxpbWl0cyIsImZpbGVTaXplIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL2NvbmZpZy8iLCJzb3VyY2VzIjpbIm11bHRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtdWx0ZXIgPSByZXF1aXJlKFwibXVsdGVyXCIpO1xuXG5jb25zdCBzdG9yYWdlID0gbXVsdGVyLmRpc2tTdG9yYWdlKHtcbiAgICBkZXN0aW5hdGlvbjogZnVuY3Rpb24gKHJlcSwgZmlsZSwgY2IpIHtcbiAgICAgICAgY2IobnVsbCwgXCJpbWFnZS9cIik7XG4gICAgfSxcbiAgICBmaWxlbmFtZTogZnVuY3Rpb24gKHJlcSwgZmlsZSwgY2IpIHtcbiAgICAgICAgY29uc3QgdW5pcXVlU3VmZml4ID0gRGF0ZS5ub3coKSArIFwiLVwiICsgTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMWU5KTtcbiAgICAgICAgY2IoXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgZmlsZS5maWVsZG5hbWUgK1xuICAgICAgICAgICAgICAgIFwiLVwiICtcbiAgICAgICAgICAgICAgICB1bmlxdWVTdWZmaXggK1xuICAgICAgICAgICAgICAgIFwiLlwiICtcbiAgICAgICAgICAgICAgICBmaWxlLm1pbWV0eXBlLnNwbGl0KFwiL1wiKVsxXVxuICAgICAgICApO1xuICAgIH0sXG59KTtcblxuY29uc3QgZmlsZUZpbHRlciA9IChyZXEsIGZpbGUsIGNiKSA9PiB7XG4gICAgaWYgKGZpbGUubWltZXR5cGUuc3RhcnRzV2l0aChcImltYWdlL1wiKSkge1xuICAgICAgICBjYihudWxsLCB0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjYihuZXcgRXJyb3IoXCJPbmx5IGltYWdlIGZpbGVzIGFyZSBhbGxvd2VkIVwiKSwgZmFsc2UpO1xuICAgIH1cbn07XG5cbi8vIFNldCB1cCB0aGUgdXBsb2FkIG1pZGRsZXdhcmVcbmNvbnN0IHVwbG9hZCA9IG11bHRlcih7XG4gICAgc3RvcmFnZTogc3RvcmFnZSxcbiAgICBsaW1pdHM6IHsgZmlsZVNpemU6IDEwMjQgKiAxMDI0ICogNSB9LFxuICAgIGZpbGVGaWx0ZXI6IGZpbGVGaWx0ZXIsXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSB1cGxvYWQ7XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUVoQyxNQUFNQyxPQUFPLEdBQUdGLE1BQU0sQ0FBQ0csV0FBVyxDQUFDO0VBQy9CQyxXQUFXLEVBQUUsU0FBQUEsQ0FBVUMsR0FBRyxFQUFFQyxJQUFJLEVBQUVDLEVBQUUsRUFBRTtJQUNsQ0EsRUFBRSxDQUFDLElBQUksRUFBRSxRQUFRLENBQUM7RUFDdEIsQ0FBQztFQUNEQyxRQUFRLEVBQUUsU0FBQUEsQ0FBVUgsR0FBRyxFQUFFQyxJQUFJLEVBQUVDLEVBQUUsRUFBRTtJQUMvQixNQUFNRSxZQUFZLEdBQUdDLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLEdBQUdDLElBQUksQ0FBQ0MsS0FBSyxDQUFDRCxJQUFJLENBQUNFLE1BQU0sQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO0lBQ3ZFUCxFQUFFLENBQ0UsSUFBSSxFQUNKRCxJQUFJLENBQUNTLFNBQVMsR0FDVixHQUFHLEdBQ0hOLFlBQVksR0FDWixHQUFHLEdBQ0hILElBQUksQ0FBQ1UsUUFBUSxDQUFDQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUNsQyxDQUFDO0VBQ0w7QUFDSixDQUFDLENBQUM7QUFFRixNQUFNQyxVQUFVLEdBQUdBLENBQUNiLEdBQUcsRUFBRUMsSUFBSSxFQUFFQyxFQUFFLEtBQUs7RUFDbEMsSUFBSUQsSUFBSSxDQUFDVSxRQUFRLENBQUNHLFVBQVUsQ0FBQyxRQUFRLENBQUMsRUFBRTtJQUNwQ1osRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUM7RUFDbEIsQ0FBQyxNQUFNO0lBQ0hBLEVBQUUsQ0FBQyxJQUFJYSxLQUFLLENBQUMsK0JBQStCLENBQUMsRUFBRSxLQUFLLENBQUM7RUFDekQ7QUFDSixDQUFDOztBQUVEO0FBQ0EsTUFBTUMsTUFBTSxHQUFHckIsTUFBTSxDQUFDO0VBQ2xCRSxPQUFPLEVBQUVBLE9BQU87RUFDaEJvQixNQUFNLEVBQUU7SUFBRUMsUUFBUSxFQUFFLElBQUksR0FBRyxJQUFJLEdBQUc7RUFBRSxDQUFDO0VBQ3JDTCxVQUFVLEVBQUVBO0FBQ2hCLENBQUMsQ0FBQztBQUVGTSxNQUFNLENBQUNDLE9BQU8sR0FBR0osTUFBTSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["multer","require","storage","diskStorage","destination","req","file","cb","filename","uniqueSuffix","Date","now","Math","round","random","fieldname","mimetype","split","fileFilter","startsWith","Error","upload","limits","fileSize","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/config/","sources":["multer.js"],"sourcesContent":["const multer = require(\"multer\");\n\nconst storage = multer.diskStorage({\n    destination: function (req, file, cb) {\n        cb(null, \"image/\");\n    },\n    filename: function (req, file, cb) {\n        const uniqueSuffix = Date.now() + \"-\" + Math.round(Math.random() * 1e9);\n        cb(\n            null,\n            file.fieldname +\n                \"-\" +\n                uniqueSuffix +\n                \".\" +\n                file.mimetype.split(\"/\")[1]\n        );\n    },\n});\n\nconst fileFilter = (req, file, cb) => {\n    if (file.mimetype.startsWith(\"image/\")) {\n        cb(null, true);\n    } else {\n        cb(new Error(\"Only image files are allowed!\"), false);\n    }\n};\n\n// Set up the upload middleware\nconst upload = multer({\n    storage: storage,\n    limits: { fileSize: 1024 * 1024 * 5 },\n    fileFilter: fileFilter,\n});\n\nmodule.exports = upload;\n"],"mappings":"AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAEhC,MAAMC,OAAO,GAAGF,MAAM,CAACG,WAAW,CAAC;EAC/BC,WAAW,EAAE,SAAAA,CAAUC,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAE;IAClCA,EAAE,CAAC,IAAI,EAAE,QAAQ,CAAC;EACtB,CAAC;EACDC,QAAQ,EAAE,SAAAA,CAAUH,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAE;IAC/B,MAAME,YAAY,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,GAAG,CAAC;IACvEP,EAAE,CACE,IAAI,EACJD,IAAI,CAACS,SAAS,GACV,GAAG,GACHN,YAAY,GACZ,GAAG,GACHH,IAAI,CAACU,QAAQ,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAClC,CAAC;EACL;AACJ,CAAC,CAAC;AAEF,MAAMC,UAAU,GAAGA,CAACb,GAAG,EAAEC,IAAI,EAAEC,EAAE,KAAK;EAClC,IAAID,IAAI,CAACU,QAAQ,CAACG,UAAU,CAAC,QAAQ,CAAC,EAAE;IACpCZ,EAAE,CAAC,IAAI,EAAE,IAAI,CAAC;EAClB,CAAC,MAAM;IACHA,EAAE,CAAC,IAAIa,KAAK,CAAC,+BAA+B,CAAC,EAAE,KAAK,CAAC;EACzD;AACJ,CAAC;;AAED;AACA,MAAMC,MAAM,GAAGrB,MAAM,CAAC;EAClBE,OAAO,EAAEA,OAAO;EAChBoB,MAAM,EAAE;IAAEC,QAAQ,EAAE,IAAI,GAAG,IAAI,GAAG;EAAE,CAAC;EACrCL,UAAU,EAAEA;AAChB,CAAC,CAAC;AAEFM,MAAM,CAACC,OAAO,GAAGJ,MAAM","ignoreList":[]}},"mtime":1727248908536},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/commentRoute.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const express = require(\"express\");\nconst commentController = require(\"../../controllers/commentController\");\nconst validate = require(\"../../middlewares/validate\");\nconst router = express.Router();\nrouter.route(\"/api/comment\").post(validate(), commentController.create);\nrouter.route(\"/api/comment/:id\").delete(validate(), commentController.delete);\nmodule.exports = router;\n\n/**\n * @swagger\n * tags:\n *   name: Users\n *   description: User management and retrieval\n */\n\n/**\n * @swagger\n * /users:\n *   post:\n *     summary: Create a user\n *     description: Only admins can create other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - name\n *               - email\n *               - password\n *               - role\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *               role:\n *                  type: string\n *                  enum: [user, admin]\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *               role: user\n *     responses:\n *       \"201\":\n *         description: Created\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *\n *   get:\n *     summary: Get all users\n *     description: Only admins can retrieve all users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: query\n *         name: name\n *         schema:\n *           type: string\n *         description: User name\n *       - in: query\n *         name: role\n *         schema:\n *           type: string\n *         description: User role\n *       - in: query\n *         name: sortBy\n *         schema:\n *           type: string\n *         description: sort by query in the form of field:desc/asc (ex. name:asc)\n *       - in: query\n *         name: limit\n *         schema:\n *           type: integer\n *           minimum: 1\n *         default: 10\n *         description: Maximum number of users\n *       - in: query\n *         name: page\n *         schema:\n *           type: integer\n *           minimum: 1\n *           default: 1\n *         description: Page number\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 results:\n *                   type: array\n *                   items:\n *                     $ref: '#/components/schemas/User'\n *                 page:\n *                   type: integer\n *                   example: 1\n *                 limit:\n *                   type: integer\n *                   example: 10\n *                 totalPages:\n *                   type: integer\n *                   example: 1\n *                 totalResults:\n *                   type: integer\n *                   example: 1\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n */\n\n/**\n * @swagger\n * /users/{id}:\n *   get:\n *     summary: Get a user\n *     description: Logged in users can fetch only their own user information. Only admins can fetch other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   patch:\n *     summary: Update a user\n *     description: Logged in users can only update their own information. Only admins can update other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   delete:\n *     summary: Delete a user\n *     description: Logged in users can delete only themselves. Only admins can delete other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: No content\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n */\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNvbW1lbnRDb250cm9sbGVyIiwidmFsaWRhdGUiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJyb3V0ZSIsInBvc3QiLCJjcmVhdGUiLCJkZWxldGUiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdnVvbmdrbWEvaUNsb3VkIERyaXZlIChBcmNoaXZlKS9Eb2N1bWVudHMva2NuZC9zcmMvcm91dGVzL3YxLyIsInNvdXJjZXMiOlsiY29tbWVudFJvdXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKFwiZXhwcmVzc1wiKTtcbmNvbnN0IGNvbW1lbnRDb250cm9sbGVyID0gcmVxdWlyZShcIi4uLy4uL2NvbnRyb2xsZXJzL2NvbW1lbnRDb250cm9sbGVyXCIpO1xuY29uc3QgdmFsaWRhdGUgPSByZXF1aXJlKFwiLi4vLi4vbWlkZGxld2FyZXMvdmFsaWRhdGVcIik7XG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG5yb3V0ZXIucm91dGUoXCIvYXBpL2NvbW1lbnRcIikucG9zdCh2YWxpZGF0ZSgpLCBjb21tZW50Q29udHJvbGxlci5jcmVhdGUpO1xuXG5yb3V0ZXIucm91dGUoXCIvYXBpL2NvbW1lbnQvOmlkXCIpLmRlbGV0ZSh2YWxpZGF0ZSgpLCBjb21tZW50Q29udHJvbGxlci5kZWxldGUpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcblxuLyoqXG4gKiBAc3dhZ2dlclxuICogdGFnczpcbiAqICAgbmFtZTogVXNlcnNcbiAqICAgZGVzY3JpcHRpb246IFVzZXIgbWFuYWdlbWVudCBhbmQgcmV0cmlldmFsXG4gKi9cblxuLyoqXG4gKiBAc3dhZ2dlclxuICogL3VzZXJzOlxuICogICBwb3N0OlxuICogICAgIHN1bW1hcnk6IENyZWF0ZSBhIHVzZXJcbiAqICAgICBkZXNjcmlwdGlvbjogT25seSBhZG1pbnMgY2FuIGNyZWF0ZSBvdGhlciB1c2Vycy5cbiAqICAgICB0YWdzOiBbVXNlcnNdXG4gKiAgICAgc2VjdXJpdHk6XG4gKiAgICAgICAtIGJlYXJlckF1dGg6IFtdXG4gKiAgICAgcmVxdWVzdEJvZHk6XG4gKiAgICAgICByZXF1aXJlZDogdHJ1ZVxuICogICAgICAgY29udGVudDpcbiAqICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICB0eXBlOiBvYmplY3RcbiAqICAgICAgICAgICAgIHJlcXVpcmVkOlxuICogICAgICAgICAgICAgICAtIG5hbWVcbiAqICAgICAgICAgICAgICAgLSBlbWFpbFxuICogICAgICAgICAgICAgICAtIHBhc3N3b3JkXG4gKiAgICAgICAgICAgICAgIC0gcm9sZVxuICogICAgICAgICAgICAgcHJvcGVydGllczpcbiAqICAgICAgICAgICAgICAgbmFtZTpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgZW1haWw6XG4gKiAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgZm9ybWF0OiBlbWFpbFxuICogICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBtdXN0IGJlIHVuaXF1ZVxuICogICAgICAgICAgICAgICBwYXNzd29yZDpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICBmb3JtYXQ6IHBhc3N3b3JkXG4gKiAgICAgICAgICAgICAgICAgbWluTGVuZ3RoOiA4XG4gKiAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IEF0IGxlYXN0IG9uZSBudW1iZXIgYW5kIG9uZSBsZXR0ZXJcbiAqICAgICAgICAgICAgICAgcm9sZTpcbiAqICAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgIGVudW06IFt1c2VyLCBhZG1pbl1cbiAqICAgICAgICAgICAgIGV4YW1wbGU6XG4gKiAgICAgICAgICAgICAgIG5hbWU6IGZha2UgbmFtZVxuICogICAgICAgICAgICAgICBlbWFpbDogZmFrZUBleGFtcGxlLmNvbVxuICogICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQxXG4gKiAgICAgICAgICAgICAgIHJvbGU6IHVzZXJcbiAqICAgICByZXNwb25zZXM6XG4gKiAgICAgICBcIjIwMVwiOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogQ3JlYXRlZFxuICogICAgICAgICBjb250ZW50OlxuICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlcidcbiAqICAgICAgIFwiNDAwXCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL0R1cGxpY2F0ZUVtYWlsJ1xuICogICAgICAgXCI0MDFcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvVW5hdXRob3JpemVkJ1xuICogICAgICAgXCI0MDNcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvRm9yYmlkZGVuJ1xuICpcbiAqICAgZ2V0OlxuICogICAgIHN1bW1hcnk6IEdldCBhbGwgdXNlcnNcbiAqICAgICBkZXNjcmlwdGlvbjogT25seSBhZG1pbnMgY2FuIHJldHJpZXZlIGFsbCB1c2Vycy5cbiAqICAgICB0YWdzOiBbVXNlcnNdXG4gKiAgICAgc2VjdXJpdHk6XG4gKiAgICAgICAtIGJlYXJlckF1dGg6IFtdXG4gKiAgICAgcGFyYW1ldGVyczpcbiAqICAgICAgIC0gaW46IHF1ZXJ5XG4gKiAgICAgICAgIG5hbWU6IG5hbWVcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICBkZXNjcmlwdGlvbjogVXNlciBuYW1lXG4gKiAgICAgICAtIGluOiBxdWVyeVxuICogICAgICAgICBuYW1lOiByb2xlXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIgcm9sZVxuICogICAgICAgLSBpbjogcXVlcnlcbiAqICAgICAgICAgbmFtZTogc29ydEJ5XG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgZGVzY3JpcHRpb246IHNvcnQgYnkgcXVlcnkgaW4gdGhlIGZvcm0gb2YgZmllbGQ6ZGVzYy9hc2MgKGV4LiBuYW1lOmFzYylcbiAqICAgICAgIC0gaW46IHF1ZXJ5XG4gKiAgICAgICAgIG5hbWU6IGxpbWl0XG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBpbnRlZ2VyXG4gKiAgICAgICAgICAgbWluaW11bTogMVxuICogICAgICAgICBkZWZhdWx0OiAxMFxuICogICAgICAgICBkZXNjcmlwdGlvbjogTWF4aW11bSBudW1iZXIgb2YgdXNlcnNcbiAqICAgICAgIC0gaW46IHF1ZXJ5XG4gKiAgICAgICAgIG5hbWU6IHBhZ2VcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IGludGVnZXJcbiAqICAgICAgICAgICBtaW5pbXVtOiAxXG4gKiAgICAgICAgICAgZGVmYXVsdDogMVxuICogICAgICAgICBkZXNjcmlwdGlvbjogUGFnZSBudW1iZXJcbiAqICAgICByZXNwb25zZXM6XG4gKiAgICAgICBcIjIwMFwiOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogT0tcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICB0eXBlOiBvYmplY3RcbiAqICAgICAgICAgICAgICAgcHJvcGVydGllczpcbiAqICAgICAgICAgICAgICAgICByZXN1bHRzOlxuICogICAgICAgICAgICAgICAgICAgdHlwZTogYXJyYXlcbiAqICAgICAgICAgICAgICAgICAgIGl0ZW1zOlxuICogICAgICAgICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlcidcbiAqICAgICAgICAgICAgICAgICBwYWdlOlxuICogICAgICAgICAgICAgICAgICAgdHlwZTogaW50ZWdlclxuICogICAgICAgICAgICAgICAgICAgZXhhbXBsZTogMVxuICogICAgICAgICAgICAgICAgIGxpbWl0OlxuICogICAgICAgICAgICAgICAgICAgdHlwZTogaW50ZWdlclxuICogICAgICAgICAgICAgICAgICAgZXhhbXBsZTogMTBcbiAqICAgICAgICAgICAgICAgICB0b3RhbFBhZ2VzOlxuICogICAgICAgICAgICAgICAgICAgdHlwZTogaW50ZWdlclxuICogICAgICAgICAgICAgICAgICAgZXhhbXBsZTogMVxuICogICAgICAgICAgICAgICAgIHRvdGFsUmVzdWx0czpcbiAqICAgICAgICAgICAgICAgICAgIHR5cGU6IGludGVnZXJcbiAqICAgICAgICAgICAgICAgICAgIGV4YW1wbGU6IDFcbiAqICAgICAgIFwiNDAxXCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL1VuYXV0aG9yaXplZCdcbiAqICAgICAgIFwiNDAzXCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL0ZvcmJpZGRlbidcbiAqL1xuXG4vKipcbiAqIEBzd2FnZ2VyXG4gKiAvdXNlcnMve2lkfTpcbiAqICAgZ2V0OlxuICogICAgIHN1bW1hcnk6IEdldCBhIHVzZXJcbiAqICAgICBkZXNjcmlwdGlvbjogTG9nZ2VkIGluIHVzZXJzIGNhbiBmZXRjaCBvbmx5IHRoZWlyIG93biB1c2VyIGluZm9ybWF0aW9uLiBPbmx5IGFkbWlucyBjYW4gZmV0Y2ggb3RoZXIgdXNlcnMuXG4gKiAgICAgdGFnczogW1VzZXJzXVxuICogICAgIHNlY3VyaXR5OlxuICogICAgICAgLSBiZWFyZXJBdXRoOiBbXVxuICogICAgIHBhcmFtZXRlcnM6XG4gKiAgICAgICAtIGluOiBwYXRoXG4gKiAgICAgICAgIG5hbWU6IGlkXG4gKiAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIgaWRcbiAqICAgICByZXNwb25zZXM6XG4gKiAgICAgICBcIjIwMFwiOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogT0tcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL1VzZXInXG4gKiAgICAgICBcIjQwMVwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9VbmF1dGhvcml6ZWQnXG4gKiAgICAgICBcIjQwM1wiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Gb3JiaWRkZW4nXG4gKiAgICAgICBcIjQwNFwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Ob3RGb3VuZCdcbiAqXG4gKiAgIHBhdGNoOlxuICogICAgIHN1bW1hcnk6IFVwZGF0ZSBhIHVzZXJcbiAqICAgICBkZXNjcmlwdGlvbjogTG9nZ2VkIGluIHVzZXJzIGNhbiBvbmx5IHVwZGF0ZSB0aGVpciBvd24gaW5mb3JtYXRpb24uIE9ubHkgYWRtaW5zIGNhbiB1cGRhdGUgb3RoZXIgdXNlcnMuXG4gKiAgICAgdGFnczogW1VzZXJzXVxuICogICAgIHNlY3VyaXR5OlxuICogICAgICAgLSBiZWFyZXJBdXRoOiBbXVxuICogICAgIHBhcmFtZXRlcnM6XG4gKiAgICAgICAtIGluOiBwYXRoXG4gKiAgICAgICAgIG5hbWU6IGlkXG4gKiAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIgaWRcbiAqICAgICByZXF1ZXN0Qm9keTpcbiAqICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gKiAgICAgICBjb250ZW50OlxuICogICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgIHR5cGU6IG9iamVjdFxuICogICAgICAgICAgICAgcHJvcGVydGllczpcbiAqICAgICAgICAgICAgICAgbmFtZTpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgZW1haWw6XG4gKiAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgZm9ybWF0OiBlbWFpbFxuICogICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBtdXN0IGJlIHVuaXF1ZVxuICogICAgICAgICAgICAgICBwYXNzd29yZDpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICBmb3JtYXQ6IHBhc3N3b3JkXG4gKiAgICAgICAgICAgICAgICAgbWluTGVuZ3RoOiA4XG4gKiAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IEF0IGxlYXN0IG9uZSBudW1iZXIgYW5kIG9uZSBsZXR0ZXJcbiAqICAgICAgICAgICAgIGV4YW1wbGU6XG4gKiAgICAgICAgICAgICAgIG5hbWU6IGZha2UgbmFtZVxuICogICAgICAgICAgICAgICBlbWFpbDogZmFrZUBleGFtcGxlLmNvbVxuICogICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQxXG4gKiAgICAgcmVzcG9uc2VzOlxuICogICAgICAgXCIyMDBcIjpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IE9LXG4gKiAgICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9Vc2VyJ1xuICogICAgICAgXCI0MDBcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvRHVwbGljYXRlRW1haWwnXG4gKiAgICAgICBcIjQwMVwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9VbmF1dGhvcml6ZWQnXG4gKiAgICAgICBcIjQwM1wiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Gb3JiaWRkZW4nXG4gKiAgICAgICBcIjQwNFwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Ob3RGb3VuZCdcbiAqXG4gKiAgIGRlbGV0ZTpcbiAqICAgICBzdW1tYXJ5OiBEZWxldGUgYSB1c2VyXG4gKiAgICAgZGVzY3JpcHRpb246IExvZ2dlZCBpbiB1c2VycyBjYW4gZGVsZXRlIG9ubHkgdGhlbXNlbHZlcy4gT25seSBhZG1pbnMgY2FuIGRlbGV0ZSBvdGhlciB1c2Vycy5cbiAqICAgICB0YWdzOiBbVXNlcnNdXG4gKiAgICAgc2VjdXJpdHk6XG4gKiAgICAgICAtIGJlYXJlckF1dGg6IFtdXG4gKiAgICAgcGFyYW1ldGVyczpcbiAqICAgICAgIC0gaW46IHBhdGhcbiAqICAgICAgICAgbmFtZTogaWRcbiAqICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAqICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICBkZXNjcmlwdGlvbjogVXNlciBpZFxuICogICAgIHJlc3BvbnNlczpcbiAqICAgICAgIFwiMjAwXCI6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBObyBjb250ZW50XG4gKiAgICAgICBcIjQwMVwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9VbmF1dGhvcml6ZWQnXG4gKiAgICAgICBcIjQwM1wiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Gb3JiaWRkZW4nXG4gKiAgICAgICBcIjQwNFwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Ob3RGb3VuZCdcbiAqL1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUMsaUJBQWlCLEdBQUdELE9BQU8sQ0FBQyxxQ0FBcUMsQ0FBQztBQUN4RSxNQUFNRSxRQUFRLEdBQUdGLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQztBQUN0RCxNQUFNRyxNQUFNLEdBQUdKLE9BQU8sQ0FBQ0ssTUFBTSxDQUFDLENBQUM7QUFFL0JELE1BQU0sQ0FBQ0UsS0FBSyxDQUFDLGNBQWMsQ0FBQyxDQUFDQyxJQUFJLENBQUNKLFFBQVEsQ0FBQyxDQUFDLEVBQUVELGlCQUFpQixDQUFDTSxNQUFNLENBQUM7QUFFdkVKLE1BQU0sQ0FBQ0UsS0FBSyxDQUFDLGtCQUFrQixDQUFDLENBQUNHLE1BQU0sQ0FBQ04sUUFBUSxDQUFDLENBQUMsRUFBRUQsaUJBQWlCLENBQUNPLE1BQU0sQ0FBQztBQUU3RUMsTUFBTSxDQUFDQyxPQUFPLEdBQUdQLE1BQU07O0FBRXZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["express","require","commentController","validate","router","Router","route","post","create","delete","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/","sources":["commentRoute.js"],"sourcesContent":["const express = require(\"express\");\nconst commentController = require(\"../../controllers/commentController\");\nconst validate = require(\"../../middlewares/validate\");\nconst router = express.Router();\n\nrouter.route(\"/api/comment\").post(validate(), commentController.create);\n\nrouter.route(\"/api/comment/:id\").delete(validate(), commentController.delete);\n\nmodule.exports = router;\n\n/**\n * @swagger\n * tags:\n *   name: Users\n *   description: User management and retrieval\n */\n\n/**\n * @swagger\n * /users:\n *   post:\n *     summary: Create a user\n *     description: Only admins can create other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - name\n *               - email\n *               - password\n *               - role\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *               role:\n *                  type: string\n *                  enum: [user, admin]\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *               role: user\n *     responses:\n *       \"201\":\n *         description: Created\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *\n *   get:\n *     summary: Get all users\n *     description: Only admins can retrieve all users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: query\n *         name: name\n *         schema:\n *           type: string\n *         description: User name\n *       - in: query\n *         name: role\n *         schema:\n *           type: string\n *         description: User role\n *       - in: query\n *         name: sortBy\n *         schema:\n *           type: string\n *         description: sort by query in the form of field:desc/asc (ex. name:asc)\n *       - in: query\n *         name: limit\n *         schema:\n *           type: integer\n *           minimum: 1\n *         default: 10\n *         description: Maximum number of users\n *       - in: query\n *         name: page\n *         schema:\n *           type: integer\n *           minimum: 1\n *           default: 1\n *         description: Page number\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 results:\n *                   type: array\n *                   items:\n *                     $ref: '#/components/schemas/User'\n *                 page:\n *                   type: integer\n *                   example: 1\n *                 limit:\n *                   type: integer\n *                   example: 10\n *                 totalPages:\n *                   type: integer\n *                   example: 1\n *                 totalResults:\n *                   type: integer\n *                   example: 1\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n */\n\n/**\n * @swagger\n * /users/{id}:\n *   get:\n *     summary: Get a user\n *     description: Logged in users can fetch only their own user information. Only admins can fetch other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   patch:\n *     summary: Update a user\n *     description: Logged in users can only update their own information. Only admins can update other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   delete:\n *     summary: Delete a user\n *     description: Logged in users can delete only themselves. Only admins can delete other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: No content\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n */\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,iBAAiB,GAAGD,OAAO,CAAC,qCAAqC,CAAC;AACxE,MAAME,QAAQ,GAAGF,OAAO,CAAC,4BAA4B,CAAC;AACtD,MAAMG,MAAM,GAAGJ,OAAO,CAACK,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,KAAK,CAAC,cAAc,CAAC,CAACC,IAAI,CAACJ,QAAQ,CAAC,CAAC,EAAED,iBAAiB,CAACM,MAAM,CAAC;AAEvEJ,MAAM,CAACE,KAAK,CAAC,kBAAkB,CAAC,CAACG,MAAM,CAACN,QAAQ,CAAC,CAAC,EAAED,iBAAiB,CAACO,MAAM,CAAC;AAE7EC,MAAM,CAACC,OAAO,GAAGP,MAAM;;AAEvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]}},"mtime":1720516583016},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/controllers/commentController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const {\n  StatusCodes\n} = require(\"http-status-codes\");\nconst commentService = require(\"../services/commentService\");\n//import message factory\nconst MessageFactory = require(\"../utils/messageFactory\");\nconst RemoveValueNullObject = require(\"../utils/removeValueNullObject\");\nexports.create = async (req, res, next) => {\n  try {\n    const {\n      post_id,\n      content,\n      user_id,\n      parent_comment_id\n    } = req.body;\n    const data = await commentService.create(post_id, content, user_id, parent_comment_id);\n    if (data) {\n      res.status(StatusCodes.OK).json(MessageFactory.success(data, \"Created success!\"));\n    } else {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"Created error\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\nexports.delete = async (req, res, next) => {\n  try {\n    const id = req.params.id;\n    const data = await commentService.delete(id);\n    if (data) {\n      res.status(StatusCodes.OK).json(MessageFactory.success(data, \"Delete success!\"));\n    } else {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"Delete error\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTdGF0dXNDb2RlcyIsInJlcXVpcmUiLCJjb21tZW50U2VydmljZSIsIk1lc3NhZ2VGYWN0b3J5IiwiUmVtb3ZlVmFsdWVOdWxsT2JqZWN0IiwiZXhwb3J0cyIsImNyZWF0ZSIsInJlcSIsInJlcyIsIm5leHQiLCJwb3N0X2lkIiwiY29udGVudCIsInVzZXJfaWQiLCJwYXJlbnRfY29tbWVudF9pZCIsImJvZHkiLCJkYXRhIiwic3RhdHVzIiwiT0siLCJqc29uIiwic3VjY2VzcyIsIlVOQVVUSE9SSVpFRCIsImVycm9yIiwiZGVsZXRlIiwiaWQiLCJwYXJhbXMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbImNvbW1lbnRDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgU3RhdHVzQ29kZXMgfSA9IHJlcXVpcmUoXCJodHRwLXN0YXR1cy1jb2Rlc1wiKTtcbmNvbnN0IGNvbW1lbnRTZXJ2aWNlID0gcmVxdWlyZShcIi4uL3NlcnZpY2VzL2NvbW1lbnRTZXJ2aWNlXCIpO1xuLy9pbXBvcnQgbWVzc2FnZSBmYWN0b3J5XG5jb25zdCBNZXNzYWdlRmFjdG9yeSA9IHJlcXVpcmUoXCIuLi91dGlscy9tZXNzYWdlRmFjdG9yeVwiKTtcbmNvbnN0IFJlbW92ZVZhbHVlTnVsbE9iamVjdCA9IHJlcXVpcmUoXCIuLi91dGlscy9yZW1vdmVWYWx1ZU51bGxPYmplY3RcIik7XG5cbmV4cG9ydHMuY3JlYXRlID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBwb3N0X2lkLCBjb250ZW50LCB1c2VyX2lkLCBwYXJlbnRfY29tbWVudF9pZCB9ID0gcmVxLmJvZHk7XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGNvbW1lbnRTZXJ2aWNlLmNyZWF0ZShcbiAgICAgICAgICAgIHBvc3RfaWQsXG4gICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgdXNlcl9pZCxcbiAgICAgICAgICAgIHBhcmVudF9jb21tZW50X2lkXG4gICAgICAgICk7XG4gICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLk9LKS5qc29uKFxuICAgICAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LnN1Y2Nlc3MoZGF0YSwgXCJDcmVhdGVkIHN1Y2Nlc3MhXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5VTkFVVEhPUklaRUQpLmpzb24oXG4gICAgICAgICAgICAgICAgTWVzc2FnZUZhY3RvcnkuZXJyb3IoXCJDcmVhdGVkIGVycm9yXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbmV4dChlcnJvcik7XG4gICAgfVxufTtcblxuZXhwb3J0cy5kZWxldGUgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBpZCA9IHJlcS5wYXJhbXMuaWQ7XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGNvbW1lbnRTZXJ2aWNlLmRlbGV0ZShpZCk7XG4gICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLk9LKS5qc29uKFxuICAgICAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LnN1Y2Nlc3MoZGF0YSwgXCJEZWxldGUgc3VjY2VzcyFcIilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLlVOQVVUSE9SSVpFRCkuanNvbihcbiAgICAgICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5lcnJvcihcIkRlbGV0ZSBlcnJvclwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbn07XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUE7QUFBWSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztBQUNwRCxNQUFNQyxjQUFjLEdBQUdELE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQztBQUM1RDtBQUNBLE1BQU1FLGNBQWMsR0FBR0YsT0FBTyxDQUFDLHlCQUF5QixDQUFDO0FBQ3pELE1BQU1HLHFCQUFxQixHQUFHSCxPQUFPLENBQUMsZ0NBQWdDLENBQUM7QUFFdkVJLE9BQU8sQ0FBQ0MsTUFBTSxHQUFHLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDdkMsSUFBSTtJQUNBLE1BQU07TUFBRUMsT0FBTztNQUFFQyxPQUFPO01BQUVDLE9BQU87TUFBRUM7SUFBa0IsQ0FBQyxHQUFHTixHQUFHLENBQUNPLElBQUk7SUFFakUsTUFBTUMsSUFBSSxHQUFHLE1BQU1iLGNBQWMsQ0FBQ0ksTUFBTSxDQUNwQ0ksT0FBTyxFQUNQQyxPQUFPLEVBQ1BDLE9BQU8sRUFDUEMsaUJBQ0osQ0FBQztJQUNELElBQUlFLElBQUksRUFBRTtNQUNOUCxHQUFHLENBQUNRLE1BQU0sQ0FBQ2hCLFdBQVcsQ0FBQ2lCLEVBQUUsQ0FBQyxDQUFDQyxJQUFJLENBQzNCZixjQUFjLENBQUNnQixPQUFPLENBQUNKLElBQUksRUFBRSxrQkFBa0IsQ0FDbkQsQ0FBQztJQUNMLENBQUMsTUFBTTtNQUNIUCxHQUFHLENBQUNRLE1BQU0sQ0FBQ2hCLFdBQVcsQ0FBQ29CLFlBQVksQ0FBQyxDQUFDRixJQUFJLENBQ3JDZixjQUFjLENBQUNrQixLQUFLLENBQUMsZUFBZSxDQUN4QyxDQUFDO0lBQ0w7RUFDSixDQUFDLENBQUMsT0FBT0EsS0FBSyxFQUFFO0lBQ1paLElBQUksQ0FBQ1ksS0FBSyxDQUFDO0VBQ2Y7QUFDSixDQUFDO0FBRURoQixPQUFPLENBQUNpQixNQUFNLEdBQUcsT0FBT2YsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztFQUN2QyxJQUFJO0lBQ0EsTUFBTWMsRUFBRSxHQUFHaEIsR0FBRyxDQUFDaUIsTUFBTSxDQUFDRCxFQUFFO0lBRXhCLE1BQU1SLElBQUksR0FBRyxNQUFNYixjQUFjLENBQUNvQixNQUFNLENBQUNDLEVBQUUsQ0FBQztJQUM1QyxJQUFJUixJQUFJLEVBQUU7TUFDTlAsR0FBRyxDQUFDUSxNQUFNLENBQUNoQixXQUFXLENBQUNpQixFQUFFLENBQUMsQ0FBQ0MsSUFBSSxDQUMzQmYsY0FBYyxDQUFDZ0IsT0FBTyxDQUFDSixJQUFJLEVBQUUsaUJBQWlCLENBQ2xELENBQUM7SUFDTCxDQUFDLE1BQU07TUFDSFAsR0FBRyxDQUFDUSxNQUFNLENBQUNoQixXQUFXLENBQUNvQixZQUFZLENBQUMsQ0FBQ0YsSUFBSSxDQUNyQ2YsY0FBYyxDQUFDa0IsS0FBSyxDQUFDLGNBQWMsQ0FDdkMsQ0FBQztJQUNMO0VBQ0osQ0FBQyxDQUFDLE9BQU9BLEtBQUssRUFBRTtJQUNaWixJQUFJLENBQUNZLEtBQUssQ0FBQztFQUNmO0FBQ0osQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["StatusCodes","require","commentService","MessageFactory","RemoveValueNullObject","exports","create","req","res","next","post_id","content","user_id","parent_comment_id","body","data","status","OK","json","success","UNAUTHORIZED","error","delete","id","params"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/controllers/","sources":["commentController.js"],"sourcesContent":["const { StatusCodes } = require(\"http-status-codes\");\nconst commentService = require(\"../services/commentService\");\n//import message factory\nconst MessageFactory = require(\"../utils/messageFactory\");\nconst RemoveValueNullObject = require(\"../utils/removeValueNullObject\");\n\nexports.create = async (req, res, next) => {\n    try {\n        const { post_id, content, user_id, parent_comment_id } = req.body;\n\n        const data = await commentService.create(\n            post_id,\n            content,\n            user_id,\n            parent_comment_id\n        );\n        if (data) {\n            res.status(StatusCodes.OK).json(\n                MessageFactory.success(data, \"Created success!\")\n            );\n        } else {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.error(\"Created error\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\n\nexports.delete = async (req, res, next) => {\n    try {\n        const id = req.params.id;\n\n        const data = await commentService.delete(id);\n        if (data) {\n            res.status(StatusCodes.OK).json(\n                MessageFactory.success(data, \"Delete success!\")\n            );\n        } else {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.error(\"Delete error\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\n"],"mappings":"AAAA,MAAM;EAAEA;AAAY,CAAC,GAAGC,OAAO,CAAC,mBAAmB,CAAC;AACpD,MAAMC,cAAc,GAAGD,OAAO,CAAC,4BAA4B,CAAC;AAC5D;AACA,MAAME,cAAc,GAAGF,OAAO,CAAC,yBAAyB,CAAC;AACzD,MAAMG,qBAAqB,GAAGH,OAAO,CAAC,gCAAgC,CAAC;AAEvEI,OAAO,CAACC,MAAM,GAAG,OAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACvC,IAAI;IACA,MAAM;MAAEC,OAAO;MAAEC,OAAO;MAAEC,OAAO;MAAEC;IAAkB,CAAC,GAAGN,GAAG,CAACO,IAAI;IAEjE,MAAMC,IAAI,GAAG,MAAMb,cAAc,CAACI,MAAM,CACpCI,OAAO,EACPC,OAAO,EACPC,OAAO,EACPC,iBACJ,CAAC;IACD,IAAIE,IAAI,EAAE;MACNP,GAAG,CAACQ,MAAM,CAAChB,WAAW,CAACiB,EAAE,CAAC,CAACC,IAAI,CAC3Bf,cAAc,CAACgB,OAAO,CAACJ,IAAI,EAAE,kBAAkB,CACnD,CAAC;IACL,CAAC,MAAM;MACHP,GAAG,CAACQ,MAAM,CAAChB,WAAW,CAACoB,YAAY,CAAC,CAACF,IAAI,CACrCf,cAAc,CAACkB,KAAK,CAAC,eAAe,CACxC,CAAC;IACL;EACJ,CAAC,CAAC,OAAOA,KAAK,EAAE;IACZZ,IAAI,CAACY,KAAK,CAAC;EACf;AACJ,CAAC;AAEDhB,OAAO,CAACiB,MAAM,GAAG,OAAOf,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACvC,IAAI;IACA,MAAMc,EAAE,GAAGhB,GAAG,CAACiB,MAAM,CAACD,EAAE;IAExB,MAAMR,IAAI,GAAG,MAAMb,cAAc,CAACoB,MAAM,CAACC,EAAE,CAAC;IAC5C,IAAIR,IAAI,EAAE;MACNP,GAAG,CAACQ,MAAM,CAAChB,WAAW,CAACiB,EAAE,CAAC,CAACC,IAAI,CAC3Bf,cAAc,CAACgB,OAAO,CAACJ,IAAI,EAAE,iBAAiB,CAClD,CAAC;IACL,CAAC,MAAM;MACHP,GAAG,CAACQ,MAAM,CAAChB,WAAW,CAACoB,YAAY,CAAC,CAACF,IAAI,CACrCf,cAAc,CAACkB,KAAK,CAAC,cAAc,CACvC,CAAC;IACL;EACJ,CAAC,CAAC,OAAOA,KAAK,EAAE;IACZZ,IAAI,CAACY,KAAK,CAAC;EACf;AACJ,CAAC","ignoreList":[]}},"mtime":1721611799023},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/commentService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const commentModel = require(\"../models/commentModel\");\nexports.create = async (post_id, content, user_id, parent_comment_id) => {\n  let data = await commentModel.create({\n    id: null,\n    post_id,\n    content,\n    user_id,\n    parent_comment_id\n  });\n  return data;\n};\nexports.delete = async id => {\n  return await commentModel.destroy({\n    where: {\n      id\n    }\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb21tZW50TW9kZWwiLCJyZXF1aXJlIiwiZXhwb3J0cyIsImNyZWF0ZSIsInBvc3RfaWQiLCJjb250ZW50IiwidXNlcl9pZCIsInBhcmVudF9jb21tZW50X2lkIiwiZGF0YSIsImlkIiwiZGVsZXRlIiwiZGVzdHJveSIsIndoZXJlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdnVvbmdrbWEvaUNsb3VkIERyaXZlIChBcmNoaXZlKS9Eb2N1bWVudHMva2NuZC9zcmMvc2VydmljZXMvIiwic291cmNlcyI6WyJjb21tZW50U2VydmljZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjb21tZW50TW9kZWwgPSByZXF1aXJlKFwiLi4vbW9kZWxzL2NvbW1lbnRNb2RlbFwiKTtcblxuZXhwb3J0cy5jcmVhdGUgPSBhc3luYyAocG9zdF9pZCwgY29udGVudCwgdXNlcl9pZCwgcGFyZW50X2NvbW1lbnRfaWQpID0+IHtcbiAgICBsZXQgZGF0YSA9IGF3YWl0IGNvbW1lbnRNb2RlbC5jcmVhdGUoe1xuICAgICAgICBpZDogbnVsbCxcbiAgICAgICAgcG9zdF9pZCxcbiAgICAgICAgY29udGVudCxcbiAgICAgICAgdXNlcl9pZCxcbiAgICAgICAgcGFyZW50X2NvbW1lbnRfaWQsXG4gICAgfSk7XG4gICAgcmV0dXJuIGRhdGE7XG59O1xuXG5leHBvcnRzLmRlbGV0ZSA9IGFzeW5jIChpZCkgPT4ge1xuICAgIHJldHVybiBhd2FpdCBjb21tZW50TW9kZWwuZGVzdHJveSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICBpZCxcbiAgICAgICAgfSxcbiAgICB9KTtcbn07XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFlBQVksR0FBR0MsT0FBTyxDQUFDLHdCQUF3QixDQUFDO0FBRXREQyxPQUFPLENBQUNDLE1BQU0sR0FBRyxPQUFPQyxPQUFPLEVBQUVDLE9BQU8sRUFBRUMsT0FBTyxFQUFFQyxpQkFBaUIsS0FBSztFQUNyRSxJQUFJQyxJQUFJLEdBQUcsTUFBTVIsWUFBWSxDQUFDRyxNQUFNLENBQUM7SUFDakNNLEVBQUUsRUFBRSxJQUFJO0lBQ1JMLE9BQU87SUFDUEMsT0FBTztJQUNQQyxPQUFPO0lBQ1BDO0VBQ0osQ0FBQyxDQUFDO0VBQ0YsT0FBT0MsSUFBSTtBQUNmLENBQUM7QUFFRE4sT0FBTyxDQUFDUSxNQUFNLEdBQUcsTUFBT0QsRUFBRSxJQUFLO0VBQzNCLE9BQU8sTUFBTVQsWUFBWSxDQUFDVyxPQUFPLENBQUM7SUFDOUJDLEtBQUssRUFBRTtNQUNISDtJQUNKO0VBQ0osQ0FBQyxDQUFDO0FBQ04sQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["commentModel","require","exports","create","post_id","content","user_id","parent_comment_id","data","id","delete","destroy","where"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/","sources":["commentService.js"],"sourcesContent":["const commentModel = require(\"../models/commentModel\");\n\nexports.create = async (post_id, content, user_id, parent_comment_id) => {\n    let data = await commentModel.create({\n        id: null,\n        post_id,\n        content,\n        user_id,\n        parent_comment_id,\n    });\n    return data;\n};\n\nexports.delete = async (id) => {\n    return await commentModel.destroy({\n        where: {\n            id,\n        },\n    });\n};\n"],"mappings":"AAAA,MAAMA,YAAY,GAAGC,OAAO,CAAC,wBAAwB,CAAC;AAEtDC,OAAO,CAACC,MAAM,GAAG,OAAOC,OAAO,EAAEC,OAAO,EAAEC,OAAO,EAAEC,iBAAiB,KAAK;EACrE,IAAIC,IAAI,GAAG,MAAMR,YAAY,CAACG,MAAM,CAAC;IACjCM,EAAE,EAAE,IAAI;IACRL,OAAO;IACPC,OAAO;IACPC,OAAO;IACPC;EACJ,CAAC,CAAC;EACF,OAAOC,IAAI;AACf,CAAC;AAEDN,OAAO,CAACQ,MAAM,GAAG,MAAOD,EAAE,IAAK;EAC3B,OAAO,MAAMT,YAAY,CAACW,OAAO,CAAC;IAC9BC,KAAK,EAAE;MACHH;IACJ;EACJ,CAAC,CAAC;AACN,CAAC","ignoreList":[]}},"mtime":1720145818917},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/commentModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const {\n  DataTypes\n} = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = require(\"../models/usedModel\");\nconst Comment = sequelize.define(\"Comment\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  }\n}, {\n  timestamps: true,\n  tableName: \"comment\",\n  modelName: \"comments\"\n});\nComment.belongsTo(User, {\n  foreignKey: \"user_id\",\n  as: \"user\"\n});\nmodule.exports = Comment;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEYXRhVHlwZXMiLCJyZXF1aXJlIiwic2VxdWVsaXplIiwiVXNlciIsIkNvbW1lbnQiLCJkZWZpbmUiLCJpZCIsInR5cGUiLCJJTlRFR0VSIiwiYXV0b0luY3JlbWVudCIsInByaW1hcnlLZXkiLCJhbGxvd051bGwiLCJ0aW1lc3RhbXBzIiwidGFibGVOYW1lIiwibW9kZWxOYW1lIiwiYmVsb25nc1RvIiwiZm9yZWlnbktleSIsImFzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL21vZGVscy8iLCJzb3VyY2VzIjpbImNvbW1lbnRNb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IERhdGFUeXBlcyB9ID0gcmVxdWlyZShcInNlcXVlbGl6ZVwiKTtcbmNvbnN0IHNlcXVlbGl6ZSA9IHJlcXVpcmUoXCIuLi9jb25maWcvZGF0YWJhc2VcIik7XG5jb25zdCBVc2VyID0gcmVxdWlyZShcIi4uL21vZGVscy91c2VkTW9kZWxcIik7XG5jb25zdCBDb21tZW50ID0gc2VxdWVsaXplLmRlZmluZShcbiAgICBcIkNvbW1lbnRcIixcbiAgICB7XG4gICAgICAgIGlkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgICB0aW1lc3RhbXBzOiB0cnVlLFxuICAgICAgICB0YWJsZU5hbWU6IFwiY29tbWVudFwiLFxuICAgICAgICBtb2RlbE5hbWU6IFwiY29tbWVudHNcIixcbiAgICB9XG4pO1xuQ29tbWVudC5iZWxvbmdzVG8oVXNlciwge1xuICAgIGZvcmVpZ25LZXk6IFwidXNlcl9pZFwiLFxuICAgIGFzOiBcInVzZXJcIixcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENvbW1lbnQ7XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUE7QUFBVSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDMUMsTUFBTUMsU0FBUyxHQUFHRCxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDL0MsTUFBTUUsSUFBSSxHQUFHRixPQUFPLENBQUMscUJBQXFCLENBQUM7QUFDM0MsTUFBTUcsT0FBTyxHQUFHRixTQUFTLENBQUNHLE1BQU0sQ0FDNUIsU0FBUyxFQUNUO0VBQ0lDLEVBQUUsRUFBRTtJQUNBQyxJQUFJLEVBQUVQLFNBQVMsQ0FBQ1EsT0FBTztJQUN2QkMsYUFBYSxFQUFFLElBQUk7SUFDbkJDLFVBQVUsRUFBRSxJQUFJO0lBQ2hCQyxTQUFTLEVBQUU7RUFDZjtBQUNKLENBQUMsRUFDRDtFQUNJQyxVQUFVLEVBQUUsSUFBSTtFQUNoQkMsU0FBUyxFQUFFLFNBQVM7RUFDcEJDLFNBQVMsRUFBRTtBQUNmLENBQ0osQ0FBQztBQUNEVixPQUFPLENBQUNXLFNBQVMsQ0FBQ1osSUFBSSxFQUFFO0VBQ3BCYSxVQUFVLEVBQUUsU0FBUztFQUNyQkMsRUFBRSxFQUFFO0FBQ1IsQ0FBQyxDQUFDO0FBRUZDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHZixPQUFPIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["DataTypes","require","sequelize","User","Comment","define","id","type","INTEGER","autoIncrement","primaryKey","allowNull","timestamps","tableName","modelName","belongsTo","foreignKey","as","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/","sources":["commentModel.js"],"sourcesContent":["const { DataTypes } = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = require(\"../models/usedModel\");\nconst Comment = sequelize.define(\n    \"Comment\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n    },\n    {\n        timestamps: true,\n        tableName: \"comment\",\n        modelName: \"comments\",\n    }\n);\nComment.belongsTo(User, {\n    foreignKey: \"user_id\",\n    as: \"user\",\n});\n\nmodule.exports = Comment;\n"],"mappings":"AAAA,MAAM;EAAEA;AAAU,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAC1C,MAAMC,SAAS,GAAGD,OAAO,CAAC,oBAAoB,CAAC;AAC/C,MAAME,IAAI,GAAGF,OAAO,CAAC,qBAAqB,CAAC;AAC3C,MAAMG,OAAO,GAAGF,SAAS,CAACG,MAAM,CAC5B,SAAS,EACT;EACIC,EAAE,EAAE;IACAC,IAAI,EAAEP,SAAS,CAACQ,OAAO;IACvBC,aAAa,EAAE,IAAI;IACnBC,UAAU,EAAE,IAAI;IAChBC,SAAS,EAAE;EACf;AACJ,CAAC,EACD;EACIC,UAAU,EAAE,IAAI;EAChBC,SAAS,EAAE,SAAS;EACpBC,SAAS,EAAE;AACf,CACJ,CAAC;AACDV,OAAO,CAACW,SAAS,CAACZ,IAAI,EAAE;EACpBa,UAAU,EAAE,SAAS;EACrBC,EAAE,EAAE;AACR,CAAC,CAAC;AAEFC,MAAM,CAACC,OAAO,GAAGf,OAAO","ignoreList":[]}},"mtime":1727165579526},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/docs/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/docs/swaggerDef.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const {\n  version\n} = require(\"../../package.json\");\nconst dotenv = require(\"dotenv\").config();\nconst options = {\n  definition: {\n    openapi: \"3.1.0\",\n    info: {\n      title: \"AIT API documentation\",\n      version,\n      license: {\n        name: \"MIT\",\n        url: \"\"\n      }\n    },\n    servers: [{\n      url: \"http://localhost:3000\"\n    }]\n  },\n  apis: [\"./routes/v1/index.js\"]\n};\nmodule.exports = options;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ2ZXJzaW9uIiwicmVxdWlyZSIsImRvdGVudiIsImNvbmZpZyIsIm9wdGlvbnMiLCJkZWZpbml0aW9uIiwib3BlbmFwaSIsImluZm8iLCJ0aXRsZSIsImxpY2Vuc2UiLCJuYW1lIiwidXJsIiwic2VydmVycyIsImFwaXMiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdnVvbmdrbWEvaUNsb3VkIERyaXZlIChBcmNoaXZlKS9Eb2N1bWVudHMva2NuZC9zcmMvZG9jcy8iLCJzb3VyY2VzIjpbInN3YWdnZXJEZWYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyB2ZXJzaW9uIH0gPSByZXF1aXJlKFwiLi4vLi4vcGFja2FnZS5qc29uXCIpO1xuY29uc3QgZG90ZW52ID0gcmVxdWlyZShcImRvdGVudlwiKS5jb25maWcoKTtcblxuY29uc3Qgb3B0aW9ucyA9IHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIG9wZW5hcGk6IFwiMy4xLjBcIixcbiAgICAgICAgaW5mbzoge1xuICAgICAgICAgICAgdGl0bGU6IFwiQUlUIEFQSSBkb2N1bWVudGF0aW9uXCIsXG4gICAgICAgICAgICB2ZXJzaW9uLFxuICAgICAgICAgICAgbGljZW5zZToge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiTUlUXCIsXG4gICAgICAgICAgICAgICAgdXJsOiBcIlwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgc2VydmVyczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHVybDogXCJodHRwOi8vbG9jYWxob3N0OjMwMDBcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBhcGlzOiBbXCIuL3JvdXRlcy92MS9pbmRleC5qc1wiXSxcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gb3B0aW9ucztcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTTtFQUFFQTtBQUFRLENBQUMsR0FBR0MsT0FBTyxDQUFDLG9CQUFvQixDQUFDO0FBQ2pELE1BQU1DLE1BQU0sR0FBR0QsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDRSxNQUFNLENBQUMsQ0FBQztBQUV6QyxNQUFNQyxPQUFPLEdBQUc7RUFDWkMsVUFBVSxFQUFFO0lBQ1JDLE9BQU8sRUFBRSxPQUFPO0lBQ2hCQyxJQUFJLEVBQUU7TUFDRkMsS0FBSyxFQUFFLHVCQUF1QjtNQUM5QlIsT0FBTztNQUNQUyxPQUFPLEVBQUU7UUFDTEMsSUFBSSxFQUFFLEtBQUs7UUFDWEMsR0FBRyxFQUFFO01BQ1Q7SUFDSixDQUFDO0lBQ0RDLE9BQU8sRUFBRSxDQUNMO01BQ0lELEdBQUcsRUFBRTtJQUNULENBQUM7RUFFVCxDQUFDO0VBQ0RFLElBQUksRUFBRSxDQUFDLHNCQUFzQjtBQUNqQyxDQUFDO0FBRURDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHWCxPQUFPIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["version","require","dotenv","config","options","definition","openapi","info","title","license","name","url","servers","apis","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/docs/","sources":["swaggerDef.js"],"sourcesContent":["const { version } = require(\"../../package.json\");\nconst dotenv = require(\"dotenv\").config();\n\nconst options = {\n    definition: {\n        openapi: \"3.1.0\",\n        info: {\n            title: \"AIT API documentation\",\n            version,\n            license: {\n                name: \"MIT\",\n                url: \"\",\n            },\n        },\n        servers: [\n            {\n                url: \"http://localhost:3000\",\n            },\n        ],\n    },\n    apis: [\"./routes/v1/index.js\"],\n};\n\nmodule.exports = options;\n"],"mappings":"AAAA,MAAM;EAAEA;AAAQ,CAAC,GAAGC,OAAO,CAAC,oBAAoB,CAAC;AACjD,MAAMC,MAAM,GAAGD,OAAO,CAAC,QAAQ,CAAC,CAACE,MAAM,CAAC,CAAC;AAEzC,MAAMC,OAAO,GAAG;EACZC,UAAU,EAAE;IACRC,OAAO,EAAE,OAAO;IAChBC,IAAI,EAAE;MACFC,KAAK,EAAE,uBAAuB;MAC9BR,OAAO;MACPS,OAAO,EAAE;QACLC,IAAI,EAAE,KAAK;QACXC,GAAG,EAAE;MACT;IACJ,CAAC;IACDC,OAAO,EAAE,CACL;MACID,GAAG,EAAE;IACT,CAAC;EAET,CAAC;EACDE,IAAI,EAAE,CAAC,sBAAsB;AACjC,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAGX,OAAO","ignoreList":[]}},"mtime":1716176296248},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/auth.route.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const express = require(\"express\");\nconst validate = require(\"../../middlewares/validate\");\nconst authValidation = require(\"../../validations/userValidation\");\nconst authController = require(\"../../controllers/auth.controller\");\nconst auth = require(\"../../middlewares/auth\");\nconst router = express.Router();\nrouter.post(\"/register\", validate(authValidation.register), authController.register);\nrouter.post(\"/login\", validate(authValidation.login), authController.login);\nrouter.post(\"/logout\", validate(authValidation.logout), authController.logout);\nrouter.post(\"/refresh-tokens\", validate(authValidation.refreshTokens), authController.refreshTokens);\nrouter.post(\"/forgot-password\", validate(authValidation.forgotPassword), authController.forgotPassword);\nrouter.post(\"/reset-password\", validate(authValidation.resetPassword), authController.resetPassword);\nrouter.post(\"/send-verification-email\", auth(), authController.sendVerificationEmail);\nrouter.post(\"/verify-email\", validate(authValidation.verifyEmail), authController.verifyEmail);\nmodule.exports = router;\n\n/**\n * @swagger\n * tags:\n *   name: Auth\n *   description: Authentication\n */\n\n/**\n * @swagger\n * /auth/register:\n *   post:\n *     summary: Register as user\n *     tags: [Auth]\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - name\n *               - email\n *               - password\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *     responses:\n *       \"201\":\n *         description: Created\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 user:\n *                   $ref: '#/components/schemas/User'\n *                 tokens:\n *                   $ref: '#/components/schemas/AuthTokens'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n */\n\n/**\n * @swagger\n * /auth/login:\n *   post:\n *     summary: Login\n *     tags: [Auth]\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - email\n *               - password\n *             properties:\n *               email:\n *                 type: string\n *                 format: email\n *               password:\n *                 type: string\n *                 format: password\n *             example:\n *               email: fake@example.com\n *               password: password1\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 user:\n *                   $ref: '#/components/schemas/User'\n *                 tokens:\n *                   $ref: '#/components/schemas/AuthTokens'\n *       \"401\":\n *         description: Invalid email or password\n *         content:\n *           application/json:\n *             schema:\n *               $ref: '#/components/schemas/Error'\n *             example:\n *               code: 401\n *               message: Invalid email or password\n */\n\n/**\n * @swagger\n * /auth/logout:\n *   post:\n *     summary: Logout\n *     tags: [Auth]\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - refreshToken\n *             properties:\n *               refreshToken:\n *                 type: string\n *             example:\n *               refreshToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1ZWJhYzUzNDk1NGI1NDEzOTgwNmMxMTIiLCJpYXQiOjE1ODkyOTg0ODQsImV4cCI6MTU4OTMwMDI4NH0.m1U63blB0MLej_WfB7yC2FTMnCziif9X8yzwDEfJXAg\n *     responses:\n *       \"204\":\n *         description: No content\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n */\n\n/**\n * @swagger\n * /auth/refresh-tokens:\n *   post:\n *     summary: Refresh auth tokens\n *     tags: [Auth]\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - refreshToken\n *             properties:\n *               refreshToken:\n *                 type: string\n *             example:\n *               refreshToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1ZWJhYzUzNDk1NGI1NDEzOTgwNmMxMTIiLCJpYXQiOjE1ODkyOTg0ODQsImV4cCI6MTU4OTMwMDI4NH0.m1U63blB0MLej_WfB7yC2FTMnCziif9X8yzwDEfJXAg\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *               $ref: '#/components/schemas/AuthTokens'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n */\n\n/**\n * @swagger\n * /auth/forgot-password:\n *   post:\n *     summary: Forgot password\n *     description: An email will be sent to reset password.\n *     tags: [Auth]\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - email\n *             properties:\n *               email:\n *                 type: string\n *                 format: email\n *             example:\n *               email: fake@example.com\n *     responses:\n *       \"204\":\n *         description: No content\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n */\n\n/**\n * @swagger\n * /auth/reset-password:\n *   post:\n *     summary: Reset password\n *     tags: [Auth]\n *     parameters:\n *       - in: query\n *         name: token\n *         required: true\n *         schema:\n *           type: string\n *         description: The reset password token\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - password\n *             properties:\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *             example:\n *               password: password1\n *     responses:\n *       \"204\":\n *         description: No content\n *       \"401\":\n *         description: Password reset failed\n *         content:\n *           application/json:\n *             schema:\n *               $ref: '#/components/schemas/Error'\n *             example:\n *               code: 401\n *               message: Password reset failed\n */\n\n/**\n * @swagger\n * /auth/send-verification-email:\n *   post:\n *     summary: Send verification email\n *     description: An email will be sent to verify email.\n *     tags: [Auth]\n *     security:\n *       - bearerAuth: []\n *     responses:\n *       \"204\":\n *         description: No content\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n */\n\n/**\n * @swagger\n * /auth/verify-email:\n *   post:\n *     summary: verify email\n *     tags: [Auth]\n *     parameters:\n *       - in: query\n *         name: token\n *         required: true\n *         schema:\n *           type: string\n *         description: The verify email token\n *     responses:\n *       \"204\":\n *         description: No content\n *       \"401\":\n *         description: verify email failed\n *         content:\n *           application/json:\n *             schema:\n *               $ref: '#/components/schemas/Error'\n *             example:\n *               code: 401\n *               message: verify email failed\n */\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInZhbGlkYXRlIiwiYXV0aFZhbGlkYXRpb24iLCJhdXRoQ29udHJvbGxlciIsImF1dGgiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwicmVnaXN0ZXIiLCJsb2dpbiIsImxvZ291dCIsInJlZnJlc2hUb2tlbnMiLCJmb3Jnb3RQYXNzd29yZCIsInJlc2V0UGFzc3dvcmQiLCJzZW5kVmVyaWZpY2F0aW9uRW1haWwiLCJ2ZXJpZnlFbWFpbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy9yb3V0ZXMvdjEvIiwic291cmNlcyI6WyJhdXRoLnJvdXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKFwiZXhwcmVzc1wiKTtcbmNvbnN0IHZhbGlkYXRlID0gcmVxdWlyZShcIi4uLy4uL21pZGRsZXdhcmVzL3ZhbGlkYXRlXCIpO1xuY29uc3QgYXV0aFZhbGlkYXRpb24gPSByZXF1aXJlKFwiLi4vLi4vdmFsaWRhdGlvbnMvdXNlclZhbGlkYXRpb25cIik7XG5jb25zdCBhdXRoQ29udHJvbGxlciA9IHJlcXVpcmUoXCIuLi8uLi9jb250cm9sbGVycy9hdXRoLmNvbnRyb2xsZXJcIik7XG5jb25zdCBhdXRoID0gcmVxdWlyZShcIi4uLy4uL21pZGRsZXdhcmVzL2F1dGhcIik7XG5cbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbnJvdXRlci5wb3N0KFxuICAgIFwiL3JlZ2lzdGVyXCIsXG4gICAgdmFsaWRhdGUoYXV0aFZhbGlkYXRpb24ucmVnaXN0ZXIpLFxuICAgIGF1dGhDb250cm9sbGVyLnJlZ2lzdGVyXG4pO1xucm91dGVyLnBvc3QoXCIvbG9naW5cIiwgdmFsaWRhdGUoYXV0aFZhbGlkYXRpb24ubG9naW4pLCBhdXRoQ29udHJvbGxlci5sb2dpbik7XG5yb3V0ZXIucG9zdChcIi9sb2dvdXRcIiwgdmFsaWRhdGUoYXV0aFZhbGlkYXRpb24ubG9nb3V0KSwgYXV0aENvbnRyb2xsZXIubG9nb3V0KTtcbnJvdXRlci5wb3N0KFxuICAgIFwiL3JlZnJlc2gtdG9rZW5zXCIsXG4gICAgdmFsaWRhdGUoYXV0aFZhbGlkYXRpb24ucmVmcmVzaFRva2VucyksXG4gICAgYXV0aENvbnRyb2xsZXIucmVmcmVzaFRva2Vuc1xuKTtcbnJvdXRlci5wb3N0KFxuICAgIFwiL2ZvcmdvdC1wYXNzd29yZFwiLFxuICAgIHZhbGlkYXRlKGF1dGhWYWxpZGF0aW9uLmZvcmdvdFBhc3N3b3JkKSxcbiAgICBhdXRoQ29udHJvbGxlci5mb3Jnb3RQYXNzd29yZFxuKTtcbnJvdXRlci5wb3N0KFxuICAgIFwiL3Jlc2V0LXBhc3N3b3JkXCIsXG4gICAgdmFsaWRhdGUoYXV0aFZhbGlkYXRpb24ucmVzZXRQYXNzd29yZCksXG4gICAgYXV0aENvbnRyb2xsZXIucmVzZXRQYXNzd29yZFxuKTtcbnJvdXRlci5wb3N0KFxuICAgIFwiL3NlbmQtdmVyaWZpY2F0aW9uLWVtYWlsXCIsXG4gICAgYXV0aCgpLFxuICAgIGF1dGhDb250cm9sbGVyLnNlbmRWZXJpZmljYXRpb25FbWFpbFxuKTtcbnJvdXRlci5wb3N0KFxuICAgIFwiL3ZlcmlmeS1lbWFpbFwiLFxuICAgIHZhbGlkYXRlKGF1dGhWYWxpZGF0aW9uLnZlcmlmeUVtYWlsKSxcbiAgICBhdXRoQ29udHJvbGxlci52ZXJpZnlFbWFpbFxuKTtcblxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XG5cbi8qKlxuICogQHN3YWdnZXJcbiAqIHRhZ3M6XG4gKiAgIG5hbWU6IEF1dGhcbiAqICAgZGVzY3JpcHRpb246IEF1dGhlbnRpY2F0aW9uXG4gKi9cblxuLyoqXG4gKiBAc3dhZ2dlclxuICogL2F1dGgvcmVnaXN0ZXI6XG4gKiAgIHBvc3Q6XG4gKiAgICAgc3VtbWFyeTogUmVnaXN0ZXIgYXMgdXNlclxuICogICAgIHRhZ3M6IFtBdXRoXVxuICogICAgIHJlcXVlc3RCb2R5OlxuICogICAgICAgcmVxdWlyZWQ6IHRydWVcbiAqICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgdHlwZTogb2JqZWN0XG4gKiAgICAgICAgICAgICByZXF1aXJlZDpcbiAqICAgICAgICAgICAgICAgLSBuYW1lXG4gKiAgICAgICAgICAgICAgIC0gZW1haWxcbiAqICAgICAgICAgICAgICAgLSBwYXNzd29yZFxuICogICAgICAgICAgICAgcHJvcGVydGllczpcbiAqICAgICAgICAgICAgICAgbmFtZTpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgZW1haWw6XG4gKiAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgZm9ybWF0OiBlbWFpbFxuICogICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBtdXN0IGJlIHVuaXF1ZVxuICogICAgICAgICAgICAgICBwYXNzd29yZDpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICBmb3JtYXQ6IHBhc3N3b3JkXG4gKiAgICAgICAgICAgICAgICAgbWluTGVuZ3RoOiA4XG4gKiAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IEF0IGxlYXN0IG9uZSBudW1iZXIgYW5kIG9uZSBsZXR0ZXJcbiAqICAgICAgICAgICAgIGV4YW1wbGU6XG4gKiAgICAgICAgICAgICAgIG5hbWU6IGZha2UgbmFtZVxuICogICAgICAgICAgICAgICBlbWFpbDogZmFrZUBleGFtcGxlLmNvbVxuICogICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQxXG4gKiAgICAgcmVzcG9uc2VzOlxuICogICAgICAgXCIyMDFcIjpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IENyZWF0ZWRcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICB0eXBlOiBvYmplY3RcbiAqICAgICAgICAgICAgICAgcHJvcGVydGllczpcbiAqICAgICAgICAgICAgICAgICB1c2VyOlxuICogICAgICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL1VzZXInXG4gKiAgICAgICAgICAgICAgICAgdG9rZW5zOlxuICogICAgICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0F1dGhUb2tlbnMnXG4gKiAgICAgICBcIjQwMFwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9EdXBsaWNhdGVFbWFpbCdcbiAqL1xuXG4vKipcbiAqIEBzd2FnZ2VyXG4gKiAvYXV0aC9sb2dpbjpcbiAqICAgcG9zdDpcbiAqICAgICBzdW1tYXJ5OiBMb2dpblxuICogICAgIHRhZ3M6IFtBdXRoXVxuICogICAgIHJlcXVlc3RCb2R5OlxuICogICAgICAgcmVxdWlyZWQ6IHRydWVcbiAqICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgdHlwZTogb2JqZWN0XG4gKiAgICAgICAgICAgICByZXF1aXJlZDpcbiAqICAgICAgICAgICAgICAgLSBlbWFpbFxuICogICAgICAgICAgICAgICAtIHBhc3N3b3JkXG4gKiAgICAgICAgICAgICBwcm9wZXJ0aWVzOlxuICogICAgICAgICAgICAgICBlbWFpbDpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICBmb3JtYXQ6IGVtYWlsXG4gKiAgICAgICAgICAgICAgIHBhc3N3b3JkOlxuICogICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgICAgIGZvcm1hdDogcGFzc3dvcmRcbiAqICAgICAgICAgICAgIGV4YW1wbGU6XG4gKiAgICAgICAgICAgICAgIGVtYWlsOiBmYWtlQGV4YW1wbGUuY29tXG4gKiAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZDFcbiAqICAgICByZXNwb25zZXM6XG4gKiAgICAgICBcIjIwMFwiOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogT0tcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICB0eXBlOiBvYmplY3RcbiAqICAgICAgICAgICAgICAgcHJvcGVydGllczpcbiAqICAgICAgICAgICAgICAgICB1c2VyOlxuICogICAgICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL1VzZXInXG4gKiAgICAgICAgICAgICAgICAgdG9rZW5zOlxuICogICAgICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0F1dGhUb2tlbnMnXG4gKiAgICAgICBcIjQwMVwiOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogSW52YWxpZCBlbWFpbCBvciBwYXNzd29yZFxuICogICAgICAgICBjb250ZW50OlxuICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9FcnJvcidcbiAqICAgICAgICAgICAgIGV4YW1wbGU6XG4gKiAgICAgICAgICAgICAgIGNvZGU6IDQwMVxuICogICAgICAgICAgICAgICBtZXNzYWdlOiBJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkXG4gKi9cblxuLyoqXG4gKiBAc3dhZ2dlclxuICogL2F1dGgvbG9nb3V0OlxuICogICBwb3N0OlxuICogICAgIHN1bW1hcnk6IExvZ291dFxuICogICAgIHRhZ3M6IFtBdXRoXVxuICogICAgIHJlcXVlc3RCb2R5OlxuICogICAgICAgcmVxdWlyZWQ6IHRydWVcbiAqICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgdHlwZTogb2JqZWN0XG4gKiAgICAgICAgICAgICByZXF1aXJlZDpcbiAqICAgICAgICAgICAgICAgLSByZWZyZXNoVG9rZW5cbiAqICAgICAgICAgICAgIHByb3BlcnRpZXM6XG4gKiAgICAgICAgICAgICAgIHJlZnJlc2hUb2tlbjpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgIGV4YW1wbGU6XG4gKiAgICAgICAgICAgICAgIHJlZnJlc2hUb2tlbjogZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SnpkV0lpT2lJMVpXSmhZelV6TkRrMU5HSTFOREV6T1Rnd05tTXhNVElpTENKcFlYUWlPakUxT0RreU9UZzBPRFFzSW1WNGNDSTZNVFU0T1RNd01ESTROSDAubTFVNjNibEIwTUxlal9XZkI3eUMyRlRNbkN6aWlmOVg4eXp3REVmSlhBZ1xuICogICAgIHJlc3BvbnNlczpcbiAqICAgICAgIFwiMjA0XCI6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBObyBjb250ZW50XG4gKiAgICAgICBcIjQwNFwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Ob3RGb3VuZCdcbiAqL1xuXG4vKipcbiAqIEBzd2FnZ2VyXG4gKiAvYXV0aC9yZWZyZXNoLXRva2VuczpcbiAqICAgcG9zdDpcbiAqICAgICBzdW1tYXJ5OiBSZWZyZXNoIGF1dGggdG9rZW5zXG4gKiAgICAgdGFnczogW0F1dGhdXG4gKiAgICAgcmVxdWVzdEJvZHk6XG4gKiAgICAgICByZXF1aXJlZDogdHJ1ZVxuICogICAgICAgY29udGVudDpcbiAqICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICB0eXBlOiBvYmplY3RcbiAqICAgICAgICAgICAgIHJlcXVpcmVkOlxuICogICAgICAgICAgICAgICAtIHJlZnJlc2hUb2tlblxuICogICAgICAgICAgICAgcHJvcGVydGllczpcbiAqICAgICAgICAgICAgICAgcmVmcmVzaFRva2VuOlxuICogICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgZXhhbXBsZTpcbiAqICAgICAgICAgICAgICAgcmVmcmVzaFRva2VuOiBleUpoYkdjaU9pSklVekkxTmlJc0luUjVjQ0k2SWtwWFZDSjkuZXlKemRXSWlPaUkxWldKaFl6VXpORGsxTkdJMU5ERXpPVGd3Tm1NeE1USWlMQ0pwWVhRaU9qRTFPRGt5T1RnME9EUXNJbVY0Y0NJNk1UVTRPVE13TURJNE5IMC5tMVU2M2JsQjBNTGVqX1dmQjd5QzJGVE1uQ3ppaWY5WDh5endERWZKWEFnXG4gKiAgICAgcmVzcG9uc2VzOlxuICogICAgICAgXCIyMDBcIjpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IE9LXG4gKiAgICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0F1dGhUb2tlbnMnXG4gKiAgICAgICBcIjQwMVwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9VbmF1dGhvcml6ZWQnXG4gKi9cblxuLyoqXG4gKiBAc3dhZ2dlclxuICogL2F1dGgvZm9yZ290LXBhc3N3b3JkOlxuICogICBwb3N0OlxuICogICAgIHN1bW1hcnk6IEZvcmdvdCBwYXNzd29yZFxuICogICAgIGRlc2NyaXB0aW9uOiBBbiBlbWFpbCB3aWxsIGJlIHNlbnQgdG8gcmVzZXQgcGFzc3dvcmQuXG4gKiAgICAgdGFnczogW0F1dGhdXG4gKiAgICAgcmVxdWVzdEJvZHk6XG4gKiAgICAgICByZXF1aXJlZDogdHJ1ZVxuICogICAgICAgY29udGVudDpcbiAqICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICB0eXBlOiBvYmplY3RcbiAqICAgICAgICAgICAgIHJlcXVpcmVkOlxuICogICAgICAgICAgICAgICAtIGVtYWlsXG4gKiAgICAgICAgICAgICBwcm9wZXJ0aWVzOlxuICogICAgICAgICAgICAgICBlbWFpbDpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICBmb3JtYXQ6IGVtYWlsXG4gKiAgICAgICAgICAgICBleGFtcGxlOlxuICogICAgICAgICAgICAgICBlbWFpbDogZmFrZUBleGFtcGxlLmNvbVxuICogICAgIHJlc3BvbnNlczpcbiAqICAgICAgIFwiMjA0XCI6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBObyBjb250ZW50XG4gKiAgICAgICBcIjQwNFwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Ob3RGb3VuZCdcbiAqL1xuXG4vKipcbiAqIEBzd2FnZ2VyXG4gKiAvYXV0aC9yZXNldC1wYXNzd29yZDpcbiAqICAgcG9zdDpcbiAqICAgICBzdW1tYXJ5OiBSZXNldCBwYXNzd29yZFxuICogICAgIHRhZ3M6IFtBdXRoXVxuICogICAgIHBhcmFtZXRlcnM6XG4gKiAgICAgICAtIGluOiBxdWVyeVxuICogICAgICAgICBuYW1lOiB0b2tlblxuICogICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICogICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBUaGUgcmVzZXQgcGFzc3dvcmQgdG9rZW5cbiAqICAgICByZXF1ZXN0Qm9keTpcbiAqICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gKiAgICAgICBjb250ZW50OlxuICogICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgIHR5cGU6IG9iamVjdFxuICogICAgICAgICAgICAgcmVxdWlyZWQ6XG4gKiAgICAgICAgICAgICAgIC0gcGFzc3dvcmRcbiAqICAgICAgICAgICAgIHByb3BlcnRpZXM6XG4gKiAgICAgICAgICAgICAgIHBhc3N3b3JkOlxuICogICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgICAgIGZvcm1hdDogcGFzc3dvcmRcbiAqICAgICAgICAgICAgICAgICBtaW5MZW5ndGg6IDhcbiAqICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogQXQgbGVhc3Qgb25lIG51bWJlciBhbmQgb25lIGxldHRlclxuICogICAgICAgICAgICAgZXhhbXBsZTpcbiAqICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkMVxuICogICAgIHJlc3BvbnNlczpcbiAqICAgICAgIFwiMjA0XCI6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBObyBjb250ZW50XG4gKiAgICAgICBcIjQwMVwiOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogUGFzc3dvcmQgcmVzZXQgZmFpbGVkXG4gKiAgICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0Vycm9yJ1xuICogICAgICAgICAgICAgZXhhbXBsZTpcbiAqICAgICAgICAgICAgICAgY29kZTogNDAxXG4gKiAgICAgICAgICAgICAgIG1lc3NhZ2U6IFBhc3N3b3JkIHJlc2V0IGZhaWxlZFxuICovXG5cbi8qKlxuICogQHN3YWdnZXJcbiAqIC9hdXRoL3NlbmQtdmVyaWZpY2F0aW9uLWVtYWlsOlxuICogICBwb3N0OlxuICogICAgIHN1bW1hcnk6IFNlbmQgdmVyaWZpY2F0aW9uIGVtYWlsXG4gKiAgICAgZGVzY3JpcHRpb246IEFuIGVtYWlsIHdpbGwgYmUgc2VudCB0byB2ZXJpZnkgZW1haWwuXG4gKiAgICAgdGFnczogW0F1dGhdXG4gKiAgICAgc2VjdXJpdHk6XG4gKiAgICAgICAtIGJlYXJlckF1dGg6IFtdXG4gKiAgICAgcmVzcG9uc2VzOlxuICogICAgICAgXCIyMDRcIjpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IE5vIGNvbnRlbnRcbiAqICAgICAgIFwiNDAxXCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL1VuYXV0aG9yaXplZCdcbiAqL1xuXG4vKipcbiAqIEBzd2FnZ2VyXG4gKiAvYXV0aC92ZXJpZnktZW1haWw6XG4gKiAgIHBvc3Q6XG4gKiAgICAgc3VtbWFyeTogdmVyaWZ5IGVtYWlsXG4gKiAgICAgdGFnczogW0F1dGhdXG4gKiAgICAgcGFyYW1ldGVyczpcbiAqICAgICAgIC0gaW46IHF1ZXJ5XG4gKiAgICAgICAgIG5hbWU6IHRva2VuXG4gKiAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFRoZSB2ZXJpZnkgZW1haWwgdG9rZW5cbiAqICAgICByZXNwb25zZXM6XG4gKiAgICAgICBcIjIwNFwiOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogTm8gY29udGVudFxuICogICAgICAgXCI0MDFcIjpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IHZlcmlmeSBlbWFpbCBmYWlsZWRcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvRXJyb3InXG4gKiAgICAgICAgICAgICBleGFtcGxlOlxuICogICAgICAgICAgICAgICBjb2RlOiA0MDFcbiAqICAgICAg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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["express","require","validate","authValidation","authController","auth","router","Router","post","register","login","logout","refreshTokens","forgotPassword","resetPassword","sendVerificationEmail","verifyEmail","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/","sources":["auth.route.js"],"sourcesContent":["const express = require(\"express\");\nconst validate = require(\"../../middlewares/validate\");\nconst authValidation = require(\"../../validations/userValidation\");\nconst authController = require(\"../../controllers/auth.controller\");\nconst auth = require(\"../../middlewares/auth\");\n\nconst router = express.Router();\n\nrouter.post(\n    \"/register\",\n    validate(authValidation.register),\n    authController.register\n);\nrouter.post(\"/login\", validate(authValidation.login), authController.login);\nrouter.post(\"/logout\", validate(authValidation.logout), authController.logout);\nrouter.post(\n    \"/refresh-tokens\",\n    validate(authValidation.refreshTokens),\n    authController.refreshTokens\n);\nrouter.post(\n    \"/forgot-password\",\n    validate(authValidation.forgotPassword),\n    authController.forgotPassword\n);\nrouter.post(\n    \"/reset-password\",\n    validate(authValidation.resetPassword),\n    authController.resetPassword\n);\nrouter.post(\n    \"/send-verification-email\",\n    auth(),\n    authController.sendVerificationEmail\n);\nrouter.post(\n    \"/verify-email\",\n    validate(authValidation.verifyEmail),\n    authController.verifyEmail\n);\n\nmodule.exports = router;\n\n/**\n * @swagger\n * tags:\n *   name: Auth\n *   description: Authentication\n */\n\n/**\n * @swagger\n * /auth/register:\n *   post:\n *     summary: Register as user\n *     tags: [Auth]\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - name\n *               - email\n *               - password\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *     responses:\n *       \"201\":\n *         description: Created\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 user:\n *                   $ref: '#/components/schemas/User'\n *                 tokens:\n *                   $ref: '#/components/schemas/AuthTokens'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n */\n\n/**\n * @swagger\n * /auth/login:\n *   post:\n *     summary: Login\n *     tags: [Auth]\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - email\n *               - password\n *             properties:\n *               email:\n *                 type: string\n *                 format: email\n *               password:\n *                 type: string\n *                 format: password\n *             example:\n *               email: fake@example.com\n *               password: password1\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 user:\n *                   $ref: '#/components/schemas/User'\n *                 tokens:\n *                   $ref: '#/components/schemas/AuthTokens'\n *       \"401\":\n *         description: Invalid email or password\n *         content:\n *           application/json:\n *             schema:\n *               $ref: '#/components/schemas/Error'\n *             example:\n *               code: 401\n *               message: Invalid email or password\n */\n\n/**\n * @swagger\n * /auth/logout:\n *   post:\n *     summary: Logout\n *     tags: [Auth]\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - refreshToken\n *             properties:\n *               refreshToken:\n *                 type: string\n *             example:\n *               refreshToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1ZWJhYzUzNDk1NGI1NDEzOTgwNmMxMTIiLCJpYXQiOjE1ODkyOTg0ODQsImV4cCI6MTU4OTMwMDI4NH0.m1U63blB0MLej_WfB7yC2FTMnCziif9X8yzwDEfJXAg\n *     responses:\n *       \"204\":\n *         description: No content\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n */\n\n/**\n * @swagger\n * /auth/refresh-tokens:\n *   post:\n *     summary: Refresh auth tokens\n *     tags: [Auth]\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - refreshToken\n *             properties:\n *               refreshToken:\n *                 type: string\n *             example:\n *               refreshToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1ZWJhYzUzNDk1NGI1NDEzOTgwNmMxMTIiLCJpYXQiOjE1ODkyOTg0ODQsImV4cCI6MTU4OTMwMDI4NH0.m1U63blB0MLej_WfB7yC2FTMnCziif9X8yzwDEfJXAg\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *               $ref: '#/components/schemas/AuthTokens'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n */\n\n/**\n * @swagger\n * /auth/forgot-password:\n *   post:\n *     summary: Forgot password\n *     description: An email will be sent to reset password.\n *     tags: [Auth]\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - email\n *             properties:\n *               email:\n *                 type: string\n *                 format: email\n *             example:\n *               email: fake@example.com\n *     responses:\n *       \"204\":\n *         description: No content\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n */\n\n/**\n * @swagger\n * /auth/reset-password:\n *   post:\n *     summary: Reset password\n *     tags: [Auth]\n *     parameters:\n *       - in: query\n *         name: token\n *         required: true\n *         schema:\n *           type: string\n *         description: The reset password token\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - password\n *             properties:\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *             example:\n *               password: password1\n *     responses:\n *       \"204\":\n *         description: No content\n *       \"401\":\n *         description: Password reset failed\n *         content:\n *           application/json:\n *             schema:\n *               $ref: '#/components/schemas/Error'\n *             example:\n *               code: 401\n *               message: Password reset failed\n */\n\n/**\n * @swagger\n * /auth/send-verification-email:\n *   post:\n *     summary: Send verification email\n *     description: An email will be sent to verify email.\n *     tags: [Auth]\n *     security:\n *       - bearerAuth: []\n *     responses:\n *       \"204\":\n *         description: No content\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n */\n\n/**\n * @swagger\n * /auth/verify-email:\n *   post:\n *     summary: verify email\n *     tags: [Auth]\n *     parameters:\n *       - in: query\n *         name: token\n *         required: true\n *         schema:\n *           type: string\n *         description: The verify email token\n *     responses:\n *       \"204\":\n *         description: No content\n *       \"401\":\n *         description: verify email failed\n *         content:\n *           application/json:\n *             schema:\n *               $ref: '#/components/schemas/Error'\n *             example:\n *               code: 401\n *               message: verify email failed\n */\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,QAAQ,GAAGD,OAAO,CAAC,4BAA4B,CAAC;AACtD,MAAME,cAAc,GAAGF,OAAO,CAAC,kCAAkC,CAAC;AAClE,MAAMG,cAAc,GAAGH,OAAO,CAAC,mCAAmC,CAAC;AACnE,MAAMI,IAAI,GAAGJ,OAAO,CAAC,wBAAwB,CAAC;AAE9C,MAAMK,MAAM,GAAGN,OAAO,CAACO,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,IAAI,CACP,WAAW,EACXN,QAAQ,CAACC,cAAc,CAACM,QAAQ,CAAC,EACjCL,cAAc,CAACK,QACnB,CAAC;AACDH,MAAM,CAACE,IAAI,CAAC,QAAQ,EAAEN,QAAQ,CAACC,cAAc,CAACO,KAAK,CAAC,EAAEN,cAAc,CAACM,KAAK,CAAC;AAC3EJ,MAAM,CAACE,IAAI,CAAC,SAAS,EAAEN,QAAQ,CAACC,cAAc,CAACQ,MAAM,CAAC,EAAEP,cAAc,CAACO,MAAM,CAAC;AAC9EL,MAAM,CAACE,IAAI,CACP,iBAAiB,EACjBN,QAAQ,CAACC,cAAc,CAACS,aAAa,CAAC,EACtCR,cAAc,CAACQ,aACnB,CAAC;AACDN,MAAM,CAACE,IAAI,CACP,kBAAkB,EAClBN,QAAQ,CAACC,cAAc,CAACU,cAAc,CAAC,EACvCT,cAAc,CAACS,cACnB,CAAC;AACDP,MAAM,CAACE,IAAI,CACP,iBAAiB,EACjBN,QAAQ,CAACC,cAAc,CAACW,aAAa,CAAC,EACtCV,cAAc,CAACU,aACnB,CAAC;AACDR,MAAM,CAACE,IAAI,CACP,0BAA0B,EAC1BH,IAAI,CAAC,CAAC,EACND,cAAc,CAACW,qBACnB,CAAC;AACDT,MAAM,CAACE,IAAI,CACP,eAAe,EACfN,QAAQ,CAACC,cAAc,CAACa,WAAW,CAAC,EACpCZ,cAAc,CAACY,WACnB,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAGZ,MAAM;;AAEvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]}},"mtime":1716023868812},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/controllers/auth.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const {\n  StatusCodes\n} = require(\"http-status-codes\");\nconst MessageFactory = require(\"../utils/messageFactory\");\nconst catchAsync = require(\"../utils/catchAsync\");\nconst {\n  authService,\n  userService,\n  tokenService,\n  emailService\n} = require(\"../services\");\nconst tokenTypes = require(\"../utils/enums/tokenTypesEnum\");\nconst register = catchAsync(async (req, res) => {\n  const user = await userService.createUser(req.body);\n  res.status(StatusCodes.OK).json(MessageFactory.success(user, \"Get all wishlist tool success!\"));\n});\nconst login = catchAsync(async (req, res) => {\n  const {\n    email,\n    password\n  } = req.body;\n  const user = await authService.loginUserWithEmailAndPassword(email, password);\n  const tokens = await tokenService.generateAuthTokens(user);\n  res.send({\n    user,\n    tokens\n  });\n});\nconst logout = catchAsync(async (req, res) => {\n  await authService.logout(req.body.refreshToken);\n  res.status(StatusCodes.OK).json(MessageFactory.success(\"\", \"Get all wishlist tool success!\"));\n});\nconst refreshTokens = catchAsync(async (req, res) => {\n  const tokens = await authService.refreshAuth(req.body.refreshToken);\n  res.send({\n    ...tokens\n  });\n});\nconst forgotPassword = catchAsync(async (req, res) => {\n  const resetPasswordToken = await tokenService.generateResetPasswordToken(req.body.email);\n  await emailService.sendResetPasswordEmail(req.body.email, resetPasswordToken);\n  res.status(StatusCodes.OK).json(MessageFactory.success(null, \"Get all wishlist tool success!\"));\n});\nconst resetPassword = catchAsync(async (req, res) => {\n  await authService.resetPassword(req.query.token, req.body.password);\n  res.status(StatusCodes.OK).json(MessageFactory.success(null, \"Get all wishlist tool success!\"));\n});\nconst sendVerificationEmail = catchAsync(async (req, res) => {\n  const verifyEmailToken = await tokenService.generateVerifyEmailToken(req.user);\n  await emailService.sendVerificationEmail(req.user.email, verifyEmailToken);\n  res.status(StatusCodes.OK).json(MessageFactory.success(null, \"Get all wishlist tool success!\"));\n});\nconst verifyEmail = catchAsync(async (req, res) => {\n  await authService.verifyEmail(req.query.token);\n  res.status(StatusCodes.OK).json(MessageFactory.success(null, \"Get all wishlist tool success!\"));\n});\nmodule.exports = {\n  register,\n  login,\n  logout,\n  refreshTokens,\n  forgotPassword,\n  resetPassword,\n  sendVerificationEmail,\n  verifyEmail\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTdGF0dXNDb2RlcyIsInJlcXVpcmUiLCJNZXNzYWdlRmFjdG9yeSIsImNhdGNoQXN5bmMiLCJhdXRoU2VydmljZSIsInVzZXJTZXJ2aWNlIiwidG9rZW5TZXJ2aWNlIiwiZW1haWxTZXJ2aWNlIiwidG9rZW5UeXBlcyIsInJlZ2lzdGVyIiwicmVxIiwicmVzIiwidXNlciIsImNyZWF0ZVVzZXIiLCJib2R5Iiwic3RhdHVzIiwiT0siLCJqc29uIiwic3VjY2VzcyIsImxvZ2luIiwiZW1haWwiLCJwYXNzd29yZCIsImxvZ2luVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkIiwidG9rZW5zIiwiZ2VuZXJhdGVBdXRoVG9rZW5zIiwic2VuZCIsImxvZ291dCIsInJlZnJlc2hUb2tlbiIsInJlZnJlc2hUb2tlbnMiLCJyZWZyZXNoQXV0aCIsImZvcmdvdFBhc3N3b3JkIiwicmVzZXRQYXNzd29yZFRva2VuIiwiZ2VuZXJhdGVSZXNldFBhc3N3b3JkVG9rZW4iLCJzZW5kUmVzZXRQYXNzd29yZEVtYWlsIiwicmVzZXRQYXNzd29yZCIsInF1ZXJ5IiwidG9rZW4iLCJzZW5kVmVyaWZpY2F0aW9uRW1haWwiLCJ2ZXJpZnlFbWFpbFRva2VuIiwiZ2VuZXJhdGVWZXJpZnlFbWFpbFRva2VuIiwidmVyaWZ5RW1haWwiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdnVvbmdrbWEvaUNsb3VkIERyaXZlIChBcmNoaXZlKS9Eb2N1bWVudHMva2NuZC9zcmMvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJhdXRoLmNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBTdGF0dXNDb2RlcyB9ID0gcmVxdWlyZShcImh0dHAtc3RhdHVzLWNvZGVzXCIpO1xuY29uc3QgTWVzc2FnZUZhY3RvcnkgPSByZXF1aXJlKFwiLi4vdXRpbHMvbWVzc2FnZUZhY3RvcnlcIik7XG5jb25zdCBjYXRjaEFzeW5jID0gcmVxdWlyZShcIi4uL3V0aWxzL2NhdGNoQXN5bmNcIik7XG5jb25zdCB7XG4gICAgYXV0aFNlcnZpY2UsXG4gICAgdXNlclNlcnZpY2UsXG4gICAgdG9rZW5TZXJ2aWNlLFxuICAgIGVtYWlsU2VydmljZSxcbn0gPSByZXF1aXJlKFwiLi4vc2VydmljZXNcIik7XG5jb25zdCB0b2tlblR5cGVzID0gcmVxdWlyZShcIi4uL3V0aWxzL2VudW1zL3Rva2VuVHlwZXNFbnVtXCIpO1xuXG5jb25zdCByZWdpc3RlciA9IGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHVzZXJTZXJ2aWNlLmNyZWF0ZVVzZXIocmVxLmJvZHkpO1xuXG4gICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5PSykuanNvbihcbiAgICAgICAgTWVzc2FnZUZhY3Rvcnkuc3VjY2Vzcyh1c2VyLCBcIkdldCBhbGwgd2lzaGxpc3QgdG9vbCBzdWNjZXNzIVwiKVxuICAgICk7XG59KTtcblxuY29uc3QgbG9naW4gPSBjYXRjaEFzeW5jKGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgYXV0aFNlcnZpY2UubG9naW5Vc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQoXG4gICAgICAgIGVtYWlsLFxuICAgICAgICBwYXNzd29yZFxuICAgICk7XG4gICAgY29uc3QgdG9rZW5zID0gYXdhaXQgdG9rZW5TZXJ2aWNlLmdlbmVyYXRlQXV0aFRva2Vucyh1c2VyKTtcbiAgICByZXMuc2VuZCh7IHVzZXIsIHRva2VucyB9KTtcbn0pO1xuXG5jb25zdCBsb2dvdXQgPSBjYXRjaEFzeW5jKGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGF3YWl0IGF1dGhTZXJ2aWNlLmxvZ291dChyZXEuYm9keS5yZWZyZXNoVG9rZW4pO1xuICAgIHJlcy5zdGF0dXMoU3RhdHVzQ29kZXMuT0spLmpzb24oXG4gICAgICAgIE1lc3NhZ2VGYWN0b3J5LnN1Y2Nlc3MoXCJcIiwgXCJHZXQgYWxsIHdpc2hsaXN0IHRvb2wgc3VjY2VzcyFcIilcbiAgICApO1xufSk7XG5cbmNvbnN0IHJlZnJlc2hUb2tlbnMgPSBjYXRjaEFzeW5jKGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHRva2VucyA9IGF3YWl0IGF1dGhTZXJ2aWNlLnJlZnJlc2hBdXRoKHJlcS5ib2R5LnJlZnJlc2hUb2tlbik7XG4gICAgcmVzLnNlbmQoeyAuLi50b2tlbnMgfSk7XG59KTtcblxuY29uc3QgZm9yZ290UGFzc3dvcmQgPSBjYXRjaEFzeW5jKGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHJlc2V0UGFzc3dvcmRUb2tlbiA9IGF3YWl0IHRva2VuU2VydmljZS5nZW5lcmF0ZVJlc2V0UGFzc3dvcmRUb2tlbihcbiAgICAgICAgcmVxLmJvZHkuZW1haWxcbiAgICApO1xuICAgIGF3YWl0IGVtYWlsU2VydmljZS5zZW5kUmVzZXRQYXNzd29yZEVtYWlsKFxuICAgICAgICByZXEuYm9keS5lbWFpbCxcbiAgICAgICAgcmVzZXRQYXNzd29yZFRva2VuXG4gICAgKTtcbiAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLk9LKS5qc29uKFxuICAgICAgICBNZXNzYWdlRmFjdG9yeS5zdWNjZXNzKG51bGwsIFwiR2V0IGFsbCB3aXNobGlzdCB0b29sIHN1Y2Nlc3MhXCIpXG4gICAgKTtcbn0pO1xuXG5jb25zdCByZXNldFBhc3N3b3JkID0gY2F0Y2hBc3luYyhhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBhd2FpdCBhdXRoU2VydmljZS5yZXNldFBhc3N3b3JkKHJlcS5xdWVyeS50b2tlbiwgcmVxLmJvZHkucGFzc3dvcmQpO1xuICAgIHJlcy5zdGF0dXMoU3RhdHVzQ29kZXMuT0spLmpzb24oXG4gICAgICAgIE1lc3NhZ2VGYWN0b3J5LnN1Y2Nlc3MobnVsbCwgXCJHZXQgYWxsIHdpc2hsaXN0IHRvb2wgc3VjY2VzcyFcIilcbiAgICApO1xufSk7XG5cbmNvbnN0IHNlbmRWZXJpZmljYXRpb25FbWFpbCA9IGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgdmVyaWZ5RW1haWxUb2tlbiA9IGF3YWl0IHRva2VuU2VydmljZS5nZW5lcmF0ZVZlcmlmeUVtYWlsVG9rZW4oXG4gICAgICAgIHJlcS51c2VyXG4gICAgKTtcbiAgICBhd2FpdCBlbWFpbFNlcnZpY2Uuc2VuZFZlcmlmaWNhdGlvbkVtYWlsKHJlcS51c2VyLmVtYWlsLCB2ZXJpZnlFbWFpbFRva2VuKTtcbiAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLk9LKS5qc29uKFxuICAgICAgICBNZXNzYWdlRmFjdG9yeS5zdWNjZXNzKG51bGwsIFwiR2V0IGFsbCB3aXNobGlzdCB0b29sIHN1Y2Nlc3MhXCIpXG4gICAgKTtcbn0pO1xuXG5jb25zdCB2ZXJpZnlFbWFpbCA9IGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgYXdhaXQgYXV0aFNlcnZpY2UudmVyaWZ5RW1haWwocmVxLnF1ZXJ5LnRva2VuKTtcbiAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLk9LKS5qc29uKFxuICAgICAgICBNZXNzYWdlRmFjdG9yeS5zdWNjZXNzKG51bGwsIFwiR2V0IGFsbCB3aXNobGlzdCB0b29sIHN1Y2Nlc3MhXCIpXG4gICAgKTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICByZWdpc3RlcixcbiAgICBsb2dpbixcbiAgICBsb2dvdXQsXG4gICAgcmVmcmVzaFRva2VucyxcbiAgICBmb3Jnb3RQYXNzd29yZCxcbiAgICByZXNldFBhc3N3b3JkLFxuICAgIHNlbmRWZXJpZmljYXRpb25FbWFpbCxcbiAgICB2ZXJpZnlFbWFpbCxcbn07XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUE7QUFBWSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztBQUNwRCxNQUFNQyxjQUFjLEdBQUdELE9BQU8sQ0FBQyx5QkFBeUIsQ0FBQztBQUN6RCxNQUFN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","map":{"version":3,"names":["StatusCodes","require","MessageFactory","catchAsync","authService","userService","tokenService","emailService","tokenTypes","register","req","res","user","createUser","body","status","OK","json","success","login","email","password","loginUserWithEmailAndPassword","tokens","generateAuthTokens","send","logout","refreshToken","refreshTokens","refreshAuth","forgotPassword","resetPasswordToken","generateResetPasswordToken","sendResetPasswordEmail","resetPassword","query","token","sendVerificationEmail","verifyEmailToken","generateVerifyEmailToken","verifyEmail","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/controllers/","sources":["auth.controller.js"],"sourcesContent":["const { StatusCodes } = require(\"http-status-codes\");\nconst MessageFactory = require(\"../utils/messageFactory\");\nconst catchAsync = require(\"../utils/catchAsync\");\nconst {\n    authService,\n    userService,\n    tokenService,\n    emailService,\n} = require(\"../services\");\nconst tokenTypes = require(\"../utils/enums/tokenTypesEnum\");\n\nconst register = catchAsync(async (req, res) => {\n    const user = await userService.createUser(req.body);\n\n    res.status(StatusCodes.OK).json(\n        MessageFactory.success(user, \"Get all wishlist tool success!\")\n    );\n});\n\nconst login = catchAsync(async (req, res) => {\n    const { email, password } = req.body;\n    const user = await authService.loginUserWithEmailAndPassword(\n        email,\n        password\n    );\n    const tokens = await tokenService.generateAuthTokens(user);\n    res.send({ user, tokens });\n});\n\nconst logout = catchAsync(async (req, res) => {\n    await authService.logout(req.body.refreshToken);\n    res.status(StatusCodes.OK).json(\n        MessageFactory.success(\"\", \"Get all wishlist tool success!\")\n    );\n});\n\nconst refreshTokens = catchAsync(async (req, res) => {\n    const tokens = await authService.refreshAuth(req.body.refreshToken);\n    res.send({ ...tokens });\n});\n\nconst forgotPassword = catchAsync(async (req, res) => {\n    const resetPasswordToken = await tokenService.generateResetPasswordToken(\n        req.body.email\n    );\n    await emailService.sendResetPasswordEmail(\n        req.body.email,\n        resetPasswordToken\n    );\n    res.status(StatusCodes.OK).json(\n        MessageFactory.success(null, \"Get all wishlist tool success!\")\n    );\n});\n\nconst resetPassword = catchAsync(async (req, res) => {\n    await authService.resetPassword(req.query.token, req.body.password);\n    res.status(StatusCodes.OK).json(\n        MessageFactory.success(null, \"Get all wishlist tool success!\")\n    );\n});\n\nconst sendVerificationEmail = catchAsync(async (req, res) => {\n    const verifyEmailToken = await tokenService.generateVerifyEmailToken(\n        req.user\n    );\n    await emailService.sendVerificationEmail(req.user.email, verifyEmailToken);\n    res.status(StatusCodes.OK).json(\n        MessageFactory.success(null, \"Get all wishlist tool success!\")\n    );\n});\n\nconst verifyEmail = catchAsync(async (req, res) => {\n    await authService.verifyEmail(req.query.token);\n    res.status(StatusCodes.OK).json(\n        MessageFactory.success(null, \"Get all wishlist tool success!\")\n    );\n});\n\nmodule.exports = {\n    register,\n    login,\n    logout,\n    refreshTokens,\n    forgotPassword,\n    resetPassword,\n    sendVerificationEmail,\n    verifyEmail,\n};\n"],"mappings":"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","ignoreList":[]}},"mtime":1727167308680},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/catchAsync.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const catchAsync = fn => (req, res, next) => {\n  Promise.resolve(fn(req, res, next)).catch(err => next(err));\n};\nmodule.exports = catchAsync;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjYXRjaEFzeW5jIiwiZm4iLCJyZXEiLCJyZXMiLCJuZXh0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJjYXRjaCIsImVyciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy91dGlscy8iLCJzb3VyY2VzIjpbImNhdGNoQXN5bmMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgY2F0Y2hBc3luYyA9IChmbikgPT4gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIFByb21pc2UucmVzb2x2ZShmbihyZXEsIHJlcywgbmV4dCkpLmNhdGNoKChlcnIpID0+IG5leHQoZXJyKSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNhdGNoQXN5bmM7XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFVBQVUsR0FBSUMsRUFBRSxJQUFLLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDN0NDLE9BQU8sQ0FBQ0MsT0FBTyxDQUFDTCxFQUFFLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLENBQUMsQ0FBQyxDQUFDRyxLQUFLLENBQUVDLEdBQUcsSUFBS0osSUFBSSxDQUFDSSxHQUFHLENBQUMsQ0FBQztBQUMvRCxDQUFDO0FBRURDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHVixVQUFVIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["catchAsync","fn","req","res","next","Promise","resolve","catch","err","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/","sources":["catchAsync.js"],"sourcesContent":["const catchAsync = (fn) => (req, res, next) => {\n  Promise.resolve(fn(req, res, next)).catch((err) => next(err));\n};\n\nmodule.exports = catchAsync;\n"],"mappings":"AAAA,MAAMA,UAAU,GAAIC,EAAE,IAAK,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC7CC,OAAO,CAACC,OAAO,CAACL,EAAE,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,CAAC,CAAC,CAACG,KAAK,CAAEC,GAAG,IAAKJ,IAAI,CAACI,GAAG,CAAC,CAAC;AAC/D,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAGV,UAAU","ignoreList":[]}},"mtime":1691835647000},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"module.exports.authService = require(\"./auth.service\");\nmodule.exports.tokenService = require(\"./token.service\");\nmodule.exports.userService = require(\"./userService\");\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwiYXV0aFNlcnZpY2UiLCJyZXF1aXJlIiwidG9rZW5TZXJ2aWNlIiwidXNlclNlcnZpY2UiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy9zZXJ2aWNlcy8iLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzLmF1dGhTZXJ2aWNlID0gcmVxdWlyZShcIi4vYXV0aC5zZXJ2aWNlXCIpO1xubW9kdWxlLmV4cG9ydHMudG9rZW5TZXJ2aWNlID0gcmVxdWlyZShcIi4vdG9rZW4uc2VydmljZVwiKTtcbm1vZHVsZS5leHBvcnRzLnVzZXJTZXJ2aWNlID0gcmVxdWlyZShcIi4vdXNlclNlcnZpY2VcIik7XG4iXSwibWFwcGluZ3MiOiJBQUFBQSxNQUFNLENBQUNDLE9BQU8sQ0FBQ0MsV0FBVyxHQUFHQyxPQUFPLENBQUMsZ0JBQWdCLENBQUM7QUFDdERILE1BQU0sQ0FBQ0MsT0FBTyxDQUFDRyxZQUFZLEdBQUdELE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQztBQUN4REgsTUFBTSxDQUFDQyxPQUFPLENBQUNJLFdBQVcsR0FBR0YsT0FBTyxDQUFDLGVBQWUsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["module","exports","authService","require","tokenService","userService"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/","sources":["index.js"],"sourcesContent":["module.exports.authService = require(\"./auth.service\");\nmodule.exports.tokenService = require(\"./token.service\");\nmodule.exports.userService = require(\"./userService\");\n"],"mappings":"AAAAA,MAAM,CAACC,OAAO,CAACC,WAAW,GAAGC,OAAO,CAAC,gBAAgB,CAAC;AACtDH,MAAM,CAACC,OAAO,CAACG,YAAY,GAAGD,OAAO,CAAC,iBAAiB,CAAC;AACxDH,MAAM,CAACC,OAAO,CAACI,WAAW,GAAGF,OAAO,CAAC,eAAe,CAAC","ignoreList":[]}},"mtime":1727164737076},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/auth.service.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const {\n  StatusCodes\n} = require(\"http-status-codes\");\nconst tokenService = require(\"./token.service\");\nconst userService = require(\"../services/userService\");\nconst Token = require(\"../models/tokenModel\");\nconst ApiError = require(\"../utils/ApiError\");\n\n/**\n * Login with username and password\n * @param {string} email\n * @param {string} password\n * @returns {Promise<User>}\n */\nconst loginUserWithEmailAndPassword = async (email, password) => {\n  const user = await userService.getUserByEmail(email);\n  if (!user || !(await user.isPasswordMatch(password))) {\n    throw new ApiError(StatusCodes.UNAUTHORIZED, \"Incorrect email or password\");\n  }\n  return user;\n};\n\n/**\n * Logout\n * @param {string} refreshToken\n * @returns {Promise}\n */\nconst logout = async refreshToken => {\n  const refreshTokenDoc = await Token.findOne({\n    token: refreshToken,\n    type: tokenTypes.REFRESH,\n    blacklisted: false\n  });\n  if (!refreshTokenDoc) {\n    throw new ApiError(StatusCodes.NOT_FOUND, \"Not found\");\n  }\n  await refreshTokenDoc.remove();\n};\n\n/**\n * Refresh auth tokens\n * @param {string} refreshToken\n * @returns {Promise<Object>}\n */\nconst refreshAuth = async refreshToken => {\n  try {\n    const refreshTokenDoc = await tokenService.verifyToken(refreshToken, tokenTypes.REFRESH);\n    const user = await userService.getUserById(refreshTokenDoc.user);\n    if (!user) {\n      throw new Error();\n    }\n    await refreshTokenDoc.remove();\n    return tokenService.generateAuthTokens(user);\n  } catch (error) {\n    throw new ApiError(StatusCodes.UNAUTHORIZED, \"Please authenticate\");\n  }\n};\n\n/**\n * Reset password\n * @param {string} resetPasswordToken\n * @param {string} newPassword\n * @returns {Promise}\n */\nconst resetPassword = async (resetPasswordToken, newPassword) => {\n  try {\n    const resetPasswordTokenDoc = await tokenService.verifyToken(resetPasswordToken, tokenTypes.RESET_PASSWORD);\n    const user = await userService.getUserById(resetPasswordTokenDoc.user);\n    if (!user) {\n      throw new Error();\n    }\n    await userService.updateUserById(user.id, {\n      password: newPassword\n    });\n    await Token.deleteMany({\n      user: user.id,\n      type: tokenTypes.RESET_PASSWORD\n    });\n  } catch (error) {\n    throw new ApiError(StatusCodes.UNAUTHORIZED, \"Password reset failed\");\n  }\n};\n\n/**\n * Verify email\n * @param {string} verifyEmailToken\n * @returns {Promise}\n */\nconst verifyEmail = async verifyEmailToken => {\n  try {\n    const verifyEmailTokenDoc = await tokenService.verifyToken(verifyEmailToken, tokenTypes.VERIFY_EMAIL);\n    const user = await userService.getUserById(verifyEmailTokenDoc.user);\n    if (!user) {\n      throw new Error();\n    }\n    await Token.deleteMany({\n      user: user.id,\n      type: tokenTypes.VERIFY_EMAIL\n    });\n    await userService.updateUserById(user.id, {\n      isEmailVerified: true\n    });\n  } catch (error) {\n    throw new ApiError(StatusCodes.UNAUTHORIZED, \"Email verification failed\");\n  }\n};\nmodule.exports = {\n  loginUserWithEmailAndPassword,\n  logout,\n  refreshAuth,\n  resetPassword,\n  verifyEmail\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTdGF0dXNDb2RlcyIsInJlcXVpcmUiLCJ0b2tlblNlcnZpY2UiLCJ1c2VyU2VydmljZSIsIlRva2VuIiwiQXBpRXJyb3IiLCJsb2dpblVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCIsImVtYWlsIiwicGFzc3dvcmQiLCJ1c2VyIiwiZ2V0VXNlckJ5RW1haWwiLCJpc1Bhc3N3b3JkTWF0Y2giLCJVTkFVVEhPUklaRUQiLCJsb2dvdXQiLCJyZWZyZXNoVG9rZW4iLCJyZWZyZXNoVG9rZW5Eb2MiLCJmaW5kT25lIiwidG9rZW4iLCJ0eXBlIiwidG9rZW5UeXBlcyIsIlJFRlJFU0giLCJibGFja2xpc3RlZCIsIk5PVF9GT1VORCIsInJlbW92ZSIsInJlZnJlc2hBdXRoIiwidmVyaWZ5VG9rZW4iLCJnZXRVc2VyQnlJZCIsIkVycm9yIiwiZ2VuZXJhdGVBdXRoVG9rZW5zIiwiZXJyb3IiLCJyZXNldFBhc3N3b3JkIiwicmVzZXRQYXNzd29yZFRva2VuIiwibmV3UGFzc3dvcmQiLCJyZXNldFBhc3N3b3JkVG9rZW5Eb2MiLCJSRVNFVF9QQVNTV09SRCIsInVwZGF0ZVVzZXJCeUlkIiwiaWQiLCJkZWxldGVNYW55IiwidmVyaWZ5RW1haWwiLCJ2ZXJpZnlFbWFpbFRva2VuIiwidmVyaWZ5RW1haWxUb2tlbkRvYyIsIlZFUklGWV9FTUFJTCIsImlzRW1haWxWZXJpZmllZCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy9zZXJ2aWNlcy8iLCJzb3VyY2VzIjpbImF1dGguc2VydmljZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IFN0YXR1c0NvZGVzIH0gPSByZXF1aXJlKFwiaHR0cC1zdGF0dXMtY29kZXNcIik7XG5jb25zdCB0b2tlblNlcnZpY2UgPSByZXF1aXJlKFwiLi90b2tlbi5zZXJ2aWNlXCIpO1xuY29uc3QgdXNlclNlcnZpY2UgPSByZXF1aXJlKFwiLi4vc2VydmljZXMvdXNlclNlcnZpY2VcIik7XG5jb25zdCBUb2tlbiA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvdG9rZW5Nb2RlbFwiKTtcbmNvbnN0IEFwaUVycm9yID0gcmVxdWlyZShcIi4uL3V0aWxzL0FwaUVycm9yXCIpO1xuXG4vKipcbiAqIExvZ2luIHdpdGggdXNlcm5hbWUgYW5kIHBhc3N3b3JkXG4gKiBAcGFyYW0ge3N0cmluZ30gZW1haWxcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXNzd29yZFxuICogQHJldHVybnMge1Byb21pc2U8VXNlcj59XG4gKi9cbmNvbnN0IGxvZ2luVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkID0gYXN5bmMgKGVtYWlsLCBwYXNzd29yZCkgPT4ge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB1c2VyU2VydmljZS5nZXRVc2VyQnlFbWFpbChlbWFpbCk7XG4gICAgaWYgKCF1c2VyIHx8ICEoYXdhaXQgdXNlci5pc1Bhc3N3b3JkTWF0Y2gocGFzc3dvcmQpKSkge1xuICAgICAgICB0aHJvdyBuZXcgQXBpRXJyb3IoXG4gICAgICAgICAgICBTdGF0dXNDb2Rlcy5VTkFVVEhPUklaRUQsXG4gICAgICAgICAgICBcIkluY29ycmVjdCBlbWFpbCBvciBwYXNzd29yZFwiXG4gICAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB1c2VyO1xufTtcblxuLyoqXG4gKiBMb2dvdXRcbiAqIEBwYXJhbSB7c3RyaW5nfSByZWZyZXNoVG9rZW5cbiAqIEByZXR1cm5zIHtQcm9taXNlfVxuICovXG5jb25zdCBsb2dvdXQgPSBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG4gICAgY29uc3QgcmVmcmVzaFRva2VuRG9jID0gYXdhaXQgVG9rZW4uZmluZE9uZSh7XG4gICAgICAgIHRva2VuOiByZWZyZXNoVG9rZW4sXG4gICAgICAgIHR5cGU6IHRva2VuVHlwZXMuUkVGUkVTSCxcbiAgICAgICAgYmxhY2tsaXN0ZWQ6IGZhbHNlLFxuICAgIH0pO1xuICAgIGlmICghcmVmcmVzaFRva2VuRG9jKSB7XG4gICAgICAgIHRocm93IG5ldyBBcGlFcnJvcihTdGF0dXNDb2Rlcy5OT1RfRk9VTkQsIFwiTm90IGZvdW5kXCIpO1xuICAgIH1cbiAgICBhd2FpdCByZWZyZXNoVG9rZW5Eb2MucmVtb3ZlKCk7XG59O1xuXG4vKipcbiAqIFJlZnJlc2ggYXV0aCB0b2tlbnNcbiAqIEBwYXJhbSB7c3RyaW5nfSByZWZyZXNoVG9rZW5cbiAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdD59XG4gKi9cbmNvbnN0IHJlZnJlc2hBdXRoID0gYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlZnJlc2hUb2tlbkRvYyA9IGF3YWl0IHRva2VuU2VydmljZS52ZXJpZnlUb2tlbihcbiAgICAgICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgICAgIHRva2VuVHlwZXMuUkVGUkVTSFxuICAgICAgICApO1xuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgdXNlclNlcnZpY2UuZ2V0VXNlckJ5SWQocmVmcmVzaFRva2VuRG9jLnVzZXIpO1xuICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHJlZnJlc2hUb2tlbkRvYy5yZW1vdmUoKTtcbiAgICAgICAgcmV0dXJuIHRva2VuU2VydmljZS5nZW5lcmF0ZUF1dGhUb2tlbnModXNlcik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEFwaUVycm9yKFN0YXR1c0NvZGVzLlVOQVVUSE9SSVpFRCwgXCJQbGVhc2UgYXV0aGVudGljYXRlXCIpO1xuICAgIH1cbn07XG5cbi8qKlxuICogUmVzZXQgcGFzc3dvcmRcbiAqIEBwYXJhbSB7c3RyaW5nfSByZXNldFBhc3N3b3JkVG9rZW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBuZXdQYXNzd29yZFxuICogQHJldHVybnMge1Byb21pc2V9XG4gKi9cbmNvbnN0IHJlc2V0UGFzc3dvcmQgPSBhc3luYyAocmVzZXRQYXNzd29yZFRva2VuLCBuZXdQYXNzd29yZCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc2V0UGFzc3dvcmRUb2tlbkRvYyA9IGF3YWl0IHRva2VuU2VydmljZS52ZXJpZnlUb2tlbihcbiAgICAgICAgICAgIHJlc2V0UGFzc3dvcmRUb2tlbixcbiAgICAgICAgICAgIHRva2VuVHlwZXMuUkVTRVRfUEFTU1dPUkRcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHVzZXJTZXJ2aWNlLmdldFVzZXJCeUlkKHJlc2V0UGFzc3dvcmRUb2tlbkRvYy51c2VyKTtcbiAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB1c2VyU2VydmljZS51cGRhdGVVc2VyQnlJZCh1c2VyLmlkLCB7IHBhc3N3b3JkOiBuZXdQYXNzd29yZCB9KTtcbiAgICAgICAgYXdhaXQgVG9rZW4uZGVsZXRlTWFueSh7XG4gICAgICAgICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5SRVNFVF9QQVNTV09SRCxcbiAgICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEFwaUVycm9yKFN0YXR1c0NvZGVzLlVOQVVUSE9SSVpFRCwgXCJQYXNzd29yZCByZXNldCBmYWlsZWRcIik7XG4gICAgfVxufTtcblxuLyoqXG4gKiBWZXJpZnkgZW1haWxcbiAqIEBwYXJhbSB7c3RyaW5nfSB2ZXJpZnlFbWFpbFRva2VuXG4gKiBAcmV0dXJucyB7UHJvbWlzZX1cbiAqL1xuY29uc3QgdmVyaWZ5RW1haWwgPSBhc3luYyAodmVyaWZ5RW1haWxUb2tlbikgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHZlcmlmeUVtYWlsVG9rZW5Eb2MgPSBhd2FpdCB0b2tlblNlcnZpY2UudmVyaWZ5VG9rZW4oXG4gICAgICAgICAgICB2ZXJpZnlFbWFpbFRva2VuLFxuICAgICAgICAgICAgdG9rZW5UeXBlcy5WRVJJRllfRU1BSUxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHVzZXJTZXJ2aWNlLmdldFVzZXJCeUlkKHZlcmlmeUVtYWlsVG9rZW5Eb2MudXNlcik7XG4gICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgVG9rZW4uZGVsZXRlTWFueSh7XG4gICAgICAgICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5WRVJJRllfRU1BSUwsXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB1c2VyU2VydmljZS51cGRhdGVVc2VyQnlJZCh1c2VyLmlkLCB7IGlzRW1haWxWZXJpZmllZDogdHJ1ZSB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgQXBpRXJyb3IoXG4gICAgICAgICAgICBTdGF0dXNDb2Rlcy5VTkFVVEhPUklaRUQsXG4gICAgICAgICAgICBcIkVtYWlsIHZlcmlmaWNhdGlvbiBmYWlsZWRcIlxuICAgICAgICApO1xuICAgIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIGxvZ2luVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkLFxuICAgIGxvZ291dCxcbiAgICByZWZyZXNoQXV0aCxcbiAgICByZXNldFBhc3N3b3JkLFxuICAgIHZlcmlmeUVtYWlsLFxufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTTtFQUFFQTtBQUFZLENBQUMsR0FBR0MsT0FBTyxDQUFDLG1CQUFtQixDQUFDO0FBQ3BELE1BQU1DLFlBQVksR0FBR0QsT0FBTyxDQUFDLGlCQUFpQixDQUFDO0FBQy9DLE1BQU1FLFdBQVcsR0FBR0YsT0FBTyxDQUFDLHlCQUF5QixDQUFDO0FBQ3RELE1BQU1H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","map":{"version":3,"names":["StatusCodes","require","tokenService","userService","Token","ApiError","loginUserWithEmailAndPassword","email","password","user","getUserByEmail","isPasswordMatch","UNAUTHORIZED","logout","refreshToken","refreshTokenDoc","findOne","token","type","tokenTypes","REFRESH","blacklisted","NOT_FOUND","remove","refreshAuth","verifyToken","getUserById","Error","generateAuthTokens","error","resetPassword","resetPasswordToken","newPassword","resetPasswordTokenDoc","RESET_PASSWORD","updateUserById","id","deleteMany","verifyEmail","verifyEmailToken","verifyEmailTokenDoc","VERIFY_EMAIL","isEmailVerified","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/","sources":["auth.service.js"],"sourcesContent":["const { StatusCodes } = require(\"http-status-codes\");\nconst tokenService = require(\"./token.service\");\nconst userService = require(\"../services/userService\");\nconst Token = require(\"../models/tokenModel\");\nconst ApiError = require(\"../utils/ApiError\");\n\n/**\n * Login with username and password\n * @param {string} email\n * @param {string} password\n * @returns {Promise<User>}\n */\nconst loginUserWithEmailAndPassword = async (email, password) => {\n    const user = await userService.getUserByEmail(email);\n    if (!user || !(await user.isPasswordMatch(password))) {\n        throw new ApiError(\n            StatusCodes.UNAUTHORIZED,\n            \"Incorrect email or password\"\n        );\n    }\n    return user;\n};\n\n/**\n * Logout\n * @param {string} refreshToken\n * @returns {Promise}\n */\nconst logout = async (refreshToken) => {\n    const refreshTokenDoc = await Token.findOne({\n        token: refreshToken,\n        type: tokenTypes.REFRESH,\n        blacklisted: false,\n    });\n    if (!refreshTokenDoc) {\n        throw new ApiError(StatusCodes.NOT_FOUND, \"Not found\");\n    }\n    await refreshTokenDoc.remove();\n};\n\n/**\n * Refresh auth tokens\n * @param {string} refreshToken\n * @returns {Promise<Object>}\n */\nconst refreshAuth = async (refreshToken) => {\n    try {\n        const refreshTokenDoc = await tokenService.verifyToken(\n            refreshToken,\n            tokenTypes.REFRESH\n        );\n        const user = await userService.getUserById(refreshTokenDoc.user);\n        if (!user) {\n            throw new Error();\n        }\n        await refreshTokenDoc.remove();\n        return tokenService.generateAuthTokens(user);\n    } catch (error) {\n        throw new ApiError(StatusCodes.UNAUTHORIZED, \"Please authenticate\");\n    }\n};\n\n/**\n * Reset password\n * @param {string} resetPasswordToken\n * @param {string} newPassword\n * @returns {Promise}\n */\nconst resetPassword = async (resetPasswordToken, newPassword) => {\n    try {\n        const resetPasswordTokenDoc = await tokenService.verifyToken(\n            resetPasswordToken,\n            tokenTypes.RESET_PASSWORD\n        );\n        const user = await userService.getUserById(resetPasswordTokenDoc.user);\n        if (!user) {\n            throw new Error();\n        }\n        await userService.updateUserById(user.id, { password: newPassword });\n        await Token.deleteMany({\n            user: user.id,\n            type: tokenTypes.RESET_PASSWORD,\n        });\n    } catch (error) {\n        throw new ApiError(StatusCodes.UNAUTHORIZED, \"Password reset failed\");\n    }\n};\n\n/**\n * Verify email\n * @param {string} verifyEmailToken\n * @returns {Promise}\n */\nconst verifyEmail = async (verifyEmailToken) => {\n    try {\n        const verifyEmailTokenDoc = await tokenService.verifyToken(\n            verifyEmailToken,\n            tokenTypes.VERIFY_EMAIL\n        );\n        const user = await userService.getUserById(verifyEmailTokenDoc.user);\n        if (!user) {\n            throw new Error();\n        }\n        await Token.deleteMany({\n            user: user.id,\n            type: tokenTypes.VERIFY_EMAIL,\n        });\n        await userService.updateUserById(user.id, { isEmailVerified: true });\n    } catch (error) {\n        throw new ApiError(\n            StatusCodes.UNAUTHORIZED,\n            \"Email verification failed\"\n        );\n    }\n};\n\nmodule.exports = {\n    loginUserWithEmailAndPassword,\n    logout,\n    refreshAuth,\n    resetPassword,\n    verifyEmail,\n};\n"],"mappings":"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","ignoreList":[]}},"mtime":1727164702910},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/token.service.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const jwt = require(\"jsonwebtoken\");\nconst moment = require(\"moment\");\nconst httpStatus = require(\"http-status-codes\");\nconst config = require(\"../config/config\");\nconst userService = require(\"./userService\");\nconst Token = require(\"../models/tokenModel\");\nconst ApiError = require(\"../utils/ApiError\");\nconst tokenTypes = require(\"../utils/enums/tokenTypesEnum\");\n\n/**\n * Generate token\n * @param {ObjectId} userId\n * @param {Moment} expires\n * @param {string} type\n * @param {string} [secret]\n * @returns {string}\n */\nconst generateToken = (userId, expires, type, secret = config.jwt.secret) => {\n  const payload = {\n    sub: userId,\n    iat: moment().unix(),\n    exp: expires.unix(),\n    type\n  };\n  return jwt.sign(payload, secret);\n};\n\n/**\n * Save a token\n * @param {string} token\n * @param {ObjectId} userId\n * @param {Moment} expires\n * @param {string} type\n * @param {boolean} [blacklisted]\n * @returns {Promise<Token>}\n */\nconst saveToken = async (token, userId, expires, type, blacklisted = false) => {\n  const tokenDoc = await Token.create({\n    token,\n    user_id: userId,\n    expires: expires.toDate(),\n    type,\n    blacklisted\n  });\n  return tokenDoc;\n};\n\n/**\n * Verify token and return token doc (or throw an error if it is not valid)\n * @param {string} token\n * @param {string} type\n * @returns {Promise<Token>}\n */\nconst verifyToken = async (token, type) => {\n  const payload = jwt.verify(token, config.jwt.secret);\n  const tokenDoc = await Token.findOne({\n    where: {\n      token,\n      type,\n      user_id: payload.sub\n    }\n  });\n  if (!tokenDoc) {\n    throw new Error(\"Token not found\");\n  }\n  tokenDoc.user = await userService.getUser(payload.sub);\n  return tokenDoc;\n};\n\n/**\n * Generate auth tokens\n * @param {User} user\n * @returns {Promise<Object>}\n */\nconst generateAuthTokens = async user => {\n  const accessTokenExpires = moment().add(config.jwt.accessExpirationMinutes, \"minutes\");\n  const accessToken = generateToken(user.id, accessTokenExpires, tokenTypes.ACCESS);\n  await saveToken(accessToken, user.id, accessTokenExpires, tokenTypes.ACCESS);\n  const refreshTokenExpires = moment().add(config.jwt.refreshExpirationDays, \"days\");\n  const refreshToken = generateToken(user.id, refreshTokenExpires, tokenTypes.REFRESH);\n  await saveToken(refreshToken, user.id, refreshTokenExpires, tokenTypes.REFRESH);\n  return {\n    access: {\n      token: accessToken,\n      expires: accessTokenExpires.toDate()\n    },\n    refresh: {\n      token: refreshToken,\n      expires: refreshTokenExpires.toDate()\n    }\n  };\n};\n\n/**\n * Generate reset password token\n * @param {string} email\n * @returns {Promise<string>}\n */\nconst generateResetPasswordToken = async email => {\n  const user = await userService.getUserByEmail(email);\n  if (!user) {\n    throw new ApiError(httpStatus.NOT_FOUND, \"No users found with this email\");\n  }\n  const expires = moment().add(config.jwt.resetPasswordExpirationMinutes, \"minutes\");\n  const resetPasswordToken = generateToken(user.id, expires, tokenTypes.RESET_PASSWORD);\n  await saveToken(resetPasswordToken, user.id, expires, tokenTypes.RESET_PASSWORD);\n  return resetPasswordToken;\n};\n\n/**\n * Generate verify email token\n * @param {User} user\n * @returns {Promise<string>}\n */\nconst generateVerifyEmailToken = async user => {\n  const expires = moment().add(config.jwt.verifyEmailExpirationMinutes, \"minutes\");\n  const verifyEmailToken = generateToken(user.id, expires, tokenTypes.VERIFY_EMAIL);\n  await saveToken(verifyEmailToken, user.id, expires, tokenTypes.VERIFY_EMAIL);\n  return verifyEmailToken;\n};\nmodule.exports = {\n  generateToken,\n  saveToken,\n  verifyToken,\n  generateAuthTokens,\n  generateResetPasswordToken,\n  generateVerifyEmailToken\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJqd3QiLCJyZXF1aXJlIiwibW9tZW50IiwiaHR0cFN0YXR1cyIsImNvbmZpZyIsInVzZXJTZXJ2aWNlIiwiVG9rZW4iLCJBcGlFcnJvciIsInRva2VuVHlwZXMiLCJnZW5lcmF0ZVRva2VuIiwidXNlcklkIiwiZXhwaXJlcyIsInR5cGUiLCJzZWNyZXQiLCJwYXlsb2FkIiwic3ViIiwiaWF0IiwidW5peCIsImV4cCIsInNpZ24iLCJzYXZlVG9rZW4iLCJ0b2tlbiIsImJsYWNrbGlzdGVkIiwidG9rZW5Eb2MiLCJjcmVhdGUiLCJ1c2VyX2lkIiwidG9EYXRlIiwidmVyaWZ5VG9rZW4iLCJ2ZXJpZnkiLCJmaW5kT25lIiwid2hlcmUiLCJFcnJvciIsInVzZXIiLCJnZXRVc2VyIiwiZ2VuZXJhdGVBdXRoVG9rZW5zIiwiYWNjZXNzVG9rZW5FeHBpcmVzIiwiYWRkIiwiYWNjZXNzRXhwaXJhdGlvbk1pbnV0ZXMiLCJhY2Nlc3NUb2tlbiIsImlkIiwiQUNDRVNTIiwicmVmcmVzaFRva2VuRXhwaXJlcyIsInJlZnJlc2hFeHBpcmF0aW9uRGF5cyIsInJlZnJlc2hUb2tlbiIsIlJFRlJFU0giLCJhY2Nlc3MiLCJyZWZyZXNoIiwiZ2VuZXJhdGVSZXNldFBhc3N3b3JkVG9rZW4iLCJlbWFpbCIsImdldFVzZXJCeUVtYWlsIiwiTk9UX0ZPVU5EIiwicmVzZXRQYXNzd29yZEV4cGlyYXRpb25NaW51dGVzIiwicmVzZXRQYXNzd29yZFRva2VuIiwiUkVTRVRfUEFTU1dPUkQiLCJnZW5lcmF0ZVZlcmlmeUVtYWlsVG9rZW4iLCJ2ZXJpZnlFbWFpbEV4cGlyYXRpb25NaW51dGVzIiwidmVyaWZ5RW1haWxUb2tlbiIsIlZFUklGWV9FTUFJTCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy9zZXJ2aWNlcy8iLCJzb3VyY2VzIjpbInRva2VuLnNlcnZpY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgand0ID0gcmVxdWlyZShcImpzb253ZWJ0b2tlblwiKTtcbmNvbnN0IG1vbWVudCA9IHJlcXVpcmUoXCJtb21lbnRcIik7XG5jb25zdCBodHRwU3RhdHVzID0gcmVxdWlyZShcImh0dHAtc3RhdHVzLWNvZGVzXCIpO1xuY29uc3QgY29uZmlnID0gcmVxdWlyZShcIi4uL2NvbmZpZy9jb25maWdcIik7XG5jb25zdCB1c2VyU2VydmljZSA9IHJlcXVpcmUoXCIuL3VzZXJTZXJ2aWNlXCIpO1xuY29uc3QgVG9rZW4gPSByZXF1aXJlKFwiLi4vbW9kZWxzL3Rva2VuTW9kZWxcIik7XG5jb25zdCBBcGlFcnJvciA9IHJlcXVpcmUoXCIuLi91dGlscy9BcGlFcnJvclwiKTtcbmNvbnN0IHRva2VuVHlwZXMgPSByZXF1aXJlKFwiLi4vdXRpbHMvZW51bXMvdG9rZW5UeXBlc0VudW1cIik7XG5cbi8qKlxuICogR2VuZXJhdGUgdG9rZW5cbiAqIEBwYXJhbSB7T2JqZWN0SWR9IHVzZXJJZFxuICogQHBhcmFtIHtNb21lbnR9IGV4cGlyZXNcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge3N0cmluZ30gW3NlY3JldF1cbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmNvbnN0IGdlbmVyYXRlVG9rZW4gPSAodXNlcklkLCBleHBpcmVzLCB0eXBlLCBzZWNyZXQgPSBjb25maWcuand0LnNlY3JldCkgPT4ge1xuICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICAgIHN1YjogdXNlcklkLFxuICAgICAgICBpYXQ6IG1vbWVudCgpLnVuaXgoKSxcbiAgICAgICAgZXhwOiBleHBpcmVzLnVuaXgoKSxcbiAgICAgICAgdHlwZSxcbiAgICB9O1xuICAgIHJldHVybiBqd3Quc2lnbihwYXlsb2FkLCBzZWNyZXQpO1xufTtcblxuLyoqXG4gKiBTYXZlIGEgdG9rZW5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlblxuICogQHBhcmFtIHtPYmplY3RJZH0gdXNlcklkXG4gKiBAcGFyYW0ge01vbWVudH0gZXhwaXJlc1xuICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2JsYWNrbGlzdGVkXVxuICogQHJldHVybnMge1Byb21pc2U8VG9rZW4+fVxuICovXG5jb25zdCBzYXZlVG9rZW4gPSBhc3luYyAodG9rZW4sIHVzZXJJZCwgZXhwaXJlcywgdHlwZSwgYmxhY2tsaXN0ZWQgPSBmYWxzZSkgPT4ge1xuICAgIGNvbnN0IHRva2VuRG9jID0gYXdhaXQgVG9rZW4uY3JlYXRlKHtcbiAgICAgICAgdG9rZW4sXG4gICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgICAgZXhwaXJlczogZXhwaXJlcy50b0RhdGUoKSxcbiAgICAgICAgdHlwZSxcbiAgICAgICAgYmxhY2tsaXN0ZWQsXG4gICAgfSk7XG4gICAgcmV0dXJuIHRva2VuRG9jO1xufTtcblxuLyoqXG4gKiBWZXJpZnkgdG9rZW4gYW5kIHJldHVybiB0b2tlbiBkb2MgKG9yIHRocm93IGFuIGVycm9yIGlmIGl0IGlzIG5vdCB2YWxpZClcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlblxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAqIEByZXR1cm5zIHtQcm9taXNlPFRva2VuPn1cbiAqL1xuY29uc3QgdmVyaWZ5VG9rZW4gPSBhc3luYyAodG9rZW4sIHR5cGUpID0+IHtcbiAgICBjb25zdCBwYXlsb2FkID0gand0LnZlcmlmeSh0b2tlbiwgY29uZmlnLmp3dC5zZWNyZXQpO1xuICAgIGNvbnN0IHRva2VuRG9jID0gYXdhaXQgVG9rZW4uZmluZE9uZSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICB0b2tlbixcbiAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICB1c2VyX2lkOiBwYXlsb2FkLnN1YixcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICBpZiAoIXRva2VuRG9jKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRva2VuIG5vdCBmb3VuZFwiKTtcbiAgICB9XG5cbiAgICB0b2tlbkRvYy51c2VyID0gYXdhaXQgdXNlclNlcnZpY2UuZ2V0VXNlcihwYXlsb2FkLnN1Yik7XG4gICAgcmV0dXJuIHRva2VuRG9jO1xufTtcblxuLyoqXG4gKiBHZW5lcmF0ZSBhdXRoIHRva2Vuc1xuICogQHBhcmFtIHtVc2VyfSB1c2VyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fVxuICovXG5jb25zdCBnZW5lcmF0ZUF1dGhUb2tlbnMgPSBhc3luYyAodXNlcikgPT4ge1xuICAgIGNvbnN0IGFjY2Vzc1Rva2VuRXhwaXJlcyA9IG1vbWVudCgpLmFkZChcbiAgICAgICAgY29uZmlnLmp3dC5hY2Nlc3NFeHBpcmF0aW9uTWludXRlcyxcbiAgICAgICAgXCJtaW51dGVzXCJcbiAgICApO1xuICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gZ2VuZXJhdGVUb2tlbihcbiAgICAgICAgdXNlci5pZCxcbiAgICAgICAgYWNjZXNzVG9rZW5FeHBpcmVzLFxuICAgICAgICB0b2tlblR5cGVzLkFDQ0VTU1xuICAgICk7XG4gICAgYXdhaXQgc2F2ZVRva2VuKFxuICAgICAgICBhY2Nlc3NUb2tlbixcbiAgICAgICAgdXNlci5pZCxcbiAgICAgICAgYWNjZXNzVG9rZW5FeHBpcmVzLFxuICAgICAgICB0b2tlblR5cGVzLkFDQ0VTU1xuICAgICk7XG5cbiAgICBjb25zdCByZWZyZXNoVG9rZW5FeHBpcmVzID0gbW9tZW50KCkuYWRkKFxuICAgICAgICBjb25maWcuand0LnJlZnJlc2hFeHBpcmF0aW9uRGF5cyxcbiAgICAgICAgXCJkYXlzXCJcbiAgICApO1xuICAgIGNvbnN0IHJlZnJlc2hUb2tlbiA9IGdlbmVyYXRlVG9rZW4oXG4gICAgICAgIHVzZXIuaWQsXG4gICAgICAgIHJlZnJlc2hUb2tlbkV4cGlyZXMsXG4gICAgICAgIHRva2VuVHlwZXMuUkVGUkVTSFxuICAgICk7XG4gICAgYXdhaXQgc2F2ZVRva2VuKFxuICAgICAgICByZWZyZXNoVG9rZW4sXG4gICAgICAgIHVzZXIuaWQsXG4gICAgICAgIHJlZnJlc2hUb2tlbkV4cGlyZXMsXG4gICAgICAgIHRva2VuVHlwZXMuUkVGUkVTSFxuICAgICk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBhY2Nlc3M6IHtcbiAgICAgICAgICAgIHRva2VuOiBhY2Nlc3NUb2tlbixcbiAgICAgICAgICAgIGV4cGlyZXM6IGFjY2Vzc1Rva2VuRXhwaXJlcy50b0RhdGUoKSxcbiAgICAgICAgfSxcbiAgICAgICAgcmVmcmVzaDoge1xuICAgICAgICAgICAgdG9rZW46IHJlZnJlc2hUb2tlbixcbiAgICAgICAgICAgIGV4cGlyZXM6IHJlZnJlc2hUb2tlbkV4cGlyZXMudG9EYXRlKCksXG4gICAgICAgIH0sXG4gICAgfTtcbn07XG5cbi8qKlxuICogR2VuZXJhdGUgcmVzZXQgcGFzc3dvcmQgdG9rZW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbFxuICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn1cbiAqL1xuY29uc3QgZ2VuZXJhdGVSZXNldFBhc3N3b3JkVG9rZW4gPSBhc3luYyAoZW1haWwpID0+IHtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgdXNlclNlcnZpY2UuZ2V0VXNlckJ5RW1haWwoZW1haWwpO1xuICAgIGlmICghdXNlcikge1xuICAgICAgICB0aHJvdyBuZXcgQXBpRXJyb3IoXG4gICAgICAgICAgICBodHRwU3RhdHVzLk5PVF9GT1VORCxcbiAgICAgICAgICAgIFwiTm8gdXNlcnMgZm91bmQgd2l0aCB0aGlzIGVtYWlsXCJcbiAgICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgZXhwaXJlcyA9IG1vbWVudCgpLmFkZChcbiAgICAgICAgY29uZmlnLmp3dC5yZXNldFBhc3N3b3JkRXhwaXJhdGlvbk1pbnV0ZXMsXG4gICAgICAgIFwibWludXRlc1wiXG4gICAgKTtcbiAgICBjb25zdCByZXNldFBhc3N3b3JkVG9rZW4gPSBnZW5lcmF0ZVRva2VuKFxuICAgICAgICB1c2VyLmlkLFxuICAgICAgICBleHBpcmVzLFxuICAgICAgICB0b2tlblR5cGVzLlJFU0VUX1BBU1NXT1JEXG4gICAgKTtcbiAgICBhd2FpdCBzYXZlVG9rZW4oXG4gICAgICAgIHJlc2V0UGFzc3dvcmRUb2tlbixcbiAgICAgICAgdXNlci5pZCxcbiAgICAgICAgZXhwaXJlcyxcbiAgICAgICAgdG9rZW5UeXBlcy5SRVNFVF9QQVNTV09SRFxuICAgICk7XG4gICAgcmV0dXJuIHJlc2V0UGFzc3dvcmRUb2tlbjtcbn07XG5cbi8qKlxuICogR2VuZXJhdGUgdmVyaWZ5IGVtYWlsIHRva2VuXG4gKiBAcGFyYW0ge1VzZXJ9IHVzZXJcbiAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59XG4gKi9cbmNvbnN0IGdlbmVyYXRlVmVyaWZ5RW1haWxUb2tlbiA9IGFzeW5jICh1c2VyKSA9PiB7XG4gICAgY29uc3QgZXhwaXJlcyA9IG1vbWVudCgpLmFkZChcbiAgICAgICAgY29uZmlnLmp3dC52ZXJpZnlFbWFpbEV4cGlyYXRpb25NaW51dGVzLFxuICAgICAgICBcIm1pbnV0ZXNcIlxuICAgICk7XG4gICAgY29uc3QgdmVyaWZ5RW1haWxUb2tlbiA9IGdlbmVyYXRlVG9rZW4oXG4gICAgICAgIHVzZXIuaWQsXG4gICAgICAgIGV4cGlyZXMsXG4gICAgICAgIHRva2VuVHlwZXMuVkVSSUZZX0VNQUlMXG4gICAgKTtcbiAgICBhd2FpdCBzYXZlVG9rZW4oXG4gICAgICAgIHZlcmlmeUVtYWlsVG9rZW4sXG4gICAgICAgIHVzZXIuaWQsXG4gICAgICAgIGV4cGlyZXMsXG4gICAgICAgIHRva2VuVHlwZXMuVkVSSUZZX0VNQUlMXG4gICAgKTtcbiAgICByZXR1cm4gdmVyaWZ5RW1haWxUb2tlbjtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIGdlbmVyYXRlVG9rZW4sXG4gICAgc2F2ZVRva2VuLFxuICAgIHZlcmlmeVRva2VuLFxuICAgIGdlbmVyYXRlQXV0aFRva2VucyxcbiAgICBnZW5lcmF0ZVJlc2V0UGFzc3dvcmRUb2tlbixcbiAgICBnZW5l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","map":{"version":3,"names":["jwt","require","moment","httpStatus","config","userService","Token","ApiError","tokenTypes","generateToken","userId","expires","type","secret","payload","sub","iat","unix","exp","sign","saveToken","token","blacklisted","tokenDoc","create","user_id","toDate","verifyToken","verify","findOne","where","Error","user","getUser","generateAuthTokens","accessTokenExpires","add","accessExpirationMinutes","accessToken","id","ACCESS","refreshTokenExpires","refreshExpirationDays","refreshToken","REFRESH","access","refresh","generateResetPasswordToken","email","getUserByEmail","NOT_FOUND","resetPasswordExpirationMinutes","resetPasswordToken","RESET_PASSWORD","generateVerifyEmailToken","verifyEmailExpirationMinutes","verifyEmailToken","VERIFY_EMAIL","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/","sources":["token.service.js"],"sourcesContent":["const jwt = require(\"jsonwebtoken\");\nconst moment = require(\"moment\");\nconst httpStatus = require(\"http-status-codes\");\nconst config = require(\"../config/config\");\nconst userService = require(\"./userService\");\nconst Token = require(\"../models/tokenModel\");\nconst ApiError = require(\"../utils/ApiError\");\nconst tokenTypes = require(\"../utils/enums/tokenTypesEnum\");\n\n/**\n * Generate token\n * @param {ObjectId} userId\n * @param {Moment} expires\n * @param {string} type\n * @param {string} [secret]\n * @returns {string}\n */\nconst generateToken = (userId, expires, type, secret = config.jwt.secret) => {\n    const payload = {\n        sub: userId,\n        iat: moment().unix(),\n        exp: expires.unix(),\n        type,\n    };\n    return jwt.sign(payload, secret);\n};\n\n/**\n * Save a token\n * @param {string} token\n * @param {ObjectId} userId\n * @param {Moment} expires\n * @param {string} type\n * @param {boolean} [blacklisted]\n * @returns {Promise<Token>}\n */\nconst saveToken = async (token, userId, expires, type, blacklisted = false) => {\n    const tokenDoc = await Token.create({\n        token,\n        user_id: userId,\n        expires: expires.toDate(),\n        type,\n        blacklisted,\n    });\n    return tokenDoc;\n};\n\n/**\n * Verify token and return token doc (or throw an error if it is not valid)\n * @param {string} token\n * @param {string} type\n * @returns {Promise<Token>}\n */\nconst verifyToken = async (token, type) => {\n    const payload = jwt.verify(token, config.jwt.secret);\n    const tokenDoc = await Token.findOne({\n        where: {\n            token,\n            type,\n            user_id: payload.sub,\n        },\n    });\n    if (!tokenDoc) {\n        throw new Error(\"Token not found\");\n    }\n\n    tokenDoc.user = await userService.getUser(payload.sub);\n    return tokenDoc;\n};\n\n/**\n * Generate auth tokens\n * @param {User} user\n * @returns {Promise<Object>}\n */\nconst generateAuthTokens = async (user) => {\n    const accessTokenExpires = moment().add(\n        config.jwt.accessExpirationMinutes,\n        \"minutes\"\n    );\n    const accessToken = generateToken(\n        user.id,\n        accessTokenExpires,\n        tokenTypes.ACCESS\n    );\n    await saveToken(\n        accessToken,\n        user.id,\n        accessTokenExpires,\n        tokenTypes.ACCESS\n    );\n\n    const refreshTokenExpires = moment().add(\n        config.jwt.refreshExpirationDays,\n        \"days\"\n    );\n    const refreshToken = generateToken(\n        user.id,\n        refreshTokenExpires,\n        tokenTypes.REFRESH\n    );\n    await saveToken(\n        refreshToken,\n        user.id,\n        refreshTokenExpires,\n        tokenTypes.REFRESH\n    );\n\n    return {\n        access: {\n            token: accessToken,\n            expires: accessTokenExpires.toDate(),\n        },\n        refresh: {\n            token: refreshToken,\n            expires: refreshTokenExpires.toDate(),\n        },\n    };\n};\n\n/**\n * Generate reset password token\n * @param {string} email\n * @returns {Promise<string>}\n */\nconst generateResetPasswordToken = async (email) => {\n    const user = await userService.getUserByEmail(email);\n    if (!user) {\n        throw new ApiError(\n            httpStatus.NOT_FOUND,\n            \"No users found with this email\"\n        );\n    }\n    const expires = moment().add(\n        config.jwt.resetPasswordExpirationMinutes,\n        \"minutes\"\n    );\n    const resetPasswordToken = generateToken(\n        user.id,\n        expires,\n        tokenTypes.RESET_PASSWORD\n    );\n    await saveToken(\n        resetPasswordToken,\n        user.id,\n        expires,\n        tokenTypes.RESET_PASSWORD\n    );\n    return resetPasswordToken;\n};\n\n/**\n * Generate verify email token\n * @param {User} user\n * @returns {Promise<string>}\n */\nconst generateVerifyEmailToken = async (user) => {\n    const expires = moment().add(\n        config.jwt.verifyEmailExpirationMinutes,\n        \"minutes\"\n    );\n    const verifyEmailToken = generateToken(\n        user.id,\n        expires,\n        tokenTypes.VERIFY_EMAIL\n    );\n    await saveToken(\n        verifyEmailToken,\n        user.id,\n        expires,\n        tokenTypes.VERIFY_EMAIL\n    );\n    return verifyEmailToken;\n};\n\nmodule.exports = {\n    generateToken,\n    saveToken,\n    verifyToken,\n    generateAuthTokens,\n    generateResetPasswordToken,\n    generateVerifyEmailToken,\n};\n"],"mappings":"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","ignoreList":[]}},"mtime":1727240556172},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/config/config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const dotenv = require(\"dotenv\");\nconst path = require(\"path\");\nconst Joi = require(\"joi\");\ndotenv.config({\n  path: path.join(__dirname, \"../../.env\")\n});\nconst envVarsSchema = Joi.object().keys({\n  JWT_SECRET: Joi.string().required().description(\"JWT secret key\"),\n  JWT_ACCESS_EXPIRATION_MINUTES: Joi.number().default(30).description(\"minutes after which access tokens expire\"),\n  JWT_REFRESH_EXPIRATION_DAYS: Joi.number().default(30).description(\"days after which refresh tokens expire\"),\n  JWT_RESET_PASSWORD_EXPIRATION_MINUTES: Joi.number().default(10).description(\"minutes after which reset password token expires\")\n}).unknown();\nconst {\n  value: envVars,\n  error\n} = envVarsSchema.prefs({\n  errors: {\n    label: \"key\"\n  }\n}).validate(process.env);\nif (error) {\n  throw new Error(`Config validation error: ${error.message}`);\n}\nmodule.exports = {\n  env: envVars.NODE_ENV,\n  port: envVars.PORT,\n  mongoose: {\n    url: envVars.MONGODB_URL + (envVars.NODE_ENV === \"test\" ? \"-test\" : \"\"),\n    options: {\n      useCreateIndex: true,\n      useNewUrlParser: true,\n      useUnifiedTopology: true\n    }\n  },\n  jwt: {\n    secret: envVars.JWT_SECRET,\n    accessExpirationMinutes: envVars.JWT_ACCESS_EXPIRATION_MINUTES,\n    refreshExpirationDays: envVars.JWT_REFRESH_EXPIRATION_DAYS,\n    resetPasswordExpirationMinutes: envVars.JWT_RESET_PASSWORD_EXPIRATION_MINUTES,\n    verifyEmailExpirationMinutes: envVars.JWT_VERIFY_EMAIL_EXPIRATION_MINUTES\n  },\n  email: {\n    smtp: {\n      host: envVars.SMTP_HOST,\n      port: envVars.SMTP_PORT,\n      auth: {\n        user: envVars.SMTP_USERNAME,\n        pass: envVars.SMTP_PASSWORD\n      }\n    },\n    from: envVars.EMAIL_FROM\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3RlbnYiLCJyZXF1aXJlIiwicGF0aCIsIkpvaSIsImNvbmZpZyIsImpvaW4iLCJfX2Rpcm5hbWUiLCJlbnZWYXJzU2NoZW1hIiwib2JqZWN0Iiwia2V5cyIsIkpXVF9TRUNSRVQiLCJzdHJpbmciLCJyZXF1aXJlZCIsImRlc2NyaXB0aW9uIiwiSldUX0FDQ0VTU19FWFBJUkFUSU9OX01JTlVURVMiLCJudW1iZXIiLCJkZWZhdWx0IiwiSldUX1JFRlJFU0hfRVhQSVJBVElPTl9EQVlTIiwiSldUX1JFU0VUX1BBU1NXT1JEX0VYUElSQVRJT05fTUlOVVRFUyIsInVua25vd24iLCJ2YWx1ZSIsImVudlZhcnMiLCJlcnJvciIsInByZWZzIiwiZXJyb3JzIiwibGFiZWwiLCJ2YWxpZGF0ZSIsInByb2Nlc3MiLCJlbnYiLCJFcnJvciIsIm1lc3NhZ2UiLCJtb2R1bGUiLCJleHBvcnRzIiwiTk9ERV9FTlYiLCJwb3J0IiwiUE9SVCIsIm1vbmdvb3NlIiwidXJsIiwiTU9OR09EQl9VUkwiLCJvcHRpb25zIiwidXNlQ3JlYXRlSW5kZXgiLCJ1c2VOZXdVcmxQYXJzZXIiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJqd3QiLCJzZWNyZXQiLCJhY2Nlc3NFeHBpcmF0aW9uTWludXRlcyIsInJlZnJlc2hFeHBpcmF0aW9uRGF5cyIsInJlc2V0UGFzc3dvcmRFeHBpcmF0aW9uTWludXRlcyIsInZlcmlmeUVtYWlsRXhwaXJhdGlvbk1pbnV0ZXMiLCJKV1RfVkVSSUZZX0VNQUlMX0VYUElSQVRJT05fTUlOVVRFUyIsImVtYWlsIiwic210cCIsImhvc3QiLCJTTVRQX0hPU1QiLCJTTVRQX1BPUlQiLCJhdXRoIiwidXNlciIsIlNNVFBfVVNFUk5BTUUiLCJwYXNzIiwiU01UUF9QQVNTV09SRCIsImZyb20iLCJFTUFJTF9GUk9NIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdnVvbmdrbWEvaUNsb3VkIERyaXZlIChBcmNoaXZlKS9Eb2N1bWVudHMva2NuZC9zcmMvY29uZmlnLyIsInNvdXJjZXMiOlsiY29uZmlnLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGRvdGVudiA9IHJlcXVpcmUoXCJkb3RlbnZcIik7XG5jb25zdCBwYXRoID0gcmVxdWlyZShcInBhdGhcIik7XG5jb25zdCBKb2kgPSByZXF1aXJlKFwiam9pXCIpO1xuXG5kb3RlbnYuY29uZmlnKHsgcGF0aDogcGF0aC5qb2luKF9fZGlybmFtZSwgXCIuLi8uLi8uZW52XCIpIH0pO1xuXG5jb25zdCBlbnZWYXJzU2NoZW1hID0gSm9pLm9iamVjdCgpXG4gICAgLmtleXMoe1xuICAgICAgICBKV1RfU0VDUkVUOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKS5kZXNjcmlwdGlvbihcIkpXVCBzZWNyZXQga2V5XCIpLFxuICAgICAgICBKV1RfQUNDRVNTX0VYUElSQVRJT05fTUlOVVRFUzogSm9pLm51bWJlcigpXG4gICAgICAgICAgICAuZGVmYXVsdCgzMClcbiAgICAgICAgICAgIC5kZXNjcmlwdGlvbihcIm1pbnV0ZXMgYWZ0ZXIgd2hpY2ggYWNjZXNzIHRva2VucyBleHBpcmVcIiksXG4gICAgICAgIEpXVF9SRUZSRVNIX0VYUElSQVRJT05fREFZUzogSm9pLm51bWJlcigpXG4gICAgICAgICAgICAuZGVmYXVsdCgzMClcbiAgICAgICAgICAgIC5kZXNjcmlwdGlvbihcImRheXMgYWZ0ZXIgd2hpY2ggcmVmcmVzaCB0b2tlbnMgZXhwaXJlXCIpLFxuICAgICAgICBKV1RfUkVTRVRfUEFTU1dPUkRfRVhQSVJBVElPTl9NSU5VVEVTOiBKb2kubnVtYmVyKClcbiAgICAgICAgICAgIC5kZWZhdWx0KDEwKVxuICAgICAgICAgICAgLmRlc2NyaXB0aW9uKFwibWludXRlcyBhZnRlciB3aGljaCByZXNldCBwYXNzd29yZCB0b2tlbiBleHBpcmVzXCIpLFxuICAgIH0pXG4gICAgLnVua25vd24oKTtcblxuY29uc3QgeyB2YWx1ZTogZW52VmFycywgZXJyb3IgfSA9IGVudlZhcnNTY2hlbWFcbiAgICAucHJlZnMoeyBlcnJvcnM6IHsgbGFiZWw6IFwia2V5XCIgfSB9KVxuICAgIC52YWxpZGF0ZShwcm9jZXNzLmVudik7XG5cbmlmIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ29uZmlnIHZhbGlkYXRpb24gZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgZW52OiBlbnZWYXJzLk5PREVfRU5WLFxuICAgIHBvcnQ6IGVudlZhcnMuUE9SVCxcbiAgICBtb25nb29zZToge1xuICAgICAgICB1cmw6IGVudlZhcnMuTU9OR09EQl9VUkwgKyAoZW52VmFycy5OT0RFX0VOViA9PT0gXCJ0ZXN0XCIgPyBcIi10ZXN0XCIgOiBcIlwiKSxcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgdXNlQ3JlYXRlSW5kZXg6IHRydWUsXG4gICAgICAgICAgICB1c2VOZXdVcmxQYXJzZXI6IHRydWUsXG4gICAgICAgICAgICB1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWUsXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBqd3Q6IHtcbiAgICAgICAgc2VjcmV0OiBlbnZWYXJzLkpXVF9TRUNSRVQsXG4gICAgICAgIGFjY2Vzc0V4cGlyYXRpb25NaW51dGVzOiBlbnZWYXJzLkpXVF9BQ0NFU1NfRVhQSVJBVElPTl9NSU5VVEVTLFxuICAgICAgICByZWZyZXNoRXhwaXJhdGlvbkRheXM6IGVudlZhcnMuSldUX1JFRlJFU0hfRVhQSVJBVElPTl9EQVlTLFxuICAgICAgICByZXNldFBhc3N3b3JkRXhwaXJhdGlvbk1pbnV0ZXM6XG4gICAgICAgICAgICBlbnZWYXJzLkpXVF9SRVNFVF9QQVNTV09SRF9FWFBJUkFUSU9OX01JTlVURVMsXG4gICAgICAgIHZlcmlmeUVtYWlsRXhwaXJhdGlvbk1pbnV0ZXM6XG4gICAgICAgICAgICBlbnZWYXJzLkpXVF9WRVJJRllfRU1BSUxfRVhQSVJBVElPTl9NSU5VVEVTLFxuICAgIH0sXG4gICAgZW1haWw6IHtcbiAgICAgICAgc210cDoge1xuICAgICAgICAgICAgaG9zdDogZW52VmFycy5TTVRQX0hPU1QsXG4gICAgICAgICAgICBwb3J0OiBlbnZWYXJzLlNNVFBfUE9SVCxcbiAgICAgICAgICAgIGF1dGg6IHtcbiAgICAgICAgICAgICAgICB1c2VyOiBlbnZWYXJzLlNNVFBfVVNFUk5BTUUsXG4gICAgICAgICAgICAgICAgcGFzczogZW52VmFycy5TTVRQX1BBU1NXT1JELFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgZnJvbTogZW52VmFycy5FTUFJTF9GUk9NLFxuICAgIH0sXG59O1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxNQUFNLEdBQUdDLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFDaEMsTUFBTUMsSUFBSSxHQUFHRCxPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzVCLE1BQU1FLEdBQUcsR0FBR0YsT0FBTyxDQUFDLEtBQUssQ0FBQztBQUUxQkQsTUFBTSxDQUFDSSxNQUFNLENBQUM7RUFBRUYsSUFBSSxFQUFFQSxJQUFJLENBQUNHLElBQUksQ0FBQ0MsU0FBUyxFQUFFLFlBQVk7QUFBRSxDQUFDLENBQUM7QUFFM0QsTUFBTUMsYUFBYSxHQUFHSixHQUFHLENBQUNLLE1BQU0sQ0FBQyxDQUFDLENBQzdCQyxJQUFJLENBQUM7RUFDRkMsVUFBVSxFQUFFUCxHQUFHLENBQUNRLE1BQU0sQ0FBQyxDQUFDLENBQUNDLFFBQVEsQ0FBQyxDQUFDLENBQUNDLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQztFQUNqRUMsNkJBQTZCLEVBQUVYLEdBQUcsQ0FBQ1ksTUFBTSxDQUFDLENBQUMsQ0FDdENDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FDWEgsV0FBVyxDQUFDLDBDQUEwQyxDQUFDO0VBQzVESSwyQkFBMkIsRUFBRWQsR0FBRyxDQUFDWSxNQUFNLENBQUMsQ0FBQyxDQUNwQ0MsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUNYSCxXQUFXLENBQUMsd0NBQXdDLENBQUM7RUFDMURLLHFDQUFxQyxFQUFFZixHQUFHLENBQUNZLE1BQU0sQ0FBQyxDQUFDLENBQzlDQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQ1hILFdBQVcsQ0FBQyxrREFBa0Q7QUFDdkUsQ0FBQyxDQUFDLENBQ0RNLE9BQU8sQ0FBQyxDQUFDO0FBRWQsTUFBTTtFQUFFQyxLQUFLLEVBQUVDLE9BQU87RUFBRUM7QUFBTSxDQUFDLEdBQUdmLGFBQWEsQ0FDMUNnQixLQUFLLENBQUM7RUFBRUMsTUFBTSxFQUFFO0lBQUVDLEtBQUssRUFBRTtFQUFNO0FBQUUsQ0FBQyxDQUFDLENBQ25DQyxRQUFRLENBQUNDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO0FBRTFCLElBQUlOLEtBQUssRUFBRTtFQUNQLE1BQU0sSUFBSU8sS0FBSyxDQUFDLDRCQUE0QlAsS0FBSyxDQUFDUSxPQUFPLEVBQUUsQ0FBQztBQUNoRTtBQUVBQyxNQUFNLENBQUNDLE9BQU8sR0FBRztFQUNiSixHQUFHLEVBQUVQLE9BQU8sQ0FBQ1ksUUFBUTtFQUNyQkMsSUFBSSxFQUFFYixPQUFPLENBQUNjLElBQUk7RUFDbEJDLFFBQVEsRUFBRTtJQUNOQyxHQUFHLEVBQUVoQixPQUFPLENBQUNpQixXQUFXLElBQUlqQixPQUFPLENBQUNZLFFBQVEsS0FBSyxNQUFNLEdBQUcsT0FBTyxHQUFHLEVBQUUsQ0FBQztJQUN2RU0sT0FBTyxFQUFFO01BQ0xDLGNBQWMsRUFBRSxJQUFJO01BQ3BCQyxlQUFlLEVBQUUsSUFBSTtNQUNyQkMsa0JBQWtCLEVBQUU7SUFDeEI7RUFDSixDQUFDO0VBQ0RDLEdBQUcsRUFBRTtJQUNEQyxNQUFNLEVBQUV2QixPQUFPLENBQUNYLFVBQVU7SUFDMUJtQyx1QkFBdUIsRUFBRXhCLE9BQU8sQ0FBQ1AsNkJBQTZCO0lBQzlEZ0MscUJBQXFCLEVBQUV6QixPQUFPLENBQUNKLDJCQUEyQjtJQUMxRDhCLDhCQUE4QixFQUMxQjFCLE9BQU8sQ0FBQ0gscUNBQXFDO0lBQ2pEOEIsNEJBQTRCLEVBQ3hCM0IsT0FBTyxDQUFDNEI7RUFDaEIsQ0FBQztFQUNEQyxLQUFLLEVBQUU7SUFDSEMsSUFBSSxFQUFFO01BQ0ZDLElBQUksRUFBRS9CLE9BQU8sQ0FBQ2dDLFNBQVM7TUFDdkJuQixJQUFJLEVBQUViLE9BQU8sQ0FBQ2lDLFNBQVM7TUFDdkJDLElBQUksRUFBRTtRQUNGQyxJQUFJLEVBQUVuQyxPQUFPLENBQUNvQyxhQUFhO1FBQzNCQyxJQUFJLEVBQUVyQyxPQUFPLENBQUNzQztNQUNsQjtJQUNKLENBQUM7SUFDREMsSUFBSSxFQUFFdkMsT0FBTyxDQUFDd0M7RUFDbEI7QUFDSixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["dotenv","require","path","Joi","config","join","__dirname","envVarsSchema","object","keys","JWT_SECRET","string","required","description","JWT_ACCESS_EXPIRATION_MINUTES","number","default","JWT_REFRESH_EXPIRATION_DAYS","JWT_RESET_PASSWORD_EXPIRATION_MINUTES","unknown","value","envVars","error","prefs","errors","label","validate","process","env","Error","message","module","exports","NODE_ENV","port","PORT","mongoose","url","MONGODB_URL","options","useCreateIndex","useNewUrlParser","useUnifiedTopology","jwt","secret","accessExpirationMinutes","refreshExpirationDays","resetPasswordExpirationMinutes","verifyEmailExpirationMinutes","JWT_VERIFY_EMAIL_EXPIRATION_MINUTES","email","smtp","host","SMTP_HOST","SMTP_PORT","auth","user","SMTP_USERNAME","pass","SMTP_PASSWORD","from","EMAIL_FROM"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/config/","sources":["config.js"],"sourcesContent":["const dotenv = require(\"dotenv\");\nconst path = require(\"path\");\nconst Joi = require(\"joi\");\n\ndotenv.config({ path: path.join(__dirname, \"../../.env\") });\n\nconst envVarsSchema = Joi.object()\n    .keys({\n        JWT_SECRET: Joi.string().required().description(\"JWT secret key\"),\n        JWT_ACCESS_EXPIRATION_MINUTES: Joi.number()\n            .default(30)\n            .description(\"minutes after which access tokens expire\"),\n        JWT_REFRESH_EXPIRATION_DAYS: Joi.number()\n            .default(30)\n            .description(\"days after which refresh tokens expire\"),\n        JWT_RESET_PASSWORD_EXPIRATION_MINUTES: Joi.number()\n            .default(10)\n            .description(\"minutes after which reset password token expires\"),\n    })\n    .unknown();\n\nconst { value: envVars, error } = envVarsSchema\n    .prefs({ errors: { label: \"key\" } })\n    .validate(process.env);\n\nif (error) {\n    throw new Error(`Config validation error: ${error.message}`);\n}\n\nmodule.exports = {\n    env: envVars.NODE_ENV,\n    port: envVars.PORT,\n    mongoose: {\n        url: envVars.MONGODB_URL + (envVars.NODE_ENV === \"test\" ? \"-test\" : \"\"),\n        options: {\n            useCreateIndex: true,\n            useNewUrlParser: true,\n            useUnifiedTopology: true,\n        },\n    },\n    jwt: {\n        secret: envVars.JWT_SECRET,\n        accessExpirationMinutes: envVars.JWT_ACCESS_EXPIRATION_MINUTES,\n        refreshExpirationDays: envVars.JWT_REFRESH_EXPIRATION_DAYS,\n        resetPasswordExpirationMinutes:\n            envVars.JWT_RESET_PASSWORD_EXPIRATION_MINUTES,\n        verifyEmailExpirationMinutes:\n            envVars.JWT_VERIFY_EMAIL_EXPIRATION_MINUTES,\n    },\n    email: {\n        smtp: {\n            host: envVars.SMTP_HOST,\n            port: envVars.SMTP_PORT,\n            auth: {\n                user: envVars.SMTP_USERNAME,\n                pass: envVars.SMTP_PASSWORD,\n            },\n        },\n        from: envVars.EMAIL_FROM,\n    },\n};\n"],"mappings":"AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAChC,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAME,GAAG,GAAGF,OAAO,CAAC,KAAK,CAAC;AAE1BD,MAAM,CAACI,MAAM,CAAC;EAAEF,IAAI,EAAEA,IAAI,CAACG,IAAI,CAACC,SAAS,EAAE,YAAY;AAAE,CAAC,CAAC;AAE3D,MAAMC,aAAa,GAAGJ,GAAG,CAACK,MAAM,CAAC,CAAC,CAC7BC,IAAI,CAAC;EACFC,UAAU,EAAEP,GAAG,CAACQ,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAACC,WAAW,CAAC,gBAAgB,CAAC;EACjEC,6BAA6B,EAAEX,GAAG,CAACY,MAAM,CAAC,CAAC,CACtCC,OAAO,CAAC,EAAE,CAAC,CACXH,WAAW,CAAC,0CAA0C,CAAC;EAC5DI,2BAA2B,EAAEd,GAAG,CAACY,MAAM,CAAC,CAAC,CACpCC,OAAO,CAAC,EAAE,CAAC,CACXH,WAAW,CAAC,wCAAwC,CAAC;EAC1DK,qCAAqC,EAAEf,GAAG,CAACY,MAAM,CAAC,CAAC,CAC9CC,OAAO,CAAC,EAAE,CAAC,CACXH,WAAW,CAAC,kDAAkD;AACvE,CAAC,CAAC,CACDM,OAAO,CAAC,CAAC;AAEd,MAAM;EAAEC,KAAK,EAAEC,OAAO;EAAEC;AAAM,CAAC,GAAGf,aAAa,CAC1CgB,KAAK,CAAC;EAAEC,MAAM,EAAE;IAAEC,KAAK,EAAE;EAAM;AAAE,CAAC,CAAC,CACnCC,QAAQ,CAACC,OAAO,CAACC,GAAG,CAAC;AAE1B,IAAIN,KAAK,EAAE;EACP,MAAM,IAAIO,KAAK,CAAC,4BAA4BP,KAAK,CAACQ,OAAO,EAAE,CAAC;AAChE;AAEAC,MAAM,CAACC,OAAO,GAAG;EACbJ,GAAG,EAAEP,OAAO,CAACY,QAAQ;EACrBC,IAAI,EAAEb,OAAO,CAACc,IAAI;EAClBC,QAAQ,EAAE;IACNC,GAAG,EAAEhB,OAAO,CAACiB,WAAW,IAAIjB,OAAO,CAACY,QAAQ,KAAK,MAAM,GAAG,OAAO,GAAG,EAAE,CAAC;IACvEM,OAAO,EAAE;MACLC,cAAc,EAAE,IAAI;MACpBC,eAAe,EAAE,IAAI;MACrBC,kBAAkB,EAAE;IACxB;EACJ,CAAC;EACDC,GAAG,EAAE;IACDC,MAAM,EAAEvB,OAAO,CAACX,UAAU;IAC1BmC,uBAAuB,EAAExB,OAAO,CAACP,6BAA6B;IAC9DgC,qBAAqB,EAAEzB,OAAO,CAACJ,2BAA2B;IAC1D8B,8BAA8B,EAC1B1B,OAAO,CAACH,qCAAqC;IACjD8B,4BAA4B,EACxB3B,OAAO,CAAC4B;EAChB,CAAC;EACDC,KAAK,EAAE;IACHC,IAAI,EAAE;MACFC,IAAI,EAAE/B,OAAO,CAACgC,SAAS;MACvBnB,IAAI,EAAEb,OAAO,CAACiC,SAAS;MACvBC,IAAI,EAAE;QACFC,IAAI,EAAEnC,OAAO,CAACoC,aAAa;QAC3BC,IAAI,EAAErC,OAAO,CAACsC;MAClB;IACJ,CAAC;IACDC,IAAI,EAAEvC,OAAO,CAACwC;EAClB;AACJ,CAAC","ignoreList":[]}},"mtime":1727163814221},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/tokenModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const {\n  DataTypes\n} = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = require(\"../models/usedModel\");\nconst Token = sequelize.define(\"Token\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  token: DataTypes.TEXT,\n  type: DataTypes.TEXT,\n  expires: DataTypes.DATE,\n  user_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"users\"\n      },\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  }\n}, {\n  underscored: true,\n  timestamps: true,\n  tableName: \"token\"\n});\nToken.belongsTo(User, {\n  foreignKey: \"user_id\",\n  as: \"user\"\n});\nmodule.exports = Token;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEYXRhVHlwZXMiLCJyZXF1aXJlIiwic2VxdWVsaXplIiwiVXNlciIsIlRva2VuIiwiZGVmaW5lIiwiaWQiLCJ0eXBlIiwiSU5URUdFUiIsImF1dG9JbmNyZW1lbnQiLCJwcmltYXJ5S2V5IiwiYWxsb3dOdWxsIiwidG9rZW4iLCJURVhUIiwiZXhwaXJlcyIsIkRBVEUiLCJ1c2VyX2lkIiwicmVmZXJlbmNlcyIsIm1vZGVsIiwidGFibGVOYW1lIiwia2V5Iiwib25VcGRhdGUiLCJvbkRlbGV0ZSIsInVuZGVyc2NvcmVkIiwidGltZXN0YW1wcyIsImJlbG9uZ3NUbyIsImZvcmVpZ25LZXkiLCJhcyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy9tb2RlbHMvIiwic291cmNlcyI6WyJ0b2tlbk1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgRGF0YVR5cGVzIH0gPSByZXF1aXJlKFwic2VxdWVsaXplXCIpO1xuY29uc3Qgc2VxdWVsaXplID0gcmVxdWlyZShcIi4uL2NvbmZpZy9kYXRhYmFzZVwiKTtcbmNvbnN0IFVzZXIgPSByZXF1aXJlKFwiLi4vbW9kZWxzL3VzZWRNb2RlbFwiKTtcbmNvbnN0IFRva2VuID0gc2VxdWVsaXplLmRlZmluZShcbiAgICBcIlRva2VuXCIsXG4gICAge1xuICAgICAgICBpZDoge1xuICAgICAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgICAgICAgcHJpbWFyeUtleTogdHJ1ZSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgdG9rZW46IERhdGFUeXBlcy5URVhULFxuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuVEVYVCxcbiAgICAgICAgZXhwaXJlczogRGF0YVR5cGVzLkRBVEUsXG4gICAgICAgIHVzZXJfaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgIG1vZGVsOiB7IHRhYmxlTmFtZTogXCJ1c2Vyc1wiIH0sXG4gICAgICAgICAgICAgICAga2V5OiBcImlkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgICAgICAgIG9uVXBkYXRlOiBcImNhc2NhZGVcIixcbiAgICAgICAgICAgIG9uRGVsZXRlOiBcImNhc2NhZGVcIixcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdW5kZXJzY29yZWQ6IHRydWUsXG4gICAgICAgIHRpbWVzdGFtcHM6IHRydWUsXG4gICAgICAgIHRhYmxlTmFtZTogXCJ0b2tlblwiLFxuICAgIH1cbik7XG5cblRva2VuLmJlbG9uZ3NUbyhVc2VyLCB7XG4gICAgZm9yZWlnbktleTogXCJ1c2VyX2lkXCIsXG4gICAgYXM6IFwidXNlclwiLFxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gVG9rZW47XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUE7QUFBVSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDMUMsTUFBTUMsU0FBUyxHQUFHRCxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDL0MsTUFBTUUsSUFBSSxHQUFHRixPQUFPLENBQUMscUJBQXFCLENBQUM7QUFDM0MsTUFBTUcsS0FBSyxHQUFHRixTQUFTLENBQUNHLE1BQU0sQ0FDMUIsT0FBTyxFQUNQO0VBQ0lDLEVBQUUsRUFBRTtJQUNBQyxJQUFJLEVBQUVQLFNBQVMsQ0FBQ1EsT0FBTztJQUN2QkMsYUFBYSxFQUFFLElBQUk7SUFDbkJDLFVBQVUsRUFBRSxJQUFJO0lBQ2hCQyxTQUFTLEVBQUU7RUFDZixDQUFDO0VBQ0RDLEtBQUssRUFBRVosU0FBUyxDQUFDYSxJQUFJO0VBQ3JCTixJQUFJLEVBQUVQLFNBQVMsQ0FBQ2EsSUFBSTtFQUNwQkMsT0FBTyxFQUFFZCxTQUFTLENBQUNlLElBQUk7RUFDdkJDLE9BQU8sRUFBRTtJQUNMVCxJQUFJLEVBQUVQLFNBQVMsQ0FBQ1EsT0FBTztJQUN2QlMsVUFBVSxFQUFFO01BQ1JDLEtBQUssRUFBRTtRQUFFQyxTQUFTLEVBQUU7TUFBUSxDQUFDO01BQzdCQyxHQUFHLEVBQUU7SUFDVCxDQUFDO0lBQ0RULFNBQVMsRUFBRSxLQUFLO0lBQ2hCVSxRQUFRLEVBQUUsU0FBUztJQUNuQkMsUUFBUSxFQUFFO0VBQ2Q7QUFDSixDQUFDLEVBQ0Q7RUFDSUMsV0FBVyxFQUFFLElBQUk7RUFDakJDLFVBQVUsRUFBRSxJQUFJO0VBQ2hCTCxTQUFTLEVBQUU7QUFDZixDQUNKLENBQUM7QUFFRGYsS0FBSyxDQUFDcUIsU0FBUyxDQUFDdEIsSUFBSSxFQUFFO0VBQ2xCdUIsVUFBVSxFQUFFLFNBQVM7RUFDckJDLEVBQUUsRUFBRTtBQUNSLENBQUMsQ0FBQztBQUVGQyxNQUFNLENBQUNDLE9BQU8sR0FBR3pCLEtBQUsiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["DataTypes","require","sequelize","User","Token","define","id","type","INTEGER","autoIncrement","primaryKey","allowNull","token","TEXT","expires","DATE","user_id","references","model","tableName","key","onUpdate","onDelete","underscored","timestamps","belongsTo","foreignKey","as","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/","sources":["tokenModel.js"],"sourcesContent":["const { DataTypes } = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = require(\"../models/usedModel\");\nconst Token = sequelize.define(\n    \"Token\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        token: DataTypes.TEXT,\n        type: DataTypes.TEXT,\n        expires: DataTypes.DATE,\n        user_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"users\" },\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n    },\n    {\n        underscored: true,\n        timestamps: true,\n        tableName: \"token\",\n    }\n);\n\nToken.belongsTo(User, {\n    foreignKey: \"user_id\",\n    as: \"user\",\n});\n\nmodule.exports = Token;\n"],"mappings":"AAAA,MAAM;EAAEA;AAAU,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAC1C,MAAMC,SAAS,GAAGD,OAAO,CAAC,oBAAoB,CAAC;AAC/C,MAAME,IAAI,GAAGF,OAAO,CAAC,qBAAqB,CAAC;AAC3C,MAAMG,KAAK,GAAGF,SAAS,CAACG,MAAM,CAC1B,OAAO,EACP;EACIC,EAAE,EAAE;IACAC,IAAI,EAAEP,SAAS,CAACQ,OAAO;IACvBC,aAAa,EAAE,IAAI;IACnBC,UAAU,EAAE,IAAI;IAChBC,SAAS,EAAE;EACf,CAAC;EACDC,KAAK,EAAEZ,SAAS,CAACa,IAAI;EACrBN,IAAI,EAAEP,SAAS,CAACa,IAAI;EACpBC,OAAO,EAAEd,SAAS,CAACe,IAAI;EACvBC,OAAO,EAAE;IACLT,IAAI,EAAEP,SAAS,CAACQ,OAAO;IACvBS,UAAU,EAAE;MACRC,KAAK,EAAE;QAAEC,SAAS,EAAE;MAAQ,CAAC;MAC7BC,GAAG,EAAE;IACT,CAAC;IACDT,SAAS,EAAE,KAAK;IAChBU,QAAQ,EAAE,SAAS;IACnBC,QAAQ,EAAE;EACd;AACJ,CAAC,EACD;EACIC,WAAW,EAAE,IAAI;EACjBC,UAAU,EAAE,IAAI;EAChBL,SAAS,EAAE;AACf,CACJ,CAAC;AAEDf,KAAK,CAACqB,SAAS,CAACtB,IAAI,EAAE;EAClBuB,UAAU,EAAE,SAAS;EACrBC,EAAE,EAAE;AACR,CAAC,CAAC;AAEFC,MAAM,CAACC,OAAO,GAAGzB,KAAK","ignoreList":[]}},"mtime":1727165639129},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/middlewares/auth.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const httpStatus = require(\"http-status-codes\");\nconst ApiError = require(\"../utils/ApiError\");\nconst {\n  roleRights\n} = require(\"../config/roles\");\nconst tokenService = require(\"../services/token.service\");\nconst tokenTypes = require(\"../utils/enums/tokenTypesEnum\");\nconst RoleTypeEnum = require(\"../utils/enums/RoleTypeEnum\");\nconst auth = (...requiredRights) => async (req, res, next) => {\n  try {\n    const token = req.headers.authorization?.split(\" \")[1];\n    if (!token) {\n      throw new ApiError(httpStatus.UNAUTHORIZED, \"Token is missing\");\n    }\n    let userDoc = await tokenService.verifyToken(token, tokenTypes.ACCESS);\n    if (requiredRights.length) {\n      let hasRequiredRights = userDoc.user.role === RoleTypeEnum.ADMIN;\n      if (!hasRequiredRights) {\n        throw new ApiError(httpStatus.FORBIDDEN, \"Forbidden\");\n      }\n    }\n    req.user = userDoc.user;\n    next();\n  } catch (error) {\n    // If there's any error (invalid token, no rights, etc.), pass it to error handler\n    next(error);\n  }\n};\nmodule.exports = auth;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJodHRwU3RhdHVzIiwicmVxdWlyZSIsIkFwaUVycm9yIiwicm9sZVJpZ2h0cyIsInRva2VuU2VydmljZSIsInRva2VuVHlwZXMiLCJSb2xlVHlwZUVudW0iLCJhdXRoIiwicmVxdWlyZWRSaWdodHMiLCJyZXEiLCJyZXMiLCJuZXh0IiwidG9rZW4iLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInNwbGl0IiwiVU5BVVRIT1JJWkVEIiwidXNlckRvYyIsInZlcmlmeVRva2VuIiwiQUNDRVNTIiwibGVuZ3RoIiwiaGFzUmVxdWlyZWRSaWdodHMiLCJ1c2VyIiwicm9sZSIsIkFETUlOIiwiRk9SQklEREVOIiwiZXJyb3IiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdnVvbmdrbWEvaUNsb3VkIERyaXZlIChBcmNoaXZlKS9Eb2N1bWVudHMva2NuZC9zcmMvbWlkZGxld2FyZXMvIiwic291cmNlcyI6WyJhdXRoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGh0dHBTdGF0dXMgPSByZXF1aXJlKFwiaHR0cC1zdGF0dXMtY29kZXNcIik7XG5jb25zdCBBcGlFcnJvciA9IHJlcXVpcmUoXCIuLi91dGlscy9BcGlFcnJvclwiKTtcbmNvbnN0IHsgcm9sZVJpZ2h0cyB9ID0gcmVxdWlyZShcIi4uL2NvbmZpZy9yb2xlc1wiKTtcbmNvbnN0IHRva2VuU2VydmljZSA9IHJlcXVpcmUoXCIuLi9zZXJ2aWNlcy90b2tlbi5zZXJ2aWNlXCIpO1xuY29uc3QgdG9rZW5UeXBlcyA9IHJlcXVpcmUoXCIuLi91dGlscy9lbnVtcy90b2tlblR5cGVzRW51bVwiKTtcbmNvbnN0IFJvbGVUeXBlRW51bSA9IHJlcXVpcmUoXCIuLi91dGlscy9lbnVtcy9Sb2xlVHlwZUVudW1cIik7XG5cbmNvbnN0IGF1dGggPVxuICAgICguLi5yZXF1aXJlZFJpZ2h0cykgPT5cbiAgICBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbj8uc3BsaXQoXCIgXCIpWzFdO1xuXG4gICAgICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFwaUVycm9yKGh0dHBTdGF0dXMuVU5BVVRIT1JJWkVELCBcIlRva2VuIGlzIG1pc3NpbmdcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCB1c2VyRG9jID0gYXdhaXQgdG9rZW5TZXJ2aWNlLnZlcmlmeVRva2VuKFxuICAgICAgICAgICAgICAgIHRva2VuLFxuICAgICAgICAgICAgICAgIHRva2VuVHlwZXMuQUNDRVNTXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAocmVxdWlyZWRSaWdodHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgbGV0IGhhc1JlcXVpcmVkUmlnaHRzID1cbiAgICAgICAgICAgICAgICAgICAgdXNlckRvYy51c2VyLnJvbGUgPT09IFJvbGVUeXBlRW51bS5BRE1JTjtcbiAgICAgICAgICAgICAgICBpZiAoIWhhc1JlcXVpcmVkUmlnaHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcGlFcnJvcihodHRwU3RhdHVzLkZPUkJJRERFTiwgXCJGb3JiaWRkZW5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVxLnVzZXIgPSB1c2VyRG9jLnVzZXI7XG4gICAgICAgICAgICBuZXh0KCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGFueSBlcnJvciAoaW52YWxpZCB0b2tlbiwgbm8gcmlnaHRzLCBldGMuKSwgcGFzcyBpdCB0byBlcnJvciBoYW5kbGVyXG4gICAgICAgICAgICBuZXh0KGVycm9yKTtcbiAgICAgICAgfVxuICAgIH07XG5cbm1vZHVsZS5leHBvcnRzID0gYXV0aDtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsVUFBVSxHQUFHQyxPQUFPLENBQUMsbUJBQW1CLENBQUM7QUFDL0MsTUFBTUMsUUFBUSxHQUFHRCxPQUFPLENBQUMsbUJBQW1CLENBQUM7QUFDN0MsTUFBTTtFQUFFRTtBQUFXLENBQUMsR0FBR0YsT0FBTyxDQUFDLGlCQUFpQixDQUFDO0FBQ2pELE1BQU1HLFlBQVksR0FBR0gsT0FBTyxDQUFDLDJCQUEyQixDQUFDO0FBQ3pELE1BQU1JLFVBQVUsR0FBR0osT0FBTyxDQUFDLCtCQUErQixDQUFDO0FBQzNELE1BQU1LLFlBQVksR0FBR0wsT0FBTyxDQUFDLDZCQUE2QixDQUFDO0FBRTNELE1BQU1NLElBQUksR0FDTkEsQ0FBQyxHQUFHQyxjQUFjLEtBQ2xCLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDdEIsSUFBSTtJQUNBLE1BQU1DLEtBQUssR0FBR0gsR0FBRyxDQUFDSSxPQUFPLENBQUNDLGFBQWEsRUFBRUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUV0RCxJQUFJLENBQUNILEtBQUssRUFBRTtNQUNSLE1BQU0sSUFBSVYsUUFBUSxDQUFDRixVQUFVLENBQUNnQixZQUFZLEVBQUUsa0JBQWtCLENBQUM7SUFDbkU7SUFFQSxJQUFJQyxPQUFPLEdBQUcsTUFBTWIsWUFBWSxDQUFDYyxXQUFXLENBQ3hDTixLQUFLLEVBQ0xQLFVBQVUsQ0FBQ2MsTUFDZixDQUFDO0lBRUQsSUFBSVgsY0FBYyxDQUFDWSxNQUFNLEVBQUU7TUFDdkIsSUFBSUMsaUJBQWlCLEdBQ2pCSixPQUFPLENBQUNLLElBQUksQ0FBQ0MsSUFBSSxLQUFLakIsWUFBWSxDQUFDa0IsS0FBSztNQUM1QyxJQUFJLENBQUNILGlCQUFpQixFQUFFO1FBQ3BCLE1BQU0sSUFBSW5CLFFBQVEsQ0FBQ0YsVUFBVSxDQUFDeUIsU0FBUyxFQUFFLFdBQVcsQ0FBQztNQUN6RDtJQUNKO0lBQ0FoQixHQUFHLENBQUNhLElBQUksR0FBR0wsT0FBTyxDQUFDSyxJQUFJO0lBQ3ZCWCxJQUFJLENBQUMsQ0FBQztFQUNWLENBQUMsQ0FBQyxPQUFPZSxLQUFLLEVBQUU7SUFDWjtJQUNBZixJQUFJLENBQUNlLEtBQUssQ0FBQztFQUNmO0FBQ0osQ0FBQztBQUVMQyxNQUFNLENBQUNDLE9BQU8sR0FBR3JCLElBQUkiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["httpStatus","require","ApiError","roleRights","tokenService","tokenTypes","RoleTypeEnum","auth","requiredRights","req","res","next","token","headers","authorization","split","UNAUTHORIZED","userDoc","verifyToken","ACCESS","length","hasRequiredRights","user","role","ADMIN","FORBIDDEN","error","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/middlewares/","sources":["auth.js"],"sourcesContent":["const httpStatus = require(\"http-status-codes\");\nconst ApiError = require(\"../utils/ApiError\");\nconst { roleRights } = require(\"../config/roles\");\nconst tokenService = require(\"../services/token.service\");\nconst tokenTypes = require(\"../utils/enums/tokenTypesEnum\");\nconst RoleTypeEnum = require(\"../utils/enums/RoleTypeEnum\");\n\nconst auth =\n    (...requiredRights) =>\n    async (req, res, next) => {\n        try {\n            const token = req.headers.authorization?.split(\" \")[1];\n\n            if (!token) {\n                throw new ApiError(httpStatus.UNAUTHORIZED, \"Token is missing\");\n            }\n\n            let userDoc = await tokenService.verifyToken(\n                token,\n                tokenTypes.ACCESS\n            );\n\n            if (requiredRights.length) {\n                let hasRequiredRights =\n                    userDoc.user.role === RoleTypeEnum.ADMIN;\n                if (!hasRequiredRights) {\n                    throw new ApiError(httpStatus.FORBIDDEN, \"Forbidden\");\n                }\n            }\n            req.user = userDoc.user;\n            next();\n        } catch (error) {\n            // If there's any error (invalid token, no rights, etc.), pass it to error handler\n            next(error);\n        }\n    };\n\nmodule.exports = auth;\n"],"mappings":"AAAA,MAAMA,UAAU,GAAGC,OAAO,CAAC,mBAAmB,CAAC;AAC/C,MAAMC,QAAQ,GAAGD,OAAO,CAAC,mBAAmB,CAAC;AAC7C,MAAM;EAAEE;AAAW,CAAC,GAAGF,OAAO,CAAC,iBAAiB,CAAC;AACjD,MAAMG,YAAY,GAAGH,OAAO,CAAC,2BAA2B,CAAC;AACzD,MAAMI,UAAU,GAAGJ,OAAO,CAAC,+BAA+B,CAAC;AAC3D,MAAMK,YAAY,GAAGL,OAAO,CAAC,6BAA6B,CAAC;AAE3D,MAAMM,IAAI,GACNA,CAAC,GAAGC,cAAc,KAClB,OAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACtB,IAAI;IACA,MAAMC,KAAK,GAAGH,GAAG,CAACI,OAAO,CAACC,aAAa,EAAEC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IAEtD,IAAI,CAACH,KAAK,EAAE;MACR,MAAM,IAAIV,QAAQ,CAACF,UAAU,CAACgB,YAAY,EAAE,kBAAkB,CAAC;IACnE;IAEA,IAAIC,OAAO,GAAG,MAAMb,YAAY,CAACc,WAAW,CACxCN,KAAK,EACLP,UAAU,CAACc,MACf,CAAC;IAED,IAAIX,cAAc,CAACY,MAAM,EAAE;MACvB,IAAIC,iBAAiB,GACjBJ,OAAO,CAACK,IAAI,CAACC,IAAI,KAAKjB,YAAY,CAACkB,KAAK;MAC5C,IAAI,CAACH,iBAAiB,EAAE;QACpB,MAAM,IAAInB,QAAQ,CAACF,UAAU,CAACyB,SAAS,EAAE,WAAW,CAAC;MACzD;IACJ;IACAhB,GAAG,CAACa,IAAI,GAAGL,OAAO,CAACK,IAAI;IACvBX,IAAI,CAAC,CAAC;EACV,CAAC,CAAC,OAAOe,KAAK,EAAE;IACZ;IACAf,IAAI,CAACe,KAAK,CAAC;EACf;AACJ,CAAC;AAELC,MAAM,CAACC,OAAO,GAAGrB,IAAI","ignoreList":[]}},"mtime":1727248242549},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/config/roles.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const allRoles = {\n  user: [],\n  admin: [\"getUsers\", \"manageUsers\"]\n};\nconst roles = Object.keys(allRoles);\nconst roleRights = new Map(Object.entries(allRoles));\nconst defineRoles = {\n  Admin: \"ADMIN\",\n  User: \"USER\",\n  Guest: \"GUEST\"\n};\nmodule.exports = {\n  roles,\n  roleRights,\n  defineRoles\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhbGxSb2xlcyIsInVzZXIiLCJhZG1pbiIsInJvbGVzIiwiT2JqZWN0Iiwia2V5cyIsInJvbGVSaWdodHMiLCJNYXAiLCJlbnRyaWVzIiwiZGVmaW5lUm9sZXMiLCJBZG1pbiIsIlVzZXIiLCJHdWVzdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy9jb25maWcvIiwic291cmNlcyI6WyJyb2xlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBhbGxSb2xlcyA9IHtcbiAgICB1c2VyOiBbXSxcbiAgICBhZG1pbjogW1wiZ2V0VXNlcnNcIiwgXCJtYW5hZ2VVc2Vyc1wiXSxcbn07XG5cbmNvbnN0IHJvbGVzID0gT2JqZWN0LmtleXMoYWxsUm9sZXMpO1xuY29uc3Qgcm9sZVJpZ2h0cyA9IG5ldyBNYXAoT2JqZWN0LmVudHJpZXMoYWxsUm9sZXMpKTtcbmNvbnN0IGRlZmluZVJvbGVzID0ge1xuICAgIEFkbWluOiBcIkFETUlOXCIsXG4gICAgVXNlcjogXCJVU0VSXCIsXG4gICAgR3Vlc3Q6IFwiR1VFU1RcIixcbn07XG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICByb2xlcyxcbiAgICByb2xlUmlnaHRzLFxuICAgIGRlZmluZVJvbGVzLFxufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsUUFBUSxHQUFHO0VBQ2JDLElBQUksRUFBRSxFQUFFO0VBQ1JDLEtBQUssRUFBRSxDQUFDLFVBQVUsRUFBRSxhQUFhO0FBQ3JDLENBQUM7QUFFRCxNQUFNQyxLQUFLLEdBQUdDLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDTCxRQUFRLENBQUM7QUFDbkMsTUFBTU0sVUFBVSxHQUFHLElBQUlDLEdBQUcsQ0FBQ0gsTUFBTSxDQUFDSSxPQUFPLENBQUNSLFFBQVEsQ0FBQyxDQUFDO0FBQ3BELE1BQU1TLFdBQVcsR0FBRztFQUNoQkMsS0FBSyxFQUFFLE9BQU87RUFDZEMsSUFBSSxFQUFFLE1BQU07RUFDWkMsS0FBSyxFQUFFO0FBQ1gsQ0FBQztBQUNEQyxNQUFNLENBQUNDLE9BQU8sR0FBRztFQUNiWCxLQUFLO0VBQ0xHLFVBQVU7RUFDVkc7QUFDSixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["allRoles","user","admin","roles","Object","keys","roleRights","Map","entries","defineRoles","Admin","User","Guest","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/config/","sources":["roles.js"],"sourcesContent":["const allRoles = {\n    user: [],\n    admin: [\"getUsers\", \"manageUsers\"],\n};\n\nconst roles = Object.keys(allRoles);\nconst roleRights = new Map(Object.entries(allRoles));\nconst defineRoles = {\n    Admin: \"ADMIN\",\n    User: \"USER\",\n    Guest: \"GUEST\",\n};\nmodule.exports = {\n    roles,\n    roleRights,\n    defineRoles,\n};\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAG;EACbC,IAAI,EAAE,EAAE;EACRC,KAAK,EAAE,CAAC,UAAU,EAAE,aAAa;AACrC,CAAC;AAED,MAAMC,KAAK,GAAGC,MAAM,CAACC,IAAI,CAACL,QAAQ,CAAC;AACnC,MAAMM,UAAU,GAAG,IAAIC,GAAG,CAACH,MAAM,CAACI,OAAO,CAACR,QAAQ,CAAC,CAAC;AACpD,MAAMS,WAAW,GAAG;EAChBC,KAAK,EAAE,OAAO;EACdC,IAAI,EAAE,MAAM;EACZC,KAAK,EAAE;AACX,CAAC;AACDC,MAAM,CAACC,OAAO,GAAG;EACbX,KAAK;EACLG,UAAU;EACVG;AACJ,CAAC","ignoreList":[]}},"mtime":1727229567450},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/enums/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/enums/tokenTypesEnum.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const tokenTypes = {\n  ACCESS: \"access\",\n  REFRESH: \"refresh\"\n};\nmodule.exports = tokenTypes;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ0b2tlblR5cGVzIiwiQUNDRVNTIiwiUkVGUkVTSCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy91dGlscy9lbnVtcy8iLCJzb3VyY2VzIjpbInRva2VuVHlwZXNFbnVtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHRva2VuVHlwZXMgPSB7XG4gICAgQUNDRVNTOiBcImFjY2Vzc1wiLFxuICAgIFJFRlJFU0g6IFwicmVmcmVzaFwiLFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB0b2tlblR5cGVzO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxVQUFVLEdBQUc7RUFDZkMsTUFBTSxFQUFFLFFBQVE7RUFDaEJDLE9BQU8sRUFBRTtBQUNiLENBQUM7QUFFREMsTUFBTSxDQUFDQyxPQUFPLEdBQUdKLFVBQVUiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["tokenTypes","ACCESS","REFRESH","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/enums/","sources":["tokenTypesEnum.js"],"sourcesContent":["const tokenTypes = {\n    ACCESS: \"access\",\n    REFRESH: \"refresh\",\n};\n\nmodule.exports = tokenTypes;\n"],"mappings":"AAAA,MAAMA,UAAU,GAAG;EACfC,MAAM,EAAE,QAAQ;EAChBC,OAAO,EAAE;AACb,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAGJ,UAAU","ignoreList":[]}},"mtime":1727166908239},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/mediaRoute.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const express = require(\"express\");\nconst mediaController = require(\"../../controllers/mediaController\");\nconst validate = require(\"../../middlewares/validate\");\nconst auth = require(\"../../middlewares/auth\");\nconst upload = require(\"../../config/multer\");\nconst router = express.Router();\n\n// update image\nrouter.route(\"/api/media\").post(auth(), upload.fields([{\n  name: \"media\",\n  maxCount: 5\n}]), mediaController.create);\nmodule.exports = router;\n/**\n * @swagger\n * tags:\n *   name: Users\n *   description: User management and retrieval\n */\n\n/**\n * @swagger\n * /users:\n *   post:\n *     summary: Create a user\n *     description: Only admins can create other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - name\n *               - email\n *               - password\n *               - role\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *               role:\n *                  type: string\n *                  enum: [user, admin]\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *               role: user\n *     responses:\n *       \"201\":\n *         description: Created\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *\n *   get:\n *     summary: Get all users\n *     description: Only admins can retrieve all users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: query\n *         name: name\n *         schema:\n *           type: string\n *         description: User name\n *       - in: query\n *         name: role\n *         schema:\n *           type: string\n *         description: User role\n *       - in: query\n *         name: sortBy\n *         schema:\n *           type: string\n *         description: sort by query in the form of field:desc/asc (ex. name:asc)\n *       - in: query\n *         name: limit\n *         schema:\n *           type: integer\n *           minimum: 1\n *         default: 10\n *         description: Maximum number of users\n *       - in: query\n *         name: page\n *         schema:\n *           type: integer\n *           minimum: 1\n *           default: 1\n *         description: Page number\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 results:\n *                   type: array\n *                   items:\n *                     $ref: '#/components/schemas/User'\n *                 page:\n *                   type: integer\n *                   example: 1\n *                 limit:\n *                   type: integer\n *                   example: 10\n *                 totalPages:\n *                   type: integer\n *                   example: 1\n *                 totalResults:\n *                   type: integer\n *                   example: 1\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n */\n\n/**\n * @swagger\n * /users/{id}:\n *   get:\n *     summary: Get a user\n *     description: Logged in users can fetch only their own user information. Only admins can fetch other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   patch:\n *     summary: Update a user\n *     description: Logged in users can only update their own information. Only admins can update other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   delete:\n *     summary: Delete a user\n *     description: Logged in users can delete only themselves. Only admins can delete other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: No content\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n */\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsIm1lZGlhQ29udHJvbGxlciIsInZhbGlkYXRlIiwiYXV0aCIsInVwbG9hZCIsInJvdXRlciIsIlJvdXRlciIsInJvdXRlIiwicG9zdCIsImZpZWxkcyIsIm5hbWUiLCJtYXhDb3VudCIsImNyZWF0ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy9yb3V0ZXMvdjEvIiwic291cmNlcyI6WyJtZWRpYVJvdXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKFwiZXhwcmVzc1wiKTtcbmNvbnN0IG1lZGlhQ29udHJvbGxlciA9IHJlcXVpcmUoXCIuLi8uLi9jb250cm9sbGVycy9tZWRpYUNvbnRyb2xsZXJcIik7XG5jb25zdCB2YWxpZGF0ZSA9IHJlcXVpcmUoXCIuLi8uLi9taWRkbGV3YXJlcy92YWxpZGF0ZVwiKTtcbmNvbnN0IGF1dGggPSByZXF1aXJlKFwiLi4vLi4vbWlkZGxld2FyZXMvYXV0aFwiKTtcbmNvbnN0IHVwbG9hZCA9IHJlcXVpcmUoXCIuLi8uLi9jb25maWcvbXVsdGVyXCIpO1xuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuLy8gdXBkYXRlIGltYWdlXG5yb3V0ZXJcbiAgICAucm91dGUoXCIvYXBpL21lZGlhXCIpXG4gICAgLnBvc3QoXG4gICAgICAgIGF1dGgoKSxcbiAgICAgICAgdXBsb2FkLmZpZWxkcyhbeyBuYW1lOiBcIm1lZGlhXCIsIG1heENvdW50OiA1IH1dKSxcbiAgICAgICAgbWVkaWFDb250cm9sbGVyLmNyZWF0ZVxuICAgICk7XG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcbi8qKlxuICogQHN3YWdnZXJcbiAqIHRhZ3M6XG4gKiAgIG5hbWU6IFVzZXJzXG4gKiAgIGRlc2NyaXB0aW9uOiBVc2VyIG1hbmFnZW1lbnQgYW5kIHJldHJpZXZhbFxuICovXG5cbi8qKlxuICogQHN3YWdnZXJcbiAqIC91c2VyczpcbiAqICAgcG9zdDpcbiAqICAgICBzdW1tYXJ5OiBDcmVhdGUgYSB1c2VyXG4gKiAgICAgZGVzY3JpcHRpb246IE9ubHkgYWRtaW5zIGNhbiBjcmVhdGUgb3RoZXIgdXNlcnMuXG4gKiAgICAgdGFnczogW1VzZXJzXVxuICogICAgIHNlY3VyaXR5OlxuICogICAgICAgLSBiZWFyZXJBdXRoOiBbXVxuICogICAgIHJlcXVlc3RCb2R5OlxuICogICAgICAgcmVxdWlyZWQ6IHRydWVcbiAqICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgdHlwZTogb2JqZWN0XG4gKiAgICAgICAgICAgICByZXF1aXJlZDpcbiAqICAgICAgICAgICAgICAgLSBuYW1lXG4gKiAgICAgICAgICAgICAgIC0gZW1haWxcbiAqICAgICAgICAgICAgICAgLSBwYXNzd29yZFxuICogICAgICAgICAgICAgICAtIHJvbGVcbiAqICAgICAgICAgICAgIHByb3BlcnRpZXM6XG4gKiAgICAgICAgICAgICAgIG5hbWU6XG4gKiAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgIGVtYWlsOlxuICogICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgICAgIGZvcm1hdDogZW1haWxcbiAqICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbXVzdCBiZSB1bmlxdWVcbiAqICAgICAgICAgICAgICAgcGFzc3dvcmQ6XG4gKiAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgZm9ybWF0OiBwYXNzd29yZFxuICogICAgICAgICAgICAgICAgIG1pbkxlbmd0aDogOFxuICogICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBBdCBsZWFzdCBvbmUgbnVtYmVyIGFuZCBvbmUgbGV0dGVyXG4gKiAgICAgICAgICAgICAgIHJvbGU6XG4gKiAgICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgICAgICBlbnVtOiBbdXNlciwgYWRtaW5dXG4gKiAgICAgICAgICAgICBleGFtcGxlOlxuICogICAgICAgICAgICAgICBuYW1lOiBmYWtlIG5hbWVcbiAqICAgICAgICAgICAgICAgZW1haWw6IGZha2VAZXhhbXBsZS5jb21cbiAqICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkMVxuICogICAgICAgICAgICAgICByb2xlOiB1c2VyXG4gKiAgICAgcmVzcG9uc2VzOlxuICogICAgICAgXCIyMDFcIjpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IENyZWF0ZWRcbiAqICAgICAgICAgY29udGVudDpcbiAqICAgICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL1VzZXInXG4gKiAgICAgICBcIjQwMFwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9EdXBsaWNhdGVFbWFpbCdcbiAqICAgICAgIFwiNDAxXCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL1VuYXV0aG9yaXplZCdcbiAqICAgICAgIFwiNDAzXCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL0ZvcmJpZGRlbidcbiAqXG4gKiAgIGdldDpcbiAqICAgICBzdW1tYXJ5OiBHZXQgYWxsIHVzZXJzXG4gKiAgICAgZGVzY3JpcHRpb246IE9ubHkgYWRtaW5zIGNhbiByZXRyaWV2ZSBhbGwgdXNlcnMuXG4gKiAgICAgdGFnczogW1VzZXJzXVxuICogICAgIHNlY3VyaXR5OlxuICogICAgICAgLSBiZWFyZXJBdXRoOiBbXVxuICogICAgIHBhcmFtZXRlcnM6XG4gKiAgICAgICAtIGluOiBxdWVyeVxuICogICAgICAgICBuYW1lOiBuYW1lXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIgbmFtZVxuICogICAgICAgLSBpbjogcXVlcnlcbiAqICAgICAgICAgbmFtZTogcm9sZVxuICogICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBVc2VyIHJvbGVcbiAqICAgICAgIC0gaW46IHF1ZXJ5XG4gKiAgICAgICAgIG5hbWU6IHNvcnRCeVxuICogICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBzb3J0IGJ5IHF1ZXJ5IGluIHRoZSBmb3JtIG9mIGZpZWxkOmRlc2MvYXNjIChleC4gbmFtZTphc2MpXG4gKiAgICAgICAtIGluOiBxdWVyeVxuICogICAgICAgICBuYW1lOiBsaW1pdFxuICogICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgdHlwZTogaW50ZWdlclxuICogICAgICAgICAgIG1pbmltdW06IDFcbiAqICAgICAgICAgZGVmYXVsdDogMTBcbiAqICAgICAgICAgZGVzY3JpcHRpb246IE1heGltdW0gbnVtYmVyIG9mIHVzZXJzXG4gKiAgICAgICAtIGluOiBxdWVyeVxuICogICAgICAgICBuYW1lOiBwYWdlXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBpbnRlZ2VyXG4gKiAgICAgICAgICAgbWluaW11bTogMVxuICogICAgICAgICAgIGRlZmF1bHQ6IDFcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFBhZ2UgbnVtYmVyXG4gKiAgICAgcmVzcG9uc2VzOlxuICogICAgICAgXCIyMDBcIjpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IE9LXG4gKiAgICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICAgdHlwZTogb2JqZWN0XG4gKiAgICAgICAgICAgICAgIHByb3BlcnRpZXM6XG4gKiAgICAgICAgICAgICAgICAgcmVzdWx0czpcbiAqICAgICAgICAgICAgICAgICAgIHR5cGU6IGFycmF5XG4gKiAgICAgICAgICAgICAgICAgICBpdGVtczpcbiAqICAgICAgICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL1VzZXInXG4gKiAgICAgICAgICAgICAgICAgcGFnZTpcbiAqICAgICAgICAgICAgICAgICAgIHR5cGU6IGludGVnZXJcbiAqICAgICAgICAgICAgICAgICAgIGV4YW1wbGU6IDFcbiAqICAgICAgICAgICAgICAgICBsaW1pdDpcbiAqICAgICAgICAgICAgICAgICAgIHR5cGU6IGludGVnZXJcbiAqICAgICAgICAgICAgICAgICAgIGV4YW1wbGU6IDEwXG4gKiAgICAgICAgICAgICAgICAgdG90YWxQYWdlczpcbiAqICAgICAgICAgICAgICAgICAgIHR5cGU6IGludGVnZXJcbiAqICAgICAgICAgICAgICAgICAgIGV4YW1wbGU6IDFcbiAqICAgICAgICAgICAgICAgICB0b3RhbFJlc3VsdHM6XG4gKiAgICAgICAgICAgICAgICAgICB0eXBlOiBpbnRlZ2VyXG4gKiAgICAgICAgICAgICAgICAgICBleGFtcGxlOiAxXG4gKiAgICAgICBcIjQwMVwiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9VbmF1dGhvcml6ZWQnXG4gKiAgICAgICBcIjQwM1wiOlxuICogICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3Jlc3BvbnNlcy9Gb3JiaWRkZW4nXG4gKi9cblxuLyoqXG4gKiBAc3dhZ2dlclxuICogL3VzZXJzL3tpZH06XG4gKiAgIGdldDpcbiAqICAgICBzdW1tYXJ5OiBHZXQgYSB1c2VyXG4gKiAgICAgZGVzY3JpcHRpb246IExvZ2dlZCBpbiB1c2VycyBjYW4gZmV0Y2ggb25seSB0aGVpciBvd24gdXNlciBpbmZvcm1hdGlvbi4gT25seSBhZG1pbnMgY2FuIGZldGNoIG90aGVyIHVzZXJzLlxuICogICAgIHRhZ3M6IFtVc2Vyc11cbiAqICAgICBzZWN1cml0eTpcbiAqICAgICAgIC0gYmVhcmVyQXV0aDogW11cbiAqICAgICBwYXJhbWV0ZXJzOlxuICogICAgICAgLSBpbjogcGF0aFxuICogICAgICAgICBuYW1lOiBpZFxuICogICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICogICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBVc2VyIGlkXG4gKiAgICAgcmVzcG9uc2VzOlxuICogICAgICAgXCIyMDBcIjpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IE9LXG4gKiAgICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9Vc2VyJ1xuICogICAgICAgXCI0MDFcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvVW5hdXRob3JpemVkJ1xuICogICAgICAgXCI0MDNcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvRm9yYmlkZGVuJ1xuICogICAgICAgXCI0MDRcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvTm90Rm91bmQnXG4gKlxuICogICBwYXRjaDpcbiAqICAgICBzdW1tYXJ5OiBVcGRhdGUgYSB1c2VyXG4gKiAgICAgZGVzY3JpcHRpb246IExvZ2dlZCBpbiB1c2VycyBjYW4gb25seSB1cGRhdGUgdGhlaXIgb3duIGluZm9ybWF0aW9uLiBPbmx5IGFkbWlucyBjYW4gdXBkYXRlIG90aGVyIHVzZXJzLlxuICogICAgIHRhZ3M6IFtVc2Vyc11cbiAqICAgICBzZWN1cml0eTpcbiAqICAgICAgIC0gYmVhcmVyQXV0aDogW11cbiAqICAgICBwYXJhbWV0ZXJzOlxuICogICAgICAgLSBpbjogcGF0aFxuICogICAgICAgICBuYW1lOiBpZFxuICogICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICogICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBVc2VyIGlkXG4gKiAgICAgcmVxdWVzdEJvZHk6XG4gKiAgICAgICByZXF1aXJlZDogdHJ1ZVxuICogICAgICAgY29udGVudDpcbiAqICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICB0eXBlOiBvYmplY3RcbiAqICAgICAgICAgICAgIHByb3BlcnRpZXM6XG4gKiAgICAgICAgICAgICAgIG5hbWU6XG4gKiAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgIGVtYWlsOlxuICogICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgICAgIGZvcm1hdDogZW1haWxcbiAqICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbXVzdCBiZSB1bmlxdWVcbiAqICAgICAgICAgICAgICAgcGFzc3dvcmQ6XG4gKiAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgZm9ybWF0OiBwYXNzd29yZFxuICogICAgICAgICAgICAgICAgIG1pbkxlbmd0aDogOFxuICogICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBBdCBsZWFzdCBvbmUgbnVtYmVyIGFuZCBvbmUgbGV0dGVyXG4gKiAgICAgICAgICAgICBleGFtcGxlOlxuICogICAgICAgICAgICAgICBuYW1lOiBmYWtlIG5hbWVcbiAqICAgICAgICAgICAgICAgZW1haWw6IGZha2VAZXhhbXBsZS5jb21cbiAqICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkMVxuICogICAgIHJlc3BvbnNlczpcbiAqICAgICAgIFwiMjAwXCI6XG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBPS1xuICogICAgICAgICBjb250ZW50OlxuICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAgICAkcmVmOiAnIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlcidcbiAqICAgICAgIFwiNDAwXCI6XG4gKiAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvcmVzcG9uc2VzL0R1cGxpY2F0ZUVtYWlsJ1xuICogICAgICAgXCI0MDFcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvVW5hdXRob3JpemVkJ1xuICogICAgICAgXCI0MDNcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvRm9yYmlkZGVuJ1xuICogICAgICAgXCI0MDRcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvTm90Rm91bmQnXG4gKlxuICogICBkZWxldGU6XG4gKiAgICAgc3VtbWFyeTogRGVsZXRlIGEgdXNlclxuICogICAgIGRlc2NyaXB0aW9uOiBMb2dnZWQgaW4gdXNlcnMgY2FuIGRlbGV0ZSBvbmx5IHRoZW1zZWx2ZXMuIE9ubHkgYWRtaW5zIGNhbiBkZWxldGUgb3RoZXIgdXNlcnMuXG4gKiAgICAgdGFnczogW1VzZXJzXVxuICogICAgIHNlY3VyaXR5OlxuICogICAgICAgLSBiZWFyZXJBdXRoOiBbXVxuICogICAgIHBhcmFtZXRlcnM6XG4gKiAgICAgICAtIGluOiBwYXRoXG4gKiAgICAgICAgIG5hbWU6IGlkXG4gKiAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIgaWRcbiAqICAgICByZXNwb25zZXM6XG4gKiAgICAgICBcIjIwMFwiOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogTm8gY29udGVudFxuICogICAgICAgXCI0MDFcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvVW5hdXRob3JpemVkJ1xuICogICAgICAgXCI0MDNcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvRm9yYmlkZGVuJ1xuICogICAgICAgXCI0MDRcIjpcbiAqICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9yZXNwb25zZXMvTm90Rm91bmQnXG4gKi9cbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU1DLGVBQWUsR0FBR0QsT0FBTyxDQUFDLG1DQUFtQyxDQUFDO0FBQ3BFLE1BQU1FLFFBQVEsR0FBR0YsT0FBTyxDQUFDLDRCQUE0QixDQUFDO0FBQ3RELE1BQU1HLElBQUksR0FBR0gsT0FBTyxDQUFDLHdCQUF3QixDQUFDO0FBQzlDLE1BQU1JLE1BQU0sR0FBR0osT0FBTyxDQUFDLHFCQUFxQixDQUFDO0FBQzdDLE1BQU1LLE1BQU0sR0FBR04sT0FBTyxDQUFDTyxNQUFNLENBQUMsQ0FBQzs7QUFFL0I7QUFDQUQsTUFBTSxDQUNERSxLQUFLLENBQUMsWUFBWSxDQUFDLENBQ25CQyxJQUFJLENBQ0RMLElBQUksQ0FBQyxDQUFDLEVBQ05DLE1BQU0sQ0FBQ0ssTUFBTSxDQUFDLENBQUM7RUFBRUMsSUFBSSxFQUFFLE9BQU87RUFBRUMsUUFBUSxFQUFFO0FBQUUsQ0FBQyxDQUFDLENBQUMsRUFDL0NWLGVBQWUsQ0FBQ1csTUFDcEIsQ0FBQztBQUNMQyxNQUFNLENBQUNDLE9BQU8sR0FBR1QsTUFBTTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["express","require","mediaController","validate","auth","upload","router","Router","route","post","fields","name","maxCount","create","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/routes/v1/","sources":["mediaRoute.js"],"sourcesContent":["const express = require(\"express\");\nconst mediaController = require(\"../../controllers/mediaController\");\nconst validate = require(\"../../middlewares/validate\");\nconst auth = require(\"../../middlewares/auth\");\nconst upload = require(\"../../config/multer\");\nconst router = express.Router();\n\n// update image\nrouter\n    .route(\"/api/media\")\n    .post(\n        auth(),\n        upload.fields([{ name: \"media\", maxCount: 5 }]),\n        mediaController.create\n    );\nmodule.exports = router;\n/**\n * @swagger\n * tags:\n *   name: Users\n *   description: User management and retrieval\n */\n\n/**\n * @swagger\n * /users:\n *   post:\n *     summary: Create a user\n *     description: Only admins can create other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - name\n *               - email\n *               - password\n *               - role\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *               role:\n *                  type: string\n *                  enum: [user, admin]\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *               role: user\n *     responses:\n *       \"201\":\n *         description: Created\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *\n *   get:\n *     summary: Get all users\n *     description: Only admins can retrieve all users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: query\n *         name: name\n *         schema:\n *           type: string\n *         description: User name\n *       - in: query\n *         name: role\n *         schema:\n *           type: string\n *         description: User role\n *       - in: query\n *         name: sortBy\n *         schema:\n *           type: string\n *         description: sort by query in the form of field:desc/asc (ex. name:asc)\n *       - in: query\n *         name: limit\n *         schema:\n *           type: integer\n *           minimum: 1\n *         default: 10\n *         description: Maximum number of users\n *       - in: query\n *         name: page\n *         schema:\n *           type: integer\n *           minimum: 1\n *           default: 1\n *         description: Page number\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 results:\n *                   type: array\n *                   items:\n *                     $ref: '#/components/schemas/User'\n *                 page:\n *                   type: integer\n *                   example: 1\n *                 limit:\n *                   type: integer\n *                   example: 10\n *                 totalPages:\n *                   type: integer\n *                   example: 1\n *                 totalResults:\n *                   type: integer\n *                   example: 1\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n */\n\n/**\n * @swagger\n * /users/{id}:\n *   get:\n *     summary: Get a user\n *     description: Logged in users can fetch only their own user information. Only admins can fetch other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   patch:\n *     summary: Update a user\n *     description: Logged in users can only update their own information. Only admins can update other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             properties:\n *               name:\n *                 type: string\n *               email:\n *                 type: string\n *                 format: email\n *                 description: must be unique\n *               password:\n *                 type: string\n *                 format: password\n *                 minLength: 8\n *                 description: At least one number and one letter\n *             example:\n *               name: fake name\n *               email: fake@example.com\n *               password: password1\n *     responses:\n *       \"200\":\n *         description: OK\n *         content:\n *           application/json:\n *             schema:\n *                $ref: '#/components/schemas/User'\n *       \"400\":\n *         $ref: '#/components/responses/DuplicateEmail'\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n *\n *   delete:\n *     summary: Delete a user\n *     description: Logged in users can delete only themselves. Only admins can delete other users.\n *     tags: [Users]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: id\n *         required: true\n *         schema:\n *           type: string\n *         description: User id\n *     responses:\n *       \"200\":\n *         description: No content\n *       \"401\":\n *         $ref: '#/components/responses/Unauthorized'\n *       \"403\":\n *         $ref: '#/components/responses/Forbidden'\n *       \"404\":\n *         $ref: '#/components/responses/NotFound'\n */\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,eAAe,GAAGD,OAAO,CAAC,mCAAmC,CAAC;AACpE,MAAME,QAAQ,GAAGF,OAAO,CAAC,4BAA4B,CAAC;AACtD,MAAMG,IAAI,GAAGH,OAAO,CAAC,wBAAwB,CAAC;AAC9C,MAAMI,MAAM,GAAGJ,OAAO,CAAC,qBAAqB,CAAC;AAC7C,MAAMK,MAAM,GAAGN,OAAO,CAACO,MAAM,CAAC,CAAC;;AAE/B;AACAD,MAAM,CACDE,KAAK,CAAC,YAAY,CAAC,CACnBC,IAAI,CACDL,IAAI,CAAC,CAAC,EACNC,MAAM,CAACK,MAAM,CAAC,CAAC;EAAEC,IAAI,EAAE,OAAO;EAAEC,QAAQ,EAAE;AAAE,CAAC,CAAC,CAAC,EAC/CV,eAAe,CAACW,MACpB,CAAC;AACLC,MAAM,CAACC,OAAO,GAAGT,MAAM;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]}},"mtime":1727249082269},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/controllers/mediaController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const {\n  StatusCodes\n} = require(\"http-status-codes\");\nconst mediaService = require(\"../services/mediaService\");\nconst tokenService = require(\"../services/token.service\");\nconst bcrypt = require(\"bcryptjs\");\n//import message factory\nconst MessageFactory = require(\"../utils/messageFactory\");\nconst RemoveValueNullObject = require(\"../utils/removeValueNullObject\");\nconst tokenTypes = require(\"../utils/enums/tokenTypesEnum\");\nconst sizeOf = require(\"image-size\");\nexports.create = async (req, res, next) => {\n  try {\n    let user = req.user;\n    let files = req.files.media;\n    let attachments = [];\n    if (files) {\n      for (const file of files) {\n        let id = await bcrypt.hash(file.originalname, 8);\n        let url = process.env.BASIC_URL + \"/\" + file.path;\n        let contentType = file.mimetype;\n        let size = file.size;\n        const dimensions = sizeOf(file.path);\n        const data = await mediaService.create({\n          user_id: user.id,\n          file_name: file.originalname,\n          url: url,\n          content_type: contentType,\n          size: size,\n          width: dimensions.width || null,\n          height: dimensions.height || null\n        });\n        attachments.push({\n          name: file.originalname,\n          url: url,\n          id: id\n        });\n      }\n    }\n    if (attachments) {\n      res.status(StatusCodes.OK).json(MessageFactory.success(attachments, \"Created success!\"));\n    } else {\n      res.status(StatusCodes.UNAUTHORIZED).json(MessageFactory.error(\"Created error\"));\n    }\n  } catch (error) {\n    next(error);\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTdGF0dXNDb2RlcyIsInJlcXVpcmUiLCJtZWRpYVNlcnZpY2UiLCJ0b2tlblNlcnZpY2UiLCJiY3J5cHQiLCJNZXNzYWdlRmFjdG9yeSIsIlJlbW92ZVZhbHVlTnVsbE9iamVjdCIsInRva2VuVHlwZXMiLCJzaXplT2YiLCJleHBvcnRzIiwiY3JlYXRlIiwicmVxIiwicmVzIiwibmV4dCIsInVzZXIiLCJmaWxlcyIsIm1lZGlhIiwiYXR0YWNobWVudHMiLCJmaWxlIiwiaWQiLCJoYXNoIiwib3JpZ2luYWxuYW1lIiwidXJsIiwicHJvY2VzcyIsImVudiIsIkJBU0lDX1VSTCIsInBhdGgiLCJjb250ZW50VHlwZSIsIm1pbWV0eXBlIiwic2l6ZSIsImRpbWVuc2lvbnMiLCJkYXRhIiwidXNlcl9pZCIsImZpbGVfbmFtZSIsImNvbnRlbnRfdHlwZSIsIndpZHRoIiwiaGVpZ2h0IiwicHVzaCIsIm5hbWUiLCJzdGF0dXMiLCJPSyIsImpzb24iLCJzdWNjZXNzIiwiVU5BVVRIT1JJWkVEIiwiZXJyb3IiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dW9uZ2ttYS9pQ2xvdWQgRHJpdmUgKEFyY2hpdmUpL0RvY3VtZW50cy9rY25kL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbIm1lZGlhQ29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IFN0YXR1c0NvZGVzIH0gPSByZXF1aXJlKFwiaHR0cC1zdGF0dXMtY29kZXNcIik7XG5jb25zdCBtZWRpYVNlcnZpY2UgPSByZXF1aXJlKFwiLi4vc2VydmljZXMvbWVkaWFTZXJ2aWNlXCIpO1xuY29uc3QgdG9rZW5TZXJ2aWNlID0gcmVxdWlyZShcIi4uL3NlcnZpY2VzL3Rva2VuLnNlcnZpY2VcIik7XG5jb25zdCBiY3J5cHQgPSByZXF1aXJlKFwiYmNyeXB0anNcIik7XG4vL2ltcG9ydCBtZXNzYWdlIGZhY3RvcnlcbmNvbnN0IE1lc3NhZ2VGYWN0b3J5ID0gcmVxdWlyZShcIi4uL3V0aWxzL21lc3NhZ2VGYWN0b3J5XCIpO1xuY29uc3QgUmVtb3ZlVmFsdWVOdWxsT2JqZWN0ID0gcmVxdWlyZShcIi4uL3V0aWxzL3JlbW92ZVZhbHVlTnVsbE9iamVjdFwiKTtcbmNvbnN0IHRva2VuVHlwZXMgPSByZXF1aXJlKFwiLi4vdXRpbHMvZW51bXMvdG9rZW5UeXBlc0VudW1cIik7XG5jb25zdCBzaXplT2YgPSByZXF1aXJlKFwiaW1hZ2Utc2l6ZVwiKTtcblxuZXhwb3J0cy5jcmVhdGUgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBsZXQgdXNlciA9IHJlcS51c2VyO1xuICAgICAgICBsZXQgZmlsZXMgPSByZXEuZmlsZXMubWVkaWE7XG5cbiAgICAgICAgbGV0IGF0dGFjaG1lbnRzID0gW107XG5cbiAgICAgICAgaWYgKGZpbGVzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgICAgICAgICBsZXQgaWQgPSBhd2FpdCBiY3J5cHQuaGFzaChmaWxlLm9yaWdpbmFsbmFtZSwgOCk7XG4gICAgICAgICAgICAgICAgbGV0IHVybCA9IHByb2Nlc3MuZW52LkJBU0lDX1VSTCArIFwiL1wiICsgZmlsZS5wYXRoO1xuICAgICAgICAgICAgICAgIGxldCBjb250ZW50VHlwZSA9IGZpbGUubWltZXR5cGU7XG4gICAgICAgICAgICAgICAgbGV0IHNpemUgPSBmaWxlLnNpemU7XG4gICAgICAgICAgICAgICAgY29uc3QgZGltZW5zaW9ucyA9IHNpemVPZihmaWxlLnBhdGgpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IG1lZGlhU2VydmljZS5jcmVhdGUoe1xuICAgICAgICAgICAgICAgICAgICB1c2VyX2lkOiB1c2VyLmlkLFxuICAgICAgICAgICAgICAgICAgICBmaWxlX25hbWU6IGZpbGUub3JpZ2luYWxuYW1lLFxuICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudF90eXBlOiBjb250ZW50VHlwZSxcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogc2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGRpbWVuc2lvbnMud2lkdGggfHwgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBkaW1lbnNpb25zLmhlaWdodCB8fCBudWxsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGF0dGFjaG1lbnRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBmaWxlLm9yaWdpbmFsbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhdHRhY2htZW50cykge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyhTdGF0dXNDb2Rlcy5PSykuanNvbihcbiAgICAgICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5zdWNjZXNzKGF0dGFjaG1lbnRzLCBcIkNyZWF0ZWQgc3VjY2VzcyFcIilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKFN0YXR1c0NvZGVzLlVOQVVUSE9SSVpFRCkuanNvbihcbiAgICAgICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5lcnJvcihcIkNyZWF0ZWQgZXJyb3JcIilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBuZXh0KGVycm9yKTtcbiAgICB9XG59O1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNO0VBQUVBO0FBQVksQ0FBQyxHQUFHQyxPQUFPLENBQUMsbUJBQW1CLENBQUM7QUFDcEQsTUFBTUMsWUFBWSxHQUFHRCxPQUFPLENBQUMsMEJBQTBCLENBQUM7QUFDeEQsTUFBTUUsWUFBWSxH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","map":{"version":3,"names":["StatusCodes","require","mediaService","tokenService","bcrypt","MessageFactory","RemoveValueNullObject","tokenTypes","sizeOf","exports","create","req","res","next","user","files","media","attachments","file","id","hash","originalname","url","process","env","BASIC_URL","path","contentType","mimetype","size","dimensions","data","user_id","file_name","content_type","width","height","push","name","status","OK","json","success","UNAUTHORIZED","error"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/controllers/","sources":["mediaController.js"],"sourcesContent":["const { StatusCodes } = require(\"http-status-codes\");\nconst mediaService = require(\"../services/mediaService\");\nconst tokenService = require(\"../services/token.service\");\nconst bcrypt = require(\"bcryptjs\");\n//import message factory\nconst MessageFactory = require(\"../utils/messageFactory\");\nconst RemoveValueNullObject = require(\"../utils/removeValueNullObject\");\nconst tokenTypes = require(\"../utils/enums/tokenTypesEnum\");\nconst sizeOf = require(\"image-size\");\n\nexports.create = async (req, res, next) => {\n    try {\n        let user = req.user;\n        let files = req.files.media;\n\n        let attachments = [];\n\n        if (files) {\n            for (const file of files) {\n                let id = await bcrypt.hash(file.originalname, 8);\n                let url = process.env.BASIC_URL + \"/\" + file.path;\n                let contentType = file.mimetype;\n                let size = file.size;\n                const dimensions = sizeOf(file.path);\n\n                const data = await mediaService.create({\n                    user_id: user.id,\n                    file_name: file.originalname,\n                    url: url,\n                    content_type: contentType,\n                    size: size,\n                    width: dimensions.width || null,\n                    height: dimensions.height || null,\n                });\n                attachments.push({\n                    name: file.originalname,\n                    url: url,\n                    id: id,\n                });\n            }\n        }\n\n        if (attachments) {\n            res.status(StatusCodes.OK).json(\n                MessageFactory.success(attachments, \"Created success!\")\n            );\n        } else {\n            res.status(StatusCodes.UNAUTHORIZED).json(\n                MessageFactory.error(\"Created error\")\n            );\n        }\n    } catch (error) {\n        next(error);\n    }\n};\n"],"mappings":"AAAA,MAAM;EAAEA;AAAY,CAAC,GAAGC,OAAO,CAAC,mBAAmB,CAAC;AACpD,MAAMC,YAAY,GAAGD,OAAO,CAAC,0BAA0B,CAAC;AACxD,MAAME,YAAY,GAAGF,OAAO,CAAC,2BAA2B,CAAC;AACzD,MAAMG,MAAM,GAAGH,OAAO,CAAC,UAAU,CAAC;AAClC;AACA,MAAMI,cAAc,GAAGJ,OAAO,CAAC,yBAAyB,CAAC;AACzD,MAAMK,qBAAqB,GAAGL,OAAO,CAAC,gCAAgC,CAAC;AACvE,MAAMM,UAAU,GAAGN,OAAO,CAAC,+BAA+B,CAAC;AAC3D,MAAMO,MAAM,GAAGP,OAAO,CAAC,YAAY,CAAC;AAEpCQ,OAAO,CAACC,MAAM,GAAG,OAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACvC,IAAI;IACA,IAAIC,IAAI,GAAGH,GAAG,CAACG,IAAI;IACnB,IAAIC,KAAK,GAAGJ,GAAG,CAACI,KAAK,CAACC,KAAK;IAE3B,IAAIC,WAAW,GAAG,EAAE;IAEpB,IAAIF,KAAK,EAAE;MACP,KAAK,MAAMG,IAAI,IAAIH,KAAK,EAAE;QACtB,IAAII,EAAE,GAAG,MAAMf,MAAM,CAACgB,IAAI,CAACF,IAAI,CAACG,YAAY,EAAE,CAAC,CAAC;QAChD,IAAIC,GAAG,GAAGC,OAAO,CAACC,GAAG,CAACC,SAAS,GAAG,GAAG,GAAGP,IAAI,CAACQ,IAAI;QACjD,IAAIC,WAAW,GAAGT,IAAI,CAACU,QAAQ;QAC/B,IAAIC,IAAI,GAAGX,IAAI,CAACW,IAAI;QACpB,MAAMC,UAAU,GAAGtB,MAAM,CAACU,IAAI,CAACQ,IAAI,CAAC;QAEpC,MAAMK,IAAI,GAAG,MAAM7B,YAAY,CAACQ,MAAM,CAAC;UACnCsB,OAAO,EAAElB,IAAI,CAACK,EAAE;UAChBc,SAAS,EAAEf,IAAI,CAACG,YAAY;UAC5BC,GAAG,EAAEA,GAAG;UACRY,YAAY,EAAEP,WAAW;UACzBE,IAAI,EAAEA,IAAI;UACVM,KAAK,EAAEL,UAAU,CAACK,KAAK,IAAI,IAAI;UAC/BC,MAAM,EAAEN,UAAU,CAACM,MAAM,IAAI;QACjC,CAAC,CAAC;QACFnB,WAAW,CAACoB,IAAI,CAAC;UACbC,IAAI,EAAEpB,IAAI,CAACG,YAAY;UACvBC,GAAG,EAAEA,GAAG;UACRH,EAAE,EAAEA;QACR,CAAC,CAAC;MACN;IACJ;IAEA,IAAIF,WAAW,EAAE;MACbL,GAAG,CAAC2B,MAAM,CAACvC,WAAW,CAACwC,EAAE,CAAC,CAACC,IAAI,CAC3BpC,cAAc,CAACqC,OAAO,CAACzB,WAAW,EAAE,kBAAkB,CAC1D,CAAC;IACL,CAAC,MAAM;MACHL,GAAG,CAAC2B,MAAM,CAACvC,WAAW,CAAC2C,YAAY,CAAC,CAACF,IAAI,CACrCpC,cAAc,CAACuC,KAAK,CAAC,eAAe,CACxC,CAAC;IACL;EACJ,CAAC,CAAC,OAAOA,KAAK,EAAE;IACZ/B,IAAI,CAAC+B,KAAK,CAAC;EACf;AACJ,CAAC","ignoreList":[]}},"mtime":1727250307094},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/mediaService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const mediaModel = require(\"../models/mediaModel\");\nconst {\n  Sequelize,\n  Op\n} = require(\"sequelize\");\nconst bcrypt = require(\"bcryptjs\");\nconst {\n  tokenService\n} = require(\".\");\nexports.getAll = async ({\n  paged,\n  limit,\n  s\n}) => {\n  const offset = (paged - 1) * limit;\n  let query = {\n    attributes: [\"id\", \"name\", \"email\", \"profile\", \"teacher_type\"]\n  };\n  if (paged) {\n    query[\"offset\"] = offset;\n  }\n  if (limit) {\n    query[\"limit\"] = limit;\n  }\n  if (s) {\n    query[\"where\"] = {\n      [Op.or]: [{\n        name: {\n          [Op.like]: `%${s}%`\n        }\n      }, {\n        email: {\n          [Op.like]: `%${s}%`\n        }\n      }]\n    };\n  }\n  const {\n    count,\n    rows\n  } = await User.findAndCountAll(query);\n  const totalPages = Math.ceil(count / limit);\n  return {\n    items: rows,\n    totalItems: count,\n    itemCount: rows.length,\n    itemsPerPage: limit,\n    totalPages,\n    currentPage: paged\n  };\n};\nexports.create = async ({\n  user_id,\n  file_name,\n  url,\n  content_type,\n  size,\n  width,\n  height\n}) => {\n  let data = await mediaModel.create({\n    id: null,\n    user_id,\n    file_name,\n    url,\n    content_type,\n    size,\n    width,\n    height\n  });\n  data = data.get({\n    plain: true\n  });\n  return data;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtZWRpYU1vZGVsIiwicmVxdWlyZSIsIlNlcXVlbGl6ZSIsIk9wIiwiYmNyeXB0IiwidG9rZW5TZXJ2aWNlIiwiZXhwb3J0cyIsImdldEFsbCIsInBhZ2VkIiwibGltaXQiLCJzIiwib2Zmc2V0IiwicXVlcnkiLCJhdHRyaWJ1dGVzIiwib3IiLCJuYW1lIiwibGlrZSIsImVtYWlsIiwiY291bnQiLCJyb3dzIiwiVXNlciIsImZpbmRBbmRDb3VudEFsbCIsInRvdGFsUGFnZXMiLCJNYXRoIiwiY2VpbCIsIml0ZW1zIiwidG90YWxJdGVtcyIsIml0ZW1Db3VudCIsImxlbmd0aCIsIml0ZW1zUGVyUGFnZSIsImN1cnJlbnRQYWdlIiwiY3JlYXRlIiwidXNlcl9pZCIsImZpbGVfbmFtZSIsInVybCIsImNvbnRlbnRfdHlwZSIsInNpemUiLCJ3aWR0aCIsImhlaWdodCIsImRhdGEiLCJpZCIsImdldCIsInBsYWluIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdnVvbmdrbWEvaUNsb3VkIERyaXZlIChBcmNoaXZlKS9Eb2N1bWVudHMva2NuZC9zcmMvc2VydmljZXMvIiwic291cmNlcyI6WyJtZWRpYVNlcnZpY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbWVkaWFNb2RlbCA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvbWVkaWFNb2RlbFwiKTtcbmNvbnN0IHsgU2VxdWVsaXplLCBPcCB9ID0gcmVxdWlyZShcInNlcXVlbGl6ZVwiKTtcbmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoXCJiY3J5cHRqc1wiKTtcbmNvbnN0IHsgdG9rZW5TZXJ2aWNlIH0gPSByZXF1aXJlKFwiLlwiKTtcblxuZXhwb3J0cy5nZXRBbGwgPSBhc3luYyAoeyBwYWdlZCwgbGltaXQsIHMgfSkgPT4ge1xuICAgIGNvbnN0IG9mZnNldCA9IChwYWdlZCAtIDEpICogbGltaXQ7XG4gICAgbGV0IHF1ZXJ5ID0ge1xuICAgICAgICBhdHRyaWJ1dGVzOiBbXCJpZFwiLCBcIm5hbWVcIiwgXCJlbWFpbFwiLCBcInByb2ZpbGVcIiwgXCJ0ZWFjaGVyX3R5cGVcIl0sXG4gICAgfTtcblxuICAgIGlmIChwYWdlZCkge1xuICAgICAgICBxdWVyeVtcIm9mZnNldFwiXSA9IG9mZnNldDtcbiAgICB9XG4gICAgaWYgKGxpbWl0KSB7XG4gICAgICAgIHF1ZXJ5W1wibGltaXRcIl0gPSBsaW1pdDtcbiAgICB9XG4gICAgaWYgKHMpIHtcbiAgICAgICAgcXVlcnlbXCJ3aGVyZVwiXSA9IHtcbiAgICAgICAgICAgIFtPcC5vcl06IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFtPcC5saWtlXTogYCUke3N9JWAsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBbT3AubGlrZV06IGAlJHtzfSVgLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IHsgY291bnQsIHJvd3MgfSA9IGF3YWl0IFVzZXIuZmluZEFuZENvdW50QWxsKHF1ZXJ5KTtcblxuICAgIGNvbnN0IHRvdGFsUGFnZXMgPSBNYXRoLmNlaWwoY291bnQgLyBsaW1pdCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBpdGVtczogcm93cyxcbiAgICAgICAgdG90YWxJdGVtczogY291bnQsXG4gICAgICAgIGl0ZW1Db3VudDogcm93cy5sZW5ndGgsXG4gICAgICAgIGl0ZW1zUGVyUGFnZTogbGltaXQsXG4gICAgICAgIHRvdGFsUGFnZXMsXG4gICAgICAgIGN1cnJlbnRQYWdlOiBwYWdlZCxcbiAgICB9O1xufTtcblxuZXhwb3J0cy5jcmVhdGUgPSBhc3luYyAoe1xuICAgIHVzZXJfaWQsXG4gICAgZmlsZV9uYW1lLFxuICAgIHVybCxcbiAgICBjb250ZW50X3R5cGUsXG4gICAgc2l6ZSxcbiAgICB3aWR0aCxcbiAgICBoZWlnaHQsXG59KSA9PiB7XG4gICAgbGV0IGRhdGEgPSBhd2FpdCBtZWRpYU1vZGVsLmNyZWF0ZSh7XG4gICAgICAgIGlkOiBudWxsLFxuICAgICAgICB1c2VyX2lkLFxuICAgICAgICBmaWxlX25hbWUsXG4gICAgICAgIHVybCxcbiAgICAgICAgY29udGVudF90eXBlLFxuICAgICAgICBzaXplLFxuICAgICAgICB3aWR0aCxcbiAgICAgICAgaGVpZ2h0LFxuICAgIH0pO1xuXG4gICAgZGF0YSA9IGRhdGEuZ2V0KHsgcGxhaW46IHRydWUgfSk7XG5cbiAgICByZXR1cm4gZGF0YTtcbn07XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFVBQVUsR0FBR0MsT0FBTyxDQUFDLHNCQUFzQixDQUFDO0FBQ2xELE1BQU07RUFBRUMsU0FBUztFQUFFQztBQUFHLENBQUMsR0FBR0YsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUM5QyxNQUFNRyxNQUFNLEdBQUdILE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFDbEMsTUFBTTtFQUFFSTtBQUFhLENBQUMsR0FBR0osT0FBTyxDQUFDLEdBQUcsQ0FBQztBQUVyQ0ssT0FBTyxDQUFDQyxNQUFNLEdBQUcsT0FBTztFQUFFQyxLQUFLO0VBQUVDLEtBQUs7RUFBRUM7QUFBRSxDQUFDLEtBQUs7RUFDNUMsTUFBTUMsTUFBTSxHQUFHLENBQUNILEtBQUssR0FBRyxDQUFDLElBQUlDLEtBQUs7RUFDbEMsSUFBSUcsS0FBSyxHQUFHO0lBQ1JDLFVBQVUsRUFBRSxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxjQUFjO0VBQ2pFLENBQUM7RUFFRCxJQUFJTCxLQUFLLEVBQUU7SUFDUEksS0FBSyxDQUFDLFFBQVEsQ0FBQyxHQUFHRCxNQUFNO0VBQzVCO0VBQ0EsSUFBSUYsS0FBSyxFQUFFO0lBQ1BHLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBR0gsS0FBSztFQUMxQjtFQUNBLElBQUlDLENBQUMsRUFBRTtJQUNIRSxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUc7TUFDYixDQUFDVCxFQUFFLENBQUNXLEVBQUUsR0FBRyxDQUNMO1FBQ0lDLElBQUksRUFBRTtVQUNGLENBQUNaLEVBQUUsQ0FBQ2EsSUFBSSxHQUFHLElBQUlOLENBQUM7UUFDcEI7TUFDSixDQUFDLEVBQ0Q7UUFDSU8sS0FBSyxFQUFFO1VBQ0gsQ0FBQ2QsRUFBRSxDQUFDYSxJQUFJLEdBQUcsSUFBSU4sQ0FBQztRQUNwQjtNQUNKLENBQUM7SUFFVCxDQUFDO0VBQ0w7RUFFQSxNQUFNO0lBQUVRLEtBQUs7SUFBRUM7RUFBSyxDQUFDLEdBQUcsTUFBTUMsSUFBSSxDQUFDQyxlQUFlLENBQUNULEtBQUssQ0FBQztFQUV6RCxNQUFNVSxVQUFVLEdBQUdDLElBQUksQ0FBQ0MsSUFBSSxDQUFDTixLQUFLLEdBQUdULEtBQUssQ0FBQztFQUUzQyxPQUFPO0lBQ0hnQixLQUFLLEVBQUVOLElBQUk7SUFDWE8sVUFBVSxFQUFFUixLQUFLO0lBQ2pCUyxTQUFTLEVBQUVSLElBQUksQ0FBQ1MsTUFBTTtJQUN0QkMsWUFBWSxFQUFFcEIsS0FBSztJQUNuQmEsVUFBVTtJQUNWUSxXQUFXLEVBQUV0QjtFQUNqQixDQUFDO0FBQ0wsQ0FBQztBQUVERixPQUFPLENBQUN5QixNQUFNLEdBQUcsT0FBTztFQUNwQkMsT0FBTztFQUNQQyxTQUFTO0VBQ1RDLEdBQUc7RUFDSEMsWUFBWTtFQUNaQyxJQUFJO0VBQ0pDLEtBQUs7RUFDTEM7QUFDSixDQUFDLEtBQUs7RUFDRixJQUFJQyxJQUFJLEdBQUcsTUFBTXZDLFVBQVUsQ0FBQytCLE1BQU0sQ0FBQztJQUMvQlMsRUFBRSxFQUFFLElBQUk7SUFDUlIsT0FBTztJQUNQQyxTQUFTO0lBQ1RDLEdBQUc7SUFDSEMsWUFBWTtJQUNaQyxJQUFJO0lBQ0pDLEtBQUs7SUFDTEM7RUFDSixDQUFDLENBQUM7RUFFRkMsSUFBSSxHQUFHQSxJQUFJLENBQUNFLEdBQUcsQ0FBQztJQUFFQyxLQUFLLEVBQUU7RUFBSyxDQUFDLENBQUM7RUFFaEMsT0FBT0gsSUFBSTtBQUNmLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["mediaModel","require","Sequelize","Op","bcrypt","tokenService","exports","getAll","paged","limit","s","offset","query","attributes","or","name","like","email","count","rows","User","findAndCountAll","totalPages","Math","ceil","items","totalItems","itemCount","length","itemsPerPage","currentPage","create","user_id","file_name","url","content_type","size","width","height","data","id","get","plain"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/services/","sources":["mediaService.js"],"sourcesContent":["const mediaModel = require(\"../models/mediaModel\");\nconst { Sequelize, Op } = require(\"sequelize\");\nconst bcrypt = require(\"bcryptjs\");\nconst { tokenService } = require(\".\");\n\nexports.getAll = async ({ paged, limit, s }) => {\n    const offset = (paged - 1) * limit;\n    let query = {\n        attributes: [\"id\", \"name\", \"email\", \"profile\", \"teacher_type\"],\n    };\n\n    if (paged) {\n        query[\"offset\"] = offset;\n    }\n    if (limit) {\n        query[\"limit\"] = limit;\n    }\n    if (s) {\n        query[\"where\"] = {\n            [Op.or]: [\n                {\n                    name: {\n                        [Op.like]: `%${s}%`,\n                    },\n                },\n                {\n                    email: {\n                        [Op.like]: `%${s}%`,\n                    },\n                },\n            ],\n        };\n    }\n\n    const { count, rows } = await User.findAndCountAll(query);\n\n    const totalPages = Math.ceil(count / limit);\n\n    return {\n        items: rows,\n        totalItems: count,\n        itemCount: rows.length,\n        itemsPerPage: limit,\n        totalPages,\n        currentPage: paged,\n    };\n};\n\nexports.create = async ({\n    user_id,\n    file_name,\n    url,\n    content_type,\n    size,\n    width,\n    height,\n}) => {\n    let data = await mediaModel.create({\n        id: null,\n        user_id,\n        file_name,\n        url,\n        content_type,\n        size,\n        width,\n        height,\n    });\n\n    data = data.get({ plain: true });\n\n    return data;\n};\n"],"mappings":"AAAA,MAAMA,UAAU,GAAGC,OAAO,CAAC,sBAAsB,CAAC;AAClD,MAAM;EAAEC,SAAS;EAAEC;AAAG,CAAC,GAAGF,OAAO,CAAC,WAAW,CAAC;AAC9C,MAAMG,MAAM,GAAGH,OAAO,CAAC,UAAU,CAAC;AAClC,MAAM;EAAEI;AAAa,CAAC,GAAGJ,OAAO,CAAC,GAAG,CAAC;AAErCK,OAAO,CAACC,MAAM,GAAG,OAAO;EAAEC,KAAK;EAAEC,KAAK;EAAEC;AAAE,CAAC,KAAK;EAC5C,MAAMC,MAAM,GAAG,CAACH,KAAK,GAAG,CAAC,IAAIC,KAAK;EAClC,IAAIG,KAAK,GAAG;IACRC,UAAU,EAAE,CAAC,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE,cAAc;EACjE,CAAC;EAED,IAAIL,KAAK,EAAE;IACPI,KAAK,CAAC,QAAQ,CAAC,GAAGD,MAAM;EAC5B;EACA,IAAIF,KAAK,EAAE;IACPG,KAAK,CAAC,OAAO,CAAC,GAAGH,KAAK;EAC1B;EACA,IAAIC,CAAC,EAAE;IACHE,KAAK,CAAC,OAAO,CAAC,GAAG;MACb,CAACT,EAAE,CAACW,EAAE,GAAG,CACL;QACIC,IAAI,EAAE;UACF,CAACZ,EAAE,CAACa,IAAI,GAAG,IAAIN,CAAC;QACpB;MACJ,CAAC,EACD;QACIO,KAAK,EAAE;UACH,CAACd,EAAE,CAACa,IAAI,GAAG,IAAIN,CAAC;QACpB;MACJ,CAAC;IAET,CAAC;EACL;EAEA,MAAM;IAAEQ,KAAK;IAAEC;EAAK,CAAC,GAAG,MAAMC,IAAI,CAACC,eAAe,CAACT,KAAK,CAAC;EAEzD,MAAMU,UAAU,GAAGC,IAAI,CAACC,IAAI,CAACN,KAAK,GAAGT,KAAK,CAAC;EAE3C,OAAO;IACHgB,KAAK,EAAEN,IAAI;IACXO,UAAU,EAAER,KAAK;IACjBS,SAAS,EAAER,IAAI,CAACS,MAAM;IACtBC,YAAY,EAAEpB,KAAK;IACnBa,UAAU;IACVQ,WAAW,EAAEtB;EACjB,CAAC;AACL,CAAC;AAEDF,OAAO,CAACyB,MAAM,GAAG,OAAO;EACpBC,OAAO;EACPC,SAAS;EACTC,GAAG;EACHC,YAAY;EACZC,IAAI;EACJC,KAAK;EACLC;AACJ,CAAC,KAAK;EACF,IAAIC,IAAI,GAAG,MAAMvC,UAAU,CAAC+B,MAAM,CAAC;IAC/BS,EAAE,EAAE,IAAI;IACRR,OAAO;IACPC,SAAS;IACTC,GAAG;IACHC,YAAY;IACZC,IAAI;IACJC,KAAK;IACLC;EACJ,CAAC,CAAC;EAEFC,IAAI,GAAGA,IAAI,CAACE,GAAG,CAAC;IAAEC,KAAK,EAAE;EAAK,CAAC,CAAC;EAEhC,OAAOH,IAAI;AACf,CAAC","ignoreList":[]}},"mtime":1727171110534},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/mediaModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const {\n  DataTypes\n} = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = require(\"../models/usedModel\");\nconst Media = sequelize.define(\"Media\", {\n  id: {\n    type: DataTypes.INTEGER,\n    autoIncrement: true,\n    primaryKey: true,\n    allowNull: true\n  },\n  user_id: {\n    type: DataTypes.INTEGER,\n    references: {\n      model: {\n        tableName: \"users\"\n      },\n      key: \"id\"\n    },\n    allowNull: false,\n    onUpdate: \"cascade\",\n    onDelete: \"cascade\"\n  },\n  file_name: DataTypes.TEXT,\n  url: DataTypes.TEXT,\n  content_type: DataTypes.TEXT,\n  size: DataTypes.INTEGER,\n  width: DataTypes.INTEGER,\n  height: DataTypes.INTEGER\n}, {\n  underscored: true,\n  timestamps: true,\n  tableName: \"media\"\n});\nMedia.belongsTo(User, {\n  foreignKey: \"user_id\",\n  as: \"user\"\n});\nmodule.exports = Media;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEYXRhVHlwZXMiLCJyZXF1aXJlIiwic2VxdWVsaXplIiwiVXNlciIsIk1lZGlhIiwiZGVmaW5lIiwiaWQiLCJ0eXBlIiwiSU5URUdFUiIsImF1dG9JbmNyZW1lbnQiLCJwcmltYXJ5S2V5IiwiYWxsb3dOdWxsIiwidXNlcl9pZCIsInJlZmVyZW5jZXMiLCJtb2RlbCIsInRhYmxlTmFtZSIsImtleSIsIm9uVXBkYXRlIiwib25EZWxldGUiLCJmaWxlX25hbWUiLCJURVhUIiwidXJsIiwiY29udGVudF90eXBlIiwic2l6ZSIsIndpZHRoIiwiaGVpZ2h0IiwidW5kZXJzY29yZWQiLCJ0aW1lc3RhbXBzIiwiYmVsb25nc1RvIiwiZm9yZWlnbktleSIsImFzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3Z1b25na21hL2lDbG91ZCBEcml2ZSAoQXJjaGl2ZSkvRG9jdW1lbnRzL2tjbmQvc3JjL21vZGVscy8iLCJzb3VyY2VzIjpbIm1lZGlhTW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBEYXRhVHlwZXMgfSA9IHJlcXVpcmUoXCJzZXF1ZWxpemVcIik7XG5jb25zdCBzZXF1ZWxpemUgPSByZXF1aXJlKFwiLi4vY29uZmlnL2RhdGFiYXNlXCIpO1xuY29uc3QgVXNlciA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvdXNlZE1vZGVsXCIpO1xuY29uc3QgTWVkaWEgPSBzZXF1ZWxpemUuZGVmaW5lKFxuICAgIFwiTWVkaWFcIixcbiAgICB7XG4gICAgICAgIGlkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICAgICAgICBwcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICB1c2VyX2lkOiB7XG4gICAgICAgICAgICB0eXBlOiBEYXRhVHlwZXMuSU5URUdFUixcbiAgICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogeyB0YWJsZU5hbWU6IFwidXNlcnNcIiB9LFxuICAgICAgICAgICAgICAgIGtleTogXCJpZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICAgICAgICBvblVwZGF0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgICAgICBvbkRlbGV0ZTogXCJjYXNjYWRlXCIsXG4gICAgICAgIH0sXG4gICAgICAgIGZpbGVfbmFtZTogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIHVybDogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIGNvbnRlbnRfdHlwZTogRGF0YVR5cGVzLlRFWFQsXG4gICAgICAgIHNpemU6IERhdGFUeXBlcy5JTlRFR0VSLFxuICAgICAgICB3aWR0aDogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIGhlaWdodDogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHVuZGVyc2NvcmVkOiB0cnVlLFxuICAgICAgICB0aW1lc3RhbXBzOiB0cnVlLFxuICAgICAgICB0YWJsZU5hbWU6IFwibWVkaWFcIixcbiAgICB9XG4pO1xuTWVkaWEuYmVsb25nc1RvKFVzZXIsIHtcbiAgICBmb3JlaWduS2V5OiBcInVzZXJfaWRcIixcbiAgICBhczogXCJ1c2VyXCIsXG59KTtcbm1vZHVsZS5leHBvcnRzID0gTWVkaWE7XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUE7QUFBVSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDMUMsTUFBTUMsU0FBUyxHQUFHRCxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDL0MsTUFBTUUsSUFBSSxHQUFHRixPQUFPLENBQUMscUJBQXFCLENBQUM7QUFDM0MsTUFBTUcsS0FBSyxHQUFHRixTQUFTLENBQUNHLE1BQU0sQ0FDMUIsT0FBTyxFQUNQO0VBQ0lDLEVBQUUsRUFBRTtJQUNBQyxJQUFJLEVBQUVQLFNBQVMsQ0FBQ1EsT0FBTztJQUN2QkMsYUFBYSxFQUFFLElBQUk7SUFDbkJDLFVBQVUsRUFBRSxJQUFJO0lBQ2hCQyxTQUFTLEVBQUU7RUFDZixDQUFDO0VBQ0RDLE9BQU8sRUFBRTtJQUNMTCxJQUFJLEVBQUVQLFNBQVMsQ0FBQ1EsT0FBTztJQUN2QkssVUFBVSxFQUFFO01BQ1JDLEtBQUssRUFBRTtRQUFFQyxTQUFTLEVBQUU7TUFBUSxDQUFDO01BQzdCQyxHQUFHLEVBQUU7SUFDVCxDQUFDO0lBQ0RMLFNBQVMsRUFBRSxLQUFLO0lBQ2hCTSxRQUFRLEVBQUUsU0FBUztJQUNuQkMsUUFBUSxFQUFFO0VBQ2QsQ0FBQztFQUNEQyxTQUFTLEVBQUVuQixTQUFTLENBQUNvQixJQUFJO0VBQ3pCQyxHQUFHLEVBQUVyQixTQUFTLENBQUNvQixJQUFJO0VBQ25CRSxZQUFZLEVBQUV0QixTQUFTLENBQUNvQixJQUFJO0VBQzVCRyxJQUFJLEVBQUV2QixTQUFTLENBQUNRLE9BQU87RUFDdkJnQixLQUFLLEVBQUV4QixTQUFTLENBQUNRLE9BQU87RUFDeEJpQixNQUFNLEVBQUV6QixTQUFTLENBQUNRO0FBQ3RCLENBQUMsRUFDRDtFQUNJa0IsV0FBVyxFQUFFLElBQUk7RUFDakJDLFVBQVUsRUFBRSxJQUFJO0VBQ2hCWixTQUFTLEVBQUU7QUFDZixDQUNKLENBQUM7QUFDRFgsS0FBSyxDQUFDd0IsU0FBUyxDQUFDekIsSUFBSSxFQUFFO0VBQ2xCMEIsVUFBVSxFQUFFLFNBQVM7RUFDckJDLEVBQUUsRUFBRTtBQUNSLENBQUMsQ0FBQztBQUNGQyxNQUFNLENBQUNDLE9BQU8sR0FBRzVCLEtBQUsiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["DataTypes","require","sequelize","User","Media","define","id","type","INTEGER","autoIncrement","primaryKey","allowNull","user_id","references","model","tableName","key","onUpdate","onDelete","file_name","TEXT","url","content_type","size","width","height","underscored","timestamps","belongsTo","foreignKey","as","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/models/","sources":["mediaModel.js"],"sourcesContent":["const { DataTypes } = require(\"sequelize\");\nconst sequelize = require(\"../config/database\");\nconst User = require(\"../models/usedModel\");\nconst Media = sequelize.define(\n    \"Media\",\n    {\n        id: {\n            type: DataTypes.INTEGER,\n            autoIncrement: true,\n            primaryKey: true,\n            allowNull: true,\n        },\n        user_id: {\n            type: DataTypes.INTEGER,\n            references: {\n                model: { tableName: \"users\" },\n                key: \"id\",\n            },\n            allowNull: false,\n            onUpdate: \"cascade\",\n            onDelete: \"cascade\",\n        },\n        file_name: DataTypes.TEXT,\n        url: DataTypes.TEXT,\n        content_type: DataTypes.TEXT,\n        size: DataTypes.INTEGER,\n        width: DataTypes.INTEGER,\n        height: DataTypes.INTEGER,\n    },\n    {\n        underscored: true,\n        timestamps: true,\n        tableName: \"media\",\n    }\n);\nMedia.belongsTo(User, {\n    foreignKey: \"user_id\",\n    as: \"user\",\n});\nmodule.exports = Media;\n"],"mappings":"AAAA,MAAM;EAAEA;AAAU,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AAC1C,MAAMC,SAAS,GAAGD,OAAO,CAAC,oBAAoB,CAAC;AAC/C,MAAME,IAAI,GAAGF,OAAO,CAAC,qBAAqB,CAAC;AAC3C,MAAMG,KAAK,GAAGF,SAAS,CAACG,MAAM,CAC1B,OAAO,EACP;EACIC,EAAE,EAAE;IACAC,IAAI,EAAEP,SAAS,CAACQ,OAAO;IACvBC,aAAa,EAAE,IAAI;IACnBC,UAAU,EAAE,IAAI;IAChBC,SAAS,EAAE;EACf,CAAC;EACDC,OAAO,EAAE;IACLL,IAAI,EAAEP,SAAS,CAACQ,OAAO;IACvBK,UAAU,EAAE;MACRC,KAAK,EAAE;QAAEC,SAAS,EAAE;MAAQ,CAAC;MAC7BC,GAAG,EAAE;IACT,CAAC;IACDL,SAAS,EAAE,KAAK;IAChBM,QAAQ,EAAE,SAAS;IACnBC,QAAQ,EAAE;EACd,CAAC;EACDC,SAAS,EAAEnB,SAAS,CAACoB,IAAI;EACzBC,GAAG,EAAErB,SAAS,CAACoB,IAAI;EACnBE,YAAY,EAAEtB,SAAS,CAACoB,IAAI;EAC5BG,IAAI,EAAEvB,SAAS,CAACQ,OAAO;EACvBgB,KAAK,EAAExB,SAAS,CAACQ,OAAO;EACxBiB,MAAM,EAAEzB,SAAS,CAACQ;AACtB,CAAC,EACD;EACIkB,WAAW,EAAE,IAAI;EACjBC,UAAU,EAAE,IAAI;EAChBZ,SAAS,EAAE;AACf,CACJ,CAAC;AACDX,KAAK,CAACwB,SAAS,CAACzB,IAAI,EAAE;EAClB0B,UAAU,EAAE,SAAS;EACrBC,EAAE,EAAE;AACR,CAAC,CAAC;AACFC,MAAM,CAACC,OAAO,GAAG5B,KAAK","ignoreList":[]}},"mtime":1727250110751},"{\"assumptions\":{},\"sourceRoot\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/enums/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"filename\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/enums/RoleTypeEnum.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"DEV\",\"root\":\"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.25.2:DEV":{"value":{"code":"const RoleUserType = {\n  ADMIN: \"ADMIN\",\n  USER: \"USER\"\n};\nmodule.exports = RoleUserType;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSb2xlVXNlclR5cGUiLCJBRE1JTiIsIlVTRVIiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdnVvbmdrbWEvaUNsb3VkIERyaXZlIChBcmNoaXZlKS9Eb2N1bWVudHMva2NuZC9zcmMvdXRpbHMvZW51bXMvIiwic291cmNlcyI6WyJSb2xlVHlwZUVudW0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUm9sZVVzZXJUeXBlID0ge1xuICAgIEFETUlOOiBcIkFETUlOXCIsXG4gICAgVVNFUjogXCJVU0VSXCIsXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJvbGVVc2VyVHlwZTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsWUFBWSxHQUFHO0VBQ2pCQyxLQUFLLEVBQUUsT0FBTztFQUNkQyxJQUFJLEVBQUU7QUFDVixDQUFDO0FBRURDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHSixZQUFZIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["RoleUserType","ADMIN","USER","module","exports"],"sourceRoot":"/Users/vuongkma/iCloud Drive (Archive)/Documents/kcnd/src/utils/enums/","sources":["RoleTypeEnum.js"],"sourcesContent":["const RoleUserType = {\n    ADMIN: \"ADMIN\",\n    USER: \"USER\",\n};\n\nmodule.exports = RoleUserType;\n"],"mappings":"AAAA,MAAMA,YAAY,GAAG;EACjBC,KAAK,EAAE,OAAO;EACdC,IAAI,EAAE;AACV,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAGJ,YAAY","ignoreList":[]}},"mtime":1727248926239}}